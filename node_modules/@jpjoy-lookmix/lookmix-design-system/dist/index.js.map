{"version":3,"file":"index.js","sources":["../node_modules/classnames/index.js","../node_modules/react-router/dist/development/chunk-EPOLDU6W.mjs","../src/components/navigation/link/link.tsx","../src/components/forms/button/button.tsx","../src/components/typography/heading/heading.tsx","../src/components/typography/paragraph/paragraph.tsx","../src/components/data-display/image/image.tsx","../src/components/data-display/banner/banner.tsx","../src/components/data-display/card/card.tsx","../src/components/data-display/badge/badge.tsx","../src/components/data-display/avatar/avatar.tsx","../src/components/data-display/divider/divider.tsx","../src/components/data-display/logo/logo.tsx","../src/components/feedback/loading/spinner.tsx","../src/components/feedback/loading/skeleton.tsx","../node_modules/@floating-ui/utils/dist/floating-ui.utils.dom.mjs","../node_modules/@floating-ui/utils/dist/floating-ui.utils.mjs","../node_modules/tabbable/dist/index.esm.js","../node_modules/@floating-ui/react/dist/floating-ui.react.utils.mjs","../node_modules/@floating-ui/core/dist/floating-ui.core.mjs","../node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs","../node_modules/@floating-ui/react-dom/dist/floating-ui.react-dom.mjs","../node_modules/@floating-ui/react/dist/floating-ui.react.mjs","../src/components/feedback/modal/modal.tsx","../src/components/feedback/toast/toast.tsx","../src/components/feedback/toast/toast-provider.tsx","../node_modules/@iconify/react/dist/iconify.js","../src/icon/icon.tsx","../src/components/forms/icon-button/icon-button.tsx","../src/components/forms/segmented-control/segmented-control.tsx","../src/components/forms/text-input/text-input.tsx","../node_modules/@date-fns/tz/tzName/index.js","../node_modules/@date-fns/tz/tzOffset/index.js","../node_modules/@date-fns/tz/date/mini.js","../node_modules/@date-fns/tz/date/index.js","../node_modules/date-fns/constants.js","../node_modules/date-fns/constructFrom.js","../node_modules/date-fns/toDate.js","../node_modules/date-fns/addDays.js","../node_modules/date-fns/addMonths.js","../node_modules/date-fns/_lib/defaultOptions.js","../node_modules/date-fns/startOfWeek.js","../node_modules/date-fns/startOfISOWeek.js","../node_modules/date-fns/getISOWeekYear.js","../node_modules/date-fns/_lib/getTimezoneOffsetInMilliseconds.js","../node_modules/date-fns/_lib/normalizeDates.js","../node_modules/date-fns/startOfDay.js","../node_modules/date-fns/differenceInCalendarDays.js","../node_modules/date-fns/startOfISOWeekYear.js","../node_modules/date-fns/addWeeks.js","../node_modules/date-fns/addYears.js","../node_modules/date-fns/max.js","../node_modules/date-fns/min.js","../node_modules/date-fns/isSameDay.js","../node_modules/date-fns/isDate.js","../node_modules/date-fns/isValid.js","../node_modules/date-fns/differenceInCalendarMonths.js","../node_modules/date-fns/endOfMonth.js","../node_modules/date-fns/_lib/normalizeInterval.js","../node_modules/date-fns/eachMonthOfInterval.js","../node_modules/date-fns/startOfMonth.js","../node_modules/date-fns/endOfYear.js","../node_modules/date-fns/startOfYear.js","../node_modules/date-fns/eachYearOfInterval.js","../node_modules/date-fns/endOfWeek.js","../node_modules/date-fns/endOfISOWeek.js","../node_modules/date-fns/locale/en-US/_lib/formatDistance.js","../node_modules/date-fns/locale/_lib/buildFormatLongFn.js","../node_modules/date-fns/locale/en-US/_lib/formatLong.js","../node_modules/date-fns/locale/en-US/_lib/formatRelative.js","../node_modules/date-fns/locale/_lib/buildLocalizeFn.js","../node_modules/date-fns/locale/en-US/_lib/localize.js","../node_modules/date-fns/locale/_lib/buildMatchFn.js","../node_modules/date-fns/locale/_lib/buildMatchPatternFn.js","../node_modules/date-fns/locale/en-US/_lib/match.js","../node_modules/date-fns/locale/en-US.js","../node_modules/date-fns/getDayOfYear.js","../node_modules/date-fns/getISOWeek.js","../node_modules/date-fns/getWeekYear.js","../node_modules/date-fns/startOfWeekYear.js","../node_modules/date-fns/getWeek.js","../node_modules/date-fns/_lib/addLeadingZeros.js","../node_modules/date-fns/_lib/format/lightFormatters.js","../node_modules/date-fns/_lib/format/formatters.js","../node_modules/date-fns/_lib/format/longFormatters.js","../node_modules/date-fns/_lib/protectedTokens.js","../node_modules/date-fns/format.js","../node_modules/date-fns/getDaysInMonth.js","../node_modules/date-fns/getMonth.js","../node_modules/date-fns/getYear.js","../node_modules/date-fns/isAfter.js","../node_modules/date-fns/isBefore.js","../node_modules/date-fns/isSameMonth.js","../node_modules/date-fns/isSameYear.js","../node_modules/date-fns/setMonth.js","../node_modules/date-fns/setYear.js","../node_modules/react-day-picker/dist/esm/helpers/getBroadcastWeeksInMonth.js","../node_modules/react-day-picker/dist/esm/helpers/startOfBroadcastWeek.js","../node_modules/react-day-picker/dist/esm/helpers/endOfBroadcastWeek.js","../node_modules/react-day-picker/dist/esm/locale/en-US.js","../node_modules/react-day-picker/dist/esm/classes/DateLib.js","../node_modules/react-day-picker/dist/esm/classes/CalendarDay.js","../node_modules/react-day-picker/dist/esm/classes/CalendarMonth.js","../node_modules/react-day-picker/dist/esm/classes/CalendarWeek.js","../node_modules/react-day-picker/dist/esm/components/Button.js","../node_modules/react-day-picker/dist/esm/components/CaptionLabel.js","../node_modules/react-day-picker/dist/esm/components/Chevron.js","../node_modules/react-day-picker/dist/esm/components/Day.js","../node_modules/react-day-picker/dist/esm/components/DayButton.js","../node_modules/react-day-picker/dist/esm/UI.js","../node_modules/react-day-picker/dist/esm/components/Dropdown.js","../node_modules/react-day-picker/dist/esm/components/DropdownNav.js","../node_modules/react-day-picker/dist/esm/components/Footer.js","../node_modules/react-day-picker/dist/esm/components/Month.js","../node_modules/react-day-picker/dist/esm/components/MonthCaption.js","../node_modules/react-day-picker/dist/esm/components/MonthGrid.js","../node_modules/react-day-picker/dist/esm/components/Months.js","../node_modules/react-day-picker/dist/esm/useDayPicker.js","../node_modules/react-day-picker/dist/esm/components/MonthsDropdown.js","../node_modules/react-day-picker/dist/esm/components/Nav.js","../node_modules/react-day-picker/dist/esm/components/NextMonthButton.js","../node_modules/react-day-picker/dist/esm/components/Option.js","../node_modules/react-day-picker/dist/esm/components/PreviousMonthButton.js","../node_modules/react-day-picker/dist/esm/components/Root.js","../node_modules/react-day-picker/dist/esm/components/Select.js","../node_modules/react-day-picker/dist/esm/components/Week.js","../node_modules/react-day-picker/dist/esm/components/Weekday.js","../node_modules/react-day-picker/dist/esm/components/Weekdays.js","../node_modules/react-day-picker/dist/esm/components/WeekNumber.js","../node_modules/react-day-picker/dist/esm/components/WeekNumberHeader.js","../node_modules/react-day-picker/dist/esm/components/Weeks.js","../node_modules/react-day-picker/dist/esm/components/YearsDropdown.js","../node_modules/react-day-picker/dist/esm/utils/rangeIncludesDate.js","../node_modules/react-day-picker/dist/esm/utils/typeguards.js","../node_modules/react-day-picker/dist/esm/utils/dateMatchModifiers.js","../node_modules/react-day-picker/dist/esm/helpers/createGetModifiers.js","../node_modules/react-day-picker/dist/esm/helpers/getClassNamesForModifiers.js","../node_modules/react-day-picker/dist/esm/helpers/getComponents.js","../node_modules/react-day-picker/dist/esm/helpers/getDataAttributes.js","../node_modules/react-day-picker/dist/esm/helpers/getDefaultClassNames.js","../node_modules/react-day-picker/dist/esm/formatters/formatCaption.js","../node_modules/react-day-picker/dist/esm/formatters/formatDay.js","../node_modules/react-day-picker/dist/esm/formatters/formatMonthDropdown.js","../node_modules/react-day-picker/dist/esm/formatters/formatWeekdayName.js","../node_modules/react-day-picker/dist/esm/formatters/formatWeekNumber.js","../node_modules/react-day-picker/dist/esm/formatters/formatWeekNumberHeader.js","../node_modules/react-day-picker/dist/esm/formatters/formatYearDropdown.js","../node_modules/react-day-picker/dist/esm/helpers/getFormatters.js","../node_modules/react-day-picker/dist/esm/labels/labelDayButton.js","../node_modules/react-day-picker/dist/esm/labels/labelGrid.js","../node_modules/react-day-picker/dist/esm/labels/labelGridcell.js","../node_modules/react-day-picker/dist/esm/labels/labelMonthDropdown.js","../node_modules/react-day-picker/dist/esm/labels/labelNav.js","../node_modules/react-day-picker/dist/esm/labels/labelNext.js","../node_modules/react-day-picker/dist/esm/labels/labelPrevious.js","../node_modules/react-day-picker/dist/esm/labels/labelWeekday.js","../node_modules/react-day-picker/dist/esm/labels/labelWeekNumber.js","../node_modules/react-day-picker/dist/esm/labels/labelWeekNumberHeader.js","../node_modules/react-day-picker/dist/esm/labels/labelYearDropdown.js","../node_modules/react-day-picker/dist/esm/helpers/getLabels.js","../node_modules/react-day-picker/dist/esm/helpers/getMonthOptions.js","../node_modules/react-day-picker/dist/esm/helpers/getStyleForModifiers.js","../node_modules/react-day-picker/dist/esm/helpers/getWeekdays.js","../node_modules/react-day-picker/dist/esm/helpers/getYearOptions.js","../node_modules/react-day-picker/dist/esm/noonDateLib.js","../node_modules/react-day-picker/dist/esm/useAnimation.js","../node_modules/react-day-picker/dist/esm/helpers/getDates.js","../node_modules/react-day-picker/dist/esm/helpers/getDays.js","../node_modules/react-day-picker/dist/esm/helpers/getDisplayMonths.js","../node_modules/react-day-picker/dist/esm/helpers/getInitialMonth.js","../node_modules/react-day-picker/dist/esm/helpers/getMonths.js","../node_modules/react-day-picker/dist/esm/helpers/getNavMonth.js","../node_modules/react-day-picker/dist/esm/helpers/getNextMonth.js","../node_modules/react-day-picker/dist/esm/helpers/getPreviousMonth.js","../node_modules/react-day-picker/dist/esm/helpers/getWeeks.js","../node_modules/react-day-picker/dist/esm/helpers/useControlledValue.js","../node_modules/react-day-picker/dist/esm/useCalendar.js","../node_modules/react-day-picker/dist/esm/helpers/calculateFocusTarget.js","../node_modules/react-day-picker/dist/esm/helpers/getFocusableDate.js","../node_modules/react-day-picker/dist/esm/helpers/getNextFocus.js","../node_modules/react-day-picker/dist/esm/useFocus.js","../node_modules/react-day-picker/dist/esm/selection/useMulti.js","../node_modules/react-day-picker/dist/esm/utils/addToRange.js","../node_modules/react-day-picker/dist/esm/utils/rangeContainsDayOfWeek.js","../node_modules/react-day-picker/dist/esm/utils/rangeOverlaps.js","../node_modules/react-day-picker/dist/esm/utils/rangeContainsModifiers.js","../node_modules/react-day-picker/dist/esm/selection/useRange.js","../node_modules/react-day-picker/dist/esm/selection/useSingle.js","../node_modules/react-day-picker/dist/esm/useSelection.js","../node_modules/react-day-picker/dist/esm/utils/toTimeZone.js","../node_modules/react-day-picker/dist/esm/utils/convertMatchersToTimeZone.js","../node_modules/react-day-picker/dist/esm/DayPicker.js","../src/components/forms/date-input/calendar.tsx","../src/components/forms/date-input/date-input.tsx","../src/components/forms/checkbox/checkbox.tsx","../src/components/forms/select/select.tsx","../src/theme/theme-controller.tsx","../src/components/forms/theme-toggler/sun-icon.tsx","../src/components/forms/theme-toggler/moon-icon.tsx","../src/components/forms/theme-toggler/theme-toggler.tsx","../src/components/navigation/footer/footer.tsx","../src/components/navigation/header/arrow-left-icon.tsx","../src/components/navigation/header/header.tsx","../src/components/navigation/tab-bar/tab-bar.tsx","../src/components/navigation/breadcrumbs/breadcrumbs.tsx","../src/components/typography/label/label.tsx","../src/components/ecommerce/product-card/product-card.tsx","../src/components/ecommerce/quantity-stepper/quantity-stepper.tsx","../src/components/ecommerce/property-selector/property-selector.tsx","../src/components/ecommerce/cart/cart-item/cart-item.tsx","../src/components/ecommerce/cart/price-summary/price-summary.tsx","../src/components/ecommerce/checkout/checkout-stepper/checkout-stepper.tsx","../src/components/ecommerce/checkout/address-form/address-form.tsx","../src/components/ecommerce/checkout/payment-method/payment-method.tsx","../src/components/ecommerce/order/order-status-timeline.tsx","../src/hook/use-disclosure.ts","../src/theme/sparks-compat.tsx","../src/theme/jpjoy-theme-provider.tsx","../src/theme/tokens/jpjoy-tokens.ts","../src/theme/tokens/dark-tokens.ts","../src/theme/theme-options.ts","../src/theme/jpjoy-theme.tsx"],"sourcesContent":["/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = '';\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (arg) {\n\t\t\t\tclasses = appendClass(classes, parseValue(arg));\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction parseValue (arg) {\n\t\tif (typeof arg === 'string' || typeof arg === 'number') {\n\t\t\treturn arg;\n\t\t}\n\n\t\tif (typeof arg !== 'object') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (Array.isArray(arg)) {\n\t\t\treturn classNames.apply(null, arg);\n\t\t}\n\n\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\treturn arg.toString();\n\t\t}\n\n\t\tvar classes = '';\n\n\t\tfor (var key in arg) {\n\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\tclasses = appendClass(classes, key);\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction appendClass (value, newClass) {\n\t\tif (!newClass) {\n\t\t\treturn value;\n\t\t}\n\t\n\t\tif (value) {\n\t\t\treturn value + ' ' + newClass;\n\t\t}\n\t\n\t\treturn value + newClass;\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","/**\n * react-router v7.12.0\n *\n * Copyright (c) Remix Software Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nvar __typeError = (msg) => {\n  throw TypeError(msg);\n};\nvar __accessCheck = (obj, member, msg) => member.has(obj) || __typeError(\"Cannot \" + msg);\nvar __privateGet = (obj, member, getter) => (__accessCheck(obj, member, \"read from private field\"), getter ? getter.call(obj) : member.get(obj));\nvar __privateAdd = (obj, member, value) => member.has(obj) ? __typeError(\"Cannot add the same private member more than once\") : member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n\n// lib/router/history.ts\nvar Action = /* @__PURE__ */ ((Action2) => {\n  Action2[\"Pop\"] = \"POP\";\n  Action2[\"Push\"] = \"PUSH\";\n  Action2[\"Replace\"] = \"REPLACE\";\n  return Action2;\n})(Action || {});\nvar PopStateEventType = \"popstate\";\nfunction createMemoryHistory(options = {}) {\n  let { initialEntries = [\"/\"], initialIndex, v5Compat = false } = options;\n  let entries;\n  entries = initialEntries.map(\n    (entry, index2) => createMemoryLocation(\n      entry,\n      typeof entry === \"string\" ? null : entry.state,\n      index2 === 0 ? \"default\" : void 0\n    )\n  );\n  let index = clampIndex(\n    initialIndex == null ? entries.length - 1 : initialIndex\n  );\n  let action = \"POP\" /* Pop */;\n  let listener = null;\n  function clampIndex(n) {\n    return Math.min(Math.max(n, 0), entries.length - 1);\n  }\n  function getCurrentLocation() {\n    return entries[index];\n  }\n  function createMemoryLocation(to, state = null, key) {\n    let location = createLocation(\n      entries ? getCurrentLocation().pathname : \"/\",\n      to,\n      state,\n      key\n    );\n    warning(\n      location.pathname.charAt(0) === \"/\",\n      `relative pathnames are not supported in memory history: ${JSON.stringify(\n        to\n      )}`\n    );\n    return location;\n  }\n  function createHref2(to) {\n    return typeof to === \"string\" ? to : createPath(to);\n  }\n  let history = {\n    get index() {\n      return index;\n    },\n    get action() {\n      return action;\n    },\n    get location() {\n      return getCurrentLocation();\n    },\n    createHref: createHref2,\n    createURL(to) {\n      return new URL(createHref2(to), \"http://localhost\");\n    },\n    encodeLocation(to) {\n      let path = typeof to === \"string\" ? parsePath(to) : to;\n      return {\n        pathname: path.pathname || \"\",\n        search: path.search || \"\",\n        hash: path.hash || \"\"\n      };\n    },\n    push(to, state) {\n      action = \"PUSH\" /* Push */;\n      let nextLocation = createMemoryLocation(to, state);\n      index += 1;\n      entries.splice(index, entries.length, nextLocation);\n      if (v5Compat && listener) {\n        listener({ action, location: nextLocation, delta: 1 });\n      }\n    },\n    replace(to, state) {\n      action = \"REPLACE\" /* Replace */;\n      let nextLocation = createMemoryLocation(to, state);\n      entries[index] = nextLocation;\n      if (v5Compat && listener) {\n        listener({ action, location: nextLocation, delta: 0 });\n      }\n    },\n    go(delta) {\n      action = \"POP\" /* Pop */;\n      let nextIndex = clampIndex(index + delta);\n      let nextLocation = entries[nextIndex];\n      index = nextIndex;\n      if (listener) {\n        listener({ action, location: nextLocation, delta });\n      }\n    },\n    listen(fn) {\n      listener = fn;\n      return () => {\n        listener = null;\n      };\n    }\n  };\n  return history;\n}\nfunction createBrowserHistory(options = {}) {\n  function createBrowserLocation(window2, globalHistory) {\n    let { pathname, search, hash } = window2.location;\n    return createLocation(\n      \"\",\n      { pathname, search, hash },\n      // state defaults to `null` because `window.history.state` does\n      globalHistory.state && globalHistory.state.usr || null,\n      globalHistory.state && globalHistory.state.key || \"default\"\n    );\n  }\n  function createBrowserHref(window2, to) {\n    return typeof to === \"string\" ? to : createPath(to);\n  }\n  return getUrlBasedHistory(\n    createBrowserLocation,\n    createBrowserHref,\n    null,\n    options\n  );\n}\nfunction createHashHistory(options = {}) {\n  function createHashLocation(window2, globalHistory) {\n    let {\n      pathname = \"/\",\n      search = \"\",\n      hash = \"\"\n    } = parsePath(window2.location.hash.substring(1));\n    if (!pathname.startsWith(\"/\") && !pathname.startsWith(\".\")) {\n      pathname = \"/\" + pathname;\n    }\n    return createLocation(\n      \"\",\n      { pathname, search, hash },\n      // state defaults to `null` because `window.history.state` does\n      globalHistory.state && globalHistory.state.usr || null,\n      globalHistory.state && globalHistory.state.key || \"default\"\n    );\n  }\n  function createHashHref(window2, to) {\n    let base = window2.document.querySelector(\"base\");\n    let href = \"\";\n    if (base && base.getAttribute(\"href\")) {\n      let url = window2.location.href;\n      let hashIndex = url.indexOf(\"#\");\n      href = hashIndex === -1 ? url : url.slice(0, hashIndex);\n    }\n    return href + \"#\" + (typeof to === \"string\" ? to : createPath(to));\n  }\n  function validateHashLocation(location, to) {\n    warning(\n      location.pathname.charAt(0) === \"/\",\n      `relative pathnames are not supported in hash history.push(${JSON.stringify(\n        to\n      )})`\n    );\n  }\n  return getUrlBasedHistory(\n    createHashLocation,\n    createHashHref,\n    validateHashLocation,\n    options\n  );\n}\nfunction invariant(value, message) {\n  if (value === false || value === null || typeof value === \"undefined\") {\n    throw new Error(message);\n  }\n}\nfunction warning(cond, message) {\n  if (!cond) {\n    if (typeof console !== \"undefined\") console.warn(message);\n    try {\n      throw new Error(message);\n    } catch (e) {\n    }\n  }\n}\nfunction createKey() {\n  return Math.random().toString(36).substring(2, 10);\n}\nfunction getHistoryState(location, index) {\n  return {\n    usr: location.state,\n    key: location.key,\n    idx: index\n  };\n}\nfunction createLocation(current, to, state = null, key) {\n  let location = {\n    pathname: typeof current === \"string\" ? current : current.pathname,\n    search: \"\",\n    hash: \"\",\n    ...typeof to === \"string\" ? parsePath(to) : to,\n    state,\n    // TODO: This could be cleaned up.  push/replace should probably just take\n    // full Locations now and avoid the need to run through this flow at all\n    // But that's a pretty big refactor to the current test suite so going to\n    // keep as is for the time being and just let any incoming keys take precedence\n    key: to && to.key || key || createKey()\n  };\n  return location;\n}\nfunction createPath({\n  pathname = \"/\",\n  search = \"\",\n  hash = \"\"\n}) {\n  if (search && search !== \"?\")\n    pathname += search.charAt(0) === \"?\" ? search : \"?\" + search;\n  if (hash && hash !== \"#\")\n    pathname += hash.charAt(0) === \"#\" ? hash : \"#\" + hash;\n  return pathname;\n}\nfunction parsePath(path) {\n  let parsedPath = {};\n  if (path) {\n    let hashIndex = path.indexOf(\"#\");\n    if (hashIndex >= 0) {\n      parsedPath.hash = path.substring(hashIndex);\n      path = path.substring(0, hashIndex);\n    }\n    let searchIndex = path.indexOf(\"?\");\n    if (searchIndex >= 0) {\n      parsedPath.search = path.substring(searchIndex);\n      path = path.substring(0, searchIndex);\n    }\n    if (path) {\n      parsedPath.pathname = path;\n    }\n  }\n  return parsedPath;\n}\nfunction getUrlBasedHistory(getLocation, createHref2, validateLocation, options = {}) {\n  let { window: window2 = document.defaultView, v5Compat = false } = options;\n  let globalHistory = window2.history;\n  let action = \"POP\" /* Pop */;\n  let listener = null;\n  let index = getIndex();\n  if (index == null) {\n    index = 0;\n    globalHistory.replaceState({ ...globalHistory.state, idx: index }, \"\");\n  }\n  function getIndex() {\n    let state = globalHistory.state || { idx: null };\n    return state.idx;\n  }\n  function handlePop() {\n    action = \"POP\" /* Pop */;\n    let nextIndex = getIndex();\n    let delta = nextIndex == null ? null : nextIndex - index;\n    index = nextIndex;\n    if (listener) {\n      listener({ action, location: history.location, delta });\n    }\n  }\n  function push(to, state) {\n    action = \"PUSH\" /* Push */;\n    let location = createLocation(history.location, to, state);\n    if (validateLocation) validateLocation(location, to);\n    index = getIndex() + 1;\n    let historyState = getHistoryState(location, index);\n    let url = history.createHref(location);\n    try {\n      globalHistory.pushState(historyState, \"\", url);\n    } catch (error) {\n      if (error instanceof DOMException && error.name === \"DataCloneError\") {\n        throw error;\n      }\n      window2.location.assign(url);\n    }\n    if (v5Compat && listener) {\n      listener({ action, location: history.location, delta: 1 });\n    }\n  }\n  function replace2(to, state) {\n    action = \"REPLACE\" /* Replace */;\n    let location = createLocation(history.location, to, state);\n    if (validateLocation) validateLocation(location, to);\n    index = getIndex();\n    let historyState = getHistoryState(location, index);\n    let url = history.createHref(location);\n    globalHistory.replaceState(historyState, \"\", url);\n    if (v5Compat && listener) {\n      listener({ action, location: history.location, delta: 0 });\n    }\n  }\n  function createURL(to) {\n    return createBrowserURLImpl(to);\n  }\n  let history = {\n    get action() {\n      return action;\n    },\n    get location() {\n      return getLocation(window2, globalHistory);\n    },\n    listen(fn) {\n      if (listener) {\n        throw new Error(\"A history only accepts one active listener\");\n      }\n      window2.addEventListener(PopStateEventType, handlePop);\n      listener = fn;\n      return () => {\n        window2.removeEventListener(PopStateEventType, handlePop);\n        listener = null;\n      };\n    },\n    createHref(to) {\n      return createHref2(window2, to);\n    },\n    createURL,\n    encodeLocation(to) {\n      let url = createURL(to);\n      return {\n        pathname: url.pathname,\n        search: url.search,\n        hash: url.hash\n      };\n    },\n    push,\n    replace: replace2,\n    go(n) {\n      return globalHistory.go(n);\n    }\n  };\n  return history;\n}\nfunction createBrowserURLImpl(to, isAbsolute = false) {\n  let base = \"http://localhost\";\n  if (typeof window !== \"undefined\") {\n    base = window.location.origin !== \"null\" ? window.location.origin : window.location.href;\n  }\n  invariant(base, \"No window.location.(origin|href) available to create URL\");\n  let href = typeof to === \"string\" ? to : createPath(to);\n  href = href.replace(/ $/, \"%20\");\n  if (!isAbsolute && href.startsWith(\"//\")) {\n    href = base + href;\n  }\n  return new URL(href, base);\n}\n\n// lib/router/utils.ts\nfunction createContext(defaultValue) {\n  return { defaultValue };\n}\nvar _map;\nvar RouterContextProvider = class {\n  /**\n   * Create a new `RouterContextProvider` instance\n   * @param init An optional initial context map to populate the provider with\n   */\n  constructor(init) {\n    __privateAdd(this, _map, /* @__PURE__ */ new Map());\n    if (init) {\n      for (let [context, value] of init) {\n        this.set(context, value);\n      }\n    }\n  }\n  /**\n   * Access a value from the context. If no value has been set for the context,\n   * it will return the context's `defaultValue` if provided, or throw an error\n   * if no `defaultValue` was set.\n   * @param context The context to get the value for\n   * @returns The value for the context, or the context's `defaultValue` if no\n   * value was set\n   */\n  get(context) {\n    if (__privateGet(this, _map).has(context)) {\n      return __privateGet(this, _map).get(context);\n    }\n    if (context.defaultValue !== void 0) {\n      return context.defaultValue;\n    }\n    throw new Error(\"No value found for context\");\n  }\n  /**\n   * Set a value for the context. If the context already has a value set, this\n   * will overwrite it.\n   *\n   * @param context The context to set the value for\n   * @param value The value to set for the context\n   * @returns {void}\n   */\n  set(context, value) {\n    __privateGet(this, _map).set(context, value);\n  }\n};\n_map = new WeakMap();\nvar unsupportedLazyRouteObjectKeys = /* @__PURE__ */ new Set([\n  \"lazy\",\n  \"caseSensitive\",\n  \"path\",\n  \"id\",\n  \"index\",\n  \"children\"\n]);\nfunction isUnsupportedLazyRouteObjectKey(key) {\n  return unsupportedLazyRouteObjectKeys.has(\n    key\n  );\n}\nvar unsupportedLazyRouteFunctionKeys = /* @__PURE__ */ new Set([\n  \"lazy\",\n  \"caseSensitive\",\n  \"path\",\n  \"id\",\n  \"index\",\n  \"middleware\",\n  \"children\"\n]);\nfunction isUnsupportedLazyRouteFunctionKey(key) {\n  return unsupportedLazyRouteFunctionKeys.has(\n    key\n  );\n}\nfunction isIndexRoute(route) {\n  return route.index === true;\n}\nfunction convertRoutesToDataRoutes(routes, mapRouteProperties2, parentPath = [], manifest = {}, allowInPlaceMutations = false) {\n  return routes.map((route, index) => {\n    let treePath = [...parentPath, String(index)];\n    let id = typeof route.id === \"string\" ? route.id : treePath.join(\"-\");\n    invariant(\n      route.index !== true || !route.children,\n      `Cannot specify children on an index route`\n    );\n    invariant(\n      allowInPlaceMutations || !manifest[id],\n      `Found a route id collision on id \"${id}\".  Route id's must be globally unique within Data Router usages`\n    );\n    if (isIndexRoute(route)) {\n      let indexRoute = {\n        ...route,\n        id\n      };\n      manifest[id] = mergeRouteUpdates(\n        indexRoute,\n        mapRouteProperties2(indexRoute)\n      );\n      return indexRoute;\n    } else {\n      let pathOrLayoutRoute = {\n        ...route,\n        id,\n        children: void 0\n      };\n      manifest[id] = mergeRouteUpdates(\n        pathOrLayoutRoute,\n        mapRouteProperties2(pathOrLayoutRoute)\n      );\n      if (route.children) {\n        pathOrLayoutRoute.children = convertRoutesToDataRoutes(\n          route.children,\n          mapRouteProperties2,\n          treePath,\n          manifest,\n          allowInPlaceMutations\n        );\n      }\n      return pathOrLayoutRoute;\n    }\n  });\n}\nfunction mergeRouteUpdates(route, updates) {\n  return Object.assign(route, {\n    ...updates,\n    ...typeof updates.lazy === \"object\" && updates.lazy != null ? {\n      lazy: {\n        ...route.lazy,\n        ...updates.lazy\n      }\n    } : {}\n  });\n}\nfunction matchRoutes(routes, locationArg, basename = \"/\") {\n  return matchRoutesImpl(routes, locationArg, basename, false);\n}\nfunction matchRoutesImpl(routes, locationArg, basename, allowPartial) {\n  let location = typeof locationArg === \"string\" ? parsePath(locationArg) : locationArg;\n  let pathname = stripBasename(location.pathname || \"/\", basename);\n  if (pathname == null) {\n    return null;\n  }\n  let branches = flattenRoutes(routes);\n  rankRouteBranches(branches);\n  let matches = null;\n  for (let i = 0; matches == null && i < branches.length; ++i) {\n    let decoded = decodePath(pathname);\n    matches = matchRouteBranch(\n      branches[i],\n      decoded,\n      allowPartial\n    );\n  }\n  return matches;\n}\nfunction convertRouteMatchToUiMatch(match, loaderData) {\n  let { route, pathname, params } = match;\n  return {\n    id: route.id,\n    pathname,\n    params,\n    data: loaderData[route.id],\n    loaderData: loaderData[route.id],\n    handle: route.handle\n  };\n}\nfunction flattenRoutes(routes, branches = [], parentsMeta = [], parentPath = \"\", _hasParentOptionalSegments = false) {\n  let flattenRoute = (route, index, hasParentOptionalSegments = _hasParentOptionalSegments, relativePath) => {\n    let meta = {\n      relativePath: relativePath === void 0 ? route.path || \"\" : relativePath,\n      caseSensitive: route.caseSensitive === true,\n      childrenIndex: index,\n      route\n    };\n    if (meta.relativePath.startsWith(\"/\")) {\n      if (!meta.relativePath.startsWith(parentPath) && hasParentOptionalSegments) {\n        return;\n      }\n      invariant(\n        meta.relativePath.startsWith(parentPath),\n        `Absolute route path \"${meta.relativePath}\" nested under path \"${parentPath}\" is not valid. An absolute child route path must start with the combined path of all its parent routes.`\n      );\n      meta.relativePath = meta.relativePath.slice(parentPath.length);\n    }\n    let path = joinPaths([parentPath, meta.relativePath]);\n    let routesMeta = parentsMeta.concat(meta);\n    if (route.children && route.children.length > 0) {\n      invariant(\n        // Our types know better, but runtime JS may not!\n        // @ts-expect-error\n        route.index !== true,\n        `Index routes must not have child routes. Please remove all child routes from route path \"${path}\".`\n      );\n      flattenRoutes(\n        route.children,\n        branches,\n        routesMeta,\n        path,\n        hasParentOptionalSegments\n      );\n    }\n    if (route.path == null && !route.index) {\n      return;\n    }\n    branches.push({\n      path,\n      score: computeScore(path, route.index),\n      routesMeta\n    });\n  };\n  routes.forEach((route, index) => {\n    if (route.path === \"\" || !route.path?.includes(\"?\")) {\n      flattenRoute(route, index);\n    } else {\n      for (let exploded of explodeOptionalSegments(route.path)) {\n        flattenRoute(route, index, true, exploded);\n      }\n    }\n  });\n  return branches;\n}\nfunction explodeOptionalSegments(path) {\n  let segments = path.split(\"/\");\n  if (segments.length === 0) return [];\n  let [first, ...rest] = segments;\n  let isOptional = first.endsWith(\"?\");\n  let required = first.replace(/\\?$/, \"\");\n  if (rest.length === 0) {\n    return isOptional ? [required, \"\"] : [required];\n  }\n  let restExploded = explodeOptionalSegments(rest.join(\"/\"));\n  let result = [];\n  result.push(\n    ...restExploded.map(\n      (subpath) => subpath === \"\" ? required : [required, subpath].join(\"/\")\n    )\n  );\n  if (isOptional) {\n    result.push(...restExploded);\n  }\n  return result.map(\n    (exploded) => path.startsWith(\"/\") && exploded === \"\" ? \"/\" : exploded\n  );\n}\nfunction rankRouteBranches(branches) {\n  branches.sort(\n    (a, b) => a.score !== b.score ? b.score - a.score : compareIndexes(\n      a.routesMeta.map((meta) => meta.childrenIndex),\n      b.routesMeta.map((meta) => meta.childrenIndex)\n    )\n  );\n}\nvar paramRe = /^:[\\w-]+$/;\nvar dynamicSegmentValue = 3;\nvar indexRouteValue = 2;\nvar emptySegmentValue = 1;\nvar staticSegmentValue = 10;\nvar splatPenalty = -2;\nvar isSplat = (s) => s === \"*\";\nfunction computeScore(path, index) {\n  let segments = path.split(\"/\");\n  let initialScore = segments.length;\n  if (segments.some(isSplat)) {\n    initialScore += splatPenalty;\n  }\n  if (index) {\n    initialScore += indexRouteValue;\n  }\n  return segments.filter((s) => !isSplat(s)).reduce(\n    (score, segment) => score + (paramRe.test(segment) ? dynamicSegmentValue : segment === \"\" ? emptySegmentValue : staticSegmentValue),\n    initialScore\n  );\n}\nfunction compareIndexes(a, b) {\n  let siblings = a.length === b.length && a.slice(0, -1).every((n, i) => n === b[i]);\n  return siblings ? (\n    // If two routes are siblings, we should try to match the earlier sibling\n    // first. This allows people to have fine-grained control over the matching\n    // behavior by simply putting routes with identical paths in the order they\n    // want them tried.\n    a[a.length - 1] - b[b.length - 1]\n  ) : (\n    // Otherwise, it doesn't really make sense to rank non-siblings by index,\n    // so they sort equally.\n    0\n  );\n}\nfunction matchRouteBranch(branch, pathname, allowPartial = false) {\n  let { routesMeta } = branch;\n  let matchedParams = {};\n  let matchedPathname = \"/\";\n  let matches = [];\n  for (let i = 0; i < routesMeta.length; ++i) {\n    let meta = routesMeta[i];\n    let end = i === routesMeta.length - 1;\n    let remainingPathname = matchedPathname === \"/\" ? pathname : pathname.slice(matchedPathname.length) || \"/\";\n    let match = matchPath(\n      { path: meta.relativePath, caseSensitive: meta.caseSensitive, end },\n      remainingPathname\n    );\n    let route = meta.route;\n    if (!match && end && allowPartial && !routesMeta[routesMeta.length - 1].route.index) {\n      match = matchPath(\n        {\n          path: meta.relativePath,\n          caseSensitive: meta.caseSensitive,\n          end: false\n        },\n        remainingPathname\n      );\n    }\n    if (!match) {\n      return null;\n    }\n    Object.assign(matchedParams, match.params);\n    matches.push({\n      // TODO: Can this as be avoided?\n      params: matchedParams,\n      pathname: joinPaths([matchedPathname, match.pathname]),\n      pathnameBase: normalizePathname(\n        joinPaths([matchedPathname, match.pathnameBase])\n      ),\n      route\n    });\n    if (match.pathnameBase !== \"/\") {\n      matchedPathname = joinPaths([matchedPathname, match.pathnameBase]);\n    }\n  }\n  return matches;\n}\nfunction generatePath(originalPath, params = {}) {\n  let path = originalPath;\n  if (path.endsWith(\"*\") && path !== \"*\" && !path.endsWith(\"/*\")) {\n    warning(\n      false,\n      `Route path \"${path}\" will be treated as if it were \"${path.replace(/\\*$/, \"/*\")}\" because the \\`*\\` character must always follow a \\`/\\` in the pattern. To get rid of this warning, please change the route path to \"${path.replace(/\\*$/, \"/*\")}\".`\n    );\n    path = path.replace(/\\*$/, \"/*\");\n  }\n  const prefix = path.startsWith(\"/\") ? \"/\" : \"\";\n  const stringify2 = (p) => p == null ? \"\" : typeof p === \"string\" ? p : String(p);\n  const segments = path.split(/\\/+/).map((segment, index, array) => {\n    const isLastSegment = index === array.length - 1;\n    if (isLastSegment && segment === \"*\") {\n      const star = \"*\";\n      return stringify2(params[star]);\n    }\n    const keyMatch = segment.match(/^:([\\w-]+)(\\??)(.*)/);\n    if (keyMatch) {\n      const [, key, optional, suffix] = keyMatch;\n      let param = params[key];\n      invariant(optional === \"?\" || param != null, `Missing \":${key}\" param`);\n      return encodeURIComponent(stringify2(param)) + suffix;\n    }\n    return segment.replace(/\\?$/g, \"\");\n  }).filter((segment) => !!segment);\n  return prefix + segments.join(\"/\");\n}\nfunction matchPath(pattern, pathname) {\n  if (typeof pattern === \"string\") {\n    pattern = { path: pattern, caseSensitive: false, end: true };\n  }\n  let [matcher, compiledParams] = compilePath(\n    pattern.path,\n    pattern.caseSensitive,\n    pattern.end\n  );\n  let match = pathname.match(matcher);\n  if (!match) return null;\n  let matchedPathname = match[0];\n  let pathnameBase = matchedPathname.replace(/(.)\\/+$/, \"$1\");\n  let captureGroups = match.slice(1);\n  let params = compiledParams.reduce(\n    (memo2, { paramName, isOptional }, index) => {\n      if (paramName === \"*\") {\n        let splatValue = captureGroups[index] || \"\";\n        pathnameBase = matchedPathname.slice(0, matchedPathname.length - splatValue.length).replace(/(.)\\/+$/, \"$1\");\n      }\n      const value = captureGroups[index];\n      if (isOptional && !value) {\n        memo2[paramName] = void 0;\n      } else {\n        memo2[paramName] = (value || \"\").replace(/%2F/g, \"/\");\n      }\n      return memo2;\n    },\n    {}\n  );\n  return {\n    params,\n    pathname: matchedPathname,\n    pathnameBase,\n    pattern\n  };\n}\nfunction compilePath(path, caseSensitive = false, end = true) {\n  warning(\n    path === \"*\" || !path.endsWith(\"*\") || path.endsWith(\"/*\"),\n    `Route path \"${path}\" will be treated as if it were \"${path.replace(/\\*$/, \"/*\")}\" because the \\`*\\` character must always follow a \\`/\\` in the pattern. To get rid of this warning, please change the route path to \"${path.replace(/\\*$/, \"/*\")}\".`\n  );\n  let params = [];\n  let regexpSource = \"^\" + path.replace(/\\/*\\*?$/, \"\").replace(/^\\/*/, \"/\").replace(/[\\\\.*+^${}|()[\\]]/g, \"\\\\$&\").replace(\n    /\\/:([\\w-]+)(\\?)?/g,\n    (_, paramName, isOptional) => {\n      params.push({ paramName, isOptional: isOptional != null });\n      return isOptional ? \"/?([^\\\\/]+)?\" : \"/([^\\\\/]+)\";\n    }\n  ).replace(/\\/([\\w-]+)\\?(\\/|$)/g, \"(/$1)?$2\");\n  if (path.endsWith(\"*\")) {\n    params.push({ paramName: \"*\" });\n    regexpSource += path === \"*\" || path === \"/*\" ? \"(.*)$\" : \"(?:\\\\/(.+)|\\\\/*)$\";\n  } else if (end) {\n    regexpSource += \"\\\\/*$\";\n  } else if (path !== \"\" && path !== \"/\") {\n    regexpSource += \"(?:(?=\\\\/|$))\";\n  } else {\n  }\n  let matcher = new RegExp(regexpSource, caseSensitive ? void 0 : \"i\");\n  return [matcher, params];\n}\nfunction decodePath(value) {\n  try {\n    return value.split(\"/\").map((v) => decodeURIComponent(v).replace(/\\//g, \"%2F\")).join(\"/\");\n  } catch (error) {\n    warning(\n      false,\n      `The URL path \"${value}\" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${error}).`\n    );\n    return value;\n  }\n}\nfunction stripBasename(pathname, basename) {\n  if (basename === \"/\") return pathname;\n  if (!pathname.toLowerCase().startsWith(basename.toLowerCase())) {\n    return null;\n  }\n  let startIndex = basename.endsWith(\"/\") ? basename.length - 1 : basename.length;\n  let nextChar = pathname.charAt(startIndex);\n  if (nextChar && nextChar !== \"/\") {\n    return null;\n  }\n  return pathname.slice(startIndex) || \"/\";\n}\nfunction prependBasename({\n  basename,\n  pathname\n}) {\n  return pathname === \"/\" ? basename : joinPaths([basename, pathname]);\n}\nvar ABSOLUTE_URL_REGEX = /^(?:[a-z][a-z0-9+.-]*:|\\/\\/)/i;\nvar isAbsoluteUrl = (url) => ABSOLUTE_URL_REGEX.test(url);\nfunction resolvePath(to, fromPathname = \"/\") {\n  let {\n    pathname: toPathname,\n    search = \"\",\n    hash = \"\"\n  } = typeof to === \"string\" ? parsePath(to) : to;\n  let pathname;\n  if (toPathname) {\n    if (isAbsoluteUrl(toPathname)) {\n      pathname = toPathname;\n    } else {\n      if (toPathname.includes(\"//\")) {\n        let oldPathname = toPathname;\n        toPathname = toPathname.replace(/\\/\\/+/g, \"/\");\n        warning(\n          false,\n          `Pathnames cannot have embedded double slashes - normalizing ${oldPathname} -> ${toPathname}`\n        );\n      }\n      if (toPathname.startsWith(\"/\")) {\n        pathname = resolvePathname(toPathname.substring(1), \"/\");\n      } else {\n        pathname = resolvePathname(toPathname, fromPathname);\n      }\n    }\n  } else {\n    pathname = fromPathname;\n  }\n  return {\n    pathname,\n    search: normalizeSearch(search),\n    hash: normalizeHash(hash)\n  };\n}\nfunction resolvePathname(relativePath, fromPathname) {\n  let segments = fromPathname.replace(/\\/+$/, \"\").split(\"/\");\n  let relativeSegments = relativePath.split(\"/\");\n  relativeSegments.forEach((segment) => {\n    if (segment === \"..\") {\n      if (segments.length > 1) segments.pop();\n    } else if (segment !== \".\") {\n      segments.push(segment);\n    }\n  });\n  return segments.length > 1 ? segments.join(\"/\") : \"/\";\n}\nfunction getInvalidPathError(char, field, dest, path) {\n  return `Cannot include a '${char}' character in a manually specified \\`to.${field}\\` field [${JSON.stringify(\n    path\n  )}].  Please separate it out to the \\`to.${dest}\\` field. Alternatively you may provide the full path as a string in <Link to=\"...\"> and the router will parse it for you.`;\n}\nfunction getPathContributingMatches(matches) {\n  return matches.filter(\n    (match, index) => index === 0 || match.route.path && match.route.path.length > 0\n  );\n}\nfunction getResolveToMatches(matches) {\n  let pathMatches = getPathContributingMatches(matches);\n  return pathMatches.map(\n    (match, idx) => idx === pathMatches.length - 1 ? match.pathname : match.pathnameBase\n  );\n}\nfunction resolveTo(toArg, routePathnames, locationPathname, isPathRelative = false) {\n  let to;\n  if (typeof toArg === \"string\") {\n    to = parsePath(toArg);\n  } else {\n    to = { ...toArg };\n    invariant(\n      !to.pathname || !to.pathname.includes(\"?\"),\n      getInvalidPathError(\"?\", \"pathname\", \"search\", to)\n    );\n    invariant(\n      !to.pathname || !to.pathname.includes(\"#\"),\n      getInvalidPathError(\"#\", \"pathname\", \"hash\", to)\n    );\n    invariant(\n      !to.search || !to.search.includes(\"#\"),\n      getInvalidPathError(\"#\", \"search\", \"hash\", to)\n    );\n  }\n  let isEmptyPath = toArg === \"\" || to.pathname === \"\";\n  let toPathname = isEmptyPath ? \"/\" : to.pathname;\n  let from;\n  if (toPathname == null) {\n    from = locationPathname;\n  } else {\n    let routePathnameIndex = routePathnames.length - 1;\n    if (!isPathRelative && toPathname.startsWith(\"..\")) {\n      let toSegments = toPathname.split(\"/\");\n      while (toSegments[0] === \"..\") {\n        toSegments.shift();\n        routePathnameIndex -= 1;\n      }\n      to.pathname = toSegments.join(\"/\");\n    }\n    from = routePathnameIndex >= 0 ? routePathnames[routePathnameIndex] : \"/\";\n  }\n  let path = resolvePath(to, from);\n  let hasExplicitTrailingSlash = toPathname && toPathname !== \"/\" && toPathname.endsWith(\"/\");\n  let hasCurrentTrailingSlash = (isEmptyPath || toPathname === \".\") && locationPathname.endsWith(\"/\");\n  if (!path.pathname.endsWith(\"/\") && (hasExplicitTrailingSlash || hasCurrentTrailingSlash)) {\n    path.pathname += \"/\";\n  }\n  return path;\n}\nvar joinPaths = (paths) => paths.join(\"/\").replace(/\\/\\/+/g, \"/\");\nvar normalizePathname = (pathname) => pathname.replace(/\\/+$/, \"\").replace(/^\\/*/, \"/\");\nvar normalizeSearch = (search) => !search || search === \"?\" ? \"\" : search.startsWith(\"?\") ? search : \"?\" + search;\nvar normalizeHash = (hash) => !hash || hash === \"#\" ? \"\" : hash.startsWith(\"#\") ? hash : \"#\" + hash;\nvar DataWithResponseInit = class {\n  constructor(data2, init) {\n    this.type = \"DataWithResponseInit\";\n    this.data = data2;\n    this.init = init || null;\n  }\n};\nfunction data(data2, init) {\n  return new DataWithResponseInit(\n    data2,\n    typeof init === \"number\" ? { status: init } : init\n  );\n}\nvar redirect = (url, init = 302) => {\n  let responseInit = init;\n  if (typeof responseInit === \"number\") {\n    responseInit = { status: responseInit };\n  } else if (typeof responseInit.status === \"undefined\") {\n    responseInit.status = 302;\n  }\n  let headers = new Headers(responseInit.headers);\n  headers.set(\"Location\", url);\n  return new Response(null, { ...responseInit, headers });\n};\nvar redirectDocument = (url, init) => {\n  let response = redirect(url, init);\n  response.headers.set(\"X-Remix-Reload-Document\", \"true\");\n  return response;\n};\nvar replace = (url, init) => {\n  let response = redirect(url, init);\n  response.headers.set(\"X-Remix-Replace\", \"true\");\n  return response;\n};\nvar ErrorResponseImpl = class {\n  constructor(status, statusText, data2, internal = false) {\n    this.status = status;\n    this.statusText = statusText || \"\";\n    this.internal = internal;\n    if (data2 instanceof Error) {\n      this.data = data2.toString();\n      this.error = data2;\n    } else {\n      this.data = data2;\n    }\n  }\n};\nfunction isRouteErrorResponse(error) {\n  return error != null && typeof error.status === \"number\" && typeof error.statusText === \"string\" && typeof error.internal === \"boolean\" && \"data\" in error;\n}\nfunction getRoutePattern(matches) {\n  return matches.map((m) => m.route.path).filter(Boolean).join(\"/\").replace(/\\/\\/*/g, \"/\") || \"/\";\n}\nvar isBrowser = typeof window !== \"undefined\" && typeof window.document !== \"undefined\" && typeof window.document.createElement !== \"undefined\";\nfunction parseToInfo(_to, basename) {\n  let to = _to;\n  if (typeof to !== \"string\" || !ABSOLUTE_URL_REGEX.test(to)) {\n    return {\n      absoluteURL: void 0,\n      isExternal: false,\n      to\n    };\n  }\n  let absoluteURL = to;\n  let isExternal = false;\n  if (isBrowser) {\n    try {\n      let currentUrl = new URL(window.location.href);\n      let targetUrl = to.startsWith(\"//\") ? new URL(currentUrl.protocol + to) : new URL(to);\n      let path = stripBasename(targetUrl.pathname, basename);\n      if (targetUrl.origin === currentUrl.origin && path != null) {\n        to = path + targetUrl.search + targetUrl.hash;\n      } else {\n        isExternal = true;\n      }\n    } catch (e) {\n      warning(\n        false,\n        `<Link to=\"${to}\"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`\n      );\n    }\n  }\n  return {\n    absoluteURL,\n    isExternal,\n    to\n  };\n}\n\n// lib/router/instrumentation.ts\nvar UninstrumentedSymbol = Symbol(\"Uninstrumented\");\nfunction getRouteInstrumentationUpdates(fns, route) {\n  let aggregated = {\n    lazy: [],\n    \"lazy.loader\": [],\n    \"lazy.action\": [],\n    \"lazy.middleware\": [],\n    middleware: [],\n    loader: [],\n    action: []\n  };\n  fns.forEach(\n    (fn) => fn({\n      id: route.id,\n      index: route.index,\n      path: route.path,\n      instrument(i) {\n        let keys = Object.keys(aggregated);\n        for (let key of keys) {\n          if (i[key]) {\n            aggregated[key].push(i[key]);\n          }\n        }\n      }\n    })\n  );\n  let updates = {};\n  if (typeof route.lazy === \"function\" && aggregated.lazy.length > 0) {\n    let instrumented = wrapImpl(aggregated.lazy, route.lazy, () => void 0);\n    if (instrumented) {\n      updates.lazy = instrumented;\n    }\n  }\n  if (typeof route.lazy === \"object\") {\n    let lazyObject = route.lazy;\n    [\"middleware\", \"loader\", \"action\"].forEach((key) => {\n      let lazyFn = lazyObject[key];\n      let instrumentations = aggregated[`lazy.${key}`];\n      if (typeof lazyFn === \"function\" && instrumentations.length > 0) {\n        let instrumented = wrapImpl(instrumentations, lazyFn, () => void 0);\n        if (instrumented) {\n          updates.lazy = Object.assign(updates.lazy || {}, {\n            [key]: instrumented\n          });\n        }\n      }\n    });\n  }\n  [\"loader\", \"action\"].forEach((key) => {\n    let handler = route[key];\n    if (typeof handler === \"function\" && aggregated[key].length > 0) {\n      let original = handler[UninstrumentedSymbol] ?? handler;\n      let instrumented = wrapImpl(\n        aggregated[key],\n        original,\n        (...args) => getHandlerInfo(args[0])\n      );\n      if (instrumented) {\n        if (key === \"loader\" && original.hydrate === true) {\n          instrumented.hydrate = true;\n        }\n        instrumented[UninstrumentedSymbol] = original;\n        updates[key] = instrumented;\n      }\n    }\n  });\n  if (route.middleware && route.middleware.length > 0 && aggregated.middleware.length > 0) {\n    updates.middleware = route.middleware.map((middleware) => {\n      let original = middleware[UninstrumentedSymbol] ?? middleware;\n      let instrumented = wrapImpl(\n        aggregated.middleware,\n        original,\n        (...args) => getHandlerInfo(args[0])\n      );\n      if (instrumented) {\n        instrumented[UninstrumentedSymbol] = original;\n        return instrumented;\n      }\n      return middleware;\n    });\n  }\n  return updates;\n}\nfunction instrumentClientSideRouter(router, fns) {\n  let aggregated = {\n    navigate: [],\n    fetch: []\n  };\n  fns.forEach(\n    (fn) => fn({\n      instrument(i) {\n        let keys = Object.keys(i);\n        for (let key of keys) {\n          if (i[key]) {\n            aggregated[key].push(i[key]);\n          }\n        }\n      }\n    })\n  );\n  if (aggregated.navigate.length > 0) {\n    let navigate = router.navigate[UninstrumentedSymbol] ?? router.navigate;\n    let instrumentedNavigate = wrapImpl(\n      aggregated.navigate,\n      navigate,\n      (...args) => {\n        let [to, opts] = args;\n        return {\n          to: typeof to === \"number\" || typeof to === \"string\" ? to : to ? createPath(to) : \".\",\n          ...getRouterInfo(router, opts ?? {})\n        };\n      }\n    );\n    if (instrumentedNavigate) {\n      instrumentedNavigate[UninstrumentedSymbol] = navigate;\n      router.navigate = instrumentedNavigate;\n    }\n  }\n  if (aggregated.fetch.length > 0) {\n    let fetch2 = router.fetch[UninstrumentedSymbol] ?? router.fetch;\n    let instrumentedFetch = wrapImpl(aggregated.fetch, fetch2, (...args) => {\n      let [key, , href, opts] = args;\n      return {\n        href: href ?? \".\",\n        fetcherKey: key,\n        ...getRouterInfo(router, opts ?? {})\n      };\n    });\n    if (instrumentedFetch) {\n      instrumentedFetch[UninstrumentedSymbol] = fetch2;\n      router.fetch = instrumentedFetch;\n    }\n  }\n  return router;\n}\nfunction instrumentHandler(handler, fns) {\n  let aggregated = {\n    request: []\n  };\n  fns.forEach(\n    (fn) => fn({\n      instrument(i) {\n        let keys = Object.keys(i);\n        for (let key of keys) {\n          if (i[key]) {\n            aggregated[key].push(i[key]);\n          }\n        }\n      }\n    })\n  );\n  let instrumentedHandler = handler;\n  if (aggregated.request.length > 0) {\n    instrumentedHandler = wrapImpl(aggregated.request, handler, (...args) => {\n      let [request, context] = args;\n      return {\n        request: getReadonlyRequest(request),\n        context: context != null ? getReadonlyContext(context) : context\n      };\n    });\n  }\n  return instrumentedHandler;\n}\nfunction wrapImpl(impls, handler, getInfo) {\n  if (impls.length === 0) {\n    return null;\n  }\n  return async (...args) => {\n    let result = await recurseRight(\n      impls,\n      getInfo(...args),\n      () => handler(...args),\n      impls.length - 1\n    );\n    if (result.type === \"error\") {\n      throw result.value;\n    }\n    return result.value;\n  };\n}\nasync function recurseRight(impls, info, handler, index) {\n  let impl = impls[index];\n  let result;\n  if (!impl) {\n    try {\n      let value = await handler();\n      result = { type: \"success\", value };\n    } catch (e) {\n      result = { type: \"error\", value: e };\n    }\n  } else {\n    let handlerPromise = void 0;\n    let callHandler = async () => {\n      if (handlerPromise) {\n        console.error(\"You cannot call instrumented handlers more than once\");\n      } else {\n        handlerPromise = recurseRight(impls, info, handler, index - 1);\n      }\n      result = await handlerPromise;\n      invariant(result, \"Expected a result\");\n      if (result.type === \"error\" && result.value instanceof Error) {\n        return { status: \"error\", error: result.value };\n      }\n      return { status: \"success\", error: void 0 };\n    };\n    try {\n      await impl(callHandler, info);\n    } catch (e) {\n      console.error(\"An instrumentation function threw an error:\", e);\n    }\n    if (!handlerPromise) {\n      await callHandler();\n    }\n    await handlerPromise;\n  }\n  if (result) {\n    return result;\n  }\n  return {\n    type: \"error\",\n    value: new Error(\"No result assigned in instrumentation chain.\")\n  };\n}\nfunction getHandlerInfo(args) {\n  let { request, context, params, unstable_pattern } = args;\n  return {\n    request: getReadonlyRequest(request),\n    params: { ...params },\n    unstable_pattern,\n    context: getReadonlyContext(context)\n  };\n}\nfunction getRouterInfo(router, opts) {\n  return {\n    currentUrl: createPath(router.state.location),\n    ...\"formMethod\" in opts ? { formMethod: opts.formMethod } : {},\n    ...\"formEncType\" in opts ? { formEncType: opts.formEncType } : {},\n    ...\"formData\" in opts ? { formData: opts.formData } : {},\n    ...\"body\" in opts ? { body: opts.body } : {}\n  };\n}\nfunction getReadonlyRequest(request) {\n  return {\n    method: request.method,\n    url: request.url,\n    headers: {\n      get: (...args) => request.headers.get(...args)\n    }\n  };\n}\nfunction getReadonlyContext(context) {\n  if (isPlainObject(context)) {\n    let frozen = { ...context };\n    Object.freeze(frozen);\n    return frozen;\n  } else {\n    return {\n      get: (ctx) => context.get(ctx)\n    };\n  }\n}\nvar objectProtoNames = Object.getOwnPropertyNames(Object.prototype).sort().join(\"\\0\");\nfunction isPlainObject(thing) {\n  if (thing === null || typeof thing !== \"object\") {\n    return false;\n  }\n  const proto = Object.getPrototypeOf(thing);\n  return proto === Object.prototype || proto === null || Object.getOwnPropertyNames(proto).sort().join(\"\\0\") === objectProtoNames;\n}\n\n// lib/router/router.ts\nvar validMutationMethodsArr = [\n  \"POST\",\n  \"PUT\",\n  \"PATCH\",\n  \"DELETE\"\n];\nvar validMutationMethods = new Set(\n  validMutationMethodsArr\n);\nvar validRequestMethodsArr = [\n  \"GET\",\n  ...validMutationMethodsArr\n];\nvar validRequestMethods = new Set(validRequestMethodsArr);\nvar redirectStatusCodes = /* @__PURE__ */ new Set([301, 302, 303, 307, 308]);\nvar redirectPreserveMethodStatusCodes = /* @__PURE__ */ new Set([307, 308]);\nvar IDLE_NAVIGATION = {\n  state: \"idle\",\n  location: void 0,\n  formMethod: void 0,\n  formAction: void 0,\n  formEncType: void 0,\n  formData: void 0,\n  json: void 0,\n  text: void 0\n};\nvar IDLE_FETCHER = {\n  state: \"idle\",\n  data: void 0,\n  formMethod: void 0,\n  formAction: void 0,\n  formEncType: void 0,\n  formData: void 0,\n  json: void 0,\n  text: void 0\n};\nvar IDLE_BLOCKER = {\n  state: \"unblocked\",\n  proceed: void 0,\n  reset: void 0,\n  location: void 0\n};\nvar defaultMapRouteProperties = (route) => ({\n  hasErrorBoundary: Boolean(route.hasErrorBoundary)\n});\nvar TRANSITIONS_STORAGE_KEY = \"remix-router-transitions\";\nvar ResetLoaderDataSymbol = Symbol(\"ResetLoaderData\");\nfunction createRouter(init) {\n  const routerWindow = init.window ? init.window : typeof window !== \"undefined\" ? window : void 0;\n  const isBrowser3 = typeof routerWindow !== \"undefined\" && typeof routerWindow.document !== \"undefined\" && typeof routerWindow.document.createElement !== \"undefined\";\n  invariant(\n    init.routes.length > 0,\n    \"You must provide a non-empty routes array to createRouter\"\n  );\n  let hydrationRouteProperties2 = init.hydrationRouteProperties || [];\n  let _mapRouteProperties = init.mapRouteProperties || defaultMapRouteProperties;\n  let mapRouteProperties2 = _mapRouteProperties;\n  if (init.unstable_instrumentations) {\n    let instrumentations = init.unstable_instrumentations;\n    mapRouteProperties2 = (route) => {\n      return {\n        ..._mapRouteProperties(route),\n        ...getRouteInstrumentationUpdates(\n          instrumentations.map((i) => i.route).filter(Boolean),\n          route\n        )\n      };\n    };\n  }\n  let manifest = {};\n  let dataRoutes = convertRoutesToDataRoutes(\n    init.routes,\n    mapRouteProperties2,\n    void 0,\n    manifest\n  );\n  let inFlightDataRoutes;\n  let basename = init.basename || \"/\";\n  if (!basename.startsWith(\"/\")) {\n    basename = `/${basename}`;\n  }\n  let dataStrategyImpl = init.dataStrategy || defaultDataStrategyWithMiddleware;\n  let future = {\n    ...init.future\n  };\n  let unlistenHistory = null;\n  let subscribers = /* @__PURE__ */ new Set();\n  let savedScrollPositions2 = null;\n  let getScrollRestorationKey2 = null;\n  let getScrollPosition = null;\n  let initialScrollRestored = init.hydrationData != null;\n  let initialMatches = matchRoutes(dataRoutes, init.history.location, basename);\n  let initialMatchesIsFOW = false;\n  let initialErrors = null;\n  let initialized;\n  if (initialMatches == null && !init.patchRoutesOnNavigation) {\n    let error = getInternalRouterError(404, {\n      pathname: init.history.location.pathname\n    });\n    let { matches, route } = getShortCircuitMatches(dataRoutes);\n    initialized = true;\n    initialMatches = matches;\n    initialErrors = { [route.id]: error };\n  } else {\n    if (initialMatches && !init.hydrationData) {\n      let fogOfWar = checkFogOfWar(\n        initialMatches,\n        dataRoutes,\n        init.history.location.pathname\n      );\n      if (fogOfWar.active) {\n        initialMatches = null;\n      }\n    }\n    if (!initialMatches) {\n      initialized = false;\n      initialMatches = [];\n      let fogOfWar = checkFogOfWar(\n        null,\n        dataRoutes,\n        init.history.location.pathname\n      );\n      if (fogOfWar.active && fogOfWar.matches) {\n        initialMatchesIsFOW = true;\n        initialMatches = fogOfWar.matches;\n      }\n    } else if (initialMatches.some((m) => m.route.lazy)) {\n      initialized = false;\n    } else if (!initialMatches.some((m) => routeHasLoaderOrMiddleware(m.route))) {\n      initialized = true;\n    } else {\n      let loaderData = init.hydrationData ? init.hydrationData.loaderData : null;\n      let errors = init.hydrationData ? init.hydrationData.errors : null;\n      if (errors) {\n        let idx = initialMatches.findIndex(\n          (m) => errors[m.route.id] !== void 0\n        );\n        initialized = initialMatches.slice(0, idx + 1).every(\n          (m) => !shouldLoadRouteOnHydration(m.route, loaderData, errors)\n        );\n      } else {\n        initialized = initialMatches.every(\n          (m) => !shouldLoadRouteOnHydration(m.route, loaderData, errors)\n        );\n      }\n    }\n  }\n  let router;\n  let state = {\n    historyAction: init.history.action,\n    location: init.history.location,\n    matches: initialMatches,\n    initialized,\n    navigation: IDLE_NAVIGATION,\n    // Don't restore on initial updateState() if we were SSR'd\n    restoreScrollPosition: init.hydrationData != null ? false : null,\n    preventScrollReset: false,\n    revalidation: \"idle\",\n    loaderData: init.hydrationData && init.hydrationData.loaderData || {},\n    actionData: init.hydrationData && init.hydrationData.actionData || null,\n    errors: init.hydrationData && init.hydrationData.errors || initialErrors,\n    fetchers: /* @__PURE__ */ new Map(),\n    blockers: /* @__PURE__ */ new Map()\n  };\n  let pendingAction = \"POP\" /* Pop */;\n  let pendingPopstateNavigationDfd = null;\n  let pendingPreventScrollReset = false;\n  let pendingNavigationController;\n  let pendingViewTransitionEnabled = false;\n  let appliedViewTransitions = /* @__PURE__ */ new Map();\n  let removePageHideEventListener = null;\n  let isUninterruptedRevalidation = false;\n  let isRevalidationRequired = false;\n  let cancelledFetcherLoads = /* @__PURE__ */ new Set();\n  let fetchControllers = /* @__PURE__ */ new Map();\n  let incrementingLoadId = 0;\n  let pendingNavigationLoadId = -1;\n  let fetchReloadIds = /* @__PURE__ */ new Map();\n  let fetchRedirectIds = /* @__PURE__ */ new Set();\n  let fetchLoadMatches = /* @__PURE__ */ new Map();\n  let activeFetchers = /* @__PURE__ */ new Map();\n  let fetchersQueuedForDeletion = /* @__PURE__ */ new Set();\n  let blockerFunctions = /* @__PURE__ */ new Map();\n  let unblockBlockerHistoryUpdate = void 0;\n  let pendingRevalidationDfd = null;\n  function initialize() {\n    unlistenHistory = init.history.listen(\n      ({ action: historyAction, location, delta }) => {\n        if (unblockBlockerHistoryUpdate) {\n          unblockBlockerHistoryUpdate();\n          unblockBlockerHistoryUpdate = void 0;\n          return;\n        }\n        warning(\n          blockerFunctions.size === 0 || delta != null,\n          \"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.\"\n        );\n        let blockerKey = shouldBlockNavigation({\n          currentLocation: state.location,\n          nextLocation: location,\n          historyAction\n        });\n        if (blockerKey && delta != null) {\n          let nextHistoryUpdatePromise = new Promise((resolve) => {\n            unblockBlockerHistoryUpdate = resolve;\n          });\n          init.history.go(delta * -1);\n          updateBlocker(blockerKey, {\n            state: \"blocked\",\n            location,\n            proceed() {\n              updateBlocker(blockerKey, {\n                state: \"proceeding\",\n                proceed: void 0,\n                reset: void 0,\n                location\n              });\n              nextHistoryUpdatePromise.then(() => init.history.go(delta));\n            },\n            reset() {\n              let blockers = new Map(state.blockers);\n              blockers.set(blockerKey, IDLE_BLOCKER);\n              updateState({ blockers });\n            }\n          });\n          pendingPopstateNavigationDfd?.resolve();\n          pendingPopstateNavigationDfd = null;\n          return;\n        }\n        return startNavigation(historyAction, location);\n      }\n    );\n    if (isBrowser3) {\n      restoreAppliedTransitions(routerWindow, appliedViewTransitions);\n      let _saveAppliedTransitions = () => persistAppliedTransitions(routerWindow, appliedViewTransitions);\n      routerWindow.addEventListener(\"pagehide\", _saveAppliedTransitions);\n      removePageHideEventListener = () => routerWindow.removeEventListener(\"pagehide\", _saveAppliedTransitions);\n    }\n    if (!state.initialized) {\n      startNavigation(\"POP\" /* Pop */, state.location, {\n        initialHydration: true\n      });\n    }\n    return router;\n  }\n  function dispose() {\n    if (unlistenHistory) {\n      unlistenHistory();\n    }\n    if (removePageHideEventListener) {\n      removePageHideEventListener();\n    }\n    subscribers.clear();\n    pendingNavigationController && pendingNavigationController.abort();\n    state.fetchers.forEach((_, key) => deleteFetcher(key));\n    state.blockers.forEach((_, key) => deleteBlocker(key));\n  }\n  function subscribe(fn) {\n    subscribers.add(fn);\n    return () => subscribers.delete(fn);\n  }\n  function updateState(newState, opts = {}) {\n    if (newState.matches) {\n      newState.matches = newState.matches.map((m) => {\n        let route = manifest[m.route.id];\n        let matchRoute = m.route;\n        if (matchRoute.element !== route.element || matchRoute.errorElement !== route.errorElement || matchRoute.hydrateFallbackElement !== route.hydrateFallbackElement) {\n          return {\n            ...m,\n            route\n          };\n        }\n        return m;\n      });\n    }\n    state = {\n      ...state,\n      ...newState\n    };\n    let unmountedFetchers = [];\n    let mountedFetchers = [];\n    state.fetchers.forEach((fetcher, key) => {\n      if (fetcher.state === \"idle\") {\n        if (fetchersQueuedForDeletion.has(key)) {\n          unmountedFetchers.push(key);\n        } else {\n          mountedFetchers.push(key);\n        }\n      }\n    });\n    fetchersQueuedForDeletion.forEach((key) => {\n      if (!state.fetchers.has(key) && !fetchControllers.has(key)) {\n        unmountedFetchers.push(key);\n      }\n    });\n    [...subscribers].forEach(\n      (subscriber) => subscriber(state, {\n        deletedFetchers: unmountedFetchers,\n        newErrors: newState.errors ?? null,\n        viewTransitionOpts: opts.viewTransitionOpts,\n        flushSync: opts.flushSync === true\n      })\n    );\n    unmountedFetchers.forEach((key) => deleteFetcher(key));\n    mountedFetchers.forEach((key) => state.fetchers.delete(key));\n  }\n  function completeNavigation(location, newState, { flushSync } = {}) {\n    let isActionReload = state.actionData != null && state.navigation.formMethod != null && isMutationMethod(state.navigation.formMethod) && state.navigation.state === \"loading\" && location.state?._isRedirect !== true;\n    let actionData;\n    if (newState.actionData) {\n      if (Object.keys(newState.actionData).length > 0) {\n        actionData = newState.actionData;\n      } else {\n        actionData = null;\n      }\n    } else if (isActionReload) {\n      actionData = state.actionData;\n    } else {\n      actionData = null;\n    }\n    let loaderData = newState.loaderData ? mergeLoaderData(\n      state.loaderData,\n      newState.loaderData,\n      newState.matches || [],\n      newState.errors\n    ) : state.loaderData;\n    let blockers = state.blockers;\n    if (blockers.size > 0) {\n      blockers = new Map(blockers);\n      blockers.forEach((_, k) => blockers.set(k, IDLE_BLOCKER));\n    }\n    let restoreScrollPosition = isUninterruptedRevalidation ? false : getSavedScrollPosition(location, newState.matches || state.matches);\n    let preventScrollReset = pendingPreventScrollReset === true || state.navigation.formMethod != null && isMutationMethod(state.navigation.formMethod) && location.state?._isRedirect !== true;\n    if (inFlightDataRoutes) {\n      dataRoutes = inFlightDataRoutes;\n      inFlightDataRoutes = void 0;\n    }\n    if (isUninterruptedRevalidation) {\n    } else if (pendingAction === \"POP\" /* Pop */) {\n    } else if (pendingAction === \"PUSH\" /* Push */) {\n      init.history.push(location, location.state);\n    } else if (pendingAction === \"REPLACE\" /* Replace */) {\n      init.history.replace(location, location.state);\n    }\n    let viewTransitionOpts;\n    if (pendingAction === \"POP\" /* Pop */) {\n      let priorPaths = appliedViewTransitions.get(state.location.pathname);\n      if (priorPaths && priorPaths.has(location.pathname)) {\n        viewTransitionOpts = {\n          currentLocation: state.location,\n          nextLocation: location\n        };\n      } else if (appliedViewTransitions.has(location.pathname)) {\n        viewTransitionOpts = {\n          currentLocation: location,\n          nextLocation: state.location\n        };\n      }\n    } else if (pendingViewTransitionEnabled) {\n      let toPaths = appliedViewTransitions.get(state.location.pathname);\n      if (toPaths) {\n        toPaths.add(location.pathname);\n      } else {\n        toPaths = /* @__PURE__ */ new Set([location.pathname]);\n        appliedViewTransitions.set(state.location.pathname, toPaths);\n      }\n      viewTransitionOpts = {\n        currentLocation: state.location,\n        nextLocation: location\n      };\n    }\n    updateState(\n      {\n        ...newState,\n        // matches, errors, fetchers go through as-is\n        actionData,\n        loaderData,\n        historyAction: pendingAction,\n        location,\n        initialized: true,\n        navigation: IDLE_NAVIGATION,\n        revalidation: \"idle\",\n        restoreScrollPosition,\n        preventScrollReset,\n        blockers\n      },\n      {\n        viewTransitionOpts,\n        flushSync: flushSync === true\n      }\n    );\n    pendingAction = \"POP\" /* Pop */;\n    pendingPreventScrollReset = false;\n    pendingViewTransitionEnabled = false;\n    isUninterruptedRevalidation = false;\n    isRevalidationRequired = false;\n    pendingPopstateNavigationDfd?.resolve();\n    pendingPopstateNavigationDfd = null;\n    pendingRevalidationDfd?.resolve();\n    pendingRevalidationDfd = null;\n  }\n  async function navigate(to, opts) {\n    pendingPopstateNavigationDfd?.resolve();\n    pendingPopstateNavigationDfd = null;\n    if (typeof to === \"number\") {\n      if (!pendingPopstateNavigationDfd) {\n        pendingPopstateNavigationDfd = createDeferred();\n      }\n      let promise = pendingPopstateNavigationDfd.promise;\n      init.history.go(to);\n      return promise;\n    }\n    let normalizedPath = normalizeTo(\n      state.location,\n      state.matches,\n      basename,\n      to,\n      opts?.fromRouteId,\n      opts?.relative\n    );\n    let { path, submission, error } = normalizeNavigateOptions(\n      false,\n      normalizedPath,\n      opts\n    );\n    let currentLocation = state.location;\n    let nextLocation = createLocation(state.location, path, opts && opts.state);\n    nextLocation = {\n      ...nextLocation,\n      ...init.history.encodeLocation(nextLocation)\n    };\n    let userReplace = opts && opts.replace != null ? opts.replace : void 0;\n    let historyAction = \"PUSH\" /* Push */;\n    if (userReplace === true) {\n      historyAction = \"REPLACE\" /* Replace */;\n    } else if (userReplace === false) {\n    } else if (submission != null && isMutationMethod(submission.formMethod) && submission.formAction === state.location.pathname + state.location.search) {\n      historyAction = \"REPLACE\" /* Replace */;\n    }\n    let preventScrollReset = opts && \"preventScrollReset\" in opts ? opts.preventScrollReset === true : void 0;\n    let flushSync = (opts && opts.flushSync) === true;\n    let blockerKey = shouldBlockNavigation({\n      currentLocation,\n      nextLocation,\n      historyAction\n    });\n    if (blockerKey) {\n      updateBlocker(blockerKey, {\n        state: \"blocked\",\n        location: nextLocation,\n        proceed() {\n          updateBlocker(blockerKey, {\n            state: \"proceeding\",\n            proceed: void 0,\n            reset: void 0,\n            location: nextLocation\n          });\n          navigate(to, opts);\n        },\n        reset() {\n          let blockers = new Map(state.blockers);\n          blockers.set(blockerKey, IDLE_BLOCKER);\n          updateState({ blockers });\n        }\n      });\n      return;\n    }\n    await startNavigation(historyAction, nextLocation, {\n      submission,\n      // Send through the formData serialization error if we have one so we can\n      // render at the right error boundary after we match routes\n      pendingError: error,\n      preventScrollReset,\n      replace: opts && opts.replace,\n      enableViewTransition: opts && opts.viewTransition,\n      flushSync,\n      callSiteDefaultShouldRevalidate: opts && opts.unstable_defaultShouldRevalidate\n    });\n  }\n  function revalidate() {\n    if (!pendingRevalidationDfd) {\n      pendingRevalidationDfd = createDeferred();\n    }\n    interruptActiveLoads();\n    updateState({ revalidation: \"loading\" });\n    let promise = pendingRevalidationDfd.promise;\n    if (state.navigation.state === \"submitting\") {\n      return promise;\n    }\n    if (state.navigation.state === \"idle\") {\n      startNavigation(state.historyAction, state.location, {\n        startUninterruptedRevalidation: true\n      });\n      return promise;\n    }\n    startNavigation(\n      pendingAction || state.historyAction,\n      state.navigation.location,\n      {\n        overrideNavigation: state.navigation,\n        // Proxy through any rending view transition\n        enableViewTransition: pendingViewTransitionEnabled === true\n      }\n    );\n    return promise;\n  }\n  async function startNavigation(historyAction, location, opts) {\n    pendingNavigationController && pendingNavigationController.abort();\n    pendingNavigationController = null;\n    pendingAction = historyAction;\n    isUninterruptedRevalidation = (opts && opts.startUninterruptedRevalidation) === true;\n    saveScrollPosition(state.location, state.matches);\n    pendingPreventScrollReset = (opts && opts.preventScrollReset) === true;\n    pendingViewTransitionEnabled = (opts && opts.enableViewTransition) === true;\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let loadingNavigation = opts && opts.overrideNavigation;\n    let matches = opts?.initialHydration && state.matches && state.matches.length > 0 && !initialMatchesIsFOW ? (\n      // `matchRoutes()` has already been called if we're in here via `router.initialize()`\n      state.matches\n    ) : matchRoutes(routesToUse, location, basename);\n    let flushSync = (opts && opts.flushSync) === true;\n    if (matches && state.initialized && !isRevalidationRequired && isHashChangeOnly(state.location, location) && !(opts && opts.submission && isMutationMethod(opts.submission.formMethod))) {\n      completeNavigation(location, { matches }, { flushSync });\n      return;\n    }\n    let fogOfWar = checkFogOfWar(matches, routesToUse, location.pathname);\n    if (fogOfWar.active && fogOfWar.matches) {\n      matches = fogOfWar.matches;\n    }\n    if (!matches) {\n      let { error, notFoundMatches, route } = handleNavigational404(\n        location.pathname\n      );\n      completeNavigation(\n        location,\n        {\n          matches: notFoundMatches,\n          loaderData: {},\n          errors: {\n            [route.id]: error\n          }\n        },\n        { flushSync }\n      );\n      return;\n    }\n    pendingNavigationController = new AbortController();\n    let request = createClientSideRequest(\n      init.history,\n      location,\n      pendingNavigationController.signal,\n      opts && opts.submission\n    );\n    let scopedContext = init.getContext ? await init.getContext() : new RouterContextProvider();\n    let pendingActionResult;\n    if (opts && opts.pendingError) {\n      pendingActionResult = [\n        findNearestBoundary(matches).route.id,\n        { type: \"error\" /* error */, error: opts.pendingError }\n      ];\n    } else if (opts && opts.submission && isMutationMethod(opts.submission.formMethod)) {\n      let actionResult = await handleAction(\n        request,\n        location,\n        opts.submission,\n        matches,\n        scopedContext,\n        fogOfWar.active,\n        opts && opts.initialHydration === true,\n        { replace: opts.replace, flushSync }\n      );\n      if (actionResult.shortCircuited) {\n        return;\n      }\n      if (actionResult.pendingActionResult) {\n        let [routeId, result] = actionResult.pendingActionResult;\n        if (isErrorResult(result) && isRouteErrorResponse(result.error) && result.error.status === 404) {\n          pendingNavigationController = null;\n          completeNavigation(location, {\n            matches: actionResult.matches,\n            loaderData: {},\n            errors: {\n              [routeId]: result.error\n            }\n          });\n          return;\n        }\n      }\n      matches = actionResult.matches || matches;\n      pendingActionResult = actionResult.pendingActionResult;\n      loadingNavigation = getLoadingNavigation(location, opts.submission);\n      flushSync = false;\n      fogOfWar.active = false;\n      request = createClientSideRequest(\n        init.history,\n        request.url,\n        request.signal\n      );\n    }\n    let {\n      shortCircuited,\n      matches: updatedMatches,\n      loaderData,\n      errors\n    } = await handleLoaders(\n      request,\n      location,\n      matches,\n      scopedContext,\n      fogOfWar.active,\n      loadingNavigation,\n      opts && opts.submission,\n      opts && opts.fetcherSubmission,\n      opts && opts.replace,\n      opts && opts.initialHydration === true,\n      flushSync,\n      pendingActionResult,\n      opts && opts.callSiteDefaultShouldRevalidate\n    );\n    if (shortCircuited) {\n      return;\n    }\n    pendingNavigationController = null;\n    completeNavigation(location, {\n      matches: updatedMatches || matches,\n      ...getActionDataForCommit(pendingActionResult),\n      loaderData,\n      errors\n    });\n  }\n  async function handleAction(request, location, submission, matches, scopedContext, isFogOfWar, initialHydration, opts = {}) {\n    interruptActiveLoads();\n    let navigation = getSubmittingNavigation(location, submission);\n    updateState({ navigation }, { flushSync: opts.flushSync === true });\n    if (isFogOfWar) {\n      let discoverResult = await discoverRoutes(\n        matches,\n        location.pathname,\n        request.signal\n      );\n      if (discoverResult.type === \"aborted\") {\n        return { shortCircuited: true };\n      } else if (discoverResult.type === \"error\") {\n        if (discoverResult.partialMatches.length === 0) {\n          let { matches: matches2, route } = getShortCircuitMatches(dataRoutes);\n          return {\n            matches: matches2,\n            pendingActionResult: [\n              route.id,\n              {\n                type: \"error\" /* error */,\n                error: discoverResult.error\n              }\n            ]\n          };\n        }\n        let boundaryId = findNearestBoundary(discoverResult.partialMatches).route.id;\n        return {\n          matches: discoverResult.partialMatches,\n          pendingActionResult: [\n            boundaryId,\n            {\n              type: \"error\" /* error */,\n              error: discoverResult.error\n            }\n          ]\n        };\n      } else if (!discoverResult.matches) {\n        let { notFoundMatches, error, route } = handleNavigational404(\n          location.pathname\n        );\n        return {\n          matches: notFoundMatches,\n          pendingActionResult: [\n            route.id,\n            {\n              type: \"error\" /* error */,\n              error\n            }\n          ]\n        };\n      } else {\n        matches = discoverResult.matches;\n      }\n    }\n    let result;\n    let actionMatch = getTargetMatch(matches, location);\n    if (!actionMatch.route.action && !actionMatch.route.lazy) {\n      result = {\n        type: \"error\" /* error */,\n        error: getInternalRouterError(405, {\n          method: request.method,\n          pathname: location.pathname,\n          routeId: actionMatch.route.id\n        })\n      };\n    } else {\n      let dsMatches = getTargetedDataStrategyMatches(\n        mapRouteProperties2,\n        manifest,\n        request,\n        matches,\n        actionMatch,\n        initialHydration ? [] : hydrationRouteProperties2,\n        scopedContext\n      );\n      let results = await callDataStrategy(\n        request,\n        dsMatches,\n        scopedContext,\n        null\n      );\n      result = results[actionMatch.route.id];\n      if (!result) {\n        for (let match of matches) {\n          if (results[match.route.id]) {\n            result = results[match.route.id];\n            break;\n          }\n        }\n      }\n      if (request.signal.aborted) {\n        return { shortCircuited: true };\n      }\n    }\n    if (isRedirectResult(result)) {\n      let replace2;\n      if (opts && opts.replace != null) {\n        replace2 = opts.replace;\n      } else {\n        let location2 = normalizeRedirectLocation(\n          result.response.headers.get(\"Location\"),\n          new URL(request.url),\n          basename,\n          init.history\n        );\n        replace2 = location2 === state.location.pathname + state.location.search;\n      }\n      await startRedirectNavigation(request, result, true, {\n        submission,\n        replace: replace2\n      });\n      return { shortCircuited: true };\n    }\n    if (isErrorResult(result)) {\n      let boundaryMatch = findNearestBoundary(matches, actionMatch.route.id);\n      if ((opts && opts.replace) !== true) {\n        pendingAction = \"PUSH\" /* Push */;\n      }\n      return {\n        matches,\n        pendingActionResult: [\n          boundaryMatch.route.id,\n          result,\n          actionMatch.route.id\n        ]\n      };\n    }\n    return {\n      matches,\n      pendingActionResult: [actionMatch.route.id, result]\n    };\n  }\n  async function handleLoaders(request, location, matches, scopedContext, isFogOfWar, overrideNavigation, submission, fetcherSubmission, replace2, initialHydration, flushSync, pendingActionResult, callSiteDefaultShouldRevalidate) {\n    let loadingNavigation = overrideNavigation || getLoadingNavigation(location, submission);\n    let activeSubmission = submission || fetcherSubmission || getSubmissionFromNavigation(loadingNavigation);\n    let shouldUpdateNavigationState = !isUninterruptedRevalidation && !initialHydration;\n    if (isFogOfWar) {\n      if (shouldUpdateNavigationState) {\n        let actionData = getUpdatedActionData(pendingActionResult);\n        updateState(\n          {\n            navigation: loadingNavigation,\n            ...actionData !== void 0 ? { actionData } : {}\n          },\n          {\n            flushSync\n          }\n        );\n      }\n      let discoverResult = await discoverRoutes(\n        matches,\n        location.pathname,\n        request.signal\n      );\n      if (discoverResult.type === \"aborted\") {\n        return { shortCircuited: true };\n      } else if (discoverResult.type === \"error\") {\n        if (discoverResult.partialMatches.length === 0) {\n          let { matches: matches2, route } = getShortCircuitMatches(dataRoutes);\n          return {\n            matches: matches2,\n            loaderData: {},\n            errors: {\n              [route.id]: discoverResult.error\n            }\n          };\n        }\n        let boundaryId = findNearestBoundary(discoverResult.partialMatches).route.id;\n        return {\n          matches: discoverResult.partialMatches,\n          loaderData: {},\n          errors: {\n            [boundaryId]: discoverResult.error\n          }\n        };\n      } else if (!discoverResult.matches) {\n        let { error, notFoundMatches, route } = handleNavigational404(\n          location.pathname\n        );\n        return {\n          matches: notFoundMatches,\n          loaderData: {},\n          errors: {\n            [route.id]: error\n          }\n        };\n      } else {\n        matches = discoverResult.matches;\n      }\n    }\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let { dsMatches, revalidatingFetchers } = getMatchesToLoad(\n      request,\n      scopedContext,\n      mapRouteProperties2,\n      manifest,\n      init.history,\n      state,\n      matches,\n      activeSubmission,\n      location,\n      initialHydration ? [] : hydrationRouteProperties2,\n      initialHydration === true,\n      isRevalidationRequired,\n      cancelledFetcherLoads,\n      fetchersQueuedForDeletion,\n      fetchLoadMatches,\n      fetchRedirectIds,\n      routesToUse,\n      basename,\n      init.patchRoutesOnNavigation != null,\n      pendingActionResult,\n      callSiteDefaultShouldRevalidate\n    );\n    pendingNavigationLoadId = ++incrementingLoadId;\n    if (!init.dataStrategy && !dsMatches.some((m) => m.shouldLoad) && !dsMatches.some(\n      (m) => m.route.middleware && m.route.middleware.length > 0\n    ) && revalidatingFetchers.length === 0) {\n      let updatedFetchers2 = markFetchRedirectsDone();\n      completeNavigation(\n        location,\n        {\n          matches,\n          loaderData: {},\n          // Commit pending error if we're short circuiting\n          errors: pendingActionResult && isErrorResult(pendingActionResult[1]) ? { [pendingActionResult[0]]: pendingActionResult[1].error } : null,\n          ...getActionDataForCommit(pendingActionResult),\n          ...updatedFetchers2 ? { fetchers: new Map(state.fetchers) } : {}\n        },\n        { flushSync }\n      );\n      return { shortCircuited: true };\n    }\n    if (shouldUpdateNavigationState) {\n      let updates = {};\n      if (!isFogOfWar) {\n        updates.navigation = loadingNavigation;\n        let actionData = getUpdatedActionData(pendingActionResult);\n        if (actionData !== void 0) {\n          updates.actionData = actionData;\n        }\n      }\n      if (revalidatingFetchers.length > 0) {\n        updates.fetchers = getUpdatedRevalidatingFetchers(revalidatingFetchers);\n      }\n      updateState(updates, { flushSync });\n    }\n    revalidatingFetchers.forEach((rf) => {\n      abortFetcher(rf.key);\n      if (rf.controller) {\n        fetchControllers.set(rf.key, rf.controller);\n      }\n    });\n    let abortPendingFetchRevalidations = () => revalidatingFetchers.forEach((f) => abortFetcher(f.key));\n    if (pendingNavigationController) {\n      pendingNavigationController.signal.addEventListener(\n        \"abort\",\n        abortPendingFetchRevalidations\n      );\n    }\n    let { loaderResults, fetcherResults } = await callLoadersAndMaybeResolveData(\n      dsMatches,\n      revalidatingFetchers,\n      request,\n      scopedContext\n    );\n    if (request.signal.aborted) {\n      return { shortCircuited: true };\n    }\n    if (pendingNavigationController) {\n      pendingNavigationController.signal.removeEventListener(\n        \"abort\",\n        abortPendingFetchRevalidations\n      );\n    }\n    revalidatingFetchers.forEach((rf) => fetchControllers.delete(rf.key));\n    let redirect2 = findRedirect(loaderResults);\n    if (redirect2) {\n      await startRedirectNavigation(request, redirect2.result, true, {\n        replace: replace2\n      });\n      return { shortCircuited: true };\n    }\n    redirect2 = findRedirect(fetcherResults);\n    if (redirect2) {\n      fetchRedirectIds.add(redirect2.key);\n      await startRedirectNavigation(request, redirect2.result, true, {\n        replace: replace2\n      });\n      return { shortCircuited: true };\n    }\n    let { loaderData, errors } = processLoaderData(\n      state,\n      matches,\n      loaderResults,\n      pendingActionResult,\n      revalidatingFetchers,\n      fetcherResults\n    );\n    if (initialHydration && state.errors) {\n      errors = { ...state.errors, ...errors };\n    }\n    let updatedFetchers = markFetchRedirectsDone();\n    let didAbortFetchLoads = abortStaleFetchLoads(pendingNavigationLoadId);\n    let shouldUpdateFetchers = updatedFetchers || didAbortFetchLoads || revalidatingFetchers.length > 0;\n    return {\n      matches,\n      loaderData,\n      errors,\n      ...shouldUpdateFetchers ? { fetchers: new Map(state.fetchers) } : {}\n    };\n  }\n  function getUpdatedActionData(pendingActionResult) {\n    if (pendingActionResult && !isErrorResult(pendingActionResult[1])) {\n      return {\n        [pendingActionResult[0]]: pendingActionResult[1].data\n      };\n    } else if (state.actionData) {\n      if (Object.keys(state.actionData).length === 0) {\n        return null;\n      } else {\n        return state.actionData;\n      }\n    }\n  }\n  function getUpdatedRevalidatingFetchers(revalidatingFetchers) {\n    revalidatingFetchers.forEach((rf) => {\n      let fetcher = state.fetchers.get(rf.key);\n      let revalidatingFetcher = getLoadingFetcher(\n        void 0,\n        fetcher ? fetcher.data : void 0\n      );\n      state.fetchers.set(rf.key, revalidatingFetcher);\n    });\n    return new Map(state.fetchers);\n  }\n  async function fetch2(key, routeId, href, opts) {\n    abortFetcher(key);\n    let flushSync = (opts && opts.flushSync) === true;\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let normalizedPath = normalizeTo(\n      state.location,\n      state.matches,\n      basename,\n      href,\n      routeId,\n      opts?.relative\n    );\n    let matches = matchRoutes(routesToUse, normalizedPath, basename);\n    let fogOfWar = checkFogOfWar(matches, routesToUse, normalizedPath);\n    if (fogOfWar.active && fogOfWar.matches) {\n      matches = fogOfWar.matches;\n    }\n    if (!matches) {\n      setFetcherError(\n        key,\n        routeId,\n        getInternalRouterError(404, { pathname: normalizedPath }),\n        { flushSync }\n      );\n      return;\n    }\n    let { path, submission, error } = normalizeNavigateOptions(\n      true,\n      normalizedPath,\n      opts\n    );\n    if (error) {\n      setFetcherError(key, routeId, error, { flushSync });\n      return;\n    }\n    let scopedContext = init.getContext ? await init.getContext() : new RouterContextProvider();\n    let preventScrollReset = (opts && opts.preventScrollReset) === true;\n    if (submission && isMutationMethod(submission.formMethod)) {\n      await handleFetcherAction(\n        key,\n        routeId,\n        path,\n        matches,\n        scopedContext,\n        fogOfWar.active,\n        flushSync,\n        preventScrollReset,\n        submission,\n        opts && opts.unstable_defaultShouldRevalidate\n      );\n      return;\n    }\n    fetchLoadMatches.set(key, { routeId, path });\n    await handleFetcherLoader(\n      key,\n      routeId,\n      path,\n      matches,\n      scopedContext,\n      fogOfWar.active,\n      flushSync,\n      preventScrollReset,\n      submission\n    );\n  }\n  async function handleFetcherAction(key, routeId, path, requestMatches, scopedContext, isFogOfWar, flushSync, preventScrollReset, submission, callSiteDefaultShouldRevalidate) {\n    interruptActiveLoads();\n    fetchLoadMatches.delete(key);\n    let existingFetcher = state.fetchers.get(key);\n    updateFetcherState(key, getSubmittingFetcher(submission, existingFetcher), {\n      flushSync\n    });\n    let abortController = new AbortController();\n    let fetchRequest = createClientSideRequest(\n      init.history,\n      path,\n      abortController.signal,\n      submission\n    );\n    if (isFogOfWar) {\n      let discoverResult = await discoverRoutes(\n        requestMatches,\n        new URL(fetchRequest.url).pathname,\n        fetchRequest.signal,\n        key\n      );\n      if (discoverResult.type === \"aborted\") {\n        return;\n      } else if (discoverResult.type === \"error\") {\n        setFetcherError(key, routeId, discoverResult.error, { flushSync });\n        return;\n      } else if (!discoverResult.matches) {\n        setFetcherError(\n          key,\n          routeId,\n          getInternalRouterError(404, { pathname: path }),\n          { flushSync }\n        );\n        return;\n      } else {\n        requestMatches = discoverResult.matches;\n      }\n    }\n    let match = getTargetMatch(requestMatches, path);\n    if (!match.route.action && !match.route.lazy) {\n      let error = getInternalRouterError(405, {\n        method: submission.formMethod,\n        pathname: path,\n        routeId\n      });\n      setFetcherError(key, routeId, error, { flushSync });\n      return;\n    }\n    fetchControllers.set(key, abortController);\n    let originatingLoadId = incrementingLoadId;\n    let fetchMatches = getTargetedDataStrategyMatches(\n      mapRouteProperties2,\n      manifest,\n      fetchRequest,\n      requestMatches,\n      match,\n      hydrationRouteProperties2,\n      scopedContext\n    );\n    let actionResults = await callDataStrategy(\n      fetchRequest,\n      fetchMatches,\n      scopedContext,\n      key\n    );\n    let actionResult = actionResults[match.route.id];\n    if (!actionResult) {\n      for (let match2 of fetchMatches) {\n        if (actionResults[match2.route.id]) {\n          actionResult = actionResults[match2.route.id];\n          break;\n        }\n      }\n    }\n    if (fetchRequest.signal.aborted) {\n      if (fetchControllers.get(key) === abortController) {\n        fetchControllers.delete(key);\n      }\n      return;\n    }\n    if (fetchersQueuedForDeletion.has(key)) {\n      if (isRedirectResult(actionResult) || isErrorResult(actionResult)) {\n        updateFetcherState(key, getDoneFetcher(void 0));\n        return;\n      }\n    } else {\n      if (isRedirectResult(actionResult)) {\n        fetchControllers.delete(key);\n        if (pendingNavigationLoadId > originatingLoadId) {\n          updateFetcherState(key, getDoneFetcher(void 0));\n          return;\n        } else {\n          fetchRedirectIds.add(key);\n          updateFetcherState(key, getLoadingFetcher(submission));\n          return startRedirectNavigation(fetchRequest, actionResult, false, {\n            fetcherSubmission: submission,\n            preventScrollReset\n          });\n        }\n      }\n      if (isErrorResult(actionResult)) {\n        setFetcherError(key, routeId, actionResult.error);\n        return;\n      }\n    }\n    let nextLocation = state.navigation.location || state.location;\n    let revalidationRequest = createClientSideRequest(\n      init.history,\n      nextLocation,\n      abortController.signal\n    );\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let matches = state.navigation.state !== \"idle\" ? matchRoutes(routesToUse, state.navigation.location, basename) : state.matches;\n    invariant(matches, \"Didn't find any matches after fetcher action\");\n    let loadId = ++incrementingLoadId;\n    fetchReloadIds.set(key, loadId);\n    let loadFetcher = getLoadingFetcher(submission, actionResult.data);\n    state.fetchers.set(key, loadFetcher);\n    let { dsMatches, revalidatingFetchers } = getMatchesToLoad(\n      revalidationRequest,\n      scopedContext,\n      mapRouteProperties2,\n      manifest,\n      init.history,\n      state,\n      matches,\n      submission,\n      nextLocation,\n      hydrationRouteProperties2,\n      false,\n      isRevalidationRequired,\n      cancelledFetcherLoads,\n      fetchersQueuedForDeletion,\n      fetchLoadMatches,\n      fetchRedirectIds,\n      routesToUse,\n      basename,\n      init.patchRoutesOnNavigation != null,\n      [match.route.id, actionResult],\n      callSiteDefaultShouldRevalidate\n    );\n    revalidatingFetchers.filter((rf) => rf.key !== key).forEach((rf) => {\n      let staleKey = rf.key;\n      let existingFetcher2 = state.fetchers.get(staleKey);\n      let revalidatingFetcher = getLoadingFetcher(\n        void 0,\n        existingFetcher2 ? existingFetcher2.data : void 0\n      );\n      state.fetchers.set(staleKey, revalidatingFetcher);\n      abortFetcher(staleKey);\n      if (rf.controller) {\n        fetchControllers.set(staleKey, rf.controller);\n      }\n    });\n    updateState({ fetchers: new Map(state.fetchers) });\n    let abortPendingFetchRevalidations = () => revalidatingFetchers.forEach((rf) => abortFetcher(rf.key));\n    abortController.signal.addEventListener(\n      \"abort\",\n      abortPendingFetchRevalidations\n    );\n    let { loaderResults, fetcherResults } = await callLoadersAndMaybeResolveData(\n      dsMatches,\n      revalidatingFetchers,\n      revalidationRequest,\n      scopedContext\n    );\n    if (abortController.signal.aborted) {\n      return;\n    }\n    abortController.signal.removeEventListener(\n      \"abort\",\n      abortPendingFetchRevalidations\n    );\n    fetchReloadIds.delete(key);\n    fetchControllers.delete(key);\n    revalidatingFetchers.forEach((r) => fetchControllers.delete(r.key));\n    if (state.fetchers.has(key)) {\n      let doneFetcher = getDoneFetcher(actionResult.data);\n      state.fetchers.set(key, doneFetcher);\n    }\n    let redirect2 = findRedirect(loaderResults);\n    if (redirect2) {\n      return startRedirectNavigation(\n        revalidationRequest,\n        redirect2.result,\n        false,\n        { preventScrollReset }\n      );\n    }\n    redirect2 = findRedirect(fetcherResults);\n    if (redirect2) {\n      fetchRedirectIds.add(redirect2.key);\n      return startRedirectNavigation(\n        revalidationRequest,\n        redirect2.result,\n        false,\n        { preventScrollReset }\n      );\n    }\n    let { loaderData, errors } = processLoaderData(\n      state,\n      matches,\n      loaderResults,\n      void 0,\n      revalidatingFetchers,\n      fetcherResults\n    );\n    abortStaleFetchLoads(loadId);\n    if (state.navigation.state === \"loading\" && loadId > pendingNavigationLoadId) {\n      invariant(pendingAction, \"Expected pending action\");\n      pendingNavigationController && pendingNavigationController.abort();\n      completeNavigation(state.navigation.location, {\n        matches,\n        loaderData,\n        errors,\n        fetchers: new Map(state.fetchers)\n      });\n    } else {\n      updateState({\n        errors,\n        loaderData: mergeLoaderData(\n          state.loaderData,\n          loaderData,\n          matches,\n          errors\n        ),\n        fetchers: new Map(state.fetchers)\n      });\n      isRevalidationRequired = false;\n    }\n  }\n  async function handleFetcherLoader(key, routeId, path, matches, scopedContext, isFogOfWar, flushSync, preventScrollReset, submission) {\n    let existingFetcher = state.fetchers.get(key);\n    updateFetcherState(\n      key,\n      getLoadingFetcher(\n        submission,\n        existingFetcher ? existingFetcher.data : void 0\n      ),\n      { flushSync }\n    );\n    let abortController = new AbortController();\n    let fetchRequest = createClientSideRequest(\n      init.history,\n      path,\n      abortController.signal\n    );\n    if (isFogOfWar) {\n      let discoverResult = await discoverRoutes(\n        matches,\n        new URL(fetchRequest.url).pathname,\n        fetchRequest.signal,\n        key\n      );\n      if (discoverResult.type === \"aborted\") {\n        return;\n      } else if (discoverResult.type === \"error\") {\n        setFetcherError(key, routeId, discoverResult.error, { flushSync });\n        return;\n      } else if (!discoverResult.matches) {\n        setFetcherError(\n          key,\n          routeId,\n          getInternalRouterError(404, { pathname: path }),\n          { flushSync }\n        );\n        return;\n      } else {\n        matches = discoverResult.matches;\n      }\n    }\n    let match = getTargetMatch(matches, path);\n    fetchControllers.set(key, abortController);\n    let originatingLoadId = incrementingLoadId;\n    let dsMatches = getTargetedDataStrategyMatches(\n      mapRouteProperties2,\n      manifest,\n      fetchRequest,\n      matches,\n      match,\n      hydrationRouteProperties2,\n      scopedContext\n    );\n    let results = await callDataStrategy(\n      fetchRequest,\n      dsMatches,\n      scopedContext,\n      key\n    );\n    let result = results[match.route.id];\n    if (fetchControllers.get(key) === abortController) {\n      fetchControllers.delete(key);\n    }\n    if (fetchRequest.signal.aborted) {\n      return;\n    }\n    if (fetchersQueuedForDeletion.has(key)) {\n      updateFetcherState(key, getDoneFetcher(void 0));\n      return;\n    }\n    if (isRedirectResult(result)) {\n      if (pendingNavigationLoadId > originatingLoadId) {\n        updateFetcherState(key, getDoneFetcher(void 0));\n        return;\n      } else {\n        fetchRedirectIds.add(key);\n        await startRedirectNavigation(fetchRequest, result, false, {\n          preventScrollReset\n        });\n        return;\n      }\n    }\n    if (isErrorResult(result)) {\n      setFetcherError(key, routeId, result.error);\n      return;\n    }\n    updateFetcherState(key, getDoneFetcher(result.data));\n  }\n  async function startRedirectNavigation(request, redirect2, isNavigation, {\n    submission,\n    fetcherSubmission,\n    preventScrollReset,\n    replace: replace2\n  } = {}) {\n    if (!isNavigation) {\n      pendingPopstateNavigationDfd?.resolve();\n      pendingPopstateNavigationDfd = null;\n    }\n    if (redirect2.response.headers.has(\"X-Remix-Revalidate\")) {\n      isRevalidationRequired = true;\n    }\n    let location = redirect2.response.headers.get(\"Location\");\n    invariant(location, \"Expected a Location header on the redirect Response\");\n    location = normalizeRedirectLocation(\n      location,\n      new URL(request.url),\n      basename,\n      init.history\n    );\n    let redirectLocation = createLocation(state.location, location, {\n      _isRedirect: true\n    });\n    if (isBrowser3) {\n      let isDocumentReload = false;\n      if (redirect2.response.headers.has(\"X-Remix-Reload-Document\")) {\n        isDocumentReload = true;\n      } else if (isAbsoluteUrl(location)) {\n        const url = createBrowserURLImpl(location, true);\n        isDocumentReload = // Hard reload if it's an absolute URL to a new origin\n        url.origin !== routerWindow.location.origin || // Hard reload if it's an absolute URL that does not match our basename\n        stripBasename(url.pathname, basename) == null;\n      }\n      if (isDocumentReload) {\n        if (replace2) {\n          routerWindow.location.replace(location);\n        } else {\n          routerWindow.location.assign(location);\n        }\n        return;\n      }\n    }\n    pendingNavigationController = null;\n    let redirectNavigationType = replace2 === true || redirect2.response.headers.has(\"X-Remix-Replace\") ? \"REPLACE\" /* Replace */ : \"PUSH\" /* Push */;\n    let { formMethod, formAction, formEncType } = state.navigation;\n    if (!submission && !fetcherSubmission && formMethod && formAction && formEncType) {\n      submission = getSubmissionFromNavigation(state.navigation);\n    }\n    let activeSubmission = submission || fetcherSubmission;\n    if (redirectPreserveMethodStatusCodes.has(redirect2.response.status) && activeSubmission && isMutationMethod(activeSubmission.formMethod)) {\n      await startNavigation(redirectNavigationType, redirectLocation, {\n        submission: {\n          ...activeSubmission,\n          formAction: location\n        },\n        // Preserve these flags across redirects\n        preventScrollReset: preventScrollReset || pendingPreventScrollReset,\n        enableViewTransition: isNavigation ? pendingViewTransitionEnabled : void 0\n      });\n    } else {\n      let overrideNavigation = getLoadingNavigation(\n        redirectLocation,\n        submission\n      );\n      await startNavigation(redirectNavigationType, redirectLocation, {\n        overrideNavigation,\n        // Send fetcher submissions through for shouldRevalidate\n        fetcherSubmission,\n        // Preserve these flags across redirects\n        preventScrollReset: preventScrollReset || pendingPreventScrollReset,\n        enableViewTransition: isNavigation ? pendingViewTransitionEnabled : void 0\n      });\n    }\n  }\n  async function callDataStrategy(request, matches, scopedContext, fetcherKey) {\n    let results;\n    let dataResults = {};\n    try {\n      results = await callDataStrategyImpl(\n        dataStrategyImpl,\n        request,\n        matches,\n        fetcherKey,\n        scopedContext,\n        false\n      );\n    } catch (e) {\n      matches.filter((m) => m.shouldLoad).forEach((m) => {\n        dataResults[m.route.id] = {\n          type: \"error\" /* error */,\n          error: e\n        };\n      });\n      return dataResults;\n    }\n    if (request.signal.aborted) {\n      return dataResults;\n    }\n    if (!isMutationMethod(request.method)) {\n      for (let match of matches) {\n        if (results[match.route.id]?.type === \"error\" /* error */) {\n          break;\n        }\n        if (!results.hasOwnProperty(match.route.id) && !state.loaderData.hasOwnProperty(match.route.id) && (!state.errors || !state.errors.hasOwnProperty(match.route.id)) && match.shouldCallHandler()) {\n          results[match.route.id] = {\n            type: \"error\" /* error */,\n            result: new Error(\n              `No result returned from dataStrategy for route ${match.route.id}`\n            )\n          };\n        }\n      }\n    }\n    for (let [routeId, result] of Object.entries(results)) {\n      if (isRedirectDataStrategyResult(result)) {\n        let response = result.result;\n        dataResults[routeId] = {\n          type: \"redirect\" /* redirect */,\n          response: normalizeRelativeRoutingRedirectResponse(\n            response,\n            request,\n            routeId,\n            matches,\n            basename\n          )\n        };\n      } else {\n        dataResults[routeId] = await convertDataStrategyResultToDataResult(result);\n      }\n    }\n    return dataResults;\n  }\n  async function callLoadersAndMaybeResolveData(matches, fetchersToLoad, request, scopedContext) {\n    let loaderResultsPromise = callDataStrategy(\n      request,\n      matches,\n      scopedContext,\n      null\n    );\n    let fetcherResultsPromise = Promise.all(\n      fetchersToLoad.map(async (f) => {\n        if (f.matches && f.match && f.request && f.controller) {\n          let results = await callDataStrategy(\n            f.request,\n            f.matches,\n            scopedContext,\n            f.key\n          );\n          let result = results[f.match.route.id];\n          return { [f.key]: result };\n        } else {\n          return Promise.resolve({\n            [f.key]: {\n              type: \"error\" /* error */,\n              error: getInternalRouterError(404, {\n                pathname: f.path\n              })\n            }\n          });\n        }\n      })\n    );\n    let loaderResults = await loaderResultsPromise;\n    let fetcherResults = (await fetcherResultsPromise).reduce(\n      (acc, r) => Object.assign(acc, r),\n      {}\n    );\n    return {\n      loaderResults,\n      fetcherResults\n    };\n  }\n  function interruptActiveLoads() {\n    isRevalidationRequired = true;\n    fetchLoadMatches.forEach((_, key) => {\n      if (fetchControllers.has(key)) {\n        cancelledFetcherLoads.add(key);\n      }\n      abortFetcher(key);\n    });\n  }\n  function updateFetcherState(key, fetcher, opts = {}) {\n    state.fetchers.set(key, fetcher);\n    updateState(\n      { fetchers: new Map(state.fetchers) },\n      { flushSync: (opts && opts.flushSync) === true }\n    );\n  }\n  function setFetcherError(key, routeId, error, opts = {}) {\n    let boundaryMatch = findNearestBoundary(state.matches, routeId);\n    deleteFetcher(key);\n    updateState(\n      {\n        errors: {\n          [boundaryMatch.route.id]: error\n        },\n        fetchers: new Map(state.fetchers)\n      },\n      { flushSync: (opts && opts.flushSync) === true }\n    );\n  }\n  function getFetcher(key) {\n    activeFetchers.set(key, (activeFetchers.get(key) || 0) + 1);\n    if (fetchersQueuedForDeletion.has(key)) {\n      fetchersQueuedForDeletion.delete(key);\n    }\n    return state.fetchers.get(key) || IDLE_FETCHER;\n  }\n  function resetFetcher(key, opts) {\n    abortFetcher(key, opts?.reason);\n    updateFetcherState(key, getDoneFetcher(null));\n  }\n  function deleteFetcher(key) {\n    let fetcher = state.fetchers.get(key);\n    if (fetchControllers.has(key) && !(fetcher && fetcher.state === \"loading\" && fetchReloadIds.has(key))) {\n      abortFetcher(key);\n    }\n    fetchLoadMatches.delete(key);\n    fetchReloadIds.delete(key);\n    fetchRedirectIds.delete(key);\n    fetchersQueuedForDeletion.delete(key);\n    cancelledFetcherLoads.delete(key);\n    state.fetchers.delete(key);\n  }\n  function queueFetcherForDeletion(key) {\n    let count = (activeFetchers.get(key) || 0) - 1;\n    if (count <= 0) {\n      activeFetchers.delete(key);\n      fetchersQueuedForDeletion.add(key);\n    } else {\n      activeFetchers.set(key, count);\n    }\n    updateState({ fetchers: new Map(state.fetchers) });\n  }\n  function abortFetcher(key, reason) {\n    let controller = fetchControllers.get(key);\n    if (controller) {\n      controller.abort(reason);\n      fetchControllers.delete(key);\n    }\n  }\n  function markFetchersDone(keys) {\n    for (let key of keys) {\n      let fetcher = getFetcher(key);\n      let doneFetcher = getDoneFetcher(fetcher.data);\n      state.fetchers.set(key, doneFetcher);\n    }\n  }\n  function markFetchRedirectsDone() {\n    let doneKeys = [];\n    let updatedFetchers = false;\n    for (let key of fetchRedirectIds) {\n      let fetcher = state.fetchers.get(key);\n      invariant(fetcher, `Expected fetcher: ${key}`);\n      if (fetcher.state === \"loading\") {\n        fetchRedirectIds.delete(key);\n        doneKeys.push(key);\n        updatedFetchers = true;\n      }\n    }\n    markFetchersDone(doneKeys);\n    return updatedFetchers;\n  }\n  function abortStaleFetchLoads(landedId) {\n    let yeetedKeys = [];\n    for (let [key, id] of fetchReloadIds) {\n      if (id < landedId) {\n        let fetcher = state.fetchers.get(key);\n        invariant(fetcher, `Expected fetcher: ${key}`);\n        if (fetcher.state === \"loading\") {\n          abortFetcher(key);\n          fetchReloadIds.delete(key);\n          yeetedKeys.push(key);\n        }\n      }\n    }\n    markFetchersDone(yeetedKeys);\n    return yeetedKeys.length > 0;\n  }\n  function getBlocker(key, fn) {\n    let blocker = state.blockers.get(key) || IDLE_BLOCKER;\n    if (blockerFunctions.get(key) !== fn) {\n      blockerFunctions.set(key, fn);\n    }\n    return blocker;\n  }\n  function deleteBlocker(key) {\n    state.blockers.delete(key);\n    blockerFunctions.delete(key);\n  }\n  function updateBlocker(key, newBlocker) {\n    let blocker = state.blockers.get(key) || IDLE_BLOCKER;\n    invariant(\n      blocker.state === \"unblocked\" && newBlocker.state === \"blocked\" || blocker.state === \"blocked\" && newBlocker.state === \"blocked\" || blocker.state === \"blocked\" && newBlocker.state === \"proceeding\" || blocker.state === \"blocked\" && newBlocker.state === \"unblocked\" || blocker.state === \"proceeding\" && newBlocker.state === \"unblocked\",\n      `Invalid blocker state transition: ${blocker.state} -> ${newBlocker.state}`\n    );\n    let blockers = new Map(state.blockers);\n    blockers.set(key, newBlocker);\n    updateState({ blockers });\n  }\n  function shouldBlockNavigation({\n    currentLocation,\n    nextLocation,\n    historyAction\n  }) {\n    if (blockerFunctions.size === 0) {\n      return;\n    }\n    if (blockerFunctions.size > 1) {\n      warning(false, \"A router only supports one blocker at a time\");\n    }\n    let entries = Array.from(blockerFunctions.entries());\n    let [blockerKey, blockerFunction] = entries[entries.length - 1];\n    let blocker = state.blockers.get(blockerKey);\n    if (blocker && blocker.state === \"proceeding\") {\n      return;\n    }\n    if (blockerFunction({ currentLocation, nextLocation, historyAction })) {\n      return blockerKey;\n    }\n  }\n  function handleNavigational404(pathname) {\n    let error = getInternalRouterError(404, { pathname });\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let { matches, route } = getShortCircuitMatches(routesToUse);\n    return { notFoundMatches: matches, route, error };\n  }\n  function enableScrollRestoration(positions, getPosition, getKey) {\n    savedScrollPositions2 = positions;\n    getScrollPosition = getPosition;\n    getScrollRestorationKey2 = getKey || null;\n    if (!initialScrollRestored && state.navigation === IDLE_NAVIGATION) {\n      initialScrollRestored = true;\n      let y = getSavedScrollPosition(state.location, state.matches);\n      if (y != null) {\n        updateState({ restoreScrollPosition: y });\n      }\n    }\n    return () => {\n      savedScrollPositions2 = null;\n      getScrollPosition = null;\n      getScrollRestorationKey2 = null;\n    };\n  }\n  function getScrollKey(location, matches) {\n    if (getScrollRestorationKey2) {\n      let key = getScrollRestorationKey2(\n        location,\n        matches.map((m) => convertRouteMatchToUiMatch(m, state.loaderData))\n      );\n      return key || location.key;\n    }\n    return location.key;\n  }\n  function saveScrollPosition(location, matches) {\n    if (savedScrollPositions2 && getScrollPosition) {\n      let key = getScrollKey(location, matches);\n      savedScrollPositions2[key] = getScrollPosition();\n    }\n  }\n  function getSavedScrollPosition(location, matches) {\n    if (savedScrollPositions2) {\n      let key = getScrollKey(location, matches);\n      let y = savedScrollPositions2[key];\n      if (typeof y === \"number\") {\n        return y;\n      }\n    }\n    return null;\n  }\n  function checkFogOfWar(matches, routesToUse, pathname) {\n    if (init.patchRoutesOnNavigation) {\n      if (!matches) {\n        let fogMatches = matchRoutesImpl(\n          routesToUse,\n          pathname,\n          basename,\n          true\n        );\n        return { active: true, matches: fogMatches || [] };\n      } else {\n        if (Object.keys(matches[0].params).length > 0) {\n          let partialMatches = matchRoutesImpl(\n            routesToUse,\n            pathname,\n            basename,\n            true\n          );\n          return { active: true, matches: partialMatches };\n        }\n      }\n    }\n    return { active: false, matches: null };\n  }\n  async function discoverRoutes(matches, pathname, signal, fetcherKey) {\n    if (!init.patchRoutesOnNavigation) {\n      return { type: \"success\", matches };\n    }\n    let partialMatches = matches;\n    while (true) {\n      let isNonHMR = inFlightDataRoutes == null;\n      let routesToUse = inFlightDataRoutes || dataRoutes;\n      let localManifest = manifest;\n      try {\n        await init.patchRoutesOnNavigation({\n          signal,\n          path: pathname,\n          matches: partialMatches,\n          fetcherKey,\n          patch: (routeId, children) => {\n            if (signal.aborted) return;\n            patchRoutesImpl(\n              routeId,\n              children,\n              routesToUse,\n              localManifest,\n              mapRouteProperties2,\n              false\n            );\n          }\n        });\n      } catch (e) {\n        return { type: \"error\", error: e, partialMatches };\n      } finally {\n        if (isNonHMR && !signal.aborted) {\n          dataRoutes = [...dataRoutes];\n        }\n      }\n      if (signal.aborted) {\n        return { type: \"aborted\" };\n      }\n      let newMatches = matchRoutes(routesToUse, pathname, basename);\n      let newPartialMatches = null;\n      if (newMatches) {\n        if (Object.keys(newMatches[0].params).length === 0) {\n          return { type: \"success\", matches: newMatches };\n        } else {\n          newPartialMatches = matchRoutesImpl(\n            routesToUse,\n            pathname,\n            basename,\n            true\n          );\n          let matchedDeeper = newPartialMatches && partialMatches.length < newPartialMatches.length && compareMatches(\n            partialMatches,\n            newPartialMatches.slice(0, partialMatches.length)\n          );\n          if (!matchedDeeper) {\n            return { type: \"success\", matches: newMatches };\n          }\n        }\n      }\n      if (!newPartialMatches) {\n        newPartialMatches = matchRoutesImpl(\n          routesToUse,\n          pathname,\n          basename,\n          true\n        );\n      }\n      if (!newPartialMatches || compareMatches(partialMatches, newPartialMatches)) {\n        return { type: \"success\", matches: null };\n      }\n      partialMatches = newPartialMatches;\n    }\n  }\n  function compareMatches(a, b) {\n    return a.length === b.length && a.every((m, i) => m.route.id === b[i].route.id);\n  }\n  function _internalSetRoutes(newRoutes) {\n    manifest = {};\n    inFlightDataRoutes = convertRoutesToDataRoutes(\n      newRoutes,\n      mapRouteProperties2,\n      void 0,\n      manifest\n    );\n  }\n  function patchRoutes(routeId, children, unstable_allowElementMutations = false) {\n    let isNonHMR = inFlightDataRoutes == null;\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    patchRoutesImpl(\n      routeId,\n      children,\n      routesToUse,\n      manifest,\n      mapRouteProperties2,\n      unstable_allowElementMutations\n    );\n    if (isNonHMR) {\n      dataRoutes = [...dataRoutes];\n      updateState({});\n    }\n  }\n  router = {\n    get basename() {\n      return basename;\n    },\n    get future() {\n      return future;\n    },\n    get state() {\n      return state;\n    },\n    get routes() {\n      return dataRoutes;\n    },\n    get window() {\n      return routerWindow;\n    },\n    initialize,\n    subscribe,\n    enableScrollRestoration,\n    navigate,\n    fetch: fetch2,\n    revalidate,\n    // Passthrough to history-aware createHref used by useHref so we get proper\n    // hash-aware URLs in DOM paths\n    createHref: (to) => init.history.createHref(to),\n    encodeLocation: (to) => init.history.encodeLocation(to),\n    getFetcher,\n    resetFetcher,\n    deleteFetcher: queueFetcherForDeletion,\n    dispose,\n    getBlocker,\n    deleteBlocker,\n    patchRoutes,\n    _internalFetchControllers: fetchControllers,\n    // TODO: Remove setRoutes, it's temporary to avoid dealing with\n    // updating the tree while validating the update algorithm.\n    _internalSetRoutes,\n    _internalSetStateDoNotUseOrYouWillBreakYourApp(newState) {\n      updateState(newState);\n    }\n  };\n  if (init.unstable_instrumentations) {\n    router = instrumentClientSideRouter(\n      router,\n      init.unstable_instrumentations.map((i) => i.router).filter(Boolean)\n    );\n  }\n  return router;\n}\nfunction createStaticHandler(routes, opts) {\n  invariant(\n    routes.length > 0,\n    \"You must provide a non-empty routes array to createStaticHandler\"\n  );\n  let manifest = {};\n  let basename = (opts ? opts.basename : null) || \"/\";\n  let _mapRouteProperties = opts?.mapRouteProperties || defaultMapRouteProperties;\n  let mapRouteProperties2 = _mapRouteProperties;\n  if (opts?.unstable_instrumentations) {\n    let instrumentations = opts.unstable_instrumentations;\n    mapRouteProperties2 = (route) => {\n      return {\n        ..._mapRouteProperties(route),\n        ...getRouteInstrumentationUpdates(\n          instrumentations.map((i) => i.route).filter(Boolean),\n          route\n        )\n      };\n    };\n  }\n  let dataRoutes = convertRoutesToDataRoutes(\n    routes,\n    mapRouteProperties2,\n    void 0,\n    manifest\n  );\n  async function query(request, {\n    requestContext,\n    filterMatchesToLoad,\n    skipLoaderErrorBubbling,\n    skipRevalidation,\n    dataStrategy,\n    generateMiddlewareResponse\n  } = {}) {\n    let url = new URL(request.url);\n    let method = request.method;\n    let location = createLocation(\"\", createPath(url), null, \"default\");\n    let matches = matchRoutes(dataRoutes, location, basename);\n    requestContext = requestContext != null ? requestContext : new RouterContextProvider();\n    if (!isValidMethod(method) && method !== \"HEAD\") {\n      let error = getInternalRouterError(405, { method });\n      let { matches: methodNotAllowedMatches, route } = getShortCircuitMatches(dataRoutes);\n      let staticContext = {\n        basename,\n        location,\n        matches: methodNotAllowedMatches,\n        loaderData: {},\n        actionData: null,\n        errors: {\n          [route.id]: error\n        },\n        statusCode: error.status,\n        loaderHeaders: {},\n        actionHeaders: {}\n      };\n      return generateMiddlewareResponse ? generateMiddlewareResponse(() => Promise.resolve(staticContext)) : staticContext;\n    } else if (!matches) {\n      let error = getInternalRouterError(404, { pathname: location.pathname });\n      let { matches: notFoundMatches, route } = getShortCircuitMatches(dataRoutes);\n      let staticContext = {\n        basename,\n        location,\n        matches: notFoundMatches,\n        loaderData: {},\n        actionData: null,\n        errors: {\n          [route.id]: error\n        },\n        statusCode: error.status,\n        loaderHeaders: {},\n        actionHeaders: {}\n      };\n      return generateMiddlewareResponse ? generateMiddlewareResponse(() => Promise.resolve(staticContext)) : staticContext;\n    }\n    if (generateMiddlewareResponse) {\n      invariant(\n        requestContext instanceof RouterContextProvider,\n        \"When using middleware in `staticHandler.query()`, any provided `requestContext` must be an instance of `RouterContextProvider`\"\n      );\n      try {\n        await loadLazyMiddlewareForMatches(\n          matches,\n          manifest,\n          mapRouteProperties2\n        );\n        let renderedStaticContext;\n        let response = await runServerMiddlewarePipeline(\n          {\n            request,\n            unstable_pattern: getRoutePattern(matches),\n            matches,\n            params: matches[0].params,\n            // If we're calling middleware then it must be enabled so we can cast\n            // this to the proper type knowing it's not an `AppLoadContext`\n            context: requestContext\n          },\n          async () => {\n            let res = await generateMiddlewareResponse(\n              async (revalidationRequest, opts2 = {}) => {\n                let result2 = await queryImpl(\n                  revalidationRequest,\n                  location,\n                  matches,\n                  requestContext,\n                  dataStrategy || null,\n                  skipLoaderErrorBubbling === true,\n                  null,\n                  \"filterMatchesToLoad\" in opts2 ? opts2.filterMatchesToLoad ?? null : filterMatchesToLoad ?? null,\n                  skipRevalidation === true\n                );\n                if (isResponse(result2)) {\n                  return result2;\n                }\n                renderedStaticContext = { location, basename, ...result2 };\n                return renderedStaticContext;\n              }\n            );\n            return res;\n          },\n          async (error, routeId) => {\n            if (isRedirectResponse(error)) {\n              return error;\n            }\n            if (isResponse(error)) {\n              try {\n                error = new ErrorResponseImpl(\n                  error.status,\n                  error.statusText,\n                  await parseResponseBody(error)\n                );\n              } catch (e) {\n                error = e;\n              }\n            }\n            if (isDataWithResponseInit(error)) {\n              error = dataWithResponseInitToErrorResponse(error);\n            }\n            if (renderedStaticContext) {\n              if (routeId in renderedStaticContext.loaderData) {\n                renderedStaticContext.loaderData[routeId] = void 0;\n              }\n              let staticContext = getStaticContextFromError(\n                dataRoutes,\n                renderedStaticContext,\n                error,\n                skipLoaderErrorBubbling ? routeId : findNearestBoundary(matches, routeId).route.id\n              );\n              return generateMiddlewareResponse(\n                () => Promise.resolve(staticContext)\n              );\n            } else {\n              let boundaryRouteId = skipLoaderErrorBubbling ? routeId : findNearestBoundary(\n                matches,\n                matches.find(\n                  (m) => m.route.id === routeId || m.route.loader\n                )?.route.id || routeId\n              ).route.id;\n              let staticContext = {\n                matches,\n                location,\n                basename,\n                loaderData: {},\n                actionData: null,\n                errors: {\n                  [boundaryRouteId]: error\n                },\n                statusCode: isRouteErrorResponse(error) ? error.status : 500,\n                actionHeaders: {},\n                loaderHeaders: {}\n              };\n              return generateMiddlewareResponse(\n                () => Promise.resolve(staticContext)\n              );\n            }\n          }\n        );\n        invariant(isResponse(response), \"Expected a response in query()\");\n        return response;\n      } catch (e) {\n        if (isResponse(e)) {\n          return e;\n        }\n        throw e;\n      }\n    }\n    let result = await queryImpl(\n      request,\n      location,\n      matches,\n      requestContext,\n      dataStrategy || null,\n      skipLoaderErrorBubbling === true,\n      null,\n      filterMatchesToLoad || null,\n      skipRevalidation === true\n    );\n    if (isResponse(result)) {\n      return result;\n    }\n    return { location, basename, ...result };\n  }\n  async function queryRoute(request, {\n    routeId,\n    requestContext,\n    dataStrategy,\n    generateMiddlewareResponse\n  } = {}) {\n    let url = new URL(request.url);\n    let method = request.method;\n    let location = createLocation(\"\", createPath(url), null, \"default\");\n    let matches = matchRoutes(dataRoutes, location, basename);\n    requestContext = requestContext != null ? requestContext : new RouterContextProvider();\n    if (!isValidMethod(method) && method !== \"HEAD\" && method !== \"OPTIONS\") {\n      throw getInternalRouterError(405, { method });\n    } else if (!matches) {\n      throw getInternalRouterError(404, { pathname: location.pathname });\n    }\n    let match = routeId ? matches.find((m) => m.route.id === routeId) : getTargetMatch(matches, location);\n    if (routeId && !match) {\n      throw getInternalRouterError(403, {\n        pathname: location.pathname,\n        routeId\n      });\n    } else if (!match) {\n      throw getInternalRouterError(404, { pathname: location.pathname });\n    }\n    if (generateMiddlewareResponse) {\n      invariant(\n        requestContext instanceof RouterContextProvider,\n        \"When using middleware in `staticHandler.queryRoute()`, any provided `requestContext` must be an instance of `RouterContextProvider`\"\n      );\n      await loadLazyMiddlewareForMatches(matches, manifest, mapRouteProperties2);\n      let response = await runServerMiddlewarePipeline(\n        {\n          request,\n          unstable_pattern: getRoutePattern(matches),\n          matches,\n          params: matches[0].params,\n          // If we're calling middleware then it must be enabled so we can cast\n          // this to the proper type knowing it's not an `AppLoadContext`\n          context: requestContext\n        },\n        async () => {\n          let res = await generateMiddlewareResponse(\n            async (innerRequest) => {\n              let result2 = await queryImpl(\n                innerRequest,\n                location,\n                matches,\n                requestContext,\n                dataStrategy || null,\n                false,\n                match,\n                null,\n                false\n              );\n              let processed = handleQueryResult(result2);\n              return isResponse(processed) ? processed : typeof processed === \"string\" ? new Response(processed) : Response.json(processed);\n            }\n          );\n          return res;\n        },\n        (error) => {\n          if (isDataWithResponseInit(error)) {\n            return Promise.resolve(dataWithResponseInitToResponse(error));\n          }\n          if (isResponse(error)) {\n            return Promise.resolve(error);\n          }\n          throw error;\n        }\n      );\n      return response;\n    }\n    let result = await queryImpl(\n      request,\n      location,\n      matches,\n      requestContext,\n      dataStrategy || null,\n      false,\n      match,\n      null,\n      false\n    );\n    return handleQueryResult(result);\n    function handleQueryResult(result2) {\n      if (isResponse(result2)) {\n        return result2;\n      }\n      let error = result2.errors ? Object.values(result2.errors)[0] : void 0;\n      if (error !== void 0) {\n        throw error;\n      }\n      if (result2.actionData) {\n        return Object.values(result2.actionData)[0];\n      }\n      if (result2.loaderData) {\n        return Object.values(result2.loaderData)[0];\n      }\n      return void 0;\n    }\n  }\n  async function queryImpl(request, location, matches, requestContext, dataStrategy, skipLoaderErrorBubbling, routeMatch, filterMatchesToLoad, skipRevalidation) {\n    invariant(\n      request.signal,\n      \"query()/queryRoute() requests must contain an AbortController signal\"\n    );\n    try {\n      if (isMutationMethod(request.method)) {\n        let result2 = await submit(\n          request,\n          matches,\n          routeMatch || getTargetMatch(matches, location),\n          requestContext,\n          dataStrategy,\n          skipLoaderErrorBubbling,\n          routeMatch != null,\n          filterMatchesToLoad,\n          skipRevalidation\n        );\n        return result2;\n      }\n      let result = await loadRouteData(\n        request,\n        matches,\n        requestContext,\n        dataStrategy,\n        skipLoaderErrorBubbling,\n        routeMatch,\n        filterMatchesToLoad\n      );\n      return isResponse(result) ? result : {\n        ...result,\n        actionData: null,\n        actionHeaders: {}\n      };\n    } catch (e) {\n      if (isDataStrategyResult(e) && isResponse(e.result)) {\n        if (e.type === \"error\" /* error */) {\n          throw e.result;\n        }\n        return e.result;\n      }\n      if (isRedirectResponse(e)) {\n        return e;\n      }\n      throw e;\n    }\n  }\n  async function submit(request, matches, actionMatch, requestContext, dataStrategy, skipLoaderErrorBubbling, isRouteRequest, filterMatchesToLoad, skipRevalidation) {\n    let result;\n    if (!actionMatch.route.action && !actionMatch.route.lazy) {\n      let error = getInternalRouterError(405, {\n        method: request.method,\n        pathname: new URL(request.url).pathname,\n        routeId: actionMatch.route.id\n      });\n      if (isRouteRequest) {\n        throw error;\n      }\n      result = {\n        type: \"error\" /* error */,\n        error\n      };\n    } else {\n      let dsMatches = getTargetedDataStrategyMatches(\n        mapRouteProperties2,\n        manifest,\n        request,\n        matches,\n        actionMatch,\n        [],\n        requestContext\n      );\n      let results = await callDataStrategy(\n        request,\n        dsMatches,\n        isRouteRequest,\n        requestContext,\n        dataStrategy\n      );\n      result = results[actionMatch.route.id];\n      if (request.signal.aborted) {\n        throwStaticHandlerAbortedError(request, isRouteRequest);\n      }\n    }\n    if (isRedirectResult(result)) {\n      throw new Response(null, {\n        status: result.response.status,\n        headers: {\n          Location: result.response.headers.get(\"Location\")\n        }\n      });\n    }\n    if (isRouteRequest) {\n      if (isErrorResult(result)) {\n        throw result.error;\n      }\n      return {\n        matches: [actionMatch],\n        loaderData: {},\n        actionData: { [actionMatch.route.id]: result.data },\n        errors: null,\n        // Note: statusCode + headers are unused here since queryRoute will\n        // return the raw Response or value\n        statusCode: 200,\n        loaderHeaders: {},\n        actionHeaders: {}\n      };\n    }\n    if (skipRevalidation) {\n      if (isErrorResult(result)) {\n        let boundaryMatch = skipLoaderErrorBubbling ? actionMatch : findNearestBoundary(matches, actionMatch.route.id);\n        return {\n          statusCode: isRouteErrorResponse(result.error) ? result.error.status : result.statusCode != null ? result.statusCode : 500,\n          actionData: null,\n          actionHeaders: {\n            ...result.headers ? { [actionMatch.route.id]: result.headers } : {}\n          },\n          matches,\n          loaderData: {},\n          errors: {\n            [boundaryMatch.route.id]: result.error\n          },\n          loaderHeaders: {}\n        };\n      } else {\n        return {\n          actionData: {\n            [actionMatch.route.id]: result.data\n          },\n          actionHeaders: result.headers ? { [actionMatch.route.id]: result.headers } : {},\n          matches,\n          loaderData: {},\n          errors: null,\n          statusCode: result.statusCode || 200,\n          loaderHeaders: {}\n        };\n      }\n    }\n    let loaderRequest = new Request(request.url, {\n      headers: request.headers,\n      redirect: request.redirect,\n      signal: request.signal\n    });\n    if (isErrorResult(result)) {\n      let boundaryMatch = skipLoaderErrorBubbling ? actionMatch : findNearestBoundary(matches, actionMatch.route.id);\n      let handlerContext2 = await loadRouteData(\n        loaderRequest,\n        matches,\n        requestContext,\n        dataStrategy,\n        skipLoaderErrorBubbling,\n        null,\n        filterMatchesToLoad,\n        [boundaryMatch.route.id, result]\n      );\n      return {\n        ...handlerContext2,\n        statusCode: isRouteErrorResponse(result.error) ? result.error.status : result.statusCode != null ? result.statusCode : 500,\n        actionData: null,\n        actionHeaders: {\n          ...result.headers ? { [actionMatch.route.id]: result.headers } : {}\n        }\n      };\n    }\n    let handlerContext = await loadRouteData(\n      loaderRequest,\n      matches,\n      requestContext,\n      dataStrategy,\n      skipLoaderErrorBubbling,\n      null,\n      filterMatchesToLoad\n    );\n    return {\n      ...handlerContext,\n      actionData: {\n        [actionMatch.route.id]: result.data\n      },\n      // action status codes take precedence over loader status codes\n      ...result.statusCode ? { statusCode: result.statusCode } : {},\n      actionHeaders: result.headers ? { [actionMatch.route.id]: result.headers } : {}\n    };\n  }\n  async function loadRouteData(request, matches, requestContext, dataStrategy, skipLoaderErrorBubbling, routeMatch, filterMatchesToLoad, pendingActionResult) {\n    let isRouteRequest = routeMatch != null;\n    if (isRouteRequest && !routeMatch?.route.loader && !routeMatch?.route.lazy) {\n      throw getInternalRouterError(400, {\n        method: request.method,\n        pathname: new URL(request.url).pathname,\n        routeId: routeMatch?.route.id\n      });\n    }\n    let dsMatches;\n    if (routeMatch) {\n      dsMatches = getTargetedDataStrategyMatches(\n        mapRouteProperties2,\n        manifest,\n        request,\n        matches,\n        routeMatch,\n        [],\n        requestContext\n      );\n    } else {\n      let maxIdx = pendingActionResult && isErrorResult(pendingActionResult[1]) ? (\n        // Up to but not including the boundary\n        matches.findIndex((m) => m.route.id === pendingActionResult[0]) - 1\n      ) : void 0;\n      let pattern = getRoutePattern(matches);\n      dsMatches = matches.map((match, index) => {\n        if (maxIdx != null && index > maxIdx) {\n          return getDataStrategyMatch(\n            mapRouteProperties2,\n            manifest,\n            request,\n            pattern,\n            match,\n            [],\n            requestContext,\n            false\n          );\n        }\n        return getDataStrategyMatch(\n          mapRouteProperties2,\n          manifest,\n          request,\n          pattern,\n          match,\n          [],\n          requestContext,\n          (match.route.loader || match.route.lazy) != null && (!filterMatchesToLoad || filterMatchesToLoad(match))\n        );\n      });\n    }\n    if (!dataStrategy && !dsMatches.some((m) => m.shouldLoad)) {\n      return {\n        matches,\n        loaderData: {},\n        errors: pendingActionResult && isErrorResult(pendingActionResult[1]) ? {\n          [pendingActionResult[0]]: pendingActionResult[1].error\n        } : null,\n        statusCode: 200,\n        loaderHeaders: {}\n      };\n    }\n    let results = await callDataStrategy(\n      request,\n      dsMatches,\n      isRouteRequest,\n      requestContext,\n      dataStrategy\n    );\n    if (request.signal.aborted) {\n      throwStaticHandlerAbortedError(request, isRouteRequest);\n    }\n    let handlerContext = processRouteLoaderData(\n      matches,\n      results,\n      pendingActionResult,\n      true,\n      skipLoaderErrorBubbling\n    );\n    return {\n      ...handlerContext,\n      matches\n    };\n  }\n  async function callDataStrategy(request, matches, isRouteRequest, requestContext, dataStrategy) {\n    let results = await callDataStrategyImpl(\n      dataStrategy || defaultDataStrategy,\n      request,\n      matches,\n      null,\n      requestContext,\n      true\n    );\n    let dataResults = {};\n    await Promise.all(\n      matches.map(async (match) => {\n        if (!(match.route.id in results)) {\n          return;\n        }\n        let result = results[match.route.id];\n        if (isRedirectDataStrategyResult(result)) {\n          let response = result.result;\n          throw normalizeRelativeRoutingRedirectResponse(\n            response,\n            request,\n            match.route.id,\n            matches,\n            basename\n          );\n        }\n        if (isRouteRequest) {\n          if (isResponse(result.result)) {\n            throw result;\n          } else if (isDataWithResponseInit(result.result)) {\n            throw dataWithResponseInitToResponse(result.result);\n          }\n        }\n        dataResults[match.route.id] = await convertDataStrategyResultToDataResult(result);\n      })\n    );\n    return dataResults;\n  }\n  return {\n    dataRoutes,\n    query,\n    queryRoute\n  };\n}\nfunction getStaticContextFromError(routes, handlerContext, error, boundaryId) {\n  let errorBoundaryId = boundaryId || handlerContext._deepestRenderedBoundaryId || routes[0].id;\n  return {\n    ...handlerContext,\n    statusCode: isRouteErrorResponse(error) ? error.status : 500,\n    errors: {\n      [errorBoundaryId]: error\n    }\n  };\n}\nfunction throwStaticHandlerAbortedError(request, isRouteRequest) {\n  if (request.signal.reason !== void 0) {\n    throw request.signal.reason;\n  }\n  let method = isRouteRequest ? \"queryRoute\" : \"query\";\n  throw new Error(\n    `${method}() call aborted without an \\`AbortSignal.reason\\`: ${request.method} ${request.url}`\n  );\n}\nfunction isSubmissionNavigation(opts) {\n  return opts != null && (\"formData\" in opts && opts.formData != null || \"body\" in opts && opts.body !== void 0);\n}\nfunction normalizeTo(location, matches, basename, to, fromRouteId, relative) {\n  let contextualMatches;\n  let activeRouteMatch;\n  if (fromRouteId) {\n    contextualMatches = [];\n    for (let match of matches) {\n      contextualMatches.push(match);\n      if (match.route.id === fromRouteId) {\n        activeRouteMatch = match;\n        break;\n      }\n    }\n  } else {\n    contextualMatches = matches;\n    activeRouteMatch = matches[matches.length - 1];\n  }\n  let path = resolveTo(\n    to ? to : \".\",\n    getResolveToMatches(contextualMatches),\n    stripBasename(location.pathname, basename) || location.pathname,\n    relative === \"path\"\n  );\n  if (to == null) {\n    path.search = location.search;\n    path.hash = location.hash;\n  }\n  if ((to == null || to === \"\" || to === \".\") && activeRouteMatch) {\n    let nakedIndex = hasNakedIndexQuery(path.search);\n    if (activeRouteMatch.route.index && !nakedIndex) {\n      path.search = path.search ? path.search.replace(/^\\?/, \"?index&\") : \"?index\";\n    } else if (!activeRouteMatch.route.index && nakedIndex) {\n      let params = new URLSearchParams(path.search);\n      let indexValues = params.getAll(\"index\");\n      params.delete(\"index\");\n      indexValues.filter((v) => v).forEach((v) => params.append(\"index\", v));\n      let qs = params.toString();\n      path.search = qs ? `?${qs}` : \"\";\n    }\n  }\n  if (basename !== \"/\") {\n    path.pathname = prependBasename({ basename, pathname: path.pathname });\n  }\n  return createPath(path);\n}\nfunction normalizeNavigateOptions(isFetcher, path, opts) {\n  if (!opts || !isSubmissionNavigation(opts)) {\n    return { path };\n  }\n  if (opts.formMethod && !isValidMethod(opts.formMethod)) {\n    return {\n      path,\n      error: getInternalRouterError(405, { method: opts.formMethod })\n    };\n  }\n  let getInvalidBodyError = () => ({\n    path,\n    error: getInternalRouterError(400, { type: \"invalid-body\" })\n  });\n  let rawFormMethod = opts.formMethod || \"get\";\n  let formMethod = rawFormMethod.toUpperCase();\n  let formAction = stripHashFromPath(path);\n  if (opts.body !== void 0) {\n    if (opts.formEncType === \"text/plain\") {\n      if (!isMutationMethod(formMethod)) {\n        return getInvalidBodyError();\n      }\n      let text = typeof opts.body === \"string\" ? opts.body : opts.body instanceof FormData || opts.body instanceof URLSearchParams ? (\n        // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#plain-text-form-data\n        Array.from(opts.body.entries()).reduce(\n          (acc, [name, value]) => `${acc}${name}=${value}\n`,\n          \"\"\n        )\n      ) : String(opts.body);\n      return {\n        path,\n        submission: {\n          formMethod,\n          formAction,\n          formEncType: opts.formEncType,\n          formData: void 0,\n          json: void 0,\n          text\n        }\n      };\n    } else if (opts.formEncType === \"application/json\") {\n      if (!isMutationMethod(formMethod)) {\n        return getInvalidBodyError();\n      }\n      try {\n        let json = typeof opts.body === \"string\" ? JSON.parse(opts.body) : opts.body;\n        return {\n          path,\n          submission: {\n            formMethod,\n            formAction,\n            formEncType: opts.formEncType,\n            formData: void 0,\n            json,\n            text: void 0\n          }\n        };\n      } catch (e) {\n        return getInvalidBodyError();\n      }\n    }\n  }\n  invariant(\n    typeof FormData === \"function\",\n    \"FormData is not available in this environment\"\n  );\n  let searchParams;\n  let formData;\n  if (opts.formData) {\n    searchParams = convertFormDataToSearchParams(opts.formData);\n    formData = opts.formData;\n  } else if (opts.body instanceof FormData) {\n    searchParams = convertFormDataToSearchParams(opts.body);\n    formData = opts.body;\n  } else if (opts.body instanceof URLSearchParams) {\n    searchParams = opts.body;\n    formData = convertSearchParamsToFormData(searchParams);\n  } else if (opts.body == null) {\n    searchParams = new URLSearchParams();\n    formData = new FormData();\n  } else {\n    try {\n      searchParams = new URLSearchParams(opts.body);\n      formData = convertSearchParamsToFormData(searchParams);\n    } catch (e) {\n      return getInvalidBodyError();\n    }\n  }\n  let submission = {\n    formMethod,\n    formAction,\n    formEncType: opts && opts.formEncType || \"application/x-www-form-urlencoded\",\n    formData,\n    json: void 0,\n    text: void 0\n  };\n  if (isMutationMethod(submission.formMethod)) {\n    return { path, submission };\n  }\n  let parsedPath = parsePath(path);\n  if (isFetcher && parsedPath.search && hasNakedIndexQuery(parsedPath.search)) {\n    searchParams.append(\"index\", \"\");\n  }\n  parsedPath.search = `?${searchParams}`;\n  return { path: createPath(parsedPath), submission };\n}\nfunction getMatchesToLoad(request, scopedContext, mapRouteProperties2, manifest, history, state, matches, submission, location, lazyRoutePropertiesToSkip, initialHydration, isRevalidationRequired, cancelledFetcherLoads, fetchersQueuedForDeletion, fetchLoadMatches, fetchRedirectIds, routesToUse, basename, hasPatchRoutesOnNavigation, pendingActionResult, callSiteDefaultShouldRevalidate) {\n  let actionResult = pendingActionResult ? isErrorResult(pendingActionResult[1]) ? pendingActionResult[1].error : pendingActionResult[1].data : void 0;\n  let currentUrl = history.createURL(state.location);\n  let nextUrl = history.createURL(location);\n  let maxIdx;\n  if (initialHydration && state.errors) {\n    let boundaryId = Object.keys(state.errors)[0];\n    maxIdx = matches.findIndex((m) => m.route.id === boundaryId);\n  } else if (pendingActionResult && isErrorResult(pendingActionResult[1])) {\n    let boundaryId = pendingActionResult[0];\n    maxIdx = matches.findIndex((m) => m.route.id === boundaryId) - 1;\n  }\n  let actionStatus = pendingActionResult ? pendingActionResult[1].statusCode : void 0;\n  let shouldSkipRevalidation = actionStatus && actionStatus >= 400;\n  let baseShouldRevalidateArgs = {\n    currentUrl,\n    currentParams: state.matches[0]?.params || {},\n    nextUrl,\n    nextParams: matches[0].params,\n    ...submission,\n    actionResult,\n    actionStatus\n  };\n  let pattern = getRoutePattern(matches);\n  let dsMatches = matches.map((match, index) => {\n    let { route } = match;\n    let forceShouldLoad = null;\n    if (maxIdx != null && index > maxIdx) {\n      forceShouldLoad = false;\n    } else if (route.lazy) {\n      forceShouldLoad = true;\n    } else if (!routeHasLoaderOrMiddleware(route)) {\n      forceShouldLoad = false;\n    } else if (initialHydration) {\n      forceShouldLoad = shouldLoadRouteOnHydration(\n        route,\n        state.loaderData,\n        state.errors\n      );\n    } else if (isNewLoader(state.loaderData, state.matches[index], match)) {\n      forceShouldLoad = true;\n    }\n    if (forceShouldLoad !== null) {\n      return getDataStrategyMatch(\n        mapRouteProperties2,\n        manifest,\n        request,\n        pattern,\n        match,\n        lazyRoutePropertiesToSkip,\n        scopedContext,\n        forceShouldLoad\n      );\n    }\n    let defaultShouldRevalidate = false;\n    if (typeof callSiteDefaultShouldRevalidate === \"boolean\") {\n      defaultShouldRevalidate = callSiteDefaultShouldRevalidate;\n    } else if (shouldSkipRevalidation) {\n      defaultShouldRevalidate = false;\n    } else if (isRevalidationRequired) {\n      defaultShouldRevalidate = true;\n    } else if (currentUrl.pathname + currentUrl.search === nextUrl.pathname + nextUrl.search) {\n      defaultShouldRevalidate = true;\n    } else if (currentUrl.search !== nextUrl.search) {\n      defaultShouldRevalidate = true;\n    } else if (isNewRouteInstance(state.matches[index], match)) {\n      defaultShouldRevalidate = true;\n    }\n    let shouldRevalidateArgs = {\n      ...baseShouldRevalidateArgs,\n      defaultShouldRevalidate\n    };\n    let shouldLoad = shouldRevalidateLoader(match, shouldRevalidateArgs);\n    return getDataStrategyMatch(\n      mapRouteProperties2,\n      manifest,\n      request,\n      pattern,\n      match,\n      lazyRoutePropertiesToSkip,\n      scopedContext,\n      shouldLoad,\n      shouldRevalidateArgs,\n      callSiteDefaultShouldRevalidate\n    );\n  });\n  let revalidatingFetchers = [];\n  fetchLoadMatches.forEach((f, key) => {\n    if (initialHydration || !matches.some((m) => m.route.id === f.routeId) || fetchersQueuedForDeletion.has(key)) {\n      return;\n    }\n    let fetcher = state.fetchers.get(key);\n    let isMidInitialLoad = fetcher && fetcher.state !== \"idle\" && fetcher.data === void 0;\n    let fetcherMatches = matchRoutes(routesToUse, f.path, basename);\n    if (!fetcherMatches) {\n      if (hasPatchRoutesOnNavigation && isMidInitialLoad) {\n        return;\n      }\n      revalidatingFetchers.push({\n        key,\n        routeId: f.routeId,\n        path: f.path,\n        matches: null,\n        match: null,\n        request: null,\n        controller: null\n      });\n      return;\n    }\n    if (fetchRedirectIds.has(key)) {\n      return;\n    }\n    let fetcherMatch = getTargetMatch(fetcherMatches, f.path);\n    let fetchController = new AbortController();\n    let fetchRequest = createClientSideRequest(\n      history,\n      f.path,\n      fetchController.signal\n    );\n    let fetcherDsMatches = null;\n    if (cancelledFetcherLoads.has(key)) {\n      cancelledFetcherLoads.delete(key);\n      fetcherDsMatches = getTargetedDataStrategyMatches(\n        mapRouteProperties2,\n        manifest,\n        fetchRequest,\n        fetcherMatches,\n        fetcherMatch,\n        lazyRoutePropertiesToSkip,\n        scopedContext\n      );\n    } else if (isMidInitialLoad) {\n      if (isRevalidationRequired) {\n        fetcherDsMatches = getTargetedDataStrategyMatches(\n          mapRouteProperties2,\n          manifest,\n          fetchRequest,\n          fetcherMatches,\n          fetcherMatch,\n          lazyRoutePropertiesToSkip,\n          scopedContext\n        );\n      }\n    } else {\n      let defaultShouldRevalidate;\n      if (typeof callSiteDefaultShouldRevalidate === \"boolean\") {\n        defaultShouldRevalidate = callSiteDefaultShouldRevalidate;\n      } else if (shouldSkipRevalidation) {\n        defaultShouldRevalidate = false;\n      } else {\n        defaultShouldRevalidate = isRevalidationRequired;\n      }\n      let shouldRevalidateArgs = {\n        ...baseShouldRevalidateArgs,\n        defaultShouldRevalidate\n      };\n      if (shouldRevalidateLoader(fetcherMatch, shouldRevalidateArgs)) {\n        fetcherDsMatches = getTargetedDataStrategyMatches(\n          mapRouteProperties2,\n          manifest,\n          fetchRequest,\n          fetcherMatches,\n          fetcherMatch,\n          lazyRoutePropertiesToSkip,\n          scopedContext,\n          shouldRevalidateArgs\n        );\n      }\n    }\n    if (fetcherDsMatches) {\n      revalidatingFetchers.push({\n        key,\n        routeId: f.routeId,\n        path: f.path,\n        matches: fetcherDsMatches,\n        match: fetcherMatch,\n        request: fetchRequest,\n        controller: fetchController\n      });\n    }\n  });\n  return { dsMatches, revalidatingFetchers };\n}\nfunction routeHasLoaderOrMiddleware(route) {\n  return route.loader != null || route.middleware != null && route.middleware.length > 0;\n}\nfunction shouldLoadRouteOnHydration(route, loaderData, errors) {\n  if (route.lazy) {\n    return true;\n  }\n  if (!routeHasLoaderOrMiddleware(route)) {\n    return false;\n  }\n  let hasData = loaderData != null && route.id in loaderData;\n  let hasError = errors != null && errors[route.id] !== void 0;\n  if (!hasData && hasError) {\n    return false;\n  }\n  if (typeof route.loader === \"function\" && route.loader.hydrate === true) {\n    return true;\n  }\n  return !hasData && !hasError;\n}\nfunction isNewLoader(currentLoaderData, currentMatch, match) {\n  let isNew = (\n    // [a] -> [a, b]\n    !currentMatch || // [a, b] -> [a, c]\n    match.route.id !== currentMatch.route.id\n  );\n  let isMissingData = !currentLoaderData.hasOwnProperty(match.route.id);\n  return isNew || isMissingData;\n}\nfunction isNewRouteInstance(currentMatch, match) {\n  let currentPath = currentMatch.route.path;\n  return (\n    // param change for this match, /users/123 -> /users/456\n    currentMatch.pathname !== match.pathname || // splat param changed, which is not present in match.path\n    // e.g. /files/images/avatar.jpg -> files/finances.xls\n    currentPath != null && currentPath.endsWith(\"*\") && currentMatch.params[\"*\"] !== match.params[\"*\"]\n  );\n}\nfunction shouldRevalidateLoader(loaderMatch, arg) {\n  if (loaderMatch.route.shouldRevalidate) {\n    let routeChoice = loaderMatch.route.shouldRevalidate(arg);\n    if (typeof routeChoice === \"boolean\") {\n      return routeChoice;\n    }\n  }\n  return arg.defaultShouldRevalidate;\n}\nfunction patchRoutesImpl(routeId, children, routesToUse, manifest, mapRouteProperties2, allowElementMutations) {\n  let childrenToPatch;\n  if (routeId) {\n    let route = manifest[routeId];\n    invariant(\n      route,\n      `No route found to patch children into: routeId = ${routeId}`\n    );\n    if (!route.children) {\n      route.children = [];\n    }\n    childrenToPatch = route.children;\n  } else {\n    childrenToPatch = routesToUse;\n  }\n  let uniqueChildren = [];\n  let existingChildren = [];\n  children.forEach((newRoute) => {\n    let existingRoute = childrenToPatch.find(\n      (existingRoute2) => isSameRoute(newRoute, existingRoute2)\n    );\n    if (existingRoute) {\n      existingChildren.push({ existingRoute, newRoute });\n    } else {\n      uniqueChildren.push(newRoute);\n    }\n  });\n  if (uniqueChildren.length > 0) {\n    let newRoutes = convertRoutesToDataRoutes(\n      uniqueChildren,\n      mapRouteProperties2,\n      [routeId || \"_\", \"patch\", String(childrenToPatch?.length || \"0\")],\n      manifest\n    );\n    childrenToPatch.push(...newRoutes);\n  }\n  if (allowElementMutations && existingChildren.length > 0) {\n    for (let i = 0; i < existingChildren.length; i++) {\n      let { existingRoute, newRoute } = existingChildren[i];\n      let existingRouteTyped = existingRoute;\n      let [newRouteTyped] = convertRoutesToDataRoutes(\n        [newRoute],\n        mapRouteProperties2,\n        [],\n        // Doesn't matter for mutated routes since they already have an id\n        {},\n        // Don't touch the manifest here since we're updating in place\n        true\n      );\n      Object.assign(existingRouteTyped, {\n        element: newRouteTyped.element ? newRouteTyped.element : existingRouteTyped.element,\n        errorElement: newRouteTyped.errorElement ? newRouteTyped.errorElement : existingRouteTyped.errorElement,\n        hydrateFallbackElement: newRouteTyped.hydrateFallbackElement ? newRouteTyped.hydrateFallbackElement : existingRouteTyped.hydrateFallbackElement\n      });\n    }\n  }\n}\nfunction isSameRoute(newRoute, existingRoute) {\n  if (\"id\" in newRoute && \"id\" in existingRoute && newRoute.id === existingRoute.id) {\n    return true;\n  }\n  if (!(newRoute.index === existingRoute.index && newRoute.path === existingRoute.path && newRoute.caseSensitive === existingRoute.caseSensitive)) {\n    return false;\n  }\n  if ((!newRoute.children || newRoute.children.length === 0) && (!existingRoute.children || existingRoute.children.length === 0)) {\n    return true;\n  }\n  return newRoute.children.every(\n    (aChild, i) => existingRoute.children?.some((bChild) => isSameRoute(aChild, bChild))\n  );\n}\nvar lazyRoutePropertyCache = /* @__PURE__ */ new WeakMap();\nvar loadLazyRouteProperty = ({\n  key,\n  route,\n  manifest,\n  mapRouteProperties: mapRouteProperties2\n}) => {\n  let routeToUpdate = manifest[route.id];\n  invariant(routeToUpdate, \"No route found in manifest\");\n  if (!routeToUpdate.lazy || typeof routeToUpdate.lazy !== \"object\") {\n    return;\n  }\n  let lazyFn = routeToUpdate.lazy[key];\n  if (!lazyFn) {\n    return;\n  }\n  let cache = lazyRoutePropertyCache.get(routeToUpdate);\n  if (!cache) {\n    cache = {};\n    lazyRoutePropertyCache.set(routeToUpdate, cache);\n  }\n  let cachedPromise = cache[key];\n  if (cachedPromise) {\n    return cachedPromise;\n  }\n  let propertyPromise = (async () => {\n    let isUnsupported = isUnsupportedLazyRouteObjectKey(key);\n    let staticRouteValue = routeToUpdate[key];\n    let isStaticallyDefined = staticRouteValue !== void 0 && key !== \"hasErrorBoundary\";\n    if (isUnsupported) {\n      warning(\n        !isUnsupported,\n        \"Route property \" + key + \" is not a supported lazy route property. This property will be ignored.\"\n      );\n      cache[key] = Promise.resolve();\n    } else if (isStaticallyDefined) {\n      warning(\n        false,\n        `Route \"${routeToUpdate.id}\" has a static property \"${key}\" defined. The lazy property will be ignored.`\n      );\n    } else {\n      let value = await lazyFn();\n      if (value != null) {\n        Object.assign(routeToUpdate, { [key]: value });\n        Object.assign(routeToUpdate, mapRouteProperties2(routeToUpdate));\n      }\n    }\n    if (typeof routeToUpdate.lazy === \"object\") {\n      routeToUpdate.lazy[key] = void 0;\n      if (Object.values(routeToUpdate.lazy).every((value) => value === void 0)) {\n        routeToUpdate.lazy = void 0;\n      }\n    }\n  })();\n  cache[key] = propertyPromise;\n  return propertyPromise;\n};\nvar lazyRouteFunctionCache = /* @__PURE__ */ new WeakMap();\nfunction loadLazyRoute(route, type, manifest, mapRouteProperties2, lazyRoutePropertiesToSkip) {\n  let routeToUpdate = manifest[route.id];\n  invariant(routeToUpdate, \"No route found in manifest\");\n  if (!route.lazy) {\n    return {\n      lazyRoutePromise: void 0,\n      lazyHandlerPromise: void 0\n    };\n  }\n  if (typeof route.lazy === \"function\") {\n    let cachedPromise = lazyRouteFunctionCache.get(routeToUpdate);\n    if (cachedPromise) {\n      return {\n        lazyRoutePromise: cachedPromise,\n        lazyHandlerPromise: cachedPromise\n      };\n    }\n    let lazyRoutePromise2 = (async () => {\n      invariant(\n        typeof route.lazy === \"function\",\n        \"No lazy route function found\"\n      );\n      let lazyRoute = await route.lazy();\n      let routeUpdates = {};\n      for (let lazyRouteProperty in lazyRoute) {\n        let lazyValue = lazyRoute[lazyRouteProperty];\n        if (lazyValue === void 0) {\n          continue;\n        }\n        let isUnsupported = isUnsupportedLazyRouteFunctionKey(lazyRouteProperty);\n        let staticRouteValue = routeToUpdate[lazyRouteProperty];\n        let isStaticallyDefined = staticRouteValue !== void 0 && // This property isn't static since it should always be updated based\n        // on the route updates\n        lazyRouteProperty !== \"hasErrorBoundary\";\n        if (isUnsupported) {\n          warning(\n            !isUnsupported,\n            \"Route property \" + lazyRouteProperty + \" is not a supported property to be returned from a lazy route function. This property will be ignored.\"\n          );\n        } else if (isStaticallyDefined) {\n          warning(\n            !isStaticallyDefined,\n            `Route \"${routeToUpdate.id}\" has a static property \"${lazyRouteProperty}\" defined but its lazy function is also returning a value for this property. The lazy route property \"${lazyRouteProperty}\" will be ignored.`\n          );\n        } else {\n          routeUpdates[lazyRouteProperty] = lazyValue;\n        }\n      }\n      Object.assign(routeToUpdate, routeUpdates);\n      Object.assign(routeToUpdate, {\n        // To keep things framework agnostic, we use the provided `mapRouteProperties`\n        // function to set the framework-aware properties (`element`/`hasErrorBoundary`)\n        // since the logic will differ between frameworks.\n        ...mapRouteProperties2(routeToUpdate),\n        lazy: void 0\n      });\n    })();\n    lazyRouteFunctionCache.set(routeToUpdate, lazyRoutePromise2);\n    lazyRoutePromise2.catch(() => {\n    });\n    return {\n      lazyRoutePromise: lazyRoutePromise2,\n      lazyHandlerPromise: lazyRoutePromise2\n    };\n  }\n  let lazyKeys = Object.keys(route.lazy);\n  let lazyPropertyPromises = [];\n  let lazyHandlerPromise = void 0;\n  for (let key of lazyKeys) {\n    if (lazyRoutePropertiesToSkip && lazyRoutePropertiesToSkip.includes(key)) {\n      continue;\n    }\n    let promise = loadLazyRouteProperty({\n      key,\n      route,\n      manifest,\n      mapRouteProperties: mapRouteProperties2\n    });\n    if (promise) {\n      lazyPropertyPromises.push(promise);\n      if (key === type) {\n        lazyHandlerPromise = promise;\n      }\n    }\n  }\n  let lazyRoutePromise = lazyPropertyPromises.length > 0 ? Promise.all(lazyPropertyPromises).then(() => {\n  }) : void 0;\n  lazyRoutePromise?.catch(() => {\n  });\n  lazyHandlerPromise?.catch(() => {\n  });\n  return {\n    lazyRoutePromise,\n    lazyHandlerPromise\n  };\n}\nfunction isNonNullable(value) {\n  return value !== void 0;\n}\nfunction loadLazyMiddlewareForMatches(matches, manifest, mapRouteProperties2) {\n  let promises = matches.map(({ route }) => {\n    if (typeof route.lazy !== \"object\" || !route.lazy.middleware) {\n      return void 0;\n    }\n    return loadLazyRouteProperty({\n      key: \"middleware\",\n      route,\n      manifest,\n      mapRouteProperties: mapRouteProperties2\n    });\n  }).filter(isNonNullable);\n  return promises.length > 0 ? Promise.all(promises) : void 0;\n}\nasync function defaultDataStrategy(args) {\n  let matchesToLoad = args.matches.filter((m) => m.shouldLoad);\n  let keyedResults = {};\n  let results = await Promise.all(matchesToLoad.map((m) => m.resolve()));\n  results.forEach((result, i) => {\n    keyedResults[matchesToLoad[i].route.id] = result;\n  });\n  return keyedResults;\n}\nasync function defaultDataStrategyWithMiddleware(args) {\n  if (!args.matches.some((m) => m.route.middleware)) {\n    return defaultDataStrategy(args);\n  }\n  return runClientMiddlewarePipeline(args, () => defaultDataStrategy(args));\n}\nfunction runServerMiddlewarePipeline(args, handler, errorHandler) {\n  return runMiddlewarePipeline(\n    args,\n    handler,\n    processResult,\n    isResponse,\n    errorHandler\n  );\n  function processResult(result) {\n    return isDataWithResponseInit(result) ? dataWithResponseInitToResponse(result) : result;\n  }\n}\nfunction runClientMiddlewarePipeline(args, handler) {\n  return runMiddlewarePipeline(\n    args,\n    handler,\n    (r) => {\n      if (isRedirectResponse(r)) {\n        throw r;\n      }\n      return r;\n    },\n    isDataStrategyResults,\n    errorHandler\n  );\n  function errorHandler(error, routeId, nextResult) {\n    if (nextResult) {\n      return Promise.resolve(\n        Object.assign(nextResult.value, {\n          [routeId]: { type: \"error\", result: error }\n        })\n      );\n    } else {\n      let { matches } = args;\n      let maxBoundaryIdx = Math.min(\n        // Throwing route\n        Math.max(\n          matches.findIndex((m) => m.route.id === routeId),\n          0\n        ),\n        // or the shallowest route that needs to load data\n        Math.max(\n          matches.findIndex((m) => m.shouldCallHandler()),\n          0\n        )\n      );\n      let boundaryRouteId = findNearestBoundary(\n        matches,\n        matches[maxBoundaryIdx].route.id\n      ).route.id;\n      return Promise.resolve({\n        [boundaryRouteId]: { type: \"error\", result: error }\n      });\n    }\n  }\n}\nasync function runMiddlewarePipeline(args, handler, processResult, isResult, errorHandler) {\n  let { matches, request, params, context, unstable_pattern } = args;\n  let tuples = matches.flatMap(\n    (m) => m.route.middleware ? m.route.middleware.map((fn) => [m.route.id, fn]) : []\n  );\n  let result = await callRouteMiddleware(\n    {\n      request,\n      params,\n      context,\n      unstable_pattern\n    },\n    tuples,\n    handler,\n    processResult,\n    isResult,\n    errorHandler\n  );\n  return result;\n}\nasync function callRouteMiddleware(args, middlewares, handler, processResult, isResult, errorHandler, idx = 0) {\n  let { request } = args;\n  if (request.signal.aborted) {\n    throw request.signal.reason ?? new Error(`Request aborted: ${request.method} ${request.url}`);\n  }\n  let tuple = middlewares[idx];\n  if (!tuple) {\n    let result = await handler();\n    return result;\n  }\n  let [routeId, middleware] = tuple;\n  let nextResult;\n  let next = async () => {\n    if (nextResult) {\n      throw new Error(\"You may only call `next()` once per middleware\");\n    }\n    try {\n      let result = await callRouteMiddleware(\n        args,\n        middlewares,\n        handler,\n        processResult,\n        isResult,\n        errorHandler,\n        idx + 1\n      );\n      nextResult = { value: result };\n      return nextResult.value;\n    } catch (error) {\n      nextResult = { value: await errorHandler(error, routeId, nextResult) };\n      return nextResult.value;\n    }\n  };\n  try {\n    let value = await middleware(args, next);\n    let result = value != null ? processResult(value) : void 0;\n    if (isResult(result)) {\n      return result;\n    } else if (nextResult) {\n      return result ?? nextResult.value;\n    } else {\n      nextResult = { value: await next() };\n      return nextResult.value;\n    }\n  } catch (error) {\n    let response = await errorHandler(error, routeId, nextResult);\n    return response;\n  }\n}\nfunction getDataStrategyMatchLazyPromises(mapRouteProperties2, manifest, request, match, lazyRoutePropertiesToSkip) {\n  let lazyMiddlewarePromise = loadLazyRouteProperty({\n    key: \"middleware\",\n    route: match.route,\n    manifest,\n    mapRouteProperties: mapRouteProperties2\n  });\n  let lazyRoutePromises = loadLazyRoute(\n    match.route,\n    isMutationMethod(request.method) ? \"action\" : \"loader\",\n    manifest,\n    mapRouteProperties2,\n    lazyRoutePropertiesToSkip\n  );\n  return {\n    middleware: lazyMiddlewarePromise,\n    route: lazyRoutePromises.lazyRoutePromise,\n    handler: lazyRoutePromises.lazyHandlerPromise\n  };\n}\nfunction getDataStrategyMatch(mapRouteProperties2, manifest, request, unstable_pattern, match, lazyRoutePropertiesToSkip, scopedContext, shouldLoad, shouldRevalidateArgs = null, callSiteDefaultShouldRevalidate) {\n  let isUsingNewApi = false;\n  let _lazyPromises = getDataStrategyMatchLazyPromises(\n    mapRouteProperties2,\n    manifest,\n    request,\n    match,\n    lazyRoutePropertiesToSkip\n  );\n  return {\n    ...match,\n    _lazyPromises,\n    shouldLoad,\n    shouldRevalidateArgs,\n    shouldCallHandler(defaultShouldRevalidate) {\n      isUsingNewApi = true;\n      if (!shouldRevalidateArgs) {\n        return shouldLoad;\n      }\n      if (typeof callSiteDefaultShouldRevalidate === \"boolean\") {\n        return shouldRevalidateLoader(match, {\n          ...shouldRevalidateArgs,\n          defaultShouldRevalidate: callSiteDefaultShouldRevalidate\n        });\n      }\n      if (typeof defaultShouldRevalidate === \"boolean\") {\n        return shouldRevalidateLoader(match, {\n          ...shouldRevalidateArgs,\n          defaultShouldRevalidate\n        });\n      }\n      return shouldRevalidateLoader(match, shouldRevalidateArgs);\n    },\n    resolve(handlerOverride) {\n      let { lazy, loader, middleware } = match.route;\n      let callHandler = isUsingNewApi || shouldLoad || handlerOverride && !isMutationMethod(request.method) && (lazy || loader);\n      let isMiddlewareOnlyRoute = middleware && middleware.length > 0 && !loader && !lazy;\n      if (callHandler && (isMutationMethod(request.method) || !isMiddlewareOnlyRoute)) {\n        return callLoaderOrAction({\n          request,\n          unstable_pattern,\n          match,\n          lazyHandlerPromise: _lazyPromises?.handler,\n          lazyRoutePromise: _lazyPromises?.route,\n          handlerOverride,\n          scopedContext\n        });\n      }\n      return Promise.resolve({ type: \"data\" /* data */, result: void 0 });\n    }\n  };\n}\nfunction getTargetedDataStrategyMatches(mapRouteProperties2, manifest, request, matches, targetMatch, lazyRoutePropertiesToSkip, scopedContext, shouldRevalidateArgs = null) {\n  return matches.map((match) => {\n    if (match.route.id !== targetMatch.route.id) {\n      return {\n        ...match,\n        shouldLoad: false,\n        shouldRevalidateArgs,\n        shouldCallHandler: () => false,\n        _lazyPromises: getDataStrategyMatchLazyPromises(\n          mapRouteProperties2,\n          manifest,\n          request,\n          match,\n          lazyRoutePropertiesToSkip\n        ),\n        resolve: () => Promise.resolve({ type: \"data\", result: void 0 })\n      };\n    }\n    return getDataStrategyMatch(\n      mapRouteProperties2,\n      manifest,\n      request,\n      getRoutePattern(matches),\n      match,\n      lazyRoutePropertiesToSkip,\n      scopedContext,\n      true,\n      shouldRevalidateArgs\n    );\n  });\n}\nasync function callDataStrategyImpl(dataStrategyImpl, request, matches, fetcherKey, scopedContext, isStaticHandler) {\n  if (matches.some((m) => m._lazyPromises?.middleware)) {\n    await Promise.all(matches.map((m) => m._lazyPromises?.middleware));\n  }\n  let dataStrategyArgs = {\n    request,\n    unstable_pattern: getRoutePattern(matches),\n    params: matches[0].params,\n    context: scopedContext,\n    matches\n  };\n  let runClientMiddleware = isStaticHandler ? () => {\n    throw new Error(\n      \"You cannot call `runClientMiddleware()` from a static handler `dataStrategy`. Middleware is run outside of `dataStrategy` during SSR in order to bubble up the Response.  You can enable middleware via the `respond` API in `query`/`queryRoute`\"\n    );\n  } : (cb) => {\n    let typedDataStrategyArgs = dataStrategyArgs;\n    return runClientMiddlewarePipeline(typedDataStrategyArgs, () => {\n      return cb({\n        ...typedDataStrategyArgs,\n        fetcherKey,\n        runClientMiddleware: () => {\n          throw new Error(\n            \"Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler\"\n          );\n        }\n      });\n    });\n  };\n  let results = await dataStrategyImpl({\n    ...dataStrategyArgs,\n    fetcherKey,\n    runClientMiddleware\n  });\n  try {\n    await Promise.all(\n      matches.flatMap((m) => [\n        m._lazyPromises?.handler,\n        m._lazyPromises?.route\n      ])\n    );\n  } catch (e) {\n  }\n  return results;\n}\nasync function callLoaderOrAction({\n  request,\n  unstable_pattern,\n  match,\n  lazyHandlerPromise,\n  lazyRoutePromise,\n  handlerOverride,\n  scopedContext\n}) {\n  let result;\n  let onReject;\n  let isAction = isMutationMethod(request.method);\n  let type = isAction ? \"action\" : \"loader\";\n  let runHandler = (handler) => {\n    let reject;\n    let abortPromise = new Promise((_, r) => reject = r);\n    onReject = () => reject();\n    request.signal.addEventListener(\"abort\", onReject);\n    let actualHandler = (ctx) => {\n      if (typeof handler !== \"function\") {\n        return Promise.reject(\n          new Error(\n            `You cannot call the handler for a route which defines a boolean \"${type}\" [routeId: ${match.route.id}]`\n          )\n        );\n      }\n      return handler(\n        {\n          request,\n          unstable_pattern,\n          params: match.params,\n          context: scopedContext\n        },\n        ...ctx !== void 0 ? [ctx] : []\n      );\n    };\n    let handlerPromise = (async () => {\n      try {\n        let val = await (handlerOverride ? handlerOverride((ctx) => actualHandler(ctx)) : actualHandler());\n        return { type: \"data\", result: val };\n      } catch (e) {\n        return { type: \"error\", result: e };\n      }\n    })();\n    return Promise.race([handlerPromise, abortPromise]);\n  };\n  try {\n    let handler = isAction ? match.route.action : match.route.loader;\n    if (lazyHandlerPromise || lazyRoutePromise) {\n      if (handler) {\n        let handlerError;\n        let [value] = await Promise.all([\n          // If the handler throws, don't let it immediately bubble out,\n          // since we need to let the lazy() execution finish so we know if this\n          // route has a boundary that can handle the error\n          runHandler(handler).catch((e) => {\n            handlerError = e;\n          }),\n          // Ensure all lazy route promises are resolved before continuing\n          lazyHandlerPromise,\n          lazyRoutePromise\n        ]);\n        if (handlerError !== void 0) {\n          throw handlerError;\n        }\n        result = value;\n      } else {\n        await lazyHandlerPromise;\n        let handler2 = isAction ? match.route.action : match.route.loader;\n        if (handler2) {\n          [result] = await Promise.all([runHandler(handler2), lazyRoutePromise]);\n        } else if (type === \"action\") {\n          let url = new URL(request.url);\n          let pathname = url.pathname + url.search;\n          throw getInternalRouterError(405, {\n            method: request.method,\n            pathname,\n            routeId: match.route.id\n          });\n        } else {\n          return { type: \"data\" /* data */, result: void 0 };\n        }\n      }\n    } else if (!handler) {\n      let url = new URL(request.url);\n      let pathname = url.pathname + url.search;\n      throw getInternalRouterError(404, {\n        pathname\n      });\n    } else {\n      result = await runHandler(handler);\n    }\n  } catch (e) {\n    return { type: \"error\" /* error */, result: e };\n  } finally {\n    if (onReject) {\n      request.signal.removeEventListener(\"abort\", onReject);\n    }\n  }\n  return result;\n}\nasync function parseResponseBody(response) {\n  let contentType = response.headers.get(\"Content-Type\");\n  if (contentType && /\\bapplication\\/json\\b/.test(contentType)) {\n    return response.body == null ? null : response.json();\n  }\n  return response.text();\n}\nasync function convertDataStrategyResultToDataResult(dataStrategyResult) {\n  let { result, type } = dataStrategyResult;\n  if (isResponse(result)) {\n    let data2;\n    try {\n      data2 = await parseResponseBody(result);\n    } catch (e) {\n      return { type: \"error\" /* error */, error: e };\n    }\n    if (type === \"error\" /* error */) {\n      return {\n        type: \"error\" /* error */,\n        error: new ErrorResponseImpl(result.status, result.statusText, data2),\n        statusCode: result.status,\n        headers: result.headers\n      };\n    }\n    return {\n      type: \"data\" /* data */,\n      data: data2,\n      statusCode: result.status,\n      headers: result.headers\n    };\n  }\n  if (type === \"error\" /* error */) {\n    if (isDataWithResponseInit(result)) {\n      if (result.data instanceof Error) {\n        return {\n          type: \"error\" /* error */,\n          error: result.data,\n          statusCode: result.init?.status,\n          headers: result.init?.headers ? new Headers(result.init.headers) : void 0\n        };\n      }\n      return {\n        type: \"error\" /* error */,\n        error: dataWithResponseInitToErrorResponse(result),\n        statusCode: isRouteErrorResponse(result) ? result.status : void 0,\n        headers: result.init?.headers ? new Headers(result.init.headers) : void 0\n      };\n    }\n    return {\n      type: \"error\" /* error */,\n      error: result,\n      statusCode: isRouteErrorResponse(result) ? result.status : void 0\n    };\n  }\n  if (isDataWithResponseInit(result)) {\n    return {\n      type: \"data\" /* data */,\n      data: result.data,\n      statusCode: result.init?.status,\n      headers: result.init?.headers ? new Headers(result.init.headers) : void 0\n    };\n  }\n  return { type: \"data\" /* data */, data: result };\n}\nfunction normalizeRelativeRoutingRedirectResponse(response, request, routeId, matches, basename) {\n  let location = response.headers.get(\"Location\");\n  invariant(\n    location,\n    \"Redirects returned/thrown from loaders/actions must have a Location header\"\n  );\n  if (!isAbsoluteUrl(location)) {\n    let trimmedMatches = matches.slice(\n      0,\n      matches.findIndex((m) => m.route.id === routeId) + 1\n    );\n    location = normalizeTo(\n      new URL(request.url),\n      trimmedMatches,\n      basename,\n      location\n    );\n    response.headers.set(\"Location\", location);\n  }\n  return response;\n}\nfunction normalizeRedirectLocation(location, currentUrl, basename, historyInstance) {\n  let invalidProtocols = [\n    \"about:\",\n    \"blob:\",\n    \"chrome:\",\n    \"chrome-untrusted:\",\n    \"content:\",\n    \"data:\",\n    \"devtools:\",\n    \"file:\",\n    \"filesystem:\",\n    // eslint-disable-next-line no-script-url\n    \"javascript:\"\n  ];\n  if (isAbsoluteUrl(location)) {\n    let normalizedLocation = location;\n    let url = normalizedLocation.startsWith(\"//\") ? new URL(currentUrl.protocol + normalizedLocation) : new URL(normalizedLocation);\n    if (invalidProtocols.includes(url.protocol)) {\n      throw new Error(\"Invalid redirect location\");\n    }\n    let isSameBasename = stripBasename(url.pathname, basename) != null;\n    if (url.origin === currentUrl.origin && isSameBasename) {\n      return url.pathname + url.search + url.hash;\n    }\n  }\n  try {\n    let url = historyInstance.createURL(location);\n    if (invalidProtocols.includes(url.protocol)) {\n      throw new Error(\"Invalid redirect location\");\n    }\n  } catch (e) {\n  }\n  return location;\n}\nfunction createClientSideRequest(history, location, signal, submission) {\n  let url = history.createURL(stripHashFromPath(location)).toString();\n  let init = { signal };\n  if (submission && isMutationMethod(submission.formMethod)) {\n    let { formMethod, formEncType } = submission;\n    init.method = formMethod.toUpperCase();\n    if (formEncType === \"application/json\") {\n      init.headers = new Headers({ \"Content-Type\": formEncType });\n      init.body = JSON.stringify(submission.json);\n    } else if (formEncType === \"text/plain\") {\n      init.body = submission.text;\n    } else if (formEncType === \"application/x-www-form-urlencoded\" && submission.formData) {\n      init.body = convertFormDataToSearchParams(submission.formData);\n    } else {\n      init.body = submission.formData;\n    }\n  }\n  return new Request(url, init);\n}\nfunction convertFormDataToSearchParams(formData) {\n  let searchParams = new URLSearchParams();\n  for (let [key, value] of formData.entries()) {\n    searchParams.append(key, typeof value === \"string\" ? value : value.name);\n  }\n  return searchParams;\n}\nfunction convertSearchParamsToFormData(searchParams) {\n  let formData = new FormData();\n  for (let [key, value] of searchParams.entries()) {\n    formData.append(key, value);\n  }\n  return formData;\n}\nfunction processRouteLoaderData(matches, results, pendingActionResult, isStaticHandler = false, skipLoaderErrorBubbling = false) {\n  let loaderData = {};\n  let errors = null;\n  let statusCode;\n  let foundError = false;\n  let loaderHeaders = {};\n  let pendingError = pendingActionResult && isErrorResult(pendingActionResult[1]) ? pendingActionResult[1].error : void 0;\n  matches.forEach((match) => {\n    if (!(match.route.id in results)) {\n      return;\n    }\n    let id = match.route.id;\n    let result = results[id];\n    invariant(\n      !isRedirectResult(result),\n      \"Cannot handle redirect results in processLoaderData\"\n    );\n    if (isErrorResult(result)) {\n      let error = result.error;\n      if (pendingError !== void 0) {\n        error = pendingError;\n        pendingError = void 0;\n      }\n      errors = errors || {};\n      if (skipLoaderErrorBubbling) {\n        errors[id] = error;\n      } else {\n        let boundaryMatch = findNearestBoundary(matches, id);\n        if (errors[boundaryMatch.route.id] == null) {\n          errors[boundaryMatch.route.id] = error;\n        }\n      }\n      if (!isStaticHandler) {\n        loaderData[id] = ResetLoaderDataSymbol;\n      }\n      if (!foundError) {\n        foundError = true;\n        statusCode = isRouteErrorResponse(result.error) ? result.error.status : 500;\n      }\n      if (result.headers) {\n        loaderHeaders[id] = result.headers;\n      }\n    } else {\n      loaderData[id] = result.data;\n      if (result.statusCode && result.statusCode !== 200 && !foundError) {\n        statusCode = result.statusCode;\n      }\n      if (result.headers) {\n        loaderHeaders[id] = result.headers;\n      }\n    }\n  });\n  if (pendingError !== void 0 && pendingActionResult) {\n    errors = { [pendingActionResult[0]]: pendingError };\n    if (pendingActionResult[2]) {\n      loaderData[pendingActionResult[2]] = void 0;\n    }\n  }\n  return {\n    loaderData,\n    errors,\n    statusCode: statusCode || 200,\n    loaderHeaders\n  };\n}\nfunction processLoaderData(state, matches, results, pendingActionResult, revalidatingFetchers, fetcherResults) {\n  let { loaderData, errors } = processRouteLoaderData(\n    matches,\n    results,\n    pendingActionResult\n  );\n  revalidatingFetchers.filter((f) => !f.matches || f.matches.some((m) => m.shouldLoad)).forEach((rf) => {\n    let { key, match, controller } = rf;\n    if (controller && controller.signal.aborted) {\n      return;\n    }\n    let result = fetcherResults[key];\n    invariant(result, \"Did not find corresponding fetcher result\");\n    if (isErrorResult(result)) {\n      let boundaryMatch = findNearestBoundary(state.matches, match?.route.id);\n      if (!(errors && errors[boundaryMatch.route.id])) {\n        errors = {\n          ...errors,\n          [boundaryMatch.route.id]: result.error\n        };\n      }\n      state.fetchers.delete(key);\n    } else if (isRedirectResult(result)) {\n      invariant(false, \"Unhandled fetcher revalidation redirect\");\n    } else {\n      let doneFetcher = getDoneFetcher(result.data);\n      state.fetchers.set(key, doneFetcher);\n    }\n  });\n  return { loaderData, errors };\n}\nfunction mergeLoaderData(loaderData, newLoaderData, matches, errors) {\n  let mergedLoaderData = Object.entries(newLoaderData).filter(([, v]) => v !== ResetLoaderDataSymbol).reduce((merged, [k, v]) => {\n    merged[k] = v;\n    return merged;\n  }, {});\n  for (let match of matches) {\n    let id = match.route.id;\n    if (!newLoaderData.hasOwnProperty(id) && loaderData.hasOwnProperty(id) && match.route.loader) {\n      mergedLoaderData[id] = loaderData[id];\n    }\n    if (errors && errors.hasOwnProperty(id)) {\n      break;\n    }\n  }\n  return mergedLoaderData;\n}\nfunction getActionDataForCommit(pendingActionResult) {\n  if (!pendingActionResult) {\n    return {};\n  }\n  return isErrorResult(pendingActionResult[1]) ? {\n    // Clear out prior actionData on errors\n    actionData: {}\n  } : {\n    actionData: {\n      [pendingActionResult[0]]: pendingActionResult[1].data\n    }\n  };\n}\nfunction findNearestBoundary(matches, routeId) {\n  let eligibleMatches = routeId ? matches.slice(0, matches.findIndex((m) => m.route.id === routeId) + 1) : [...matches];\n  return eligibleMatches.reverse().find((m) => m.route.hasErrorBoundary === true) || matches[0];\n}\nfunction getShortCircuitMatches(routes) {\n  let route = routes.length === 1 ? routes[0] : routes.find((r) => r.index || !r.path || r.path === \"/\") || {\n    id: `__shim-error-route__`\n  };\n  return {\n    matches: [\n      {\n        params: {},\n        pathname: \"\",\n        pathnameBase: \"\",\n        route\n      }\n    ],\n    route\n  };\n}\nfunction getInternalRouterError(status, {\n  pathname,\n  routeId,\n  method,\n  type,\n  message\n} = {}) {\n  let statusText = \"Unknown Server Error\";\n  let errorMessage = \"Unknown @remix-run/router error\";\n  if (status === 400) {\n    statusText = \"Bad Request\";\n    if (method && pathname && routeId) {\n      errorMessage = `You made a ${method} request to \"${pathname}\" but did not provide a \\`loader\\` for route \"${routeId}\", so there is no way to handle the request.`;\n    } else if (type === \"invalid-body\") {\n      errorMessage = \"Unable to encode submission body\";\n    }\n  } else if (status === 403) {\n    statusText = \"Forbidden\";\n    errorMessage = `Route \"${routeId}\" does not match URL \"${pathname}\"`;\n  } else if (status === 404) {\n    statusText = \"Not Found\";\n    errorMessage = `No route matches URL \"${pathname}\"`;\n  } else if (status === 405) {\n    statusText = \"Method Not Allowed\";\n    if (method && pathname && routeId) {\n      errorMessage = `You made a ${method.toUpperCase()} request to \"${pathname}\" but did not provide an \\`action\\` for route \"${routeId}\", so there is no way to handle the request.`;\n    } else if (method) {\n      errorMessage = `Invalid request method \"${method.toUpperCase()}\"`;\n    }\n  }\n  return new ErrorResponseImpl(\n    status || 500,\n    statusText,\n    new Error(errorMessage),\n    true\n  );\n}\nfunction findRedirect(results) {\n  let entries = Object.entries(results);\n  for (let i = entries.length - 1; i >= 0; i--) {\n    let [key, result] = entries[i];\n    if (isRedirectResult(result)) {\n      return { key, result };\n    }\n  }\n}\nfunction stripHashFromPath(path) {\n  let parsedPath = typeof path === \"string\" ? parsePath(path) : path;\n  return createPath({ ...parsedPath, hash: \"\" });\n}\nfunction isHashChangeOnly(a, b) {\n  if (a.pathname !== b.pathname || a.search !== b.search) {\n    return false;\n  }\n  if (a.hash === \"\") {\n    return b.hash !== \"\";\n  } else if (a.hash === b.hash) {\n    return true;\n  } else if (b.hash !== \"\") {\n    return true;\n  }\n  return false;\n}\nfunction dataWithResponseInitToResponse(data2) {\n  return Response.json(data2.data, data2.init ?? void 0);\n}\nfunction dataWithResponseInitToErrorResponse(data2) {\n  return new ErrorResponseImpl(\n    data2.init?.status ?? 500,\n    data2.init?.statusText ?? \"Internal Server Error\",\n    data2.data\n  );\n}\nfunction isDataStrategyResults(result) {\n  return result != null && typeof result === \"object\" && Object.entries(result).every(\n    ([key, value]) => typeof key === \"string\" && isDataStrategyResult(value)\n  );\n}\nfunction isDataStrategyResult(result) {\n  return result != null && typeof result === \"object\" && \"type\" in result && \"result\" in result && (result.type === \"data\" /* data */ || result.type === \"error\" /* error */);\n}\nfunction isRedirectDataStrategyResult(result) {\n  return isResponse(result.result) && redirectStatusCodes.has(result.result.status);\n}\nfunction isErrorResult(result) {\n  return result.type === \"error\" /* error */;\n}\nfunction isRedirectResult(result) {\n  return (result && result.type) === \"redirect\" /* redirect */;\n}\nfunction isDataWithResponseInit(value) {\n  return typeof value === \"object\" && value != null && \"type\" in value && \"data\" in value && \"init\" in value && value.type === \"DataWithResponseInit\";\n}\nfunction isResponse(value) {\n  return value != null && typeof value.status === \"number\" && typeof value.statusText === \"string\" && typeof value.headers === \"object\" && typeof value.body !== \"undefined\";\n}\nfunction isRedirectStatusCode(statusCode) {\n  return redirectStatusCodes.has(statusCode);\n}\nfunction isRedirectResponse(result) {\n  return isResponse(result) && isRedirectStatusCode(result.status) && result.headers.has(\"Location\");\n}\nfunction isValidMethod(method) {\n  return validRequestMethods.has(method.toUpperCase());\n}\nfunction isMutationMethod(method) {\n  return validMutationMethods.has(method.toUpperCase());\n}\nfunction hasNakedIndexQuery(search) {\n  return new URLSearchParams(search).getAll(\"index\").some((v) => v === \"\");\n}\nfunction getTargetMatch(matches, location) {\n  let search = typeof location === \"string\" ? parsePath(location).search : location.search;\n  if (matches[matches.length - 1].route.index && hasNakedIndexQuery(search || \"\")) {\n    return matches[matches.length - 1];\n  }\n  let pathMatches = getPathContributingMatches(matches);\n  return pathMatches[pathMatches.length - 1];\n}\nfunction getSubmissionFromNavigation(navigation) {\n  let { formMethod, formAction, formEncType, text, formData, json } = navigation;\n  if (!formMethod || !formAction || !formEncType) {\n    return;\n  }\n  if (text != null) {\n    return {\n      formMethod,\n      formAction,\n      formEncType,\n      formData: void 0,\n      json: void 0,\n      text\n    };\n  } else if (formData != null) {\n    return {\n      formMethod,\n      formAction,\n      formEncType,\n      formData,\n      json: void 0,\n      text: void 0\n    };\n  } else if (json !== void 0) {\n    return {\n      formMethod,\n      formAction,\n      formEncType,\n      formData: void 0,\n      json,\n      text: void 0\n    };\n  }\n}\nfunction getLoadingNavigation(location, submission) {\n  if (submission) {\n    let navigation = {\n      state: \"loading\",\n      location,\n      formMethod: submission.formMethod,\n      formAction: submission.formAction,\n      formEncType: submission.formEncType,\n      formData: submission.formData,\n      json: submission.json,\n      text: submission.text\n    };\n    return navigation;\n  } else {\n    let navigation = {\n      state: \"loading\",\n      location,\n      formMethod: void 0,\n      formAction: void 0,\n      formEncType: void 0,\n      formData: void 0,\n      json: void 0,\n      text: void 0\n    };\n    return navigation;\n  }\n}\nfunction getSubmittingNavigation(location, submission) {\n  let navigation = {\n    state: \"submitting\",\n    location,\n    formMethod: submission.formMethod,\n    formAction: submission.formAction,\n    formEncType: submission.formEncType,\n    formData: submission.formData,\n    json: submission.json,\n    text: submission.text\n  };\n  return navigation;\n}\nfunction getLoadingFetcher(submission, data2) {\n  if (submission) {\n    let fetcher = {\n      state: \"loading\",\n      formMethod: submission.formMethod,\n      formAction: submission.formAction,\n      formEncType: submission.formEncType,\n      formData: submission.formData,\n      json: submission.json,\n      text: submission.text,\n      data: data2\n    };\n    return fetcher;\n  } else {\n    let fetcher = {\n      state: \"loading\",\n      formMethod: void 0,\n      formAction: void 0,\n      formEncType: void 0,\n      formData: void 0,\n      json: void 0,\n      text: void 0,\n      data: data2\n    };\n    return fetcher;\n  }\n}\nfunction getSubmittingFetcher(submission, existingFetcher) {\n  let fetcher = {\n    state: \"submitting\",\n    formMethod: submission.formMethod,\n    formAction: submission.formAction,\n    formEncType: submission.formEncType,\n    formData: submission.formData,\n    json: submission.json,\n    text: submission.text,\n    data: existingFetcher ? existingFetcher.data : void 0\n  };\n  return fetcher;\n}\nfunction getDoneFetcher(data2) {\n  let fetcher = {\n    state: \"idle\",\n    formMethod: void 0,\n    formAction: void 0,\n    formEncType: void 0,\n    formData: void 0,\n    json: void 0,\n    text: void 0,\n    data: data2\n  };\n  return fetcher;\n}\nfunction restoreAppliedTransitions(_window, transitions) {\n  try {\n    let sessionPositions = _window.sessionStorage.getItem(\n      TRANSITIONS_STORAGE_KEY\n    );\n    if (sessionPositions) {\n      let json = JSON.parse(sessionPositions);\n      for (let [k, v] of Object.entries(json || {})) {\n        if (v && Array.isArray(v)) {\n          transitions.set(k, new Set(v || []));\n        }\n      }\n    }\n  } catch (e) {\n  }\n}\nfunction persistAppliedTransitions(_window, transitions) {\n  if (transitions.size > 0) {\n    let json = {};\n    for (let [k, v] of transitions) {\n      json[k] = [...v];\n    }\n    try {\n      _window.sessionStorage.setItem(\n        TRANSITIONS_STORAGE_KEY,\n        JSON.stringify(json)\n      );\n    } catch (error) {\n      warning(\n        false,\n        `Failed to save applied view transitions in sessionStorage (${error}).`\n      );\n    }\n  }\n}\nfunction createDeferred() {\n  let resolve;\n  let reject;\n  let promise = new Promise((res, rej) => {\n    resolve = async (val) => {\n      res(val);\n      try {\n        await promise;\n      } catch (e) {\n      }\n    };\n    reject = async (error) => {\n      rej(error);\n      try {\n        await promise;\n      } catch (e) {\n      }\n    };\n  });\n  return {\n    promise,\n    //@ts-ignore\n    resolve,\n    //@ts-ignore\n    reject\n  };\n}\n\n// lib/context.ts\nimport * as React from \"react\";\nvar DataRouterContext = React.createContext(null);\nDataRouterContext.displayName = \"DataRouter\";\nvar DataRouterStateContext = React.createContext(null);\nDataRouterStateContext.displayName = \"DataRouterState\";\nvar RSCRouterContext = React.createContext(false);\nfunction useIsRSCRouterContext() {\n  return React.useContext(RSCRouterContext);\n}\nvar ViewTransitionContext = React.createContext({\n  isTransitioning: false\n});\nViewTransitionContext.displayName = \"ViewTransition\";\nvar FetchersContext = React.createContext(\n  /* @__PURE__ */ new Map()\n);\nFetchersContext.displayName = \"Fetchers\";\nvar AwaitContext = React.createContext(null);\nAwaitContext.displayName = \"Await\";\nvar AwaitContextProvider = (props) => React.createElement(AwaitContext.Provider, props);\nvar NavigationContext = React.createContext(\n  null\n);\nNavigationContext.displayName = \"Navigation\";\nvar LocationContext = React.createContext(\n  null\n);\nLocationContext.displayName = \"Location\";\nvar RouteContext = React.createContext({\n  outlet: null,\n  matches: [],\n  isDataRoute: false\n});\nRouteContext.displayName = \"Route\";\nvar RouteErrorContext = React.createContext(null);\nRouteErrorContext.displayName = \"RouteError\";\nvar ENABLE_DEV_WARNINGS = true;\n\n// lib/hooks.tsx\nimport * as React2 from \"react\";\n\n// lib/errors.ts\nvar ERROR_DIGEST_BASE = \"REACT_ROUTER_ERROR\";\nvar ERROR_DIGEST_REDIRECT = \"REDIRECT\";\nvar ERROR_DIGEST_ROUTE_ERROR_RESPONSE = \"ROUTE_ERROR_RESPONSE\";\nfunction decodeRedirectErrorDigest(digest) {\n  if (digest.startsWith(`${ERROR_DIGEST_BASE}:${ERROR_DIGEST_REDIRECT}:{`)) {\n    try {\n      let parsed = JSON.parse(digest.slice(28));\n      if (typeof parsed === \"object\" && parsed && typeof parsed.status === \"number\" && typeof parsed.statusText === \"string\" && typeof parsed.location === \"string\" && typeof parsed.reloadDocument === \"boolean\" && typeof parsed.replace === \"boolean\") {\n        return parsed;\n      }\n    } catch {\n    }\n  }\n}\nfunction decodeRouteErrorResponseDigest(digest) {\n  if (digest.startsWith(\n    `${ERROR_DIGEST_BASE}:${ERROR_DIGEST_ROUTE_ERROR_RESPONSE}:{`\n  )) {\n    try {\n      let parsed = JSON.parse(digest.slice(40));\n      if (typeof parsed === \"object\" && parsed && typeof parsed.status === \"number\" && typeof parsed.statusText === \"string\") {\n        return new ErrorResponseImpl(\n          parsed.status,\n          parsed.statusText,\n          parsed.data\n        );\n      }\n    } catch {\n    }\n  }\n}\n\n// lib/hooks.tsx\nfunction useHref(to, { relative } = {}) {\n  invariant(\n    useInRouterContext(),\n    // TODO: This error is probably because they somehow have 2 versions of the\n    // router loaded. We can help them understand how to avoid that.\n    `useHref() may be used only in the context of a <Router> component.`\n  );\n  let { basename, navigator } = React2.useContext(NavigationContext);\n  let { hash, pathname, search } = useResolvedPath(to, { relative });\n  let joinedPathname = pathname;\n  if (basename !== \"/\") {\n    joinedPathname = pathname === \"/\" ? basename : joinPaths([basename, pathname]);\n  }\n  return navigator.createHref({ pathname: joinedPathname, search, hash });\n}\nfunction useInRouterContext() {\n  return React2.useContext(LocationContext) != null;\n}\nfunction useLocation() {\n  invariant(\n    useInRouterContext(),\n    // TODO: This error is probably because they somehow have 2 versions of the\n    // router loaded. We can help them understand how to avoid that.\n    `useLocation() may be used only in the context of a <Router> component.`\n  );\n  return React2.useContext(LocationContext).location;\n}\nfunction useNavigationType() {\n  return React2.useContext(LocationContext).navigationType;\n}\nfunction useMatch(pattern) {\n  invariant(\n    useInRouterContext(),\n    // TODO: This error is probably because they somehow have 2 versions of the\n    // router loaded. We can help them understand how to avoid that.\n    `useMatch() may be used only in the context of a <Router> component.`\n  );\n  let { pathname } = useLocation();\n  return React2.useMemo(\n    () => matchPath(pattern, decodePath(pathname)),\n    [pathname, pattern]\n  );\n}\nvar navigateEffectWarning = `You should call navigate() in a React.useEffect(), not when your component is first rendered.`;\nfunction useIsomorphicLayoutEffect(cb) {\n  let isStatic = React2.useContext(NavigationContext).static;\n  if (!isStatic) {\n    React2.useLayoutEffect(cb);\n  }\n}\nfunction useNavigate() {\n  let { isDataRoute } = React2.useContext(RouteContext);\n  return isDataRoute ? useNavigateStable() : useNavigateUnstable();\n}\nfunction useNavigateUnstable() {\n  invariant(\n    useInRouterContext(),\n    // TODO: This error is probably because they somehow have 2 versions of the\n    // router loaded. We can help them understand how to avoid that.\n    `useNavigate() may be used only in the context of a <Router> component.`\n  );\n  let dataRouterContext = React2.useContext(DataRouterContext);\n  let { basename, navigator } = React2.useContext(NavigationContext);\n  let { matches } = React2.useContext(RouteContext);\n  let { pathname: locationPathname } = useLocation();\n  let routePathnamesJson = JSON.stringify(getResolveToMatches(matches));\n  let activeRef = React2.useRef(false);\n  useIsomorphicLayoutEffect(() => {\n    activeRef.current = true;\n  });\n  let navigate = React2.useCallback(\n    (to, options = {}) => {\n      warning(activeRef.current, navigateEffectWarning);\n      if (!activeRef.current) return;\n      if (typeof to === \"number\") {\n        navigator.go(to);\n        return;\n      }\n      let path = resolveTo(\n        to,\n        JSON.parse(routePathnamesJson),\n        locationPathname,\n        options.relative === \"path\"\n      );\n      if (dataRouterContext == null && basename !== \"/\") {\n        path.pathname = path.pathname === \"/\" ? basename : joinPaths([basename, path.pathname]);\n      }\n      (!!options.replace ? navigator.replace : navigator.push)(\n        path,\n        options.state,\n        options\n      );\n    },\n    [\n      basename,\n      navigator,\n      routePathnamesJson,\n      locationPathname,\n      dataRouterContext\n    ]\n  );\n  return navigate;\n}\nvar OutletContext = React2.createContext(null);\nfunction useOutletContext() {\n  return React2.useContext(OutletContext);\n}\nfunction useOutlet(context) {\n  let outlet = React2.useContext(RouteContext).outlet;\n  return React2.useMemo(\n    () => outlet && /* @__PURE__ */ React2.createElement(OutletContext.Provider, { value: context }, outlet),\n    [outlet, context]\n  );\n}\nfunction useParams() {\n  let { matches } = React2.useContext(RouteContext);\n  let routeMatch = matches[matches.length - 1];\n  return routeMatch ? routeMatch.params : {};\n}\nfunction useResolvedPath(to, { relative } = {}) {\n  let { matches } = React2.useContext(RouteContext);\n  let { pathname: locationPathname } = useLocation();\n  let routePathnamesJson = JSON.stringify(getResolveToMatches(matches));\n  return React2.useMemo(\n    () => resolveTo(\n      to,\n      JSON.parse(routePathnamesJson),\n      locationPathname,\n      relative === \"path\"\n    ),\n    [to, routePathnamesJson, locationPathname, relative]\n  );\n}\nfunction useRoutes(routes, locationArg) {\n  return useRoutesImpl(routes, locationArg);\n}\nfunction useRoutesImpl(routes, locationArg, dataRouterState, onError, future) {\n  invariant(\n    useInRouterContext(),\n    // TODO: This error is probably because they somehow have 2 versions of the\n    // router loaded. We can help them understand how to avoid that.\n    `useRoutes() may be used only in the context of a <Router> component.`\n  );\n  let { navigator } = React2.useContext(NavigationContext);\n  let { matches: parentMatches } = React2.useContext(RouteContext);\n  let routeMatch = parentMatches[parentMatches.length - 1];\n  let parentParams = routeMatch ? routeMatch.params : {};\n  let parentPathname = routeMatch ? routeMatch.pathname : \"/\";\n  let parentPathnameBase = routeMatch ? routeMatch.pathnameBase : \"/\";\n  let parentRoute = routeMatch && routeMatch.route;\n  if (ENABLE_DEV_WARNINGS) {\n    let parentPath = parentRoute && parentRoute.path || \"\";\n    warningOnce(\n      parentPathname,\n      !parentRoute || parentPath.endsWith(\"*\") || parentPath.endsWith(\"*?\"),\n      `You rendered descendant <Routes> (or called \\`useRoutes()\\`) at \"${parentPathname}\" (under <Route path=\"${parentPath}\">) but the parent route path has no trailing \"*\". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path=\"${parentPath}\"> to <Route path=\"${parentPath === \"/\" ? \"*\" : `${parentPath}/*`}\">.`\n    );\n  }\n  let locationFromContext = useLocation();\n  let location;\n  if (locationArg) {\n    let parsedLocationArg = typeof locationArg === \"string\" ? parsePath(locationArg) : locationArg;\n    invariant(\n      parentPathnameBase === \"/\" || parsedLocationArg.pathname?.startsWith(parentPathnameBase),\n      `When overriding the location using \\`<Routes location>\\` or \\`useRoutes(routes, location)\\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is \"${parentPathnameBase}\" but pathname \"${parsedLocationArg.pathname}\" was given in the \\`location\\` prop.`\n    );\n    location = parsedLocationArg;\n  } else {\n    location = locationFromContext;\n  }\n  let pathname = location.pathname || \"/\";\n  let remainingPathname = pathname;\n  if (parentPathnameBase !== \"/\") {\n    let parentSegments = parentPathnameBase.replace(/^\\//, \"\").split(\"/\");\n    let segments = pathname.replace(/^\\//, \"\").split(\"/\");\n    remainingPathname = \"/\" + segments.slice(parentSegments.length).join(\"/\");\n  }\n  let matches = matchRoutes(routes, { pathname: remainingPathname });\n  if (ENABLE_DEV_WARNINGS) {\n    warning(\n      parentRoute || matches != null,\n      `No routes matched location \"${location.pathname}${location.search}${location.hash}\" `\n    );\n    warning(\n      matches == null || matches[matches.length - 1].route.element !== void 0 || matches[matches.length - 1].route.Component !== void 0 || matches[matches.length - 1].route.lazy !== void 0,\n      `Matched leaf route at location \"${location.pathname}${location.search}${location.hash}\" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an \"empty\" page.`\n    );\n  }\n  let renderedMatches = _renderMatches(\n    matches && matches.map(\n      (match) => Object.assign({}, match, {\n        params: Object.assign({}, parentParams, match.params),\n        pathname: joinPaths([\n          parentPathnameBase,\n          // Re-encode pathnames that were decoded inside matchRoutes.\n          // Pre-encode `?` and `#` ahead of `encodeLocation` because it uses\n          // `new URL()` internally and we need to prevent it from treating\n          // them as separators\n          navigator.encodeLocation ? navigator.encodeLocation(\n            match.pathname.replace(/\\?/g, \"%3F\").replace(/#/g, \"%23\")\n          ).pathname : match.pathname\n        ]),\n        pathnameBase: match.pathnameBase === \"/\" ? parentPathnameBase : joinPaths([\n          parentPathnameBase,\n          // Re-encode pathnames that were decoded inside matchRoutes\n          // Pre-encode `?` and `#` ahead of `encodeLocation` because it uses\n          // `new URL()` internally and we need to prevent it from treating\n          // them as separators\n          navigator.encodeLocation ? navigator.encodeLocation(\n            match.pathnameBase.replace(/\\?/g, \"%3F\").replace(/#/g, \"%23\")\n          ).pathname : match.pathnameBase\n        ])\n      })\n    ),\n    parentMatches,\n    dataRouterState,\n    onError,\n    future\n  );\n  if (locationArg && renderedMatches) {\n    return /* @__PURE__ */ React2.createElement(\n      LocationContext.Provider,\n      {\n        value: {\n          location: {\n            pathname: \"/\",\n            search: \"\",\n            hash: \"\",\n            state: null,\n            key: \"default\",\n            ...location\n          },\n          navigationType: \"POP\" /* Pop */\n        }\n      },\n      renderedMatches\n    );\n  }\n  return renderedMatches;\n}\nfunction DefaultErrorComponent() {\n  let error = useRouteError();\n  let message = isRouteErrorResponse(error) ? `${error.status} ${error.statusText}` : error instanceof Error ? error.message : JSON.stringify(error);\n  let stack = error instanceof Error ? error.stack : null;\n  let lightgrey = \"rgba(200,200,200, 0.5)\";\n  let preStyles = { padding: \"0.5rem\", backgroundColor: lightgrey };\n  let codeStyles = { padding: \"2px 4px\", backgroundColor: lightgrey };\n  let devInfo = null;\n  if (ENABLE_DEV_WARNINGS) {\n    console.error(\n      \"Error handled by React Router default ErrorBoundary:\",\n      error\n    );\n    devInfo = /* @__PURE__ */ React2.createElement(React2.Fragment, null, /* @__PURE__ */ React2.createElement(\"p\", null, \"\\u{1F4BF} Hey developer \\u{1F44B}\"), /* @__PURE__ */ React2.createElement(\"p\", null, \"You can provide a way better UX than this when your app throws errors by providing your own \", /* @__PURE__ */ React2.createElement(\"code\", { style: codeStyles }, \"ErrorBoundary\"), \" or\", \" \", /* @__PURE__ */ React2.createElement(\"code\", { style: codeStyles }, \"errorElement\"), \" prop on your route.\"));\n  }\n  return /* @__PURE__ */ React2.createElement(React2.Fragment, null, /* @__PURE__ */ React2.createElement(\"h2\", null, \"Unexpected Application Error!\"), /* @__PURE__ */ React2.createElement(\"h3\", { style: { fontStyle: \"italic\" } }, message), stack ? /* @__PURE__ */ React2.createElement(\"pre\", { style: preStyles }, stack) : null, devInfo);\n}\nvar defaultErrorElement = /* @__PURE__ */ React2.createElement(DefaultErrorComponent, null);\nvar RenderErrorBoundary = class extends React2.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      location: props.location,\n      revalidation: props.revalidation,\n      error: props.error\n    };\n  }\n  static getDerivedStateFromError(error) {\n    return { error };\n  }\n  static getDerivedStateFromProps(props, state) {\n    if (state.location !== props.location || state.revalidation !== \"idle\" && props.revalidation === \"idle\") {\n      return {\n        error: props.error,\n        location: props.location,\n        revalidation: props.revalidation\n      };\n    }\n    return {\n      error: props.error !== void 0 ? props.error : state.error,\n      location: state.location,\n      revalidation: props.revalidation || state.revalidation\n    };\n  }\n  componentDidCatch(error, errorInfo) {\n    if (this.props.onError) {\n      this.props.onError(error, errorInfo);\n    } else {\n      console.error(\n        \"React Router caught the following error during render\",\n        error\n      );\n    }\n  }\n  render() {\n    let error = this.state.error;\n    if (this.context && typeof error === \"object\" && error && \"digest\" in error && typeof error.digest === \"string\") {\n      const decoded = decodeRouteErrorResponseDigest(error.digest);\n      if (decoded) error = decoded;\n    }\n    let result = error !== void 0 ? /* @__PURE__ */ React2.createElement(RouteContext.Provider, { value: this.props.routeContext }, /* @__PURE__ */ React2.createElement(\n      RouteErrorContext.Provider,\n      {\n        value: error,\n        children: this.props.component\n      }\n    )) : this.props.children;\n    if (this.context) {\n      return /* @__PURE__ */ React2.createElement(RSCErrorHandler, { error }, result);\n    }\n    return result;\n  }\n};\nRenderErrorBoundary.contextType = RSCRouterContext;\nvar errorRedirectHandledMap = /* @__PURE__ */ new WeakMap();\nfunction RSCErrorHandler({\n  children,\n  error\n}) {\n  let { basename } = React2.useContext(NavigationContext);\n  if (typeof error === \"object\" && error && \"digest\" in error && typeof error.digest === \"string\") {\n    let redirect2 = decodeRedirectErrorDigest(error.digest);\n    if (redirect2) {\n      let existingRedirect = errorRedirectHandledMap.get(error);\n      if (existingRedirect) throw existingRedirect;\n      let parsed = parseToInfo(redirect2.location, basename);\n      if (isBrowser && !errorRedirectHandledMap.get(error)) {\n        if (parsed.isExternal || redirect2.reloadDocument) {\n          window.location.href = parsed.absoluteURL || parsed.to;\n        } else {\n          const redirectPromise = Promise.resolve().then(\n            () => window.__reactRouterDataRouter.navigate(parsed.to, {\n              replace: redirect2.replace\n            })\n          );\n          errorRedirectHandledMap.set(error, redirectPromise);\n          throw redirectPromise;\n        }\n      }\n      return /* @__PURE__ */ React2.createElement(\n        \"meta\",\n        {\n          httpEquiv: \"refresh\",\n          content: `0;url=${parsed.absoluteURL || parsed.to}`\n        }\n      );\n    }\n  }\n  return children;\n}\nfunction RenderedRoute({ routeContext, match, children }) {\n  let dataRouterContext = React2.useContext(DataRouterContext);\n  if (dataRouterContext && dataRouterContext.static && dataRouterContext.staticContext && (match.route.errorElement || match.route.ErrorBoundary)) {\n    dataRouterContext.staticContext._deepestRenderedBoundaryId = match.route.id;\n  }\n  return /* @__PURE__ */ React2.createElement(RouteContext.Provider, { value: routeContext }, children);\n}\nfunction _renderMatches(matches, parentMatches = [], dataRouterState = null, onErrorHandler = null, future = null) {\n  if (matches == null) {\n    if (!dataRouterState) {\n      return null;\n    }\n    if (dataRouterState.errors) {\n      matches = dataRouterState.matches;\n    } else if (parentMatches.length === 0 && !dataRouterState.initialized && dataRouterState.matches.length > 0) {\n      matches = dataRouterState.matches;\n    } else {\n      return null;\n    }\n  }\n  let renderedMatches = matches;\n  let errors = dataRouterState?.errors;\n  if (errors != null) {\n    let errorIndex = renderedMatches.findIndex(\n      (m) => m.route.id && errors?.[m.route.id] !== void 0\n    );\n    invariant(\n      errorIndex >= 0,\n      `Could not find a matching route for errors on route IDs: ${Object.keys(\n        errors\n      ).join(\",\")}`\n    );\n    renderedMatches = renderedMatches.slice(\n      0,\n      Math.min(renderedMatches.length, errorIndex + 1)\n    );\n  }\n  let renderFallback = false;\n  let fallbackIndex = -1;\n  if (dataRouterState) {\n    for (let i = 0; i < renderedMatches.length; i++) {\n      let match = renderedMatches[i];\n      if (match.route.HydrateFallback || match.route.hydrateFallbackElement) {\n        fallbackIndex = i;\n      }\n      if (match.route.id) {\n        let { loaderData, errors: errors2 } = dataRouterState;\n        let needsToRunLoader = match.route.loader && !loaderData.hasOwnProperty(match.route.id) && (!errors2 || errors2[match.route.id] === void 0);\n        if (match.route.lazy || needsToRunLoader) {\n          renderFallback = true;\n          if (fallbackIndex >= 0) {\n            renderedMatches = renderedMatches.slice(0, fallbackIndex + 1);\n          } else {\n            renderedMatches = [renderedMatches[0]];\n          }\n          break;\n        }\n      }\n    }\n  }\n  let onError = dataRouterState && onErrorHandler ? (error, errorInfo) => {\n    onErrorHandler(error, {\n      location: dataRouterState.location,\n      params: dataRouterState.matches?.[0]?.params ?? {},\n      unstable_pattern: getRoutePattern(dataRouterState.matches),\n      errorInfo\n    });\n  } : void 0;\n  return renderedMatches.reduceRight(\n    (outlet, match, index) => {\n      let error;\n      let shouldRenderHydrateFallback = false;\n      let errorElement = null;\n      let hydrateFallbackElement = null;\n      if (dataRouterState) {\n        error = errors && match.route.id ? errors[match.route.id] : void 0;\n        errorElement = match.route.errorElement || defaultErrorElement;\n        if (renderFallback) {\n          if (fallbackIndex < 0 && index === 0) {\n            warningOnce(\n              \"route-fallback\",\n              false,\n              \"No `HydrateFallback` element provided to render during initial hydration\"\n            );\n            shouldRenderHydrateFallback = true;\n            hydrateFallbackElement = null;\n          } else if (fallbackIndex === index) {\n            shouldRenderHydrateFallback = true;\n            hydrateFallbackElement = match.route.hydrateFallbackElement || null;\n          }\n        }\n      }\n      let matches2 = parentMatches.concat(renderedMatches.slice(0, index + 1));\n      let getChildren = () => {\n        let children;\n        if (error) {\n          children = errorElement;\n        } else if (shouldRenderHydrateFallback) {\n          children = hydrateFallbackElement;\n        } else if (match.route.Component) {\n          children = /* @__PURE__ */ React2.createElement(match.route.Component, null);\n        } else if (match.route.element) {\n          children = match.route.element;\n        } else {\n          children = outlet;\n        }\n        return /* @__PURE__ */ React2.createElement(\n          RenderedRoute,\n          {\n            match,\n            routeContext: {\n              outlet,\n              matches: matches2,\n              isDataRoute: dataRouterState != null\n            },\n            children\n          }\n        );\n      };\n      return dataRouterState && (match.route.ErrorBoundary || match.route.errorElement || index === 0) ? /* @__PURE__ */ React2.createElement(\n        RenderErrorBoundary,\n        {\n          location: dataRouterState.location,\n          revalidation: dataRouterState.revalidation,\n          component: errorElement,\n          error,\n          children: getChildren(),\n          routeContext: { outlet: null, matches: matches2, isDataRoute: true },\n          onError\n        }\n      ) : getChildren();\n    },\n    null\n  );\n}\nfunction getDataRouterConsoleError(hookName) {\n  return `${hookName} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`;\n}\nfunction useDataRouterContext(hookName) {\n  let ctx = React2.useContext(DataRouterContext);\n  invariant(ctx, getDataRouterConsoleError(hookName));\n  return ctx;\n}\nfunction useDataRouterState(hookName) {\n  let state = React2.useContext(DataRouterStateContext);\n  invariant(state, getDataRouterConsoleError(hookName));\n  return state;\n}\nfunction useRouteContext(hookName) {\n  let route = React2.useContext(RouteContext);\n  invariant(route, getDataRouterConsoleError(hookName));\n  return route;\n}\nfunction useCurrentRouteId(hookName) {\n  let route = useRouteContext(hookName);\n  let thisRoute = route.matches[route.matches.length - 1];\n  invariant(\n    thisRoute.route.id,\n    `${hookName} can only be used on routes that contain a unique \"id\"`\n  );\n  return thisRoute.route.id;\n}\nfunction useRouteId() {\n  return useCurrentRouteId(\"useRouteId\" /* UseRouteId */);\n}\nfunction useNavigation() {\n  let state = useDataRouterState(\"useNavigation\" /* UseNavigation */);\n  return state.navigation;\n}\nfunction useRevalidator() {\n  let dataRouterContext = useDataRouterContext(\"useRevalidator\" /* UseRevalidator */);\n  let state = useDataRouterState(\"useRevalidator\" /* UseRevalidator */);\n  let revalidate = React2.useCallback(async () => {\n    await dataRouterContext.router.revalidate();\n  }, [dataRouterContext.router]);\n  return React2.useMemo(\n    () => ({ revalidate, state: state.revalidation }),\n    [revalidate, state.revalidation]\n  );\n}\nfunction useMatches() {\n  let { matches, loaderData } = useDataRouterState(\n    \"useMatches\" /* UseMatches */\n  );\n  return React2.useMemo(\n    () => matches.map((m) => convertRouteMatchToUiMatch(m, loaderData)),\n    [matches, loaderData]\n  );\n}\nfunction useLoaderData() {\n  let state = useDataRouterState(\"useLoaderData\" /* UseLoaderData */);\n  let routeId = useCurrentRouteId(\"useLoaderData\" /* UseLoaderData */);\n  return state.loaderData[routeId];\n}\nfunction useRouteLoaderData(routeId) {\n  let state = useDataRouterState(\"useRouteLoaderData\" /* UseRouteLoaderData */);\n  return state.loaderData[routeId];\n}\nfunction useActionData() {\n  let state = useDataRouterState(\"useActionData\" /* UseActionData */);\n  let routeId = useCurrentRouteId(\"useLoaderData\" /* UseLoaderData */);\n  return state.actionData ? state.actionData[routeId] : void 0;\n}\nfunction useRouteError() {\n  let error = React2.useContext(RouteErrorContext);\n  let state = useDataRouterState(\"useRouteError\" /* UseRouteError */);\n  let routeId = useCurrentRouteId(\"useRouteError\" /* UseRouteError */);\n  if (error !== void 0) {\n    return error;\n  }\n  return state.errors?.[routeId];\n}\nfunction useAsyncValue() {\n  let value = React2.useContext(AwaitContext);\n  return value?._data;\n}\nfunction useAsyncError() {\n  let value = React2.useContext(AwaitContext);\n  return value?._error;\n}\nvar blockerId = 0;\nfunction useBlocker(shouldBlock) {\n  let { router, basename } = useDataRouterContext(\"useBlocker\" /* UseBlocker */);\n  let state = useDataRouterState(\"useBlocker\" /* UseBlocker */);\n  let [blockerKey, setBlockerKey] = React2.useState(\"\");\n  let blockerFunction = React2.useCallback(\n    (arg) => {\n      if (typeof shouldBlock !== \"function\") {\n        return !!shouldBlock;\n      }\n      if (basename === \"/\") {\n        return shouldBlock(arg);\n      }\n      let { currentLocation, nextLocation, historyAction } = arg;\n      return shouldBlock({\n        currentLocation: {\n          ...currentLocation,\n          pathname: stripBasename(currentLocation.pathname, basename) || currentLocation.pathname\n        },\n        nextLocation: {\n          ...nextLocation,\n          pathname: stripBasename(nextLocation.pathname, basename) || nextLocation.pathname\n        },\n        historyAction\n      });\n    },\n    [basename, shouldBlock]\n  );\n  React2.useEffect(() => {\n    let key = String(++blockerId);\n    setBlockerKey(key);\n    return () => router.deleteBlocker(key);\n  }, [router]);\n  React2.useEffect(() => {\n    if (blockerKey !== \"\") {\n      router.getBlocker(blockerKey, blockerFunction);\n    }\n  }, [router, blockerKey, blockerFunction]);\n  return blockerKey && state.blockers.has(blockerKey) ? state.blockers.get(blockerKey) : IDLE_BLOCKER;\n}\nfunction useNavigateStable() {\n  let { router } = useDataRouterContext(\"useNavigate\" /* UseNavigateStable */);\n  let id = useCurrentRouteId(\"useNavigate\" /* UseNavigateStable */);\n  let activeRef = React2.useRef(false);\n  useIsomorphicLayoutEffect(() => {\n    activeRef.current = true;\n  });\n  let navigate = React2.useCallback(\n    async (to, options = {}) => {\n      warning(activeRef.current, navigateEffectWarning);\n      if (!activeRef.current) return;\n      if (typeof to === \"number\") {\n        await router.navigate(to);\n      } else {\n        await router.navigate(to, { fromRouteId: id, ...options });\n      }\n    },\n    [router, id]\n  );\n  return navigate;\n}\nvar alreadyWarned = {};\nfunction warningOnce(key, cond, message) {\n  if (!cond && !alreadyWarned[key]) {\n    alreadyWarned[key] = true;\n    warning(false, message);\n  }\n}\nfunction useRoute(...args) {\n  const currentRouteId = useCurrentRouteId(\n    \"useRoute\" /* UseRoute */\n  );\n  const id = args[0] ?? currentRouteId;\n  const state = useDataRouterState(\"useRoute\" /* UseRoute */);\n  const route = state.matches.find(({ route: route2 }) => route2.id === id);\n  if (route === void 0) return void 0;\n  return {\n    handle: route.route.handle,\n    loaderData: state.loaderData[id],\n    actionData: state.actionData?.[id]\n  };\n}\n\n// lib/components.tsx\nimport * as React3 from \"react\";\n\n// lib/server-runtime/warnings.ts\nvar alreadyWarned2 = {};\nfunction warnOnce(condition, message) {\n  if (!condition && !alreadyWarned2[message]) {\n    alreadyWarned2[message] = true;\n    console.warn(message);\n  }\n}\n\n// lib/components.tsx\nvar USE_OPTIMISTIC = \"useOptimistic\";\nvar useOptimisticImpl = React3[USE_OPTIMISTIC];\nvar stableUseOptimisticSetter = () => void 0;\nfunction useOptimisticSafe(val) {\n  if (useOptimisticImpl) {\n    return useOptimisticImpl(val);\n  } else {\n    return [val, stableUseOptimisticSetter];\n  }\n}\nfunction mapRouteProperties(route) {\n  let updates = {\n    // Note: this check also occurs in createRoutesFromChildren so update\n    // there if you change this -- please and thank you!\n    hasErrorBoundary: route.hasErrorBoundary || route.ErrorBoundary != null || route.errorElement != null\n  };\n  if (route.Component) {\n    if (ENABLE_DEV_WARNINGS) {\n      if (route.element) {\n        warning(\n          false,\n          \"You should not include both `Component` and `element` on your route - `Component` will be used.\"\n        );\n      }\n    }\n    Object.assign(updates, {\n      element: React3.createElement(route.Component),\n      Component: void 0\n    });\n  }\n  if (route.HydrateFallback) {\n    if (ENABLE_DEV_WARNINGS) {\n      if (route.hydrateFallbackElement) {\n        warning(\n          false,\n          \"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used.\"\n        );\n      }\n    }\n    Object.assign(updates, {\n      hydrateFallbackElement: React3.createElement(route.HydrateFallback),\n      HydrateFallback: void 0\n    });\n  }\n  if (route.ErrorBoundary) {\n    if (ENABLE_DEV_WARNINGS) {\n      if (route.errorElement) {\n        warning(\n          false,\n          \"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used.\"\n        );\n      }\n    }\n    Object.assign(updates, {\n      errorElement: React3.createElement(route.ErrorBoundary),\n      ErrorBoundary: void 0\n    });\n  }\n  return updates;\n}\nvar hydrationRouteProperties = [\n  \"HydrateFallback\",\n  \"hydrateFallbackElement\"\n];\nfunction createMemoryRouter(routes, opts) {\n  return createRouter({\n    basename: opts?.basename,\n    getContext: opts?.getContext,\n    future: opts?.future,\n    history: createMemoryHistory({\n      initialEntries: opts?.initialEntries,\n      initialIndex: opts?.initialIndex\n    }),\n    hydrationData: opts?.hydrationData,\n    routes,\n    hydrationRouteProperties,\n    mapRouteProperties,\n    dataStrategy: opts?.dataStrategy,\n    patchRoutesOnNavigation: opts?.patchRoutesOnNavigation,\n    unstable_instrumentations: opts?.unstable_instrumentations\n  }).initialize();\n}\nvar Deferred = class {\n  constructor() {\n    this.status = \"pending\";\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = (value) => {\n        if (this.status === \"pending\") {\n          this.status = \"resolved\";\n          resolve(value);\n        }\n      };\n      this.reject = (reason) => {\n        if (this.status === \"pending\") {\n          this.status = \"rejected\";\n          reject(reason);\n        }\n      };\n    });\n  }\n};\nfunction RouterProvider({\n  router,\n  flushSync: reactDomFlushSyncImpl,\n  onError,\n  unstable_useTransitions\n}) {\n  let unstable_rsc = useIsRSCRouterContext();\n  unstable_useTransitions = unstable_rsc || unstable_useTransitions;\n  let [_state, setStateImpl] = React3.useState(router.state);\n  let [state, setOptimisticState] = useOptimisticSafe(_state);\n  let [pendingState, setPendingState] = React3.useState();\n  let [vtContext, setVtContext] = React3.useState({\n    isTransitioning: false\n  });\n  let [renderDfd, setRenderDfd] = React3.useState();\n  let [transition, setTransition] = React3.useState();\n  let [interruption, setInterruption] = React3.useState();\n  let fetcherData = React3.useRef(/* @__PURE__ */ new Map());\n  let setState = React3.useCallback(\n    (newState, { deletedFetchers, newErrors, flushSync, viewTransitionOpts }) => {\n      if (newErrors && onError) {\n        Object.values(newErrors).forEach(\n          (error) => onError(error, {\n            location: newState.location,\n            params: newState.matches[0]?.params ?? {},\n            unstable_pattern: getRoutePattern(newState.matches)\n          })\n        );\n      }\n      newState.fetchers.forEach((fetcher, key) => {\n        if (fetcher.data !== void 0) {\n          fetcherData.current.set(key, fetcher.data);\n        }\n      });\n      deletedFetchers.forEach((key) => fetcherData.current.delete(key));\n      warnOnce(\n        flushSync === false || reactDomFlushSyncImpl != null,\n        'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from \"react-router/dom\"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.'\n      );\n      let isViewTransitionAvailable = router.window != null && router.window.document != null && typeof router.window.document.startViewTransition === \"function\";\n      warnOnce(\n        viewTransitionOpts == null || isViewTransitionAvailable,\n        \"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available.\"\n      );\n      if (!viewTransitionOpts || !isViewTransitionAvailable) {\n        if (reactDomFlushSyncImpl && flushSync) {\n          reactDomFlushSyncImpl(() => setStateImpl(newState));\n        } else if (unstable_useTransitions === false) {\n          setStateImpl(newState);\n        } else {\n          React3.startTransition(() => {\n            if (unstable_useTransitions === true) {\n              setOptimisticState((s) => getOptimisticRouterState(s, newState));\n            }\n            setStateImpl(newState);\n          });\n        }\n        return;\n      }\n      if (reactDomFlushSyncImpl && flushSync) {\n        reactDomFlushSyncImpl(() => {\n          if (transition) {\n            renderDfd?.resolve();\n            transition.skipTransition();\n          }\n          setVtContext({\n            isTransitioning: true,\n            flushSync: true,\n            currentLocation: viewTransitionOpts.currentLocation,\n            nextLocation: viewTransitionOpts.nextLocation\n          });\n        });\n        let t = router.window.document.startViewTransition(() => {\n          reactDomFlushSyncImpl(() => setStateImpl(newState));\n        });\n        t.finished.finally(() => {\n          reactDomFlushSyncImpl(() => {\n            setRenderDfd(void 0);\n            setTransition(void 0);\n            setPendingState(void 0);\n            setVtContext({ isTransitioning: false });\n          });\n        });\n        reactDomFlushSyncImpl(() => setTransition(t));\n        return;\n      }\n      if (transition) {\n        renderDfd?.resolve();\n        transition.skipTransition();\n        setInterruption({\n          state: newState,\n          currentLocation: viewTransitionOpts.currentLocation,\n          nextLocation: viewTransitionOpts.nextLocation\n        });\n      } else {\n        setPendingState(newState);\n        setVtContext({\n          isTransitioning: true,\n          flushSync: false,\n          currentLocation: viewTransitionOpts.currentLocation,\n          nextLocation: viewTransitionOpts.nextLocation\n        });\n      }\n    },\n    [\n      router.window,\n      reactDomFlushSyncImpl,\n      transition,\n      renderDfd,\n      unstable_useTransitions,\n      setOptimisticState,\n      onError\n    ]\n  );\n  React3.useLayoutEffect(() => router.subscribe(setState), [router, setState]);\n  React3.useEffect(() => {\n    if (vtContext.isTransitioning && !vtContext.flushSync) {\n      setRenderDfd(new Deferred());\n    }\n  }, [vtContext]);\n  React3.useEffect(() => {\n    if (renderDfd && pendingState && router.window) {\n      let newState = pendingState;\n      let renderPromise = renderDfd.promise;\n      let transition2 = router.window.document.startViewTransition(async () => {\n        if (unstable_useTransitions === false) {\n          setStateImpl(newState);\n        } else {\n          React3.startTransition(() => {\n            if (unstable_useTransitions === true) {\n              setOptimisticState((s) => getOptimisticRouterState(s, newState));\n            }\n            setStateImpl(newState);\n          });\n        }\n        await renderPromise;\n      });\n      transition2.finished.finally(() => {\n        setRenderDfd(void 0);\n        setTransition(void 0);\n        setPendingState(void 0);\n        setVtContext({ isTransitioning: false });\n      });\n      setTransition(transition2);\n    }\n  }, [\n    pendingState,\n    renderDfd,\n    router.window,\n    unstable_useTransitions,\n    setOptimisticState\n  ]);\n  React3.useEffect(() => {\n    if (renderDfd && pendingState && state.location.key === pendingState.location.key) {\n      renderDfd.resolve();\n    }\n  }, [renderDfd, transition, state.location, pendingState]);\n  React3.useEffect(() => {\n    if (!vtContext.isTransitioning && interruption) {\n      setPendingState(interruption.state);\n      setVtContext({\n        isTransitioning: true,\n        flushSync: false,\n        currentLocation: interruption.currentLocation,\n        nextLocation: interruption.nextLocation\n      });\n      setInterruption(void 0);\n    }\n  }, [vtContext.isTransitioning, interruption]);\n  let navigator = React3.useMemo(() => {\n    return {\n      createHref: router.createHref,\n      encodeLocation: router.encodeLocation,\n      go: (n) => router.navigate(n),\n      push: (to, state2, opts) => router.navigate(to, {\n        state: state2,\n        preventScrollReset: opts?.preventScrollReset\n      }),\n      replace: (to, state2, opts) => router.navigate(to, {\n        replace: true,\n        state: state2,\n        preventScrollReset: opts?.preventScrollReset\n      })\n    };\n  }, [router]);\n  let basename = router.basename || \"/\";\n  let dataRouterContext = React3.useMemo(\n    () => ({\n      router,\n      navigator,\n      static: false,\n      basename,\n      onError\n    }),\n    [router, navigator, basename, onError]\n  );\n  return /* @__PURE__ */ React3.createElement(React3.Fragment, null, /* @__PURE__ */ React3.createElement(DataRouterContext.Provider, { value: dataRouterContext }, /* @__PURE__ */ React3.createElement(DataRouterStateContext.Provider, { value: state }, /* @__PURE__ */ React3.createElement(FetchersContext.Provider, { value: fetcherData.current }, /* @__PURE__ */ React3.createElement(ViewTransitionContext.Provider, { value: vtContext }, /* @__PURE__ */ React3.createElement(\n    Router,\n    {\n      basename,\n      location: state.location,\n      navigationType: state.historyAction,\n      navigator,\n      unstable_useTransitions\n    },\n    /* @__PURE__ */ React3.createElement(\n      MemoizedDataRoutes,\n      {\n        routes: router.routes,\n        future: router.future,\n        state,\n        onError\n      }\n    )\n  ))))), null);\n}\nfunction getOptimisticRouterState(currentState, newState) {\n  return {\n    // Don't surface \"current location specific\" stuff mid-navigation\n    // (historyAction, location, matches, loaderData, errors, initialized,\n    // restoreScroll, preventScrollReset, blockers, etc.)\n    ...currentState,\n    // Only surface \"pending/in-flight stuff\"\n    // (navigation, revalidation, actionData, fetchers, )\n    navigation: newState.navigation.state !== \"idle\" ? newState.navigation : currentState.navigation,\n    revalidation: newState.revalidation !== \"idle\" ? newState.revalidation : currentState.revalidation,\n    actionData: newState.navigation.state !== \"submitting\" ? newState.actionData : currentState.actionData,\n    fetchers: newState.fetchers\n  };\n}\nvar MemoizedDataRoutes = React3.memo(DataRoutes);\nfunction DataRoutes({\n  routes,\n  future,\n  state,\n  onError\n}) {\n  return useRoutesImpl(routes, void 0, state, onError, future);\n}\nfunction MemoryRouter({\n  basename,\n  children,\n  initialEntries,\n  initialIndex,\n  unstable_useTransitions\n}) {\n  let historyRef = React3.useRef();\n  if (historyRef.current == null) {\n    historyRef.current = createMemoryHistory({\n      initialEntries,\n      initialIndex,\n      v5Compat: true\n    });\n  }\n  let history = historyRef.current;\n  let [state, setStateImpl] = React3.useState({\n    action: history.action,\n    location: history.location\n  });\n  let setState = React3.useCallback(\n    (newState) => {\n      if (unstable_useTransitions === false) {\n        setStateImpl(newState);\n      } else {\n        React3.startTransition(() => setStateImpl(newState));\n      }\n    },\n    [unstable_useTransitions]\n  );\n  React3.useLayoutEffect(() => history.listen(setState), [history, setState]);\n  return /* @__PURE__ */ React3.createElement(\n    Router,\n    {\n      basename,\n      children,\n      location: state.location,\n      navigationType: state.action,\n      navigator: history,\n      unstable_useTransitions\n    }\n  );\n}\nfunction Navigate({\n  to,\n  replace: replace2,\n  state,\n  relative\n}) {\n  invariant(\n    useInRouterContext(),\n    // TODO: This error is probably because they somehow have 2 versions of\n    // the router loaded. We can help them understand how to avoid that.\n    `<Navigate> may be used only in the context of a <Router> component.`\n  );\n  let { static: isStatic } = React3.useContext(NavigationContext);\n  warning(\n    !isStatic,\n    `<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.`\n  );\n  let { matches } = React3.useContext(RouteContext);\n  let { pathname: locationPathname } = useLocation();\n  let navigate = useNavigate();\n  let path = resolveTo(\n    to,\n    getResolveToMatches(matches),\n    locationPathname,\n    relative === \"path\"\n  );\n  let jsonPath = JSON.stringify(path);\n  React3.useEffect(() => {\n    navigate(JSON.parse(jsonPath), { replace: replace2, state, relative });\n  }, [navigate, jsonPath, relative, replace2, state]);\n  return null;\n}\nfunction Outlet(props) {\n  return useOutlet(props.context);\n}\nfunction Route(props) {\n  invariant(\n    false,\n    `A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.`\n  );\n}\nfunction Router({\n  basename: basenameProp = \"/\",\n  children = null,\n  location: locationProp,\n  navigationType = \"POP\" /* Pop */,\n  navigator,\n  static: staticProp = false,\n  unstable_useTransitions\n}) {\n  invariant(\n    !useInRouterContext(),\n    `You cannot render a <Router> inside another <Router>. You should never have more than one in your app.`\n  );\n  let basename = basenameProp.replace(/^\\/*/, \"/\");\n  let navigationContext = React3.useMemo(\n    () => ({\n      basename,\n      navigator,\n      static: staticProp,\n      unstable_useTransitions,\n      future: {}\n    }),\n    [basename, navigator, staticProp, unstable_useTransitions]\n  );\n  if (typeof locationProp === \"string\") {\n    locationProp = parsePath(locationProp);\n  }\n  let {\n    pathname = \"/\",\n    search = \"\",\n    hash = \"\",\n    state = null,\n    key = \"default\"\n  } = locationProp;\n  let locationContext = React3.useMemo(() => {\n    let trailingPathname = stripBasename(pathname, basename);\n    if (trailingPathname == null) {\n      return null;\n    }\n    return {\n      location: {\n        pathname: trailingPathname,\n        search,\n        hash,\n        state,\n        key\n      },\n      navigationType\n    };\n  }, [basename, pathname, search, hash, state, key, navigationType]);\n  warning(\n    locationContext != null,\n    `<Router basename=\"${basename}\"> is not able to match the URL \"${pathname}${search}${hash}\" because it does not start with the basename, so the <Router> won't render anything.`\n  );\n  if (locationContext == null) {\n    return null;\n  }\n  return /* @__PURE__ */ React3.createElement(NavigationContext.Provider, { value: navigationContext }, /* @__PURE__ */ React3.createElement(LocationContext.Provider, { children, value: locationContext }));\n}\nfunction Routes({\n  children,\n  location\n}) {\n  return useRoutes(createRoutesFromChildren(children), location);\n}\nfunction Await({\n  children,\n  errorElement,\n  resolve\n}) {\n  let dataRouterContext = React3.useContext(DataRouterContext);\n  let dataRouterStateContext = React3.useContext(DataRouterStateContext);\n  let onError = React3.useCallback(\n    (error, errorInfo) => {\n      if (dataRouterContext && dataRouterContext.onError && dataRouterStateContext) {\n        dataRouterContext.onError(error, {\n          location: dataRouterStateContext.location,\n          params: dataRouterStateContext.matches[0]?.params || {},\n          unstable_pattern: getRoutePattern(dataRouterStateContext.matches),\n          errorInfo\n        });\n      }\n    },\n    [dataRouterContext, dataRouterStateContext]\n  );\n  return /* @__PURE__ */ React3.createElement(\n    AwaitErrorBoundary,\n    {\n      resolve,\n      errorElement,\n      onError\n    },\n    /* @__PURE__ */ React3.createElement(ResolveAwait, null, children)\n  );\n}\nvar AwaitErrorBoundary = class extends React3.Component {\n  constructor(props) {\n    super(props);\n    this.state = { error: null };\n  }\n  static getDerivedStateFromError(error) {\n    return { error };\n  }\n  componentDidCatch(error, errorInfo) {\n    if (this.props.onError) {\n      this.props.onError(error, errorInfo);\n    } else {\n      console.error(\n        \"<Await> caught the following error during render\",\n        error,\n        errorInfo\n      );\n    }\n  }\n  render() {\n    let { children, errorElement, resolve } = this.props;\n    let promise = null;\n    let status = 0 /* pending */;\n    if (!(resolve instanceof Promise)) {\n      status = 1 /* success */;\n      promise = Promise.resolve();\n      Object.defineProperty(promise, \"_tracked\", { get: () => true });\n      Object.defineProperty(promise, \"_data\", { get: () => resolve });\n    } else if (this.state.error) {\n      status = 2 /* error */;\n      let renderError = this.state.error;\n      promise = Promise.reject().catch(() => {\n      });\n      Object.defineProperty(promise, \"_tracked\", { get: () => true });\n      Object.defineProperty(promise, \"_error\", { get: () => renderError });\n    } else if (resolve._tracked) {\n      promise = resolve;\n      status = \"_error\" in promise ? 2 /* error */ : \"_data\" in promise ? 1 /* success */ : 0 /* pending */;\n    } else {\n      status = 0 /* pending */;\n      Object.defineProperty(resolve, \"_tracked\", { get: () => true });\n      promise = resolve.then(\n        (data2) => Object.defineProperty(resolve, \"_data\", { get: () => data2 }),\n        (error) => {\n          this.props.onError?.(error);\n          Object.defineProperty(resolve, \"_error\", { get: () => error });\n        }\n      );\n    }\n    if (status === 2 /* error */ && !errorElement) {\n      throw promise._error;\n    }\n    if (status === 2 /* error */) {\n      return /* @__PURE__ */ React3.createElement(AwaitContext.Provider, { value: promise, children: errorElement });\n    }\n    if (status === 1 /* success */) {\n      return /* @__PURE__ */ React3.createElement(AwaitContext.Provider, { value: promise, children });\n    }\n    throw promise;\n  }\n};\nfunction ResolveAwait({\n  children\n}) {\n  let data2 = useAsyncValue();\n  let toRender = typeof children === \"function\" ? children(data2) : children;\n  return /* @__PURE__ */ React3.createElement(React3.Fragment, null, toRender);\n}\nfunction createRoutesFromChildren(children, parentPath = []) {\n  let routes = [];\n  React3.Children.forEach(children, (element, index) => {\n    if (!React3.isValidElement(element)) {\n      return;\n    }\n    let treePath = [...parentPath, index];\n    if (element.type === React3.Fragment) {\n      routes.push.apply(\n        routes,\n        createRoutesFromChildren(element.props.children, treePath)\n      );\n      return;\n    }\n    invariant(\n      element.type === Route,\n      `[${typeof element.type === \"string\" ? element.type : element.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`\n    );\n    invariant(\n      !element.props.index || !element.props.children,\n      \"An index route cannot have child routes.\"\n    );\n    let route = {\n      id: element.props.id || treePath.join(\"-\"),\n      caseSensitive: element.props.caseSensitive,\n      element: element.props.element,\n      Component: element.props.Component,\n      index: element.props.index,\n      path: element.props.path,\n      middleware: element.props.middleware,\n      loader: element.props.loader,\n      action: element.props.action,\n      hydrateFallbackElement: element.props.hydrateFallbackElement,\n      HydrateFallback: element.props.HydrateFallback,\n      errorElement: element.props.errorElement,\n      ErrorBoundary: element.props.ErrorBoundary,\n      hasErrorBoundary: element.props.hasErrorBoundary === true || element.props.ErrorBoundary != null || element.props.errorElement != null,\n      shouldRevalidate: element.props.shouldRevalidate,\n      handle: element.props.handle,\n      lazy: element.props.lazy\n    };\n    if (element.props.children) {\n      route.children = createRoutesFromChildren(\n        element.props.children,\n        treePath\n      );\n    }\n    routes.push(route);\n  });\n  return routes;\n}\nvar createRoutesFromElements = createRoutesFromChildren;\nfunction renderMatches(matches) {\n  return _renderMatches(matches);\n}\nfunction useRouteComponentProps() {\n  return {\n    params: useParams(),\n    loaderData: useLoaderData(),\n    actionData: useActionData(),\n    matches: useMatches()\n  };\n}\nfunction WithComponentProps({\n  children\n}) {\n  const props = useRouteComponentProps();\n  return React3.cloneElement(children, props);\n}\nfunction withComponentProps(Component4) {\n  return function WithComponentProps2() {\n    const props = useRouteComponentProps();\n    return React3.createElement(Component4, props);\n  };\n}\nfunction useHydrateFallbackProps() {\n  return {\n    params: useParams(),\n    loaderData: useLoaderData(),\n    actionData: useActionData()\n  };\n}\nfunction WithHydrateFallbackProps({\n  children\n}) {\n  const props = useHydrateFallbackProps();\n  return React3.cloneElement(children, props);\n}\nfunction withHydrateFallbackProps(HydrateFallback) {\n  return function WithHydrateFallbackProps2() {\n    const props = useHydrateFallbackProps();\n    return React3.createElement(HydrateFallback, props);\n  };\n}\nfunction useErrorBoundaryProps() {\n  return {\n    params: useParams(),\n    loaderData: useLoaderData(),\n    actionData: useActionData(),\n    error: useRouteError()\n  };\n}\nfunction WithErrorBoundaryProps({\n  children\n}) {\n  const props = useErrorBoundaryProps();\n  return React3.cloneElement(children, props);\n}\nfunction withErrorBoundaryProps(ErrorBoundary) {\n  return function WithErrorBoundaryProps2() {\n    const props = useErrorBoundaryProps();\n    return React3.createElement(ErrorBoundary, props);\n  };\n}\n\n// lib/dom/dom.ts\nvar defaultMethod = \"get\";\nvar defaultEncType = \"application/x-www-form-urlencoded\";\nfunction isHtmlElement(object) {\n  return typeof HTMLElement !== \"undefined\" && object instanceof HTMLElement;\n}\nfunction isButtonElement(object) {\n  return isHtmlElement(object) && object.tagName.toLowerCase() === \"button\";\n}\nfunction isFormElement(object) {\n  return isHtmlElement(object) && object.tagName.toLowerCase() === \"form\";\n}\nfunction isInputElement(object) {\n  return isHtmlElement(object) && object.tagName.toLowerCase() === \"input\";\n}\nfunction isModifiedEvent(event) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}\nfunction shouldProcessLinkClick(event, target) {\n  return event.button === 0 && // Ignore everything but left clicks\n  (!target || target === \"_self\") && // Let browser handle \"target=_blank\" etc.\n  !isModifiedEvent(event);\n}\nfunction createSearchParams(init = \"\") {\n  return new URLSearchParams(\n    typeof init === \"string\" || Array.isArray(init) || init instanceof URLSearchParams ? init : Object.keys(init).reduce((memo2, key) => {\n      let value = init[key];\n      return memo2.concat(\n        Array.isArray(value) ? value.map((v) => [key, v]) : [[key, value]]\n      );\n    }, [])\n  );\n}\nfunction getSearchParamsForLocation(locationSearch, defaultSearchParams) {\n  let searchParams = createSearchParams(locationSearch);\n  if (defaultSearchParams) {\n    defaultSearchParams.forEach((_, key) => {\n      if (!searchParams.has(key)) {\n        defaultSearchParams.getAll(key).forEach((value) => {\n          searchParams.append(key, value);\n        });\n      }\n    });\n  }\n  return searchParams;\n}\nvar _formDataSupportsSubmitter = null;\nfunction isFormDataSubmitterSupported() {\n  if (_formDataSupportsSubmitter === null) {\n    try {\n      new FormData(\n        document.createElement(\"form\"),\n        // @ts-expect-error if FormData supports the submitter parameter, this will throw\n        0\n      );\n      _formDataSupportsSubmitter = false;\n    } catch (e) {\n      _formDataSupportsSubmitter = true;\n    }\n  }\n  return _formDataSupportsSubmitter;\n}\nvar supportedFormEncTypes = /* @__PURE__ */ new Set([\n  \"application/x-www-form-urlencoded\",\n  \"multipart/form-data\",\n  \"text/plain\"\n]);\nfunction getFormEncType(encType) {\n  if (encType != null && !supportedFormEncTypes.has(encType)) {\n    warning(\n      false,\n      `\"${encType}\" is not a valid \\`encType\\` for \\`<Form>\\`/\\`<fetcher.Form>\\` and will default to \"${defaultEncType}\"`\n    );\n    return null;\n  }\n  return encType;\n}\nfunction getFormSubmissionInfo(target, basename) {\n  let method;\n  let action;\n  let encType;\n  let formData;\n  let body;\n  if (isFormElement(target)) {\n    let attr = target.getAttribute(\"action\");\n    action = attr ? stripBasename(attr, basename) : null;\n    method = target.getAttribute(\"method\") || defaultMethod;\n    encType = getFormEncType(target.getAttribute(\"enctype\")) || defaultEncType;\n    formData = new FormData(target);\n  } else if (isButtonElement(target) || isInputElement(target) && (target.type === \"submit\" || target.type === \"image\")) {\n    let form = target.form;\n    if (form == null) {\n      throw new Error(\n        `Cannot submit a <button> or <input type=\"submit\"> without a <form>`\n      );\n    }\n    let attr = target.getAttribute(\"formaction\") || form.getAttribute(\"action\");\n    action = attr ? stripBasename(attr, basename) : null;\n    method = target.getAttribute(\"formmethod\") || form.getAttribute(\"method\") || defaultMethod;\n    encType = getFormEncType(target.getAttribute(\"formenctype\")) || getFormEncType(form.getAttribute(\"enctype\")) || defaultEncType;\n    formData = new FormData(form, target);\n    if (!isFormDataSubmitterSupported()) {\n      let { name, type, value } = target;\n      if (type === \"image\") {\n        let prefix = name ? `${name}.` : \"\";\n        formData.append(`${prefix}x`, \"0\");\n        formData.append(`${prefix}y`, \"0\");\n      } else if (name) {\n        formData.append(name, value);\n      }\n    }\n  } else if (isHtmlElement(target)) {\n    throw new Error(\n      `Cannot submit element that is not <form>, <button>, or <input type=\"submit|image\">`\n    );\n  } else {\n    method = defaultMethod;\n    action = null;\n    encType = defaultEncType;\n    body = target;\n  }\n  if (formData && encType === \"text/plain\") {\n    body = formData;\n    formData = void 0;\n  }\n  return { action, method: method.toLowerCase(), encType, formData, body };\n}\n\n// lib/dom/ssr/single-fetch.tsx\nimport * as React4 from \"react\";\n\n// vendor/turbo-stream-v2/utils.ts\nvar HOLE = -1;\nvar NAN = -2;\nvar NEGATIVE_INFINITY = -3;\nvar NEGATIVE_ZERO = -4;\nvar NULL = -5;\nvar POSITIVE_INFINITY = -6;\nvar UNDEFINED = -7;\nvar TYPE_BIGINT = \"B\";\nvar TYPE_DATE = \"D\";\nvar TYPE_ERROR = \"E\";\nvar TYPE_MAP = \"M\";\nvar TYPE_NULL_OBJECT = \"N\";\nvar TYPE_PROMISE = \"P\";\nvar TYPE_REGEXP = \"R\";\nvar TYPE_SET = \"S\";\nvar TYPE_SYMBOL = \"Y\";\nvar TYPE_URL = \"U\";\nvar TYPE_PREVIOUS_RESOLVED = \"Z\";\nvar Deferred2 = class {\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = resolve;\n      this.reject = reject;\n    });\n  }\n};\nfunction createLineSplittingTransform() {\n  const decoder = new TextDecoder();\n  let leftover = \"\";\n  return new TransformStream({\n    transform(chunk, controller) {\n      const str = decoder.decode(chunk, { stream: true });\n      const parts = (leftover + str).split(\"\\n\");\n      leftover = parts.pop() || \"\";\n      for (const part of parts) {\n        controller.enqueue(part);\n      }\n    },\n    flush(controller) {\n      if (leftover) {\n        controller.enqueue(leftover);\n      }\n    }\n  });\n}\n\n// vendor/turbo-stream-v2/flatten.ts\nfunction flatten(input) {\n  const { indices } = this;\n  const existing = indices.get(input);\n  if (existing) return [existing];\n  if (input === void 0) return UNDEFINED;\n  if (input === null) return NULL;\n  if (Number.isNaN(input)) return NAN;\n  if (input === Number.POSITIVE_INFINITY) return POSITIVE_INFINITY;\n  if (input === Number.NEGATIVE_INFINITY) return NEGATIVE_INFINITY;\n  if (input === 0 && 1 / input < 0) return NEGATIVE_ZERO;\n  const index = this.index++;\n  indices.set(input, index);\n  stringify.call(this, input, index);\n  return index;\n}\nfunction stringify(input, index) {\n  const { deferred, plugins, postPlugins } = this;\n  const str = this.stringified;\n  const stack = [[input, index]];\n  while (stack.length > 0) {\n    const [input2, index2] = stack.pop();\n    const partsForObj = (obj) => Object.keys(obj).map((k) => `\"_${flatten.call(this, k)}\":${flatten.call(this, obj[k])}`).join(\",\");\n    let error = null;\n    switch (typeof input2) {\n      case \"boolean\":\n      case \"number\":\n      case \"string\":\n        str[index2] = JSON.stringify(input2);\n        break;\n      case \"bigint\":\n        str[index2] = `[\"${TYPE_BIGINT}\",\"${input2}\"]`;\n        break;\n      case \"symbol\": {\n        const keyFor = Symbol.keyFor(input2);\n        if (!keyFor) {\n          error = new Error(\n            \"Cannot encode symbol unless created with Symbol.for()\"\n          );\n        } else {\n          str[index2] = `[\"${TYPE_SYMBOL}\",${JSON.stringify(keyFor)}]`;\n        }\n        break;\n      }\n      case \"object\": {\n        if (!input2) {\n          str[index2] = `${NULL}`;\n          break;\n        }\n        const isArray = Array.isArray(input2);\n        let pluginHandled = false;\n        if (!isArray && plugins) {\n          for (const plugin of plugins) {\n            const pluginResult = plugin(input2);\n            if (Array.isArray(pluginResult)) {\n              pluginHandled = true;\n              const [pluginIdentifier, ...rest] = pluginResult;\n              str[index2] = `[${JSON.stringify(pluginIdentifier)}`;\n              if (rest.length > 0) {\n                str[index2] += `,${rest.map((v) => flatten.call(this, v)).join(\",\")}`;\n              }\n              str[index2] += \"]\";\n              break;\n            }\n          }\n        }\n        if (!pluginHandled) {\n          let result = isArray ? \"[\" : \"{\";\n          if (isArray) {\n            for (let i = 0; i < input2.length; i++)\n              result += (i ? \",\" : \"\") + (i in input2 ? flatten.call(this, input2[i]) : HOLE);\n            str[index2] = `${result}]`;\n          } else if (input2 instanceof Date) {\n            const dateTime = input2.getTime();\n            str[index2] = `[\"${TYPE_DATE}\",${Number.isNaN(dateTime) ? JSON.stringify(\"invalid\") : dateTime}]`;\n          } else if (input2 instanceof URL) {\n            str[index2] = `[\"${TYPE_URL}\",${JSON.stringify(input2.href)}]`;\n          } else if (input2 instanceof RegExp) {\n            str[index2] = `[\"${TYPE_REGEXP}\",${JSON.stringify(\n              input2.source\n            )},${JSON.stringify(input2.flags)}]`;\n          } else if (input2 instanceof Set) {\n            if (input2.size > 0) {\n              str[index2] = `[\"${TYPE_SET}\",${[...input2].map((val) => flatten.call(this, val)).join(\",\")}]`;\n            } else {\n              str[index2] = `[\"${TYPE_SET}\"]`;\n            }\n          } else if (input2 instanceof Map) {\n            if (input2.size > 0) {\n              str[index2] = `[\"${TYPE_MAP}\",${[...input2].flatMap(([k, v]) => [\n                flatten.call(this, k),\n                flatten.call(this, v)\n              ]).join(\",\")}]`;\n            } else {\n              str[index2] = `[\"${TYPE_MAP}\"]`;\n            }\n          } else if (input2 instanceof Promise) {\n            str[index2] = `[\"${TYPE_PROMISE}\",${index2}]`;\n            deferred[index2] = input2;\n          } else if (input2 instanceof Error) {\n            str[index2] = `[\"${TYPE_ERROR}\",${JSON.stringify(input2.message)}`;\n            if (input2.name !== \"Error\") {\n              str[index2] += `,${JSON.stringify(input2.name)}`;\n            }\n            str[index2] += \"]\";\n          } else if (Object.getPrototypeOf(input2) === null) {\n            str[index2] = `[\"${TYPE_NULL_OBJECT}\",{${partsForObj(input2)}}]`;\n          } else if (isPlainObject2(input2)) {\n            str[index2] = `{${partsForObj(input2)}}`;\n          } else {\n            error = new Error(\"Cannot encode object with prototype\");\n          }\n        }\n        break;\n      }\n      default: {\n        const isArray = Array.isArray(input2);\n        let pluginHandled = false;\n        if (!isArray && plugins) {\n          for (const plugin of plugins) {\n            const pluginResult = plugin(input2);\n            if (Array.isArray(pluginResult)) {\n              pluginHandled = true;\n              const [pluginIdentifier, ...rest] = pluginResult;\n              str[index2] = `[${JSON.stringify(pluginIdentifier)}`;\n              if (rest.length > 0) {\n                str[index2] += `,${rest.map((v) => flatten.call(this, v)).join(\",\")}`;\n              }\n              str[index2] += \"]\";\n              break;\n            }\n          }\n        }\n        if (!pluginHandled) {\n          error = new Error(\"Cannot encode function or unexpected type\");\n        }\n      }\n    }\n    if (error) {\n      let pluginHandled = false;\n      if (postPlugins) {\n        for (const plugin of postPlugins) {\n          const pluginResult = plugin(input2);\n          if (Array.isArray(pluginResult)) {\n            pluginHandled = true;\n            const [pluginIdentifier, ...rest] = pluginResult;\n            str[index2] = `[${JSON.stringify(pluginIdentifier)}`;\n            if (rest.length > 0) {\n              str[index2] += `,${rest.map((v) => flatten.call(this, v)).join(\",\")}`;\n            }\n            str[index2] += \"]\";\n            break;\n          }\n        }\n      }\n      if (!pluginHandled) {\n        throw error;\n      }\n    }\n  }\n}\nvar objectProtoNames2 = Object.getOwnPropertyNames(Object.prototype).sort().join(\"\\0\");\nfunction isPlainObject2(thing) {\n  const proto = Object.getPrototypeOf(thing);\n  return proto === Object.prototype || proto === null || Object.getOwnPropertyNames(proto).sort().join(\"\\0\") === objectProtoNames2;\n}\n\n// vendor/turbo-stream-v2/unflatten.ts\nvar globalObj = typeof window !== \"undefined\" ? window : typeof globalThis !== \"undefined\" ? globalThis : void 0;\nfunction unflatten(parsed) {\n  const { hydrated, values } = this;\n  if (typeof parsed === \"number\") return hydrate.call(this, parsed);\n  if (!Array.isArray(parsed) || !parsed.length) throw new SyntaxError();\n  const startIndex = values.length;\n  for (const value of parsed) {\n    values.push(value);\n  }\n  hydrated.length = values.length;\n  return hydrate.call(this, startIndex);\n}\nfunction hydrate(index) {\n  const { hydrated, values, deferred, plugins } = this;\n  let result;\n  const stack = [\n    [\n      index,\n      (v) => {\n        result = v;\n      }\n    ]\n  ];\n  let postRun = [];\n  while (stack.length > 0) {\n    const [index2, set] = stack.pop();\n    switch (index2) {\n      case UNDEFINED:\n        set(void 0);\n        continue;\n      case NULL:\n        set(null);\n        continue;\n      case NAN:\n        set(NaN);\n        continue;\n      case POSITIVE_INFINITY:\n        set(Infinity);\n        continue;\n      case NEGATIVE_INFINITY:\n        set(-Infinity);\n        continue;\n      case NEGATIVE_ZERO:\n        set(-0);\n        continue;\n    }\n    if (hydrated[index2]) {\n      set(hydrated[index2]);\n      continue;\n    }\n    const value = values[index2];\n    if (!value || typeof value !== \"object\") {\n      hydrated[index2] = value;\n      set(value);\n      continue;\n    }\n    if (Array.isArray(value)) {\n      if (typeof value[0] === \"string\") {\n        const [type, b, c] = value;\n        switch (type) {\n          case TYPE_DATE:\n            set(hydrated[index2] = new Date(b));\n            continue;\n          case TYPE_URL:\n            set(hydrated[index2] = new URL(b));\n            continue;\n          case TYPE_BIGINT:\n            set(hydrated[index2] = BigInt(b));\n            continue;\n          case TYPE_REGEXP:\n            set(hydrated[index2] = new RegExp(b, c));\n            continue;\n          case TYPE_SYMBOL:\n            set(hydrated[index2] = Symbol.for(b));\n            continue;\n          case TYPE_SET:\n            const newSet = /* @__PURE__ */ new Set();\n            hydrated[index2] = newSet;\n            for (let i = value.length - 1; i > 0; i--)\n              stack.push([\n                value[i],\n                (v) => {\n                  newSet.add(v);\n                }\n              ]);\n            set(newSet);\n            continue;\n          case TYPE_MAP:\n            const map = /* @__PURE__ */ new Map();\n            hydrated[index2] = map;\n            for (let i = value.length - 2; i > 0; i -= 2) {\n              const r = [];\n              stack.push([\n                value[i + 1],\n                (v) => {\n                  r[1] = v;\n                }\n              ]);\n              stack.push([\n                value[i],\n                (k) => {\n                  r[0] = k;\n                }\n              ]);\n              postRun.push(() => {\n                map.set(r[0], r[1]);\n              });\n            }\n            set(map);\n            continue;\n          case TYPE_NULL_OBJECT:\n            const obj = /* @__PURE__ */ Object.create(null);\n            hydrated[index2] = obj;\n            for (const key of Object.keys(b).reverse()) {\n              const r = [];\n              stack.push([\n                b[key],\n                (v) => {\n                  r[1] = v;\n                }\n              ]);\n              stack.push([\n                Number(key.slice(1)),\n                (k) => {\n                  r[0] = k;\n                }\n              ]);\n              postRun.push(() => {\n                obj[r[0]] = r[1];\n              });\n            }\n            set(obj);\n            continue;\n          case TYPE_PROMISE:\n            if (hydrated[b]) {\n              set(hydrated[index2] = hydrated[b]);\n            } else {\n              const d = new Deferred2();\n              deferred[b] = d;\n              set(hydrated[index2] = d.promise);\n            }\n            continue;\n          case TYPE_ERROR:\n            const [, message, errorType] = value;\n            let error = errorType && globalObj && globalObj[errorType] ? new globalObj[errorType](message) : new Error(message);\n            hydrated[index2] = error;\n            set(error);\n            continue;\n          case TYPE_PREVIOUS_RESOLVED:\n            set(hydrated[index2] = hydrated[b]);\n            continue;\n          default:\n            if (Array.isArray(plugins)) {\n              const r = [];\n              const vals = value.slice(1);\n              for (let i = 0; i < vals.length; i++) {\n                const v = vals[i];\n                stack.push([\n                  v,\n                  (v2) => {\n                    r[i] = v2;\n                  }\n                ]);\n              }\n              postRun.push(() => {\n                for (const plugin of plugins) {\n                  const result2 = plugin(value[0], ...r);\n                  if (result2) {\n                    set(hydrated[index2] = result2.value);\n                    return;\n                  }\n                }\n                throw new SyntaxError();\n              });\n              continue;\n            }\n            throw new SyntaxError();\n        }\n      } else {\n        const array = [];\n        hydrated[index2] = array;\n        for (let i = 0; i < value.length; i++) {\n          const n = value[i];\n          if (n !== HOLE) {\n            stack.push([\n              n,\n              (v) => {\n                array[i] = v;\n              }\n            ]);\n          }\n        }\n        set(array);\n        continue;\n      }\n    } else {\n      const object = {};\n      hydrated[index2] = object;\n      for (const key of Object.keys(value).reverse()) {\n        const r = [];\n        stack.push([\n          value[key],\n          (v) => {\n            r[1] = v;\n          }\n        ]);\n        stack.push([\n          Number(key.slice(1)),\n          (k) => {\n            r[0] = k;\n          }\n        ]);\n        postRun.push(() => {\n          object[r[0]] = r[1];\n        });\n      }\n      set(object);\n      continue;\n    }\n  }\n  while (postRun.length > 0) {\n    postRun.pop()();\n  }\n  return result;\n}\n\n// vendor/turbo-stream-v2/turbo-stream.ts\nasync function decode(readable, options) {\n  const { plugins } = options ?? {};\n  const done = new Deferred2();\n  const reader = readable.pipeThrough(createLineSplittingTransform()).getReader();\n  const decoder = {\n    values: [],\n    hydrated: [],\n    deferred: {},\n    plugins\n  };\n  const decoded = await decodeInitial.call(decoder, reader);\n  let donePromise = done.promise;\n  if (decoded.done) {\n    done.resolve();\n  } else {\n    donePromise = decodeDeferred.call(decoder, reader).then(done.resolve).catch((reason) => {\n      for (const deferred of Object.values(decoder.deferred)) {\n        deferred.reject(reason);\n      }\n      done.reject(reason);\n    });\n  }\n  return {\n    done: donePromise.then(() => reader.closed),\n    value: decoded.value\n  };\n}\nasync function decodeInitial(reader) {\n  const read = await reader.read();\n  if (!read.value) {\n    throw new SyntaxError();\n  }\n  let line;\n  try {\n    line = JSON.parse(read.value);\n  } catch (reason) {\n    throw new SyntaxError();\n  }\n  return {\n    done: read.done,\n    value: unflatten.call(this, line)\n  };\n}\nasync function decodeDeferred(reader) {\n  let read = await reader.read();\n  while (!read.done) {\n    if (!read.value) continue;\n    const line = read.value;\n    switch (line[0]) {\n      case TYPE_PROMISE: {\n        const colonIndex = line.indexOf(\":\");\n        const deferredId = Number(line.slice(1, colonIndex));\n        const deferred = this.deferred[deferredId];\n        if (!deferred) {\n          throw new Error(`Deferred ID ${deferredId} not found in stream`);\n        }\n        const lineData = line.slice(colonIndex + 1);\n        let jsonLine;\n        try {\n          jsonLine = JSON.parse(lineData);\n        } catch (reason) {\n          throw new SyntaxError();\n        }\n        const value = unflatten.call(this, jsonLine);\n        deferred.resolve(value);\n        break;\n      }\n      case TYPE_ERROR: {\n        const colonIndex = line.indexOf(\":\");\n        const deferredId = Number(line.slice(1, colonIndex));\n        const deferred = this.deferred[deferredId];\n        if (!deferred) {\n          throw new Error(`Deferred ID ${deferredId} not found in stream`);\n        }\n        const lineData = line.slice(colonIndex + 1);\n        let jsonLine;\n        try {\n          jsonLine = JSON.parse(lineData);\n        } catch (reason) {\n          throw new SyntaxError();\n        }\n        const value = unflatten.call(this, jsonLine);\n        deferred.reject(value);\n        break;\n      }\n      default:\n        throw new SyntaxError();\n    }\n    read = await reader.read();\n  }\n}\nfunction encode(input, options) {\n  const { plugins, postPlugins, signal } = options ?? {};\n  const encoder = {\n    deferred: {},\n    index: 0,\n    indices: /* @__PURE__ */ new Map(),\n    stringified: [],\n    plugins,\n    postPlugins,\n    signal\n  };\n  const textEncoder = new TextEncoder();\n  let lastSentIndex = 0;\n  const readable = new ReadableStream({\n    async start(controller) {\n      const id = flatten.call(encoder, input);\n      if (Array.isArray(id)) {\n        throw new Error(\"This should never happen\");\n      }\n      if (id < 0) {\n        controller.enqueue(textEncoder.encode(`${id}\n`));\n      } else {\n        controller.enqueue(\n          textEncoder.encode(`[${encoder.stringified.join(\",\")}]\n`)\n        );\n        lastSentIndex = encoder.stringified.length - 1;\n      }\n      const seenPromises = /* @__PURE__ */ new WeakSet();\n      if (Object.keys(encoder.deferred).length) {\n        let raceDone;\n        const racePromise = new Promise((resolve, reject) => {\n          raceDone = resolve;\n          if (signal) {\n            const rejectPromise = () => reject(signal.reason || new Error(\"Signal was aborted.\"));\n            if (signal.aborted) {\n              rejectPromise();\n            } else {\n              signal.addEventListener(\"abort\", (event) => {\n                rejectPromise();\n              });\n            }\n          }\n        });\n        while (Object.keys(encoder.deferred).length > 0) {\n          for (const [deferredId, deferred] of Object.entries(\n            encoder.deferred\n          )) {\n            if (seenPromises.has(deferred)) continue;\n            seenPromises.add(\n              // biome-ignore lint/suspicious/noAssignInExpressions: <explanation>\n              encoder.deferred[Number(deferredId)] = Promise.race([\n                racePromise,\n                deferred\n              ]).then(\n                (resolved) => {\n                  const id2 = flatten.call(encoder, resolved);\n                  if (Array.isArray(id2)) {\n                    controller.enqueue(\n                      textEncoder.encode(\n                        `${TYPE_PROMISE}${deferredId}:[[\"${TYPE_PREVIOUS_RESOLVED}\",${id2[0]}]]\n`\n                      )\n                    );\n                    encoder.index++;\n                    lastSentIndex++;\n                  } else if (id2 < 0) {\n                    controller.enqueue(\n                      textEncoder.encode(\n                        `${TYPE_PROMISE}${deferredId}:${id2}\n`\n                      )\n                    );\n                  } else {\n                    const values = encoder.stringified.slice(lastSentIndex + 1).join(\",\");\n                    controller.enqueue(\n                      textEncoder.encode(\n                        `${TYPE_PROMISE}${deferredId}:[${values}]\n`\n                      )\n                    );\n                    lastSentIndex = encoder.stringified.length - 1;\n                  }\n                },\n                (reason) => {\n                  if (!reason || typeof reason !== \"object\" || !(reason instanceof Error)) {\n                    reason = new Error(\"An unknown error occurred\");\n                  }\n                  const id2 = flatten.call(encoder, reason);\n                  if (Array.isArray(id2)) {\n                    controller.enqueue(\n                      textEncoder.encode(\n                        `${TYPE_ERROR}${deferredId}:[[\"${TYPE_PREVIOUS_RESOLVED}\",${id2[0]}]]\n`\n                      )\n                    );\n                    encoder.index++;\n                    lastSentIndex++;\n                  } else if (id2 < 0) {\n                    controller.enqueue(\n                      textEncoder.encode(\n                        `${TYPE_ERROR}${deferredId}:${id2}\n`\n                      )\n                    );\n                  } else {\n                    const values = encoder.stringified.slice(lastSentIndex + 1).join(\",\");\n                    controller.enqueue(\n                      textEncoder.encode(\n                        `${TYPE_ERROR}${deferredId}:[${values}]\n`\n                      )\n                    );\n                    lastSentIndex = encoder.stringified.length - 1;\n                  }\n                }\n              ).finally(() => {\n                delete encoder.deferred[Number(deferredId)];\n              })\n            );\n          }\n          await Promise.race(Object.values(encoder.deferred));\n        }\n        raceDone();\n      }\n      await Promise.all(Object.values(encoder.deferred));\n      controller.close();\n    }\n  });\n  return readable;\n}\n\n// lib/dom/ssr/data.ts\nasync function createRequestInit(request) {\n  let init = { signal: request.signal };\n  if (request.method !== \"GET\") {\n    init.method = request.method;\n    let contentType = request.headers.get(\"Content-Type\");\n    if (contentType && /\\bapplication\\/json\\b/.test(contentType)) {\n      init.headers = { \"Content-Type\": contentType };\n      init.body = JSON.stringify(await request.json());\n    } else if (contentType && /\\btext\\/plain\\b/.test(contentType)) {\n      init.headers = { \"Content-Type\": contentType };\n      init.body = await request.text();\n    } else if (contentType && /\\bapplication\\/x-www-form-urlencoded\\b/.test(contentType)) {\n      init.body = new URLSearchParams(await request.text());\n    } else {\n      init.body = await request.formData();\n    }\n  }\n  return init;\n}\n\n// lib/dom/ssr/markup.ts\nvar ESCAPE_LOOKUP = {\n  \"&\": \"\\\\u0026\",\n  \">\": \"\\\\u003e\",\n  \"<\": \"\\\\u003c\",\n  \"\\u2028\": \"\\\\u2028\",\n  \"\\u2029\": \"\\\\u2029\"\n};\nvar ESCAPE_REGEX = /[&><\\u2028\\u2029]/g;\nfunction escapeHtml(html) {\n  return html.replace(ESCAPE_REGEX, (match) => ESCAPE_LOOKUP[match]);\n}\n\n// lib/dom/ssr/invariant.ts\nfunction invariant2(value, message) {\n  if (value === false || value === null || typeof value === \"undefined\") {\n    throw new Error(message);\n  }\n}\n\n// lib/dom/ssr/single-fetch.tsx\nvar SingleFetchRedirectSymbol = Symbol(\"SingleFetchRedirect\");\nvar SingleFetchNoResultError = class extends Error {\n};\nvar SINGLE_FETCH_REDIRECT_STATUS = 202;\nvar NO_BODY_STATUS_CODES = /* @__PURE__ */ new Set([100, 101, 204, 205]);\nfunction StreamTransfer({\n  context,\n  identifier,\n  reader,\n  textDecoder,\n  nonce\n}) {\n  if (!context.renderMeta || !context.renderMeta.didRenderScripts) {\n    return null;\n  }\n  if (!context.renderMeta.streamCache) {\n    context.renderMeta.streamCache = {};\n  }\n  let { streamCache } = context.renderMeta;\n  let promise = streamCache[identifier];\n  if (!promise) {\n    promise = streamCache[identifier] = reader.read().then((result) => {\n      streamCache[identifier].result = {\n        done: result.done,\n        value: textDecoder.decode(result.value, { stream: true })\n      };\n    }).catch((e) => {\n      streamCache[identifier].error = e;\n    });\n  }\n  if (promise.error) {\n    throw promise.error;\n  }\n  if (promise.result === void 0) {\n    throw promise;\n  }\n  let { done, value } = promise.result;\n  let scriptTag = value ? /* @__PURE__ */ React4.createElement(\n    \"script\",\n    {\n      nonce,\n      dangerouslySetInnerHTML: {\n        __html: `window.__reactRouterContext.streamController.enqueue(${escapeHtml(\n          JSON.stringify(value)\n        )});`\n      }\n    }\n  ) : null;\n  if (done) {\n    return /* @__PURE__ */ React4.createElement(React4.Fragment, null, scriptTag, /* @__PURE__ */ React4.createElement(\n      \"script\",\n      {\n        nonce,\n        dangerouslySetInnerHTML: {\n          __html: `window.__reactRouterContext.streamController.close();`\n        }\n      }\n    ));\n  } else {\n    return /* @__PURE__ */ React4.createElement(React4.Fragment, null, scriptTag, /* @__PURE__ */ React4.createElement(React4.Suspense, null, /* @__PURE__ */ React4.createElement(\n      StreamTransfer,\n      {\n        context,\n        identifier: identifier + 1,\n        reader,\n        textDecoder,\n        nonce\n      }\n    )));\n  }\n}\nfunction getTurboStreamSingleFetchDataStrategy(getRouter, manifest, routeModules, ssr, basename, trailingSlashAware) {\n  let dataStrategy = getSingleFetchDataStrategyImpl(\n    getRouter,\n    (match) => {\n      let manifestRoute = manifest.routes[match.route.id];\n      invariant2(manifestRoute, \"Route not found in manifest\");\n      let routeModule = routeModules[match.route.id];\n      return {\n        hasLoader: manifestRoute.hasLoader,\n        hasClientLoader: manifestRoute.hasClientLoader,\n        hasShouldRevalidate: Boolean(routeModule?.shouldRevalidate)\n      };\n    },\n    fetchAndDecodeViaTurboStream,\n    ssr,\n    basename,\n    trailingSlashAware\n  );\n  return async (args) => args.runClientMiddleware(dataStrategy);\n}\nfunction getSingleFetchDataStrategyImpl(getRouter, getRouteInfo, fetchAndDecode, ssr, basename, trailingSlashAware, shouldAllowOptOut = () => true) {\n  return async (args) => {\n    let { request, matches, fetcherKey } = args;\n    let router = getRouter();\n    if (request.method !== \"GET\") {\n      return singleFetchActionStrategy(\n        args,\n        fetchAndDecode,\n        basename,\n        trailingSlashAware\n      );\n    }\n    let foundRevalidatingServerLoader = matches.some((m) => {\n      let { hasLoader, hasClientLoader } = getRouteInfo(m);\n      return m.shouldCallHandler() && hasLoader && !hasClientLoader;\n    });\n    if (!ssr && !foundRevalidatingServerLoader) {\n      return nonSsrStrategy(\n        args,\n        getRouteInfo,\n        fetchAndDecode,\n        basename,\n        trailingSlashAware\n      );\n    }\n    if (fetcherKey) {\n      return singleFetchLoaderFetcherStrategy(\n        args,\n        fetchAndDecode,\n        basename,\n        trailingSlashAware\n      );\n    }\n    return singleFetchLoaderNavigationStrategy(\n      args,\n      router,\n      getRouteInfo,\n      fetchAndDecode,\n      ssr,\n      basename,\n      trailingSlashAware,\n      shouldAllowOptOut\n    );\n  };\n}\nasync function singleFetchActionStrategy(args, fetchAndDecode, basename, trailingSlashAware) {\n  let actionMatch = args.matches.find((m) => m.shouldCallHandler());\n  invariant2(actionMatch, \"No action match found\");\n  let actionStatus = void 0;\n  let result = await actionMatch.resolve(async (handler) => {\n    let result2 = await handler(async () => {\n      let { data: data2, status } = await fetchAndDecode(\n        args,\n        basename,\n        trailingSlashAware,\n        [actionMatch.route.id]\n      );\n      actionStatus = status;\n      return unwrapSingleFetchResult(data2, actionMatch.route.id);\n    });\n    return result2;\n  });\n  if (isResponse(result.result) || isRouteErrorResponse(result.result) || isDataWithResponseInit(result.result)) {\n    return { [actionMatch.route.id]: result };\n  }\n  return {\n    [actionMatch.route.id]: {\n      type: result.type,\n      result: data(result.result, actionStatus)\n    }\n  };\n}\nasync function nonSsrStrategy(args, getRouteInfo, fetchAndDecode, basename, trailingSlashAware) {\n  let matchesToLoad = args.matches.filter((m) => m.shouldCallHandler());\n  let results = {};\n  await Promise.all(\n    matchesToLoad.map(\n      (m) => m.resolve(async (handler) => {\n        try {\n          let { hasClientLoader } = getRouteInfo(m);\n          let routeId = m.route.id;\n          let result = hasClientLoader ? await handler(async () => {\n            let { data: data2 } = await fetchAndDecode(\n              args,\n              basename,\n              trailingSlashAware,\n              [routeId]\n            );\n            return unwrapSingleFetchResult(data2, routeId);\n          }) : await handler();\n          results[m.route.id] = { type: \"data\", result };\n        } catch (e) {\n          results[m.route.id] = { type: \"error\", result: e };\n        }\n      })\n    )\n  );\n  return results;\n}\nasync function singleFetchLoaderNavigationStrategy(args, router, getRouteInfo, fetchAndDecode, ssr, basename, trailingSlashAware, shouldAllowOptOut = () => true) {\n  let routesParams = /* @__PURE__ */ new Set();\n  let foundOptOutRoute = false;\n  let routeDfds = args.matches.map(() => createDeferred2());\n  let singleFetchDfd = createDeferred2();\n  let results = {};\n  let resolvePromise = Promise.all(\n    args.matches.map(\n      async (m, i) => m.resolve(async (handler) => {\n        routeDfds[i].resolve();\n        let routeId = m.route.id;\n        let { hasLoader, hasClientLoader, hasShouldRevalidate } = getRouteInfo(m);\n        let defaultShouldRevalidate = !m.shouldRevalidateArgs || m.shouldRevalidateArgs.actionStatus == null || m.shouldRevalidateArgs.actionStatus < 400;\n        let shouldCall = m.shouldCallHandler(defaultShouldRevalidate);\n        if (!shouldCall) {\n          foundOptOutRoute || (foundOptOutRoute = m.shouldRevalidateArgs != null && // This is a revalidation,\n          hasLoader && // for a route with a server loader,\n          hasShouldRevalidate === true);\n          return;\n        }\n        if (shouldAllowOptOut(m) && hasClientLoader) {\n          if (hasLoader) {\n            foundOptOutRoute = true;\n          }\n          try {\n            let result = await handler(async () => {\n              let { data: data2 } = await fetchAndDecode(\n                args,\n                basename,\n                trailingSlashAware,\n                [routeId]\n              );\n              return unwrapSingleFetchResult(data2, routeId);\n            });\n            results[routeId] = { type: \"data\", result };\n          } catch (e) {\n            results[routeId] = { type: \"error\", result: e };\n          }\n          return;\n        }\n        if (hasLoader) {\n          routesParams.add(routeId);\n        }\n        try {\n          let result = await handler(async () => {\n            let data2 = await singleFetchDfd.promise;\n            return unwrapSingleFetchResult(data2, routeId);\n          });\n          results[routeId] = { type: \"data\", result };\n        } catch (e) {\n          results[routeId] = { type: \"error\", result: e };\n        }\n      })\n    )\n  );\n  await Promise.all(routeDfds.map((d) => d.promise));\n  let isInitialLoad = !router.state.initialized && router.state.navigation.state === \"idle\";\n  if ((isInitialLoad || routesParams.size === 0) && !window.__reactRouterHdrActive) {\n    singleFetchDfd.resolve({ routes: {} });\n  } else {\n    let targetRoutes = ssr && foundOptOutRoute && routesParams.size > 0 ? [...routesParams.keys()] : void 0;\n    try {\n      let data2 = await fetchAndDecode(\n        args,\n        basename,\n        trailingSlashAware,\n        targetRoutes\n      );\n      singleFetchDfd.resolve(data2.data);\n    } catch (e) {\n      singleFetchDfd.reject(e);\n    }\n  }\n  await resolvePromise;\n  await bubbleMiddlewareErrors(\n    singleFetchDfd.promise,\n    args.matches,\n    routesParams,\n    results\n  );\n  return results;\n}\nasync function bubbleMiddlewareErrors(singleFetchPromise, matches, routesParams, results) {\n  try {\n    let middlewareError;\n    let fetchedData = await singleFetchPromise;\n    if (\"routes\" in fetchedData) {\n      for (let match of matches) {\n        if (match.route.id in fetchedData.routes) {\n          let routeResult = fetchedData.routes[match.route.id];\n          if (\"error\" in routeResult) {\n            middlewareError = routeResult.error;\n            if (results[match.route.id]?.result == null) {\n              results[match.route.id] = {\n                type: \"error\",\n                result: middlewareError\n              };\n            }\n            break;\n          }\n        }\n      }\n    }\n    if (middlewareError !== void 0) {\n      Array.from(routesParams.values()).forEach((routeId) => {\n        if (results[routeId].result instanceof SingleFetchNoResultError) {\n          results[routeId].result = middlewareError;\n        }\n      });\n    }\n  } catch (e) {\n  }\n}\nasync function singleFetchLoaderFetcherStrategy(args, fetchAndDecode, basename, trailingSlashAware) {\n  let fetcherMatch = args.matches.find((m) => m.shouldCallHandler());\n  invariant2(fetcherMatch, \"No fetcher match found\");\n  let routeId = fetcherMatch.route.id;\n  let result = await fetcherMatch.resolve(\n    async (handler) => handler(async () => {\n      let { data: data2 } = await fetchAndDecode(args, basename, trailingSlashAware, [\n        routeId\n      ]);\n      return unwrapSingleFetchResult(data2, routeId);\n    })\n  );\n  return { [fetcherMatch.route.id]: result };\n}\nfunction stripIndexParam(url) {\n  let indexValues = url.searchParams.getAll(\"index\");\n  url.searchParams.delete(\"index\");\n  let indexValuesToKeep = [];\n  for (let indexValue of indexValues) {\n    if (indexValue) {\n      indexValuesToKeep.push(indexValue);\n    }\n  }\n  for (let toKeep of indexValuesToKeep) {\n    url.searchParams.append(\"index\", toKeep);\n  }\n  return url;\n}\nfunction singleFetchUrl(reqUrl, basename, trailingSlashAware, extension) {\n  let url = typeof reqUrl === \"string\" ? new URL(\n    reqUrl,\n    // This can be called during the SSR flow via PrefetchPageLinksImpl so\n    // don't assume window is available\n    typeof window === \"undefined\" ? \"server://singlefetch/\" : window.location.origin\n  ) : reqUrl;\n  if (trailingSlashAware) {\n    if (url.pathname.endsWith(\"/\")) {\n      url.pathname = `${url.pathname}_.${extension}`;\n    } else {\n      url.pathname = `${url.pathname}.${extension}`;\n    }\n  } else {\n    if (url.pathname === \"/\") {\n      url.pathname = `_root.${extension}`;\n    } else if (basename && stripBasename(url.pathname, basename) === \"/\") {\n      url.pathname = `${basename.replace(/\\/$/, \"\")}/_root.${extension}`;\n    } else {\n      url.pathname = `${url.pathname.replace(/\\/$/, \"\")}.${extension}`;\n    }\n  }\n  return url;\n}\nasync function fetchAndDecodeViaTurboStream(args, basename, trailingSlashAware, targetRoutes) {\n  let { request } = args;\n  let url = singleFetchUrl(request.url, basename, trailingSlashAware, \"data\");\n  if (request.method === \"GET\") {\n    url = stripIndexParam(url);\n    if (targetRoutes) {\n      url.searchParams.set(\"_routes\", targetRoutes.join(\",\"));\n    }\n  }\n  let res = await fetch(url, await createRequestInit(request));\n  if (res.status >= 400 && !res.headers.has(\"X-Remix-Response\")) {\n    throw new ErrorResponseImpl(res.status, res.statusText, await res.text());\n  }\n  if (res.status === 204 && res.headers.has(\"X-Remix-Redirect\")) {\n    return {\n      status: SINGLE_FETCH_REDIRECT_STATUS,\n      data: {\n        redirect: {\n          redirect: res.headers.get(\"X-Remix-Redirect\"),\n          status: Number(res.headers.get(\"X-Remix-Status\") || \"302\"),\n          revalidate: res.headers.get(\"X-Remix-Revalidate\") === \"true\",\n          reload: res.headers.get(\"X-Remix-Reload-Document\") === \"true\",\n          replace: res.headers.get(\"X-Remix-Replace\") === \"true\"\n        }\n      }\n    };\n  }\n  if (NO_BODY_STATUS_CODES.has(res.status)) {\n    let routes = {};\n    if (targetRoutes && request.method !== \"GET\") {\n      routes[targetRoutes[0]] = { data: void 0 };\n    }\n    return {\n      status: res.status,\n      data: { routes }\n    };\n  }\n  invariant2(res.body, \"No response body to decode\");\n  try {\n    let decoded = await decodeViaTurboStream(res.body, window);\n    let data2;\n    if (request.method === \"GET\") {\n      let typed = decoded.value;\n      if (SingleFetchRedirectSymbol in typed) {\n        data2 = { redirect: typed[SingleFetchRedirectSymbol] };\n      } else {\n        data2 = { routes: typed };\n      }\n    } else {\n      let typed = decoded.value;\n      let routeId = targetRoutes?.[0];\n      invariant2(routeId, \"No routeId found for single fetch call decoding\");\n      if (\"redirect\" in typed) {\n        data2 = { redirect: typed };\n      } else {\n        data2 = { routes: { [routeId]: typed } };\n      }\n    }\n    return { status: res.status, data: data2 };\n  } catch (e) {\n    throw new Error(\"Unable to decode turbo-stream response\");\n  }\n}\nfunction decodeViaTurboStream(body, global) {\n  return decode(body, {\n    plugins: [\n      (type, ...rest) => {\n        if (type === \"SanitizedError\") {\n          let [name, message, stack] = rest;\n          let Constructor = Error;\n          if (name && name in global && typeof global[name] === \"function\") {\n            Constructor = global[name];\n          }\n          let error = new Constructor(message);\n          error.stack = stack;\n          return { value: error };\n        }\n        if (type === \"ErrorResponse\") {\n          let [data2, status, statusText] = rest;\n          return {\n            value: new ErrorResponseImpl(status, statusText, data2)\n          };\n        }\n        if (type === \"SingleFetchRedirect\") {\n          return { value: { [SingleFetchRedirectSymbol]: rest[0] } };\n        }\n        if (type === \"SingleFetchClassInstance\") {\n          return { value: rest[0] };\n        }\n        if (type === \"SingleFetchFallback\") {\n          return { value: void 0 };\n        }\n      }\n    ]\n  });\n}\nfunction unwrapSingleFetchResult(result, routeId) {\n  if (\"redirect\" in result) {\n    let {\n      redirect: location,\n      revalidate,\n      reload,\n      replace: replace2,\n      status\n    } = result.redirect;\n    throw redirect(location, {\n      status,\n      headers: {\n        // Three R's of redirecting (lol Veep)\n        ...revalidate ? { \"X-Remix-Revalidate\": \"yes\" } : null,\n        ...reload ? { \"X-Remix-Reload-Document\": \"yes\" } : null,\n        ...replace2 ? { \"X-Remix-Replace\": \"yes\" } : null\n      }\n    });\n  }\n  let routeResult = result.routes[routeId];\n  if (routeResult == null) {\n    throw new SingleFetchNoResultError(\n      `No result found for routeId \"${routeId}\"`\n    );\n  } else if (\"error\" in routeResult) {\n    throw routeResult.error;\n  } else if (\"data\" in routeResult) {\n    return routeResult.data;\n  } else {\n    throw new Error(`Invalid response found for routeId \"${routeId}\"`);\n  }\n}\nfunction createDeferred2() {\n  let resolve;\n  let reject;\n  let promise = new Promise((res, rej) => {\n    resolve = async (val) => {\n      res(val);\n      try {\n        await promise;\n      } catch (e) {\n      }\n    };\n    reject = async (error) => {\n      rej(error);\n      try {\n        await promise;\n      } catch (e) {\n      }\n    };\n  });\n  return {\n    promise,\n    //@ts-ignore\n    resolve,\n    //@ts-ignore\n    reject\n  };\n}\n\n// lib/dom/ssr/errorBoundaries.tsx\nimport * as React9 from \"react\";\n\n// lib/dom/ssr/components.tsx\nimport * as React8 from \"react\";\n\n// lib/dom/ssr/routeModules.ts\nasync function loadRouteModule(route, routeModulesCache) {\n  if (route.id in routeModulesCache) {\n    return routeModulesCache[route.id];\n  }\n  try {\n    let routeModule = await import(\n      /* @vite-ignore */\n      /* webpackIgnore: true */\n      route.module\n    );\n    routeModulesCache[route.id] = routeModule;\n    return routeModule;\n  } catch (error) {\n    console.error(\n      `Error loading route module \\`${route.module}\\`, reloading page...`\n    );\n    console.error(error);\n    if (window.__reactRouterContext && window.__reactRouterContext.isSpaMode && // @ts-expect-error\n    import.meta.hot) {\n      throw error;\n    }\n    window.location.reload();\n    return new Promise(() => {\n    });\n  }\n}\n\n// lib/dom/ssr/links.ts\nfunction getKeyedLinksForMatches(matches, routeModules, manifest) {\n  let descriptors = matches.map((match) => {\n    let module = routeModules[match.route.id];\n    let route = manifest.routes[match.route.id];\n    return [\n      route && route.css ? route.css.map((href) => ({ rel: \"stylesheet\", href })) : [],\n      module?.links?.() || []\n    ];\n  }).flat(2);\n  let preloads = getModuleLinkHrefs(matches, manifest);\n  return dedupeLinkDescriptors(descriptors, preloads);\n}\nfunction getRouteCssDescriptors(route) {\n  if (!route.css) return [];\n  return route.css.map((href) => ({ rel: \"stylesheet\", href }));\n}\nasync function prefetchRouteCss(route) {\n  if (!route.css) return;\n  let descriptors = getRouteCssDescriptors(route);\n  await Promise.all(descriptors.map(prefetchStyleLink));\n}\nasync function prefetchStyleLinks(route, routeModule) {\n  if (!route.css && !routeModule.links || !isPreloadSupported()) return;\n  let descriptors = [];\n  if (route.css) {\n    descriptors.push(...getRouteCssDescriptors(route));\n  }\n  if (routeModule.links) {\n    descriptors.push(...routeModule.links());\n  }\n  if (descriptors.length === 0) return;\n  let styleLinks = [];\n  for (let descriptor of descriptors) {\n    if (!isPageLinkDescriptor(descriptor) && descriptor.rel === \"stylesheet\") {\n      styleLinks.push({\n        ...descriptor,\n        rel: \"preload\",\n        as: \"style\"\n      });\n    }\n  }\n  await Promise.all(styleLinks.map(prefetchStyleLink));\n}\nasync function prefetchStyleLink(descriptor) {\n  return new Promise((resolve) => {\n    if (descriptor.media && !window.matchMedia(descriptor.media).matches || document.querySelector(\n      `link[rel=\"stylesheet\"][href=\"${descriptor.href}\"]`\n    )) {\n      return resolve();\n    }\n    let link = document.createElement(\"link\");\n    Object.assign(link, descriptor);\n    function removeLink() {\n      if (document.head.contains(link)) {\n        document.head.removeChild(link);\n      }\n    }\n    link.onload = () => {\n      removeLink();\n      resolve();\n    };\n    link.onerror = () => {\n      removeLink();\n      resolve();\n    };\n    document.head.appendChild(link);\n  });\n}\nfunction isPageLinkDescriptor(object) {\n  return object != null && typeof object.page === \"string\";\n}\nfunction isHtmlLinkDescriptor(object) {\n  if (object == null) {\n    return false;\n  }\n  if (object.href == null) {\n    return object.rel === \"preload\" && typeof object.imageSrcSet === \"string\" && typeof object.imageSizes === \"string\";\n  }\n  return typeof object.rel === \"string\" && typeof object.href === \"string\";\n}\nasync function getKeyedPrefetchLinks(matches, manifest, routeModules) {\n  let links = await Promise.all(\n    matches.map(async (match) => {\n      let route = manifest.routes[match.route.id];\n      if (route) {\n        let mod = await loadRouteModule(route, routeModules);\n        return mod.links ? mod.links() : [];\n      }\n      return [];\n    })\n  );\n  return dedupeLinkDescriptors(\n    links.flat(1).filter(isHtmlLinkDescriptor).filter((link) => link.rel === \"stylesheet\" || link.rel === \"preload\").map(\n      (link) => link.rel === \"stylesheet\" ? { ...link, rel: \"prefetch\", as: \"style\" } : { ...link, rel: \"prefetch\" }\n    )\n  );\n}\nfunction getNewMatchesForLinks(page, nextMatches, currentMatches, manifest, location, mode) {\n  let isNew = (match, index) => {\n    if (!currentMatches[index]) return true;\n    return match.route.id !== currentMatches[index].route.id;\n  };\n  let matchPathChanged = (match, index) => {\n    return (\n      // param change, /users/123 -> /users/456\n      currentMatches[index].pathname !== match.pathname || // splat param changed, which is not present in match.path\n      // e.g. /files/images/avatar.jpg -> files/finances.xls\n      currentMatches[index].route.path?.endsWith(\"*\") && currentMatches[index].params[\"*\"] !== match.params[\"*\"]\n    );\n  };\n  if (mode === \"assets\") {\n    return nextMatches.filter(\n      (match, index) => isNew(match, index) || matchPathChanged(match, index)\n    );\n  }\n  if (mode === \"data\") {\n    return nextMatches.filter((match, index) => {\n      let manifestRoute = manifest.routes[match.route.id];\n      if (!manifestRoute || !manifestRoute.hasLoader) {\n        return false;\n      }\n      if (isNew(match, index) || matchPathChanged(match, index)) {\n        return true;\n      }\n      if (match.route.shouldRevalidate) {\n        let routeChoice = match.route.shouldRevalidate({\n          currentUrl: new URL(\n            location.pathname + location.search + location.hash,\n            window.origin\n          ),\n          currentParams: currentMatches[0]?.params || {},\n          nextUrl: new URL(page, window.origin),\n          nextParams: match.params,\n          defaultShouldRevalidate: true\n        });\n        if (typeof routeChoice === \"boolean\") {\n          return routeChoice;\n        }\n      }\n      return true;\n    });\n  }\n  return [];\n}\nfunction getModuleLinkHrefs(matches, manifest, { includeHydrateFallback } = {}) {\n  return dedupeHrefs(\n    matches.map((match) => {\n      let route = manifest.routes[match.route.id];\n      if (!route) return [];\n      let hrefs = [route.module];\n      if (route.clientActionModule) {\n        hrefs = hrefs.concat(route.clientActionModule);\n      }\n      if (route.clientLoaderModule) {\n        hrefs = hrefs.concat(route.clientLoaderModule);\n      }\n      if (includeHydrateFallback && route.hydrateFallbackModule) {\n        hrefs = hrefs.concat(route.hydrateFallbackModule);\n      }\n      if (route.imports) {\n        hrefs = hrefs.concat(route.imports);\n      }\n      return hrefs;\n    }).flat(1)\n  );\n}\nfunction dedupeHrefs(hrefs) {\n  return [...new Set(hrefs)];\n}\nfunction sortKeys(obj) {\n  let sorted = {};\n  let keys = Object.keys(obj).sort();\n  for (let key of keys) {\n    sorted[key] = obj[key];\n  }\n  return sorted;\n}\nfunction dedupeLinkDescriptors(descriptors, preloads) {\n  let set = /* @__PURE__ */ new Set();\n  let preloadsSet = new Set(preloads);\n  return descriptors.reduce((deduped, descriptor) => {\n    let alreadyModulePreload = preloads && !isPageLinkDescriptor(descriptor) && descriptor.as === \"script\" && descriptor.href && preloadsSet.has(descriptor.href);\n    if (alreadyModulePreload) {\n      return deduped;\n    }\n    let key = JSON.stringify(sortKeys(descriptor));\n    if (!set.has(key)) {\n      set.add(key);\n      deduped.push({ key, link: descriptor });\n    }\n    return deduped;\n  }, []);\n}\nvar _isPreloadSupported;\nfunction isPreloadSupported() {\n  if (_isPreloadSupported !== void 0) {\n    return _isPreloadSupported;\n  }\n  let el = document.createElement(\"link\");\n  _isPreloadSupported = el.relList.supports(\"preload\");\n  el = null;\n  return _isPreloadSupported;\n}\n\n// lib/dom/ssr/fog-of-war.ts\nimport * as React7 from \"react\";\n\n// lib/dom/ssr/routes.tsx\nimport * as React6 from \"react\";\n\n// lib/dom/ssr/fallback.tsx\nimport * as React5 from \"react\";\nfunction RemixRootDefaultHydrateFallback() {\n  return /* @__PURE__ */ React5.createElement(BoundaryShell, { title: \"Loading...\", renderScripts: true }, ENABLE_DEV_WARNINGS ? /* @__PURE__ */ React5.createElement(\n    \"script\",\n    {\n      dangerouslySetInnerHTML: {\n        __html: `\n              console.log(\n                \"\\u{1F4BF} Hey developer \\u{1F44B}. You can provide a way better UX than this \" +\n                \"when your app is loading JS modules and/or running \\`clientLoader\\` \" +\n                \"functions. Check out https://reactrouter.com/start/framework/route-module#hydratefallback \" +\n                \"for more information.\"\n              );\n            `\n      }\n    }\n  ) : null);\n}\n\n// lib/dom/ssr/routes.tsx\nfunction groupRoutesByParentId(manifest) {\n  let routes = {};\n  Object.values(manifest).forEach((route) => {\n    if (route) {\n      let parentId = route.parentId || \"\";\n      if (!routes[parentId]) {\n        routes[parentId] = [];\n      }\n      routes[parentId].push(route);\n    }\n  });\n  return routes;\n}\nfunction getRouteComponents(route, routeModule, isSpaMode) {\n  let Component4 = getRouteModuleComponent(routeModule);\n  let HydrateFallback = routeModule.HydrateFallback && (!isSpaMode || route.id === \"root\") ? routeModule.HydrateFallback : route.id === \"root\" ? RemixRootDefaultHydrateFallback : void 0;\n  let ErrorBoundary = routeModule.ErrorBoundary ? routeModule.ErrorBoundary : route.id === \"root\" ? () => /* @__PURE__ */ React6.createElement(RemixRootDefaultErrorBoundary, { error: useRouteError() }) : void 0;\n  if (route.id === \"root\" && routeModule.Layout) {\n    return {\n      ...Component4 ? {\n        element: /* @__PURE__ */ React6.createElement(routeModule.Layout, null, /* @__PURE__ */ React6.createElement(Component4, null))\n      } : { Component: Component4 },\n      ...ErrorBoundary ? {\n        errorElement: /* @__PURE__ */ React6.createElement(routeModule.Layout, null, /* @__PURE__ */ React6.createElement(ErrorBoundary, null))\n      } : { ErrorBoundary },\n      ...HydrateFallback ? {\n        hydrateFallbackElement: /* @__PURE__ */ React6.createElement(routeModule.Layout, null, /* @__PURE__ */ React6.createElement(HydrateFallback, null))\n      } : { HydrateFallback }\n    };\n  }\n  return { Component: Component4, ErrorBoundary, HydrateFallback };\n}\nfunction createServerRoutes(manifest, routeModules, future, isSpaMode, parentId = \"\", routesByParentId = groupRoutesByParentId(manifest), spaModeLazyPromise = Promise.resolve({ Component: () => null })) {\n  return (routesByParentId[parentId] || []).map((route) => {\n    let routeModule = routeModules[route.id];\n    invariant2(\n      routeModule,\n      \"No `routeModule` available to create server routes\"\n    );\n    let dataRoute = {\n      ...getRouteComponents(route, routeModule, isSpaMode),\n      caseSensitive: route.caseSensitive,\n      id: route.id,\n      index: route.index,\n      path: route.path,\n      handle: routeModule.handle,\n      // For SPA Mode, all routes are lazy except root.  However we tell the\n      // router root is also lazy here too since we don't need a full\n      // implementation - we just need a `lazy` prop to tell the RR rendering\n      // where to stop which is always at the root route in SPA mode\n      lazy: isSpaMode ? () => spaModeLazyPromise : void 0,\n      // For partial hydration rendering, we need to indicate when the route\n      // has a loader/clientLoader, but it won't ever be called during the static\n      // render, so just give it a no-op function so we can render down to the\n      // proper fallback\n      loader: route.hasLoader || route.hasClientLoader ? () => null : void 0\n      // We don't need middleware/action/shouldRevalidate on these routes since\n      // they're for a static render\n    };\n    let children = createServerRoutes(\n      manifest,\n      routeModules,\n      future,\n      isSpaMode,\n      route.id,\n      routesByParentId,\n      spaModeLazyPromise\n    );\n    if (children.length > 0) dataRoute.children = children;\n    return dataRoute;\n  });\n}\nfunction createClientRoutesWithHMRRevalidationOptOut(needsRevalidation, manifest, routeModulesCache, initialState, ssr, isSpaMode) {\n  return createClientRoutes(\n    manifest,\n    routeModulesCache,\n    initialState,\n    ssr,\n    isSpaMode,\n    \"\",\n    groupRoutesByParentId(manifest),\n    needsRevalidation\n  );\n}\nfunction preventInvalidServerHandlerCall(type, route) {\n  if (type === \"loader\" && !route.hasLoader || type === \"action\" && !route.hasAction) {\n    let fn = type === \"action\" ? \"serverAction()\" : \"serverLoader()\";\n    let msg = `You are trying to call ${fn} on a route that does not have a server ${type} (routeId: \"${route.id}\")`;\n    console.error(msg);\n    throw new ErrorResponseImpl(400, \"Bad Request\", new Error(msg), true);\n  }\n}\nfunction noActionDefinedError(type, routeId) {\n  let article = type === \"clientAction\" ? \"a\" : \"an\";\n  let msg = `Route \"${routeId}\" does not have ${article} ${type}, but you are trying to submit to it. To fix this, please add ${article} \\`${type}\\` function to the route`;\n  console.error(msg);\n  throw new ErrorResponseImpl(405, \"Method Not Allowed\", new Error(msg), true);\n}\nfunction createClientRoutes(manifest, routeModulesCache, initialState, ssr, isSpaMode, parentId = \"\", routesByParentId = groupRoutesByParentId(manifest), needsRevalidation) {\n  return (routesByParentId[parentId] || []).map((route) => {\n    let routeModule = routeModulesCache[route.id];\n    function fetchServerHandler(singleFetch) {\n      invariant2(\n        typeof singleFetch === \"function\",\n        \"No single fetch function available for route handler\"\n      );\n      return singleFetch();\n    }\n    function fetchServerLoader(singleFetch) {\n      if (!route.hasLoader) return Promise.resolve(null);\n      return fetchServerHandler(singleFetch);\n    }\n    function fetchServerAction(singleFetch) {\n      if (!route.hasAction) {\n        throw noActionDefinedError(\"action\", route.id);\n      }\n      return fetchServerHandler(singleFetch);\n    }\n    function prefetchModule(modulePath) {\n      import(\n        /* @vite-ignore */\n        /* webpackIgnore: true */\n        modulePath\n      );\n    }\n    function prefetchRouteModuleChunks(route2) {\n      if (route2.clientActionModule) {\n        prefetchModule(route2.clientActionModule);\n      }\n      if (route2.clientLoaderModule) {\n        prefetchModule(route2.clientLoaderModule);\n      }\n    }\n    async function prefetchStylesAndCallHandler(handler) {\n      let cachedModule = routeModulesCache[route.id];\n      let linkPrefetchPromise = cachedModule ? prefetchStyleLinks(route, cachedModule) : Promise.resolve();\n      try {\n        return handler();\n      } finally {\n        await linkPrefetchPromise;\n      }\n    }\n    let dataRoute = {\n      id: route.id,\n      index: route.index,\n      path: route.path\n    };\n    if (routeModule) {\n      Object.assign(dataRoute, {\n        ...dataRoute,\n        ...getRouteComponents(route, routeModule, isSpaMode),\n        middleware: routeModule.clientMiddleware,\n        handle: routeModule.handle,\n        shouldRevalidate: getShouldRevalidateFunction(\n          dataRoute.path,\n          routeModule,\n          route,\n          ssr,\n          needsRevalidation\n        )\n      });\n      let hasInitialData = initialState && initialState.loaderData && route.id in initialState.loaderData;\n      let initialData = hasInitialData ? initialState?.loaderData?.[route.id] : void 0;\n      let hasInitialError = initialState && initialState.errors && route.id in initialState.errors;\n      let initialError = hasInitialError ? initialState?.errors?.[route.id] : void 0;\n      let isHydrationRequest = needsRevalidation == null && (routeModule.clientLoader?.hydrate === true || !route.hasLoader);\n      dataRoute.loader = async ({ request, params, context, unstable_pattern }, singleFetch) => {\n        try {\n          let result = await prefetchStylesAndCallHandler(async () => {\n            invariant2(\n              routeModule,\n              \"No `routeModule` available for critical-route loader\"\n            );\n            if (!routeModule.clientLoader) {\n              return fetchServerLoader(singleFetch);\n            }\n            return routeModule.clientLoader({\n              request,\n              params,\n              context,\n              unstable_pattern,\n              async serverLoader() {\n                preventInvalidServerHandlerCall(\"loader\", route);\n                if (isHydrationRequest) {\n                  if (hasInitialData) {\n                    return initialData;\n                  }\n                  if (hasInitialError) {\n                    throw initialError;\n                  }\n                }\n                return fetchServerLoader(singleFetch);\n              }\n            });\n          });\n          return result;\n        } finally {\n          isHydrationRequest = false;\n        }\n      };\n      dataRoute.loader.hydrate = shouldHydrateRouteLoader(\n        route.id,\n        routeModule.clientLoader,\n        route.hasLoader,\n        isSpaMode\n      );\n      dataRoute.action = ({ request, params, context, unstable_pattern }, singleFetch) => {\n        return prefetchStylesAndCallHandler(async () => {\n          invariant2(\n            routeModule,\n            \"No `routeModule` available for critical-route action\"\n          );\n          if (!routeModule.clientAction) {\n            if (isSpaMode) {\n              throw noActionDefinedError(\"clientAction\", route.id);\n            }\n            return fetchServerAction(singleFetch);\n          }\n          return routeModule.clientAction({\n            request,\n            params,\n            context,\n            unstable_pattern,\n            async serverAction() {\n              preventInvalidServerHandlerCall(\"action\", route);\n              return fetchServerAction(singleFetch);\n            }\n          });\n        });\n      };\n    } else {\n      if (!route.hasClientLoader) {\n        dataRoute.loader = (_, singleFetch) => prefetchStylesAndCallHandler(() => {\n          return fetchServerLoader(singleFetch);\n        });\n      }\n      if (!route.hasClientAction) {\n        dataRoute.action = (_, singleFetch) => prefetchStylesAndCallHandler(() => {\n          if (isSpaMode) {\n            throw noActionDefinedError(\"clientAction\", route.id);\n          }\n          return fetchServerAction(singleFetch);\n        });\n      }\n      let lazyRoutePromise;\n      async function getLazyRoute() {\n        if (lazyRoutePromise) {\n          return await lazyRoutePromise;\n        }\n        lazyRoutePromise = (async () => {\n          if (route.clientLoaderModule || route.clientActionModule) {\n            await new Promise((resolve) => setTimeout(resolve, 0));\n          }\n          let routeModulePromise = loadRouteModuleWithBlockingLinks(\n            route,\n            routeModulesCache\n          );\n          prefetchRouteModuleChunks(route);\n          return await routeModulePromise;\n        })();\n        return await lazyRoutePromise;\n      }\n      dataRoute.lazy = {\n        loader: route.hasClientLoader ? async () => {\n          let { clientLoader } = route.clientLoaderModule ? await import(\n            /* @vite-ignore */\n            /* webpackIgnore: true */\n            route.clientLoaderModule\n          ) : await getLazyRoute();\n          invariant2(clientLoader, \"No `clientLoader` export found\");\n          return (args, singleFetch) => clientLoader({\n            ...args,\n            async serverLoader() {\n              preventInvalidServerHandlerCall(\"loader\", route);\n              return fetchServerLoader(singleFetch);\n            }\n          });\n        } : void 0,\n        action: route.hasClientAction ? async () => {\n          let clientActionPromise = route.clientActionModule ? import(\n            /* @vite-ignore */\n            /* webpackIgnore: true */\n            route.clientActionModule\n          ) : getLazyRoute();\n          prefetchRouteModuleChunks(route);\n          let { clientAction } = await clientActionPromise;\n          invariant2(clientAction, \"No `clientAction` export found\");\n          return (args, singleFetch) => clientAction({\n            ...args,\n            async serverAction() {\n              preventInvalidServerHandlerCall(\"action\", route);\n              return fetchServerAction(singleFetch);\n            }\n          });\n        } : void 0,\n        middleware: route.hasClientMiddleware ? async () => {\n          let { clientMiddleware } = route.clientMiddlewareModule ? await import(\n            /* @vite-ignore */\n            /* webpackIgnore: true */\n            route.clientMiddlewareModule\n          ) : await getLazyRoute();\n          invariant2(clientMiddleware, \"No `clientMiddleware` export found\");\n          return clientMiddleware;\n        } : void 0,\n        shouldRevalidate: async () => {\n          let lazyRoute = await getLazyRoute();\n          return getShouldRevalidateFunction(\n            dataRoute.path,\n            lazyRoute,\n            route,\n            ssr,\n            needsRevalidation\n          );\n        },\n        handle: async () => (await getLazyRoute()).handle,\n        // No need to wrap these in layout since the root route is never\n        // loaded via route.lazy()\n        Component: async () => (await getLazyRoute()).Component,\n        ErrorBoundary: route.hasErrorBoundary ? async () => (await getLazyRoute()).ErrorBoundary : void 0\n      };\n    }\n    let children = createClientRoutes(\n      manifest,\n      routeModulesCache,\n      initialState,\n      ssr,\n      isSpaMode,\n      route.id,\n      routesByParentId,\n      needsRevalidation\n    );\n    if (children.length > 0) dataRoute.children = children;\n    return dataRoute;\n  });\n}\nfunction getShouldRevalidateFunction(path, route, manifestRoute, ssr, needsRevalidation) {\n  if (needsRevalidation) {\n    return wrapShouldRevalidateForHdr(\n      manifestRoute.id,\n      route.shouldRevalidate,\n      needsRevalidation\n    );\n  }\n  if (!ssr && manifestRoute.hasLoader && !manifestRoute.hasClientLoader) {\n    let myParams = path ? compilePath(path)[1].map((p) => p.paramName) : [];\n    const didParamsChange = (opts) => myParams.some((p) => opts.currentParams[p] !== opts.nextParams[p]);\n    if (route.shouldRevalidate) {\n      let fn = route.shouldRevalidate;\n      return (opts) => fn({\n        ...opts,\n        defaultShouldRevalidate: didParamsChange(opts)\n      });\n    } else {\n      return (opts) => didParamsChange(opts);\n    }\n  }\n  return route.shouldRevalidate;\n}\nfunction wrapShouldRevalidateForHdr(routeId, routeShouldRevalidate, needsRevalidation) {\n  let handledRevalidation = false;\n  return (arg) => {\n    if (!handledRevalidation) {\n      handledRevalidation = true;\n      return needsRevalidation.has(routeId);\n    }\n    return routeShouldRevalidate ? routeShouldRevalidate(arg) : arg.defaultShouldRevalidate;\n  };\n}\nasync function loadRouteModuleWithBlockingLinks(route, routeModules) {\n  let routeModulePromise = loadRouteModule(route, routeModules);\n  let prefetchRouteCssPromise = prefetchRouteCss(route);\n  let routeModule = await routeModulePromise;\n  await Promise.all([\n    prefetchRouteCssPromise,\n    prefetchStyleLinks(route, routeModule)\n  ]);\n  return {\n    Component: getRouteModuleComponent(routeModule),\n    ErrorBoundary: routeModule.ErrorBoundary,\n    clientMiddleware: routeModule.clientMiddleware,\n    clientAction: routeModule.clientAction,\n    clientLoader: routeModule.clientLoader,\n    handle: routeModule.handle,\n    links: routeModule.links,\n    meta: routeModule.meta,\n    shouldRevalidate: routeModule.shouldRevalidate\n  };\n}\nfunction getRouteModuleComponent(routeModule) {\n  if (routeModule.default == null) return void 0;\n  let isEmptyObject = typeof routeModule.default === \"object\" && Object.keys(routeModule.default).length === 0;\n  if (!isEmptyObject) {\n    return routeModule.default;\n  }\n}\nfunction shouldHydrateRouteLoader(routeId, clientLoader, hasLoader, isSpaMode) {\n  return isSpaMode && routeId !== \"root\" || clientLoader != null && (clientLoader.hydrate === true || hasLoader !== true);\n}\n\n// lib/dom/ssr/fog-of-war.ts\nvar nextPaths = /* @__PURE__ */ new Set();\nvar discoveredPathsMaxSize = 1e3;\nvar discoveredPaths = /* @__PURE__ */ new Set();\nvar URL_LIMIT = 7680;\nfunction isFogOfWarEnabled(routeDiscovery, ssr) {\n  return routeDiscovery.mode === \"lazy\" && ssr === true;\n}\nfunction getPartialManifest({ sri, ...manifest }, router) {\n  let routeIds = new Set(router.state.matches.map((m) => m.route.id));\n  let segments = router.state.location.pathname.split(\"/\").filter(Boolean);\n  let paths = [\"/\"];\n  segments.pop();\n  while (segments.length > 0) {\n    paths.push(`/${segments.join(\"/\")}`);\n    segments.pop();\n  }\n  paths.forEach((path) => {\n    let matches = matchRoutes(router.routes, path, router.basename);\n    if (matches) {\n      matches.forEach((m) => routeIds.add(m.route.id));\n    }\n  });\n  let initialRoutes = [...routeIds].reduce(\n    (acc, id) => Object.assign(acc, { [id]: manifest.routes[id] }),\n    {}\n  );\n  return {\n    ...manifest,\n    routes: initialRoutes,\n    sri: sri ? true : void 0\n  };\n}\nfunction getPatchRoutesOnNavigationFunction(manifest, routeModules, ssr, routeDiscovery, isSpaMode, basename) {\n  if (!isFogOfWarEnabled(routeDiscovery, ssr)) {\n    return void 0;\n  }\n  return async ({ path, patch, signal, fetcherKey }) => {\n    if (discoveredPaths.has(path)) {\n      return;\n    }\n    await fetchAndApplyManifestPatches(\n      [path],\n      fetcherKey ? window.location.href : path,\n      manifest,\n      routeModules,\n      ssr,\n      isSpaMode,\n      basename,\n      routeDiscovery.manifestPath,\n      patch,\n      signal\n    );\n  };\n}\nfunction useFogOFWarDiscovery(router, manifest, routeModules, ssr, routeDiscovery, isSpaMode) {\n  React7.useEffect(() => {\n    if (!isFogOfWarEnabled(routeDiscovery, ssr) || // @ts-expect-error - TS doesn't know about this yet\n    window.navigator?.connection?.saveData === true) {\n      return;\n    }\n    function registerElement(el) {\n      let path = el.tagName === \"FORM\" ? el.getAttribute(\"action\") : el.getAttribute(\"href\");\n      if (!path) {\n        return;\n      }\n      let pathname = el.tagName === \"A\" ? el.pathname : new URL(path, window.location.origin).pathname;\n      if (!discoveredPaths.has(pathname)) {\n        nextPaths.add(pathname);\n      }\n    }\n    async function fetchPatches() {\n      document.querySelectorAll(\"a[data-discover], form[data-discover]\").forEach(registerElement);\n      let lazyPaths = Array.from(nextPaths.keys()).filter((path) => {\n        if (discoveredPaths.has(path)) {\n          nextPaths.delete(path);\n          return false;\n        }\n        return true;\n      });\n      if (lazyPaths.length === 0) {\n        return;\n      }\n      try {\n        await fetchAndApplyManifestPatches(\n          lazyPaths,\n          null,\n          manifest,\n          routeModules,\n          ssr,\n          isSpaMode,\n          router.basename,\n          routeDiscovery.manifestPath,\n          router.patchRoutes\n        );\n      } catch (e) {\n        console.error(\"Failed to fetch manifest patches\", e);\n      }\n    }\n    let debouncedFetchPatches = debounce(fetchPatches, 100);\n    fetchPatches();\n    let observer = new MutationObserver(() => debouncedFetchPatches());\n    observer.observe(document.documentElement, {\n      subtree: true,\n      childList: true,\n      attributes: true,\n      attributeFilter: [\"data-discover\", \"href\", \"action\"]\n    });\n    return () => observer.disconnect();\n  }, [ssr, isSpaMode, manifest, routeModules, router, routeDiscovery]);\n}\nfunction getManifestPath(_manifestPath, basename) {\n  let manifestPath = _manifestPath || \"/__manifest\";\n  if (basename == null) {\n    return manifestPath;\n  }\n  return `${basename}${manifestPath}`.replace(/\\/+/g, \"/\");\n}\nvar MANIFEST_VERSION_STORAGE_KEY = \"react-router-manifest-version\";\nasync function fetchAndApplyManifestPatches(paths, errorReloadPath, manifest, routeModules, ssr, isSpaMode, basename, manifestPath, patchRoutes, signal) {\n  const searchParams = new URLSearchParams();\n  searchParams.set(\"paths\", paths.sort().join(\",\"));\n  searchParams.set(\"version\", manifest.version);\n  let url = new URL(\n    getManifestPath(manifestPath, basename),\n    window.location.origin\n  );\n  url.search = searchParams.toString();\n  if (url.toString().length > URL_LIMIT) {\n    nextPaths.clear();\n    return;\n  }\n  let serverPatches;\n  try {\n    let res = await fetch(url, { signal });\n    if (!res.ok) {\n      throw new Error(`${res.status} ${res.statusText}`);\n    } else if (res.status === 204 && res.headers.has(\"X-Remix-Reload-Document\")) {\n      if (!errorReloadPath) {\n        console.warn(\n          \"Detected a manifest version mismatch during eager route discovery. The next navigation/fetch to an undiscovered route will result in a new document navigation to sync up with the latest manifest.\"\n        );\n        return;\n      }\n      try {\n        if (sessionStorage.getItem(MANIFEST_VERSION_STORAGE_KEY) === manifest.version) {\n          console.error(\n            \"Unable to discover routes due to manifest version mismatch.\"\n          );\n          return;\n        }\n        sessionStorage.setItem(MANIFEST_VERSION_STORAGE_KEY, manifest.version);\n      } catch {\n      }\n      window.location.href = errorReloadPath;\n      console.warn(\"Detected manifest version mismatch, reloading...\");\n      await new Promise(() => {\n      });\n    } else if (res.status >= 400) {\n      throw new Error(await res.text());\n    }\n    try {\n      sessionStorage.removeItem(MANIFEST_VERSION_STORAGE_KEY);\n    } catch {\n    }\n    serverPatches = await res.json();\n  } catch (e) {\n    if (signal?.aborted) return;\n    throw e;\n  }\n  let knownRoutes = new Set(Object.keys(manifest.routes));\n  let patches = Object.values(serverPatches).reduce((acc, route) => {\n    if (route && !knownRoutes.has(route.id)) {\n      acc[route.id] = route;\n    }\n    return acc;\n  }, {});\n  Object.assign(manifest.routes, patches);\n  paths.forEach((p) => addToFifoQueue(p, discoveredPaths));\n  let parentIds = /* @__PURE__ */ new Set();\n  Object.values(patches).forEach((patch) => {\n    if (patch && (!patch.parentId || !patches[patch.parentId])) {\n      parentIds.add(patch.parentId);\n    }\n  });\n  parentIds.forEach(\n    (parentId) => patchRoutes(\n      parentId || null,\n      createClientRoutes(patches, routeModules, null, ssr, isSpaMode, parentId)\n    )\n  );\n}\nfunction addToFifoQueue(path, queue) {\n  if (queue.size >= discoveredPathsMaxSize) {\n    let first = queue.values().next().value;\n    queue.delete(first);\n  }\n  queue.add(path);\n}\nfunction debounce(callback, wait) {\n  let timeoutId;\n  return (...args) => {\n    window.clearTimeout(timeoutId);\n    timeoutId = window.setTimeout(() => callback(...args), wait);\n  };\n}\n\n// lib/dom/ssr/components.tsx\nfunction useDataRouterContext2() {\n  let context = React8.useContext(DataRouterContext);\n  invariant2(\n    context,\n    \"You must render this element inside a <DataRouterContext.Provider> element\"\n  );\n  return context;\n}\nfunction useDataRouterStateContext() {\n  let context = React8.useContext(DataRouterStateContext);\n  invariant2(\n    context,\n    \"You must render this element inside a <DataRouterStateContext.Provider> element\"\n  );\n  return context;\n}\nvar FrameworkContext = React8.createContext(void 0);\nFrameworkContext.displayName = \"FrameworkContext\";\nfunction useFrameworkContext() {\n  let context = React8.useContext(FrameworkContext);\n  invariant2(\n    context,\n    \"You must render this element inside a <HydratedRouter> element\"\n  );\n  return context;\n}\nfunction usePrefetchBehavior(prefetch, theirElementProps) {\n  let frameworkContext = React8.useContext(FrameworkContext);\n  let [maybePrefetch, setMaybePrefetch] = React8.useState(false);\n  let [shouldPrefetch, setShouldPrefetch] = React8.useState(false);\n  let { onFocus, onBlur, onMouseEnter, onMouseLeave, onTouchStart } = theirElementProps;\n  let ref = React8.useRef(null);\n  React8.useEffect(() => {\n    if (prefetch === \"render\") {\n      setShouldPrefetch(true);\n    }\n    if (prefetch === \"viewport\") {\n      let callback = (entries) => {\n        entries.forEach((entry) => {\n          setShouldPrefetch(entry.isIntersecting);\n        });\n      };\n      let observer = new IntersectionObserver(callback, { threshold: 0.5 });\n      if (ref.current) observer.observe(ref.current);\n      return () => {\n        observer.disconnect();\n      };\n    }\n  }, [prefetch]);\n  React8.useEffect(() => {\n    if (maybePrefetch) {\n      let id = setTimeout(() => {\n        setShouldPrefetch(true);\n      }, 100);\n      return () => {\n        clearTimeout(id);\n      };\n    }\n  }, [maybePrefetch]);\n  let setIntent = () => {\n    setMaybePrefetch(true);\n  };\n  let cancelIntent = () => {\n    setMaybePrefetch(false);\n    setShouldPrefetch(false);\n  };\n  if (!frameworkContext) {\n    return [false, ref, {}];\n  }\n  if (prefetch !== \"intent\") {\n    return [shouldPrefetch, ref, {}];\n  }\n  return [\n    shouldPrefetch,\n    ref,\n    {\n      onFocus: composeEventHandlers(onFocus, setIntent),\n      onBlur: composeEventHandlers(onBlur, cancelIntent),\n      onMouseEnter: composeEventHandlers(onMouseEnter, setIntent),\n      onMouseLeave: composeEventHandlers(onMouseLeave, cancelIntent),\n      onTouchStart: composeEventHandlers(onTouchStart, setIntent)\n    }\n  ];\n}\nfunction composeEventHandlers(theirHandler, ourHandler) {\n  return (event) => {\n    theirHandler && theirHandler(event);\n    if (!event.defaultPrevented) {\n      ourHandler(event);\n    }\n  };\n}\nfunction getActiveMatches(matches, errors, isSpaMode) {\n  if (isSpaMode && !isHydrated) {\n    return [matches[0]];\n  }\n  if (errors) {\n    let errorIdx = matches.findIndex((m) => errors[m.route.id] !== void 0);\n    return matches.slice(0, errorIdx + 1);\n  }\n  return matches;\n}\nvar CRITICAL_CSS_DATA_ATTRIBUTE = \"data-react-router-critical-css\";\nfunction Links({ nonce }) {\n  let { isSpaMode, manifest, routeModules, criticalCss } = useFrameworkContext();\n  let { errors, matches: routerMatches } = useDataRouterStateContext();\n  let matches = getActiveMatches(routerMatches, errors, isSpaMode);\n  let keyedLinks = React8.useMemo(\n    () => getKeyedLinksForMatches(matches, routeModules, manifest),\n    [matches, routeModules, manifest]\n  );\n  return /* @__PURE__ */ React8.createElement(React8.Fragment, null, typeof criticalCss === \"string\" ? /* @__PURE__ */ React8.createElement(\n    \"style\",\n    {\n      ...{ [CRITICAL_CSS_DATA_ATTRIBUTE]: \"\" },\n      dangerouslySetInnerHTML: { __html: criticalCss }\n    }\n  ) : null, typeof criticalCss === \"object\" ? /* @__PURE__ */ React8.createElement(\n    \"link\",\n    {\n      ...{ [CRITICAL_CSS_DATA_ATTRIBUTE]: \"\" },\n      rel: \"stylesheet\",\n      href: criticalCss.href,\n      nonce\n    }\n  ) : null, keyedLinks.map(\n    ({ key, link }) => isPageLinkDescriptor(link) ? /* @__PURE__ */ React8.createElement(PrefetchPageLinks, { key, nonce, ...link }) : /* @__PURE__ */ React8.createElement(\"link\", { key, nonce, ...link })\n  ));\n}\nfunction PrefetchPageLinks({ page, ...linkProps }) {\n  let { router } = useDataRouterContext2();\n  let matches = React8.useMemo(\n    () => matchRoutes(router.routes, page, router.basename),\n    [router.routes, page, router.basename]\n  );\n  if (!matches) {\n    return null;\n  }\n  return /* @__PURE__ */ React8.createElement(PrefetchPageLinksImpl, { page, matches, ...linkProps });\n}\nfunction useKeyedPrefetchLinks(matches) {\n  let { manifest, routeModules } = useFrameworkContext();\n  let [keyedPrefetchLinks, setKeyedPrefetchLinks] = React8.useState([]);\n  React8.useEffect(() => {\n    let interrupted = false;\n    void getKeyedPrefetchLinks(matches, manifest, routeModules).then(\n      (links) => {\n        if (!interrupted) {\n          setKeyedPrefetchLinks(links);\n        }\n      }\n    );\n    return () => {\n      interrupted = true;\n    };\n  }, [matches, manifest, routeModules]);\n  return keyedPrefetchLinks;\n}\nfunction PrefetchPageLinksImpl({\n  page,\n  matches: nextMatches,\n  ...linkProps\n}) {\n  let location = useLocation();\n  let { future, manifest, routeModules } = useFrameworkContext();\n  let { basename } = useDataRouterContext2();\n  let { loaderData, matches } = useDataRouterStateContext();\n  let newMatchesForData = React8.useMemo(\n    () => getNewMatchesForLinks(\n      page,\n      nextMatches,\n      matches,\n      manifest,\n      location,\n      \"data\"\n    ),\n    [page, nextMatches, matches, manifest, location]\n  );\n  let newMatchesForAssets = React8.useMemo(\n    () => getNewMatchesForLinks(\n      page,\n      nextMatches,\n      matches,\n      manifest,\n      location,\n      \"assets\"\n    ),\n    [page, nextMatches, matches, manifest, location]\n  );\n  let dataHrefs = React8.useMemo(() => {\n    if (page === location.pathname + location.search + location.hash) {\n      return [];\n    }\n    let routesParams = /* @__PURE__ */ new Set();\n    let foundOptOutRoute = false;\n    nextMatches.forEach((m) => {\n      let manifestRoute = manifest.routes[m.route.id];\n      if (!manifestRoute || !manifestRoute.hasLoader) {\n        return;\n      }\n      if (!newMatchesForData.some((m2) => m2.route.id === m.route.id) && m.route.id in loaderData && routeModules[m.route.id]?.shouldRevalidate) {\n        foundOptOutRoute = true;\n      } else if (manifestRoute.hasClientLoader) {\n        foundOptOutRoute = true;\n      } else {\n        routesParams.add(m.route.id);\n      }\n    });\n    if (routesParams.size === 0) {\n      return [];\n    }\n    let url = singleFetchUrl(\n      page,\n      basename,\n      future.unstable_trailingSlashAwareDataRequests,\n      \"data\"\n    );\n    if (foundOptOutRoute && routesParams.size > 0) {\n      url.searchParams.set(\n        \"_routes\",\n        nextMatches.filter((m) => routesParams.has(m.route.id)).map((m) => m.route.id).join(\",\")\n      );\n    }\n    return [url.pathname + url.search];\n  }, [\n    basename,\n    future.unstable_trailingSlashAwareDataRequests,\n    loaderData,\n    location,\n    manifest,\n    newMatchesForData,\n    nextMatches,\n    page,\n    routeModules\n  ]);\n  let moduleHrefs = React8.useMemo(\n    () => getModuleLinkHrefs(newMatchesForAssets, manifest),\n    [newMatchesForAssets, manifest]\n  );\n  let keyedPrefetchLinks = useKeyedPrefetchLinks(newMatchesForAssets);\n  return /* @__PURE__ */ React8.createElement(React8.Fragment, null, dataHrefs.map((href) => /* @__PURE__ */ React8.createElement(\"link\", { key: href, rel: \"prefetch\", as: \"fetch\", href, ...linkProps })), moduleHrefs.map((href) => /* @__PURE__ */ React8.createElement(\"link\", { key: href, rel: \"modulepreload\", href, ...linkProps })), keyedPrefetchLinks.map(({ key, link }) => (\n    // these don't spread `linkProps` because they are full link descriptors\n    // already with their own props\n    /* @__PURE__ */ React8.createElement(\"link\", { key, nonce: linkProps.nonce, ...link })\n  )));\n}\nfunction Meta() {\n  let { isSpaMode, routeModules } = useFrameworkContext();\n  let {\n    errors,\n    matches: routerMatches,\n    loaderData\n  } = useDataRouterStateContext();\n  let location = useLocation();\n  let _matches = getActiveMatches(routerMatches, errors, isSpaMode);\n  let error = null;\n  if (errors) {\n    error = errors[_matches[_matches.length - 1].route.id];\n  }\n  let meta = [];\n  let leafMeta = null;\n  let matches = [];\n  for (let i = 0; i < _matches.length; i++) {\n    let _match = _matches[i];\n    let routeId = _match.route.id;\n    let data2 = loaderData[routeId];\n    let params = _match.params;\n    let routeModule = routeModules[routeId];\n    let routeMeta = [];\n    let match = {\n      id: routeId,\n      data: data2,\n      loaderData: data2,\n      meta: [],\n      params: _match.params,\n      pathname: _match.pathname,\n      handle: _match.route.handle,\n      error\n    };\n    matches[i] = match;\n    if (routeModule?.meta) {\n      routeMeta = typeof routeModule.meta === \"function\" ? routeModule.meta({\n        data: data2,\n        loaderData: data2,\n        params,\n        location,\n        matches,\n        error\n      }) : Array.isArray(routeModule.meta) ? [...routeModule.meta] : routeModule.meta;\n    } else if (leafMeta) {\n      routeMeta = [...leafMeta];\n    }\n    routeMeta = routeMeta || [];\n    if (!Array.isArray(routeMeta)) {\n      throw new Error(\n        \"The route at \" + _match.route.path + \" returns an invalid value. All route meta functions must return an array of meta objects.\\n\\nTo reference the meta function API, see https://remix.run/route/meta\"\n      );\n    }\n    match.meta = routeMeta;\n    matches[i] = match;\n    meta = [...routeMeta];\n    leafMeta = meta;\n  }\n  return /* @__PURE__ */ React8.createElement(React8.Fragment, null, meta.flat().map((metaProps) => {\n    if (!metaProps) {\n      return null;\n    }\n    if (\"tagName\" in metaProps) {\n      let { tagName, ...rest } = metaProps;\n      if (!isValidMetaTag(tagName)) {\n        console.warn(\n          `A meta object uses an invalid tagName: ${tagName}. Expected either 'link' or 'meta'`\n        );\n        return null;\n      }\n      let Comp = tagName;\n      return /* @__PURE__ */ React8.createElement(Comp, { key: JSON.stringify(rest), ...rest });\n    }\n    if (\"title\" in metaProps) {\n      return /* @__PURE__ */ React8.createElement(\"title\", { key: \"title\" }, String(metaProps.title));\n    }\n    if (\"charset\" in metaProps) {\n      metaProps.charSet ?? (metaProps.charSet = metaProps.charset);\n      delete metaProps.charset;\n    }\n    if (\"charSet\" in metaProps && metaProps.charSet != null) {\n      return typeof metaProps.charSet === \"string\" ? /* @__PURE__ */ React8.createElement(\"meta\", { key: \"charSet\", charSet: metaProps.charSet }) : null;\n    }\n    if (\"script:ld+json\" in metaProps) {\n      try {\n        let json = JSON.stringify(metaProps[\"script:ld+json\"]);\n        return /* @__PURE__ */ React8.createElement(\n          \"script\",\n          {\n            key: `script:ld+json:${json}`,\n            type: \"application/ld+json\",\n            dangerouslySetInnerHTML: { __html: escapeHtml(json) }\n          }\n        );\n      } catch (err) {\n        return null;\n      }\n    }\n    return /* @__PURE__ */ React8.createElement(\"meta\", { key: JSON.stringify(metaProps), ...metaProps });\n  }));\n}\nfunction isValidMetaTag(tagName) {\n  return typeof tagName === \"string\" && /^(meta|link)$/.test(tagName);\n}\nvar isHydrated = false;\nfunction setIsHydrated() {\n  isHydrated = true;\n}\nfunction Scripts(scriptProps) {\n  let {\n    manifest,\n    serverHandoffString,\n    isSpaMode,\n    renderMeta,\n    routeDiscovery,\n    ssr\n  } = useFrameworkContext();\n  let { router, static: isStatic, staticContext } = useDataRouterContext2();\n  let { matches: routerMatches } = useDataRouterStateContext();\n  let isRSCRouterContext = useIsRSCRouterContext();\n  let enableFogOfWar = isFogOfWarEnabled(routeDiscovery, ssr);\n  if (renderMeta) {\n    renderMeta.didRenderScripts = true;\n  }\n  let matches = getActiveMatches(routerMatches, null, isSpaMode);\n  React8.useEffect(() => {\n    setIsHydrated();\n  }, []);\n  let initialScripts = React8.useMemo(() => {\n    if (isRSCRouterContext) {\n      return null;\n    }\n    let streamScript = \"window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());\";\n    let contextScript = staticContext ? `window.__reactRouterContext = ${serverHandoffString};${streamScript}` : \" \";\n    let routeModulesScript = !isStatic ? \" \" : `${manifest.hmr?.runtime ? `import ${JSON.stringify(manifest.hmr.runtime)};` : \"\"}${!enableFogOfWar ? `import ${JSON.stringify(manifest.url)}` : \"\"};\n${matches.map((match, routeIndex) => {\n      let routeVarName = `route${routeIndex}`;\n      let manifestEntry = manifest.routes[match.route.id];\n      invariant2(manifestEntry, `Route ${match.route.id} not found in manifest`);\n      let {\n        clientActionModule,\n        clientLoaderModule,\n        clientMiddlewareModule,\n        hydrateFallbackModule,\n        module\n      } = manifestEntry;\n      let chunks = [\n        ...clientActionModule ? [\n          {\n            module: clientActionModule,\n            varName: `${routeVarName}_clientAction`\n          }\n        ] : [],\n        ...clientLoaderModule ? [\n          {\n            module: clientLoaderModule,\n            varName: `${routeVarName}_clientLoader`\n          }\n        ] : [],\n        ...clientMiddlewareModule ? [\n          {\n            module: clientMiddlewareModule,\n            varName: `${routeVarName}_clientMiddleware`\n          }\n        ] : [],\n        ...hydrateFallbackModule ? [\n          {\n            module: hydrateFallbackModule,\n            varName: `${routeVarName}_HydrateFallback`\n          }\n        ] : [],\n        { module, varName: `${routeVarName}_main` }\n      ];\n      if (chunks.length === 1) {\n        return `import * as ${routeVarName} from ${JSON.stringify(module)};`;\n      }\n      let chunkImportsSnippet = chunks.map((chunk) => `import * as ${chunk.varName} from \"${chunk.module}\";`).join(\"\\n\");\n      let mergedChunksSnippet = `const ${routeVarName} = {${chunks.map((chunk) => `...${chunk.varName}`).join(\",\")}};`;\n      return [chunkImportsSnippet, mergedChunksSnippet].join(\"\\n\");\n    }).join(\"\\n\")}\n  ${enableFogOfWar ? (\n      // Inline a minimal manifest with the SSR matches\n      `window.__reactRouterManifest = ${JSON.stringify(\n        getPartialManifest(manifest, router),\n        null,\n        2\n      )};`\n    ) : \"\"}\n  window.__reactRouterRouteModules = {${matches.map((match, index) => `${JSON.stringify(match.route.id)}:route${index}`).join(\",\")}};\n\nimport(${JSON.stringify(manifest.entry.module)});`;\n    return /* @__PURE__ */ React8.createElement(React8.Fragment, null, /* @__PURE__ */ React8.createElement(\n      \"script\",\n      {\n        ...scriptProps,\n        suppressHydrationWarning: true,\n        dangerouslySetInnerHTML: { __html: contextScript },\n        type: void 0\n      }\n    ), /* @__PURE__ */ React8.createElement(\n      \"script\",\n      {\n        ...scriptProps,\n        suppressHydrationWarning: true,\n        dangerouslySetInnerHTML: { __html: routeModulesScript },\n        type: \"module\",\n        async: true\n      }\n    ));\n  }, []);\n  let preloads = isHydrated || isRSCRouterContext ? [] : dedupe(\n    manifest.entry.imports.concat(\n      getModuleLinkHrefs(matches, manifest, {\n        includeHydrateFallback: true\n      })\n    )\n  );\n  let sri = typeof manifest.sri === \"object\" ? manifest.sri : {};\n  warnOnce(\n    !isRSCRouterContext,\n    \"The <Scripts /> element is a no-op when using RSC and can be safely removed.\"\n  );\n  return isHydrated || isRSCRouterContext ? null : /* @__PURE__ */ React8.createElement(React8.Fragment, null, typeof manifest.sri === \"object\" ? /* @__PURE__ */ React8.createElement(\n    \"script\",\n    {\n      ...scriptProps,\n      \"rr-importmap\": \"\",\n      type: \"importmap\",\n      suppressHydrationWarning: true,\n      dangerouslySetInnerHTML: {\n        __html: JSON.stringify({\n          integrity: sri\n        })\n      }\n    }\n  ) : null, !enableFogOfWar ? /* @__PURE__ */ React8.createElement(\n    \"link\",\n    {\n      rel: \"modulepreload\",\n      href: manifest.url,\n      crossOrigin: scriptProps.crossOrigin,\n      integrity: sri[manifest.url],\n      suppressHydrationWarning: true\n    }\n  ) : null, /* @__PURE__ */ React8.createElement(\n    \"link\",\n    {\n      rel: \"modulepreload\",\n      href: manifest.entry.module,\n      crossOrigin: scriptProps.crossOrigin,\n      integrity: sri[manifest.entry.module],\n      suppressHydrationWarning: true\n    }\n  ), preloads.map((path) => /* @__PURE__ */ React8.createElement(\n    \"link\",\n    {\n      key: path,\n      rel: \"modulepreload\",\n      href: path,\n      crossOrigin: scriptProps.crossOrigin,\n      integrity: sri[path],\n      suppressHydrationWarning: true\n    }\n  )), initialScripts);\n}\nfunction dedupe(array) {\n  return [...new Set(array)];\n}\nfunction mergeRefs(...refs) {\n  return (value) => {\n    refs.forEach((ref) => {\n      if (typeof ref === \"function\") {\n        ref(value);\n      } else if (ref != null) {\n        ref.current = value;\n      }\n    });\n  };\n}\n\n// lib/dom/ssr/errorBoundaries.tsx\nvar RemixErrorBoundary = class extends React9.Component {\n  constructor(props) {\n    super(props);\n    this.state = { error: props.error || null, location: props.location };\n  }\n  static getDerivedStateFromError(error) {\n    return { error };\n  }\n  static getDerivedStateFromProps(props, state) {\n    if (state.location !== props.location) {\n      return { error: props.error || null, location: props.location };\n    }\n    return { error: props.error || state.error, location: state.location };\n  }\n  render() {\n    if (this.state.error) {\n      return /* @__PURE__ */ React9.createElement(\n        RemixRootDefaultErrorBoundary,\n        {\n          error: this.state.error,\n          isOutsideRemixApp: true\n        }\n      );\n    } else {\n      return this.props.children;\n    }\n  }\n};\nfunction RemixRootDefaultErrorBoundary({\n  error,\n  isOutsideRemixApp\n}) {\n  console.error(error);\n  let heyDeveloper = /* @__PURE__ */ React9.createElement(\n    \"script\",\n    {\n      dangerouslySetInnerHTML: {\n        __html: `\n        console.log(\n          \"\\u{1F4BF} Hey developer \\u{1F44B}. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information.\"\n        );\n      `\n      }\n    }\n  );\n  if (isRouteErrorResponse(error)) {\n    return /* @__PURE__ */ React9.createElement(BoundaryShell, { title: \"Unhandled Thrown Response!\" }, /* @__PURE__ */ React9.createElement(\"h1\", { style: { fontSize: \"24px\" } }, error.status, \" \", error.statusText), ENABLE_DEV_WARNINGS ? heyDeveloper : null);\n  }\n  let errorInstance;\n  if (error instanceof Error) {\n    errorInstance = error;\n  } else {\n    let errorString = error == null ? \"Unknown Error\" : typeof error === \"object\" && \"toString\" in error ? error.toString() : JSON.stringify(error);\n    errorInstance = new Error(errorString);\n  }\n  return /* @__PURE__ */ React9.createElement(\n    BoundaryShell,\n    {\n      title: \"Application Error!\",\n      isOutsideRemixApp\n    },\n    /* @__PURE__ */ React9.createElement(\"h1\", { style: { fontSize: \"24px\" } }, \"Application Error\"),\n    /* @__PURE__ */ React9.createElement(\n      \"pre\",\n      {\n        style: {\n          padding: \"2rem\",\n          background: \"hsla(10, 50%, 50%, 0.1)\",\n          color: \"red\",\n          overflow: \"auto\"\n        }\n      },\n      errorInstance.stack\n    ),\n    heyDeveloper\n  );\n}\nfunction BoundaryShell({\n  title,\n  renderScripts,\n  isOutsideRemixApp,\n  children\n}) {\n  let { routeModules } = useFrameworkContext();\n  if (routeModules.root?.Layout && !isOutsideRemixApp) {\n    return children;\n  }\n  return /* @__PURE__ */ React9.createElement(\"html\", { lang: \"en\" }, /* @__PURE__ */ React9.createElement(\"head\", null, /* @__PURE__ */ React9.createElement(\"meta\", { charSet: \"utf-8\" }), /* @__PURE__ */ React9.createElement(\n    \"meta\",\n    {\n      name: \"viewport\",\n      content: \"width=device-width,initial-scale=1,viewport-fit=cover\"\n    }\n  ), /* @__PURE__ */ React9.createElement(\"title\", null, title)), /* @__PURE__ */ React9.createElement(\"body\", null, /* @__PURE__ */ React9.createElement(\"main\", { style: { fontFamily: \"system-ui, sans-serif\", padding: \"2rem\" } }, children, renderScripts ? /* @__PURE__ */ React9.createElement(Scripts, null) : null)));\n}\n\n// lib/dom/lib.tsx\nimport * as React10 from \"react\";\nvar isBrowser2 = typeof window !== \"undefined\" && typeof window.document !== \"undefined\" && typeof window.document.createElement !== \"undefined\";\ntry {\n  if (isBrowser2) {\n    window.__reactRouterVersion = // @ts-expect-error\n    \"7.12.0\";\n  }\n} catch (e) {\n}\nfunction createBrowserRouter(routes, opts) {\n  return createRouter({\n    basename: opts?.basename,\n    getContext: opts?.getContext,\n    future: opts?.future,\n    history: createBrowserHistory({ window: opts?.window }),\n    hydrationData: opts?.hydrationData || parseHydrationData(),\n    routes,\n    mapRouteProperties,\n    hydrationRouteProperties,\n    dataStrategy: opts?.dataStrategy,\n    patchRoutesOnNavigation: opts?.patchRoutesOnNavigation,\n    window: opts?.window,\n    unstable_instrumentations: opts?.unstable_instrumentations\n  }).initialize();\n}\nfunction createHashRouter(routes, opts) {\n  return createRouter({\n    basename: opts?.basename,\n    getContext: opts?.getContext,\n    future: opts?.future,\n    history: createHashHistory({ window: opts?.window }),\n    hydrationData: opts?.hydrationData || parseHydrationData(),\n    routes,\n    mapRouteProperties,\n    hydrationRouteProperties,\n    dataStrategy: opts?.dataStrategy,\n    patchRoutesOnNavigation: opts?.patchRoutesOnNavigation,\n    window: opts?.window,\n    unstable_instrumentations: opts?.unstable_instrumentations\n  }).initialize();\n}\nfunction parseHydrationData() {\n  let state = window?.__staticRouterHydrationData;\n  if (state && state.errors) {\n    state = {\n      ...state,\n      errors: deserializeErrors(state.errors)\n    };\n  }\n  return state;\n}\nfunction deserializeErrors(errors) {\n  if (!errors) return null;\n  let entries = Object.entries(errors);\n  let serialized = {};\n  for (let [key, val] of entries) {\n    if (val && val.__type === \"RouteErrorResponse\") {\n      serialized[key] = new ErrorResponseImpl(\n        val.status,\n        val.statusText,\n        val.data,\n        val.internal === true\n      );\n    } else if (val && val.__type === \"Error\") {\n      if (val.__subType) {\n        let ErrorConstructor = window[val.__subType];\n        if (typeof ErrorConstructor === \"function\") {\n          try {\n            let error = new ErrorConstructor(val.message);\n            error.stack = \"\";\n            serialized[key] = error;\n          } catch (e) {\n          }\n        }\n      }\n      if (serialized[key] == null) {\n        let error = new Error(val.message);\n        error.stack = \"\";\n        serialized[key] = error;\n      }\n    } else {\n      serialized[key] = val;\n    }\n  }\n  return serialized;\n}\nfunction BrowserRouter({\n  basename,\n  children,\n  unstable_useTransitions,\n  window: window2\n}) {\n  let historyRef = React10.useRef();\n  if (historyRef.current == null) {\n    historyRef.current = createBrowserHistory({ window: window2, v5Compat: true });\n  }\n  let history = historyRef.current;\n  let [state, setStateImpl] = React10.useState({\n    action: history.action,\n    location: history.location\n  });\n  let setState = React10.useCallback(\n    (newState) => {\n      if (unstable_useTransitions === false) {\n        setStateImpl(newState);\n      } else {\n        React10.startTransition(() => setStateImpl(newState));\n      }\n    },\n    [unstable_useTransitions]\n  );\n  React10.useLayoutEffect(() => history.listen(setState), [history, setState]);\n  return /* @__PURE__ */ React10.createElement(\n    Router,\n    {\n      basename,\n      children,\n      location: state.location,\n      navigationType: state.action,\n      navigator: history,\n      unstable_useTransitions\n    }\n  );\n}\nfunction HashRouter({\n  basename,\n  children,\n  unstable_useTransitions,\n  window: window2\n}) {\n  let historyRef = React10.useRef();\n  if (historyRef.current == null) {\n    historyRef.current = createHashHistory({ window: window2, v5Compat: true });\n  }\n  let history = historyRef.current;\n  let [state, setStateImpl] = React10.useState({\n    action: history.action,\n    location: history.location\n  });\n  let setState = React10.useCallback(\n    (newState) => {\n      if (unstable_useTransitions === false) {\n        setStateImpl(newState);\n      } else {\n        React10.startTransition(() => setStateImpl(newState));\n      }\n    },\n    [unstable_useTransitions]\n  );\n  React10.useLayoutEffect(() => history.listen(setState), [history, setState]);\n  return /* @__PURE__ */ React10.createElement(\n    Router,\n    {\n      basename,\n      children,\n      location: state.location,\n      navigationType: state.action,\n      navigator: history,\n      unstable_useTransitions\n    }\n  );\n}\nfunction HistoryRouter({\n  basename,\n  children,\n  history,\n  unstable_useTransitions\n}) {\n  let [state, setStateImpl] = React10.useState({\n    action: history.action,\n    location: history.location\n  });\n  let setState = React10.useCallback(\n    (newState) => {\n      if (unstable_useTransitions === false) {\n        setStateImpl(newState);\n      } else {\n        React10.startTransition(() => setStateImpl(newState));\n      }\n    },\n    [unstable_useTransitions]\n  );\n  React10.useLayoutEffect(() => history.listen(setState), [history, setState]);\n  return /* @__PURE__ */ React10.createElement(\n    Router,\n    {\n      basename,\n      children,\n      location: state.location,\n      navigationType: state.action,\n      navigator: history,\n      unstable_useTransitions\n    }\n  );\n}\nHistoryRouter.displayName = \"unstable_HistoryRouter\";\nvar ABSOLUTE_URL_REGEX2 = /^(?:[a-z][a-z0-9+.-]*:|\\/\\/)/i;\nvar Link = React10.forwardRef(\n  function LinkWithRef({\n    onClick,\n    discover = \"render\",\n    prefetch = \"none\",\n    relative,\n    reloadDocument,\n    replace: replace2,\n    state,\n    target,\n    to,\n    preventScrollReset,\n    viewTransition,\n    unstable_defaultShouldRevalidate,\n    ...rest\n  }, forwardedRef) {\n    let { basename, unstable_useTransitions } = React10.useContext(NavigationContext);\n    let isAbsolute = typeof to === \"string\" && ABSOLUTE_URL_REGEX2.test(to);\n    let parsed = parseToInfo(to, basename);\n    to = parsed.to;\n    let href = useHref(to, { relative });\n    let [shouldPrefetch, prefetchRef, prefetchHandlers] = usePrefetchBehavior(\n      prefetch,\n      rest\n    );\n    let internalOnClick = useLinkClickHandler(to, {\n      replace: replace2,\n      state,\n      target,\n      preventScrollReset,\n      relative,\n      viewTransition,\n      unstable_defaultShouldRevalidate,\n      unstable_useTransitions\n    });\n    function handleClick(event) {\n      if (onClick) onClick(event);\n      if (!event.defaultPrevented) {\n        internalOnClick(event);\n      }\n    }\n    let link = (\n      // eslint-disable-next-line jsx-a11y/anchor-has-content\n      /* @__PURE__ */ React10.createElement(\n        \"a\",\n        {\n          ...rest,\n          ...prefetchHandlers,\n          href: parsed.absoluteURL || href,\n          onClick: parsed.isExternal || reloadDocument ? onClick : handleClick,\n          ref: mergeRefs(forwardedRef, prefetchRef),\n          target,\n          \"data-discover\": !isAbsolute && discover === \"render\" ? \"true\" : void 0\n        }\n      )\n    );\n    return shouldPrefetch && !isAbsolute ? /* @__PURE__ */ React10.createElement(React10.Fragment, null, link, /* @__PURE__ */ React10.createElement(PrefetchPageLinks, { page: href })) : link;\n  }\n);\nLink.displayName = \"Link\";\nvar NavLink = React10.forwardRef(\n  function NavLinkWithRef({\n    \"aria-current\": ariaCurrentProp = \"page\",\n    caseSensitive = false,\n    className: classNameProp = \"\",\n    end = false,\n    style: styleProp,\n    to,\n    viewTransition,\n    children,\n    ...rest\n  }, ref) {\n    let path = useResolvedPath(to, { relative: rest.relative });\n    let location = useLocation();\n    let routerState = React10.useContext(DataRouterStateContext);\n    let { navigator, basename } = React10.useContext(NavigationContext);\n    let isTransitioning = routerState != null && // Conditional usage is OK here because the usage of a data router is static\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    useViewTransitionState(path) && viewTransition === true;\n    let toPathname = navigator.encodeLocation ? navigator.encodeLocation(path).pathname : path.pathname;\n    let locationPathname = location.pathname;\n    let nextLocationPathname = routerState && routerState.navigation && routerState.navigation.location ? routerState.navigation.location.pathname : null;\n    if (!caseSensitive) {\n      locationPathname = locationPathname.toLowerCase();\n      nextLocationPathname = nextLocationPathname ? nextLocationPathname.toLowerCase() : null;\n      toPathname = toPathname.toLowerCase();\n    }\n    if (nextLocationPathname && basename) {\n      nextLocationPathname = stripBasename(nextLocationPathname, basename) || nextLocationPathname;\n    }\n    const endSlashPosition = toPathname !== \"/\" && toPathname.endsWith(\"/\") ? toPathname.length - 1 : toPathname.length;\n    let isActive = locationPathname === toPathname || !end && locationPathname.startsWith(toPathname) && locationPathname.charAt(endSlashPosition) === \"/\";\n    let isPending = nextLocationPathname != null && (nextLocationPathname === toPathname || !end && nextLocationPathname.startsWith(toPathname) && nextLocationPathname.charAt(toPathname.length) === \"/\");\n    let renderProps = {\n      isActive,\n      isPending,\n      isTransitioning\n    };\n    let ariaCurrent = isActive ? ariaCurrentProp : void 0;\n    let className;\n    if (typeof classNameProp === \"function\") {\n      className = classNameProp(renderProps);\n    } else {\n      className = [\n        classNameProp,\n        isActive ? \"active\" : null,\n        isPending ? \"pending\" : null,\n        isTransitioning ? \"transitioning\" : null\n      ].filter(Boolean).join(\" \");\n    }\n    let style = typeof styleProp === \"function\" ? styleProp(renderProps) : styleProp;\n    return /* @__PURE__ */ React10.createElement(\n      Link,\n      {\n        ...rest,\n        \"aria-current\": ariaCurrent,\n        className,\n        ref,\n        style,\n        to,\n        viewTransition\n      },\n      typeof children === \"function\" ? children(renderProps) : children\n    );\n  }\n);\nNavLink.displayName = \"NavLink\";\nvar Form = React10.forwardRef(\n  ({\n    discover = \"render\",\n    fetcherKey,\n    navigate,\n    reloadDocument,\n    replace: replace2,\n    state,\n    method = defaultMethod,\n    action,\n    onSubmit,\n    relative,\n    preventScrollReset,\n    viewTransition,\n    unstable_defaultShouldRevalidate,\n    ...props\n  }, forwardedRef) => {\n    let { unstable_useTransitions } = React10.useContext(NavigationContext);\n    let submit = useSubmit();\n    let formAction = useFormAction(action, { relative });\n    let formMethod = method.toLowerCase() === \"get\" ? \"get\" : \"post\";\n    let isAbsolute = typeof action === \"string\" && ABSOLUTE_URL_REGEX2.test(action);\n    let submitHandler = (event) => {\n      onSubmit && onSubmit(event);\n      if (event.defaultPrevented) return;\n      event.preventDefault();\n      let submitter = event.nativeEvent.submitter;\n      let submitMethod = submitter?.getAttribute(\"formmethod\") || method;\n      let doSubmit = () => submit(submitter || event.currentTarget, {\n        fetcherKey,\n        method: submitMethod,\n        navigate,\n        replace: replace2,\n        state,\n        relative,\n        preventScrollReset,\n        viewTransition,\n        unstable_defaultShouldRevalidate\n      });\n      if (unstable_useTransitions && navigate !== false) {\n        React10.startTransition(() => doSubmit());\n      } else {\n        doSubmit();\n      }\n    };\n    return /* @__PURE__ */ React10.createElement(\n      \"form\",\n      {\n        ref: forwardedRef,\n        method: formMethod,\n        action: formAction,\n        onSubmit: reloadDocument ? onSubmit : submitHandler,\n        ...props,\n        \"data-discover\": !isAbsolute && discover === \"render\" ? \"true\" : void 0\n      }\n    );\n  }\n);\nForm.displayName = \"Form\";\nfunction ScrollRestoration({\n  getKey,\n  storageKey,\n  ...props\n}) {\n  let remixContext = React10.useContext(FrameworkContext);\n  let { basename } = React10.useContext(NavigationContext);\n  let location = useLocation();\n  let matches = useMatches();\n  useScrollRestoration({ getKey, storageKey });\n  let ssrKey = React10.useMemo(\n    () => {\n      if (!remixContext || !getKey) return null;\n      let userKey = getScrollRestorationKey(\n        location,\n        matches,\n        basename,\n        getKey\n      );\n      return userKey !== location.key ? userKey : null;\n    },\n    // Nah, we only need this the first time for the SSR render\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  );\n  if (!remixContext || remixContext.isSpaMode) {\n    return null;\n  }\n  let restoreScroll = ((storageKey2, restoreKey) => {\n    if (!window.history.state || !window.history.state.key) {\n      let key = Math.random().toString(32).slice(2);\n      window.history.replaceState({ key }, \"\");\n    }\n    try {\n      let positions = JSON.parse(sessionStorage.getItem(storageKey2) || \"{}\");\n      let storedY = positions[restoreKey || window.history.state.key];\n      if (typeof storedY === \"number\") {\n        window.scrollTo(0, storedY);\n      }\n    } catch (error) {\n      console.error(error);\n      sessionStorage.removeItem(storageKey2);\n    }\n  }).toString();\n  return /* @__PURE__ */ React10.createElement(\n    \"script\",\n    {\n      ...props,\n      suppressHydrationWarning: true,\n      dangerouslySetInnerHTML: {\n        __html: `(${restoreScroll})(${escapeHtml(\n          JSON.stringify(storageKey || SCROLL_RESTORATION_STORAGE_KEY)\n        )}, ${escapeHtml(JSON.stringify(ssrKey))})`\n      }\n    }\n  );\n}\nScrollRestoration.displayName = \"ScrollRestoration\";\nfunction getDataRouterConsoleError2(hookName) {\n  return `${hookName} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`;\n}\nfunction useDataRouterContext3(hookName) {\n  let ctx = React10.useContext(DataRouterContext);\n  invariant(ctx, getDataRouterConsoleError2(hookName));\n  return ctx;\n}\nfunction useDataRouterState2(hookName) {\n  let state = React10.useContext(DataRouterStateContext);\n  invariant(state, getDataRouterConsoleError2(hookName));\n  return state;\n}\nfunction useLinkClickHandler(to, {\n  target,\n  replace: replaceProp,\n  state,\n  preventScrollReset,\n  relative,\n  viewTransition,\n  unstable_defaultShouldRevalidate,\n  unstable_useTransitions\n} = {}) {\n  let navigate = useNavigate();\n  let location = useLocation();\n  let path = useResolvedPath(to, { relative });\n  return React10.useCallback(\n    (event) => {\n      if (shouldProcessLinkClick(event, target)) {\n        event.preventDefault();\n        let replace2 = replaceProp !== void 0 ? replaceProp : createPath(location) === createPath(path);\n        let doNavigate = () => navigate(to, {\n          replace: replace2,\n          state,\n          preventScrollReset,\n          relative,\n          viewTransition,\n          unstable_defaultShouldRevalidate\n        });\n        if (unstable_useTransitions) {\n          React10.startTransition(() => doNavigate());\n        } else {\n          doNavigate();\n        }\n      }\n    },\n    [\n      location,\n      navigate,\n      path,\n      replaceProp,\n      state,\n      target,\n      to,\n      preventScrollReset,\n      relative,\n      viewTransition,\n      unstable_defaultShouldRevalidate,\n      unstable_useTransitions\n    ]\n  );\n}\nfunction useSearchParams(defaultInit) {\n  warning(\n    typeof URLSearchParams !== \"undefined\",\n    `You cannot use the \\`useSearchParams\\` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.`\n  );\n  let defaultSearchParamsRef = React10.useRef(createSearchParams(defaultInit));\n  let hasSetSearchParamsRef = React10.useRef(false);\n  let location = useLocation();\n  let searchParams = React10.useMemo(\n    () => (\n      // Only merge in the defaults if we haven't yet called setSearchParams.\n      // Once we call that we want those to take precedence, otherwise you can't\n      // remove a param with setSearchParams({}) if it has an initial value\n      getSearchParamsForLocation(\n        location.search,\n        hasSetSearchParamsRef.current ? null : defaultSearchParamsRef.current\n      )\n    ),\n    [location.search]\n  );\n  let navigate = useNavigate();\n  let setSearchParams = React10.useCallback(\n    (nextInit, navigateOptions) => {\n      const newSearchParams = createSearchParams(\n        typeof nextInit === \"function\" ? nextInit(new URLSearchParams(searchParams)) : nextInit\n      );\n      hasSetSearchParamsRef.current = true;\n      navigate(\"?\" + newSearchParams, navigateOptions);\n    },\n    [navigate, searchParams]\n  );\n  return [searchParams, setSearchParams];\n}\nvar fetcherId = 0;\nvar getUniqueFetcherId = () => `__${String(++fetcherId)}__`;\nfunction useSubmit() {\n  let { router } = useDataRouterContext3(\"useSubmit\" /* UseSubmit */);\n  let { basename } = React10.useContext(NavigationContext);\n  let currentRouteId = useRouteId();\n  let routerFetch = router.fetch;\n  let routerNavigate = router.navigate;\n  return React10.useCallback(\n    async (target, options = {}) => {\n      let { action, method, encType, formData, body } = getFormSubmissionInfo(\n        target,\n        basename\n      );\n      if (options.navigate === false) {\n        let key = options.fetcherKey || getUniqueFetcherId();\n        await routerFetch(key, currentRouteId, options.action || action, {\n          unstable_defaultShouldRevalidate: options.unstable_defaultShouldRevalidate,\n          preventScrollReset: options.preventScrollReset,\n          formData,\n          body,\n          formMethod: options.method || method,\n          formEncType: options.encType || encType,\n          flushSync: options.flushSync\n        });\n      } else {\n        await routerNavigate(options.action || action, {\n          unstable_defaultShouldRevalidate: options.unstable_defaultShouldRevalidate,\n          preventScrollReset: options.preventScrollReset,\n          formData,\n          body,\n          formMethod: options.method || method,\n          formEncType: options.encType || encType,\n          replace: options.replace,\n          state: options.state,\n          fromRouteId: currentRouteId,\n          flushSync: options.flushSync,\n          viewTransition: options.viewTransition\n        });\n      }\n    },\n    [routerFetch, routerNavigate, basename, currentRouteId]\n  );\n}\nfunction useFormAction(action, { relative } = {}) {\n  let { basename } = React10.useContext(NavigationContext);\n  let routeContext = React10.useContext(RouteContext);\n  invariant(routeContext, \"useFormAction must be used inside a RouteContext\");\n  let [match] = routeContext.matches.slice(-1);\n  let path = { ...useResolvedPath(action ? action : \".\", { relative }) };\n  let location = useLocation();\n  if (action == null) {\n    path.search = location.search;\n    let params = new URLSearchParams(path.search);\n    let indexValues = params.getAll(\"index\");\n    let hasNakedIndexParam = indexValues.some((v) => v === \"\");\n    if (hasNakedIndexParam) {\n      params.delete(\"index\");\n      indexValues.filter((v) => v).forEach((v) => params.append(\"index\", v));\n      let qs = params.toString();\n      path.search = qs ? `?${qs}` : \"\";\n    }\n  }\n  if ((!action || action === \".\") && match.route.index) {\n    path.search = path.search ? path.search.replace(/^\\?/, \"?index&\") : \"?index\";\n  }\n  if (basename !== \"/\") {\n    path.pathname = path.pathname === \"/\" ? basename : joinPaths([basename, path.pathname]);\n  }\n  return createPath(path);\n}\nfunction useFetcher({\n  key\n} = {}) {\n  let { router } = useDataRouterContext3(\"useFetcher\" /* UseFetcher */);\n  let state = useDataRouterState2(\"useFetcher\" /* UseFetcher */);\n  let fetcherData = React10.useContext(FetchersContext);\n  let route = React10.useContext(RouteContext);\n  let routeId = route.matches[route.matches.length - 1]?.route.id;\n  invariant(fetcherData, `useFetcher must be used inside a FetchersContext`);\n  invariant(route, `useFetcher must be used inside a RouteContext`);\n  invariant(\n    routeId != null,\n    `useFetcher can only be used on routes that contain a unique \"id\"`\n  );\n  let defaultKey = React10.useId();\n  let [fetcherKey, setFetcherKey] = React10.useState(key || defaultKey);\n  if (key && key !== fetcherKey) {\n    setFetcherKey(key);\n  }\n  let { deleteFetcher, getFetcher, resetFetcher, fetch: routerFetch } = router;\n  React10.useEffect(() => {\n    getFetcher(fetcherKey);\n    return () => deleteFetcher(fetcherKey);\n  }, [deleteFetcher, getFetcher, fetcherKey]);\n  let load = React10.useCallback(\n    async (href, opts) => {\n      invariant(routeId, \"No routeId available for fetcher.load()\");\n      await routerFetch(fetcherKey, routeId, href, opts);\n    },\n    [fetcherKey, routeId, routerFetch]\n  );\n  let submitImpl = useSubmit();\n  let submit = React10.useCallback(\n    async (target, opts) => {\n      await submitImpl(target, {\n        ...opts,\n        navigate: false,\n        fetcherKey\n      });\n    },\n    [fetcherKey, submitImpl]\n  );\n  let reset = React10.useCallback(\n    (opts) => resetFetcher(fetcherKey, opts),\n    [resetFetcher, fetcherKey]\n  );\n  let FetcherForm = React10.useMemo(() => {\n    let FetcherForm2 = React10.forwardRef(\n      (props, ref) => {\n        return /* @__PURE__ */ React10.createElement(Form, { ...props, navigate: false, fetcherKey, ref });\n      }\n    );\n    FetcherForm2.displayName = \"fetcher.Form\";\n    return FetcherForm2;\n  }, [fetcherKey]);\n  let fetcher = state.fetchers.get(fetcherKey) || IDLE_FETCHER;\n  let data2 = fetcherData.get(fetcherKey);\n  let fetcherWithComponents = React10.useMemo(\n    () => ({\n      Form: FetcherForm,\n      submit,\n      load,\n      reset,\n      ...fetcher,\n      data: data2\n    }),\n    [FetcherForm, submit, load, reset, fetcher, data2]\n  );\n  return fetcherWithComponents;\n}\nfunction useFetchers() {\n  let state = useDataRouterState2(\"useFetchers\" /* UseFetchers */);\n  return Array.from(state.fetchers.entries()).map(([key, fetcher]) => ({\n    ...fetcher,\n    key\n  }));\n}\nvar SCROLL_RESTORATION_STORAGE_KEY = \"react-router-scroll-positions\";\nvar savedScrollPositions = {};\nfunction getScrollRestorationKey(location, matches, basename, getKey) {\n  let key = null;\n  if (getKey) {\n    if (basename !== \"/\") {\n      key = getKey(\n        {\n          ...location,\n          pathname: stripBasename(location.pathname, basename) || location.pathname\n        },\n        matches\n      );\n    } else {\n      key = getKey(location, matches);\n    }\n  }\n  if (key == null) {\n    key = location.key;\n  }\n  return key;\n}\nfunction useScrollRestoration({\n  getKey,\n  storageKey\n} = {}) {\n  let { router } = useDataRouterContext3(\"useScrollRestoration\" /* UseScrollRestoration */);\n  let { restoreScrollPosition, preventScrollReset } = useDataRouterState2(\n    \"useScrollRestoration\" /* UseScrollRestoration */\n  );\n  let { basename } = React10.useContext(NavigationContext);\n  let location = useLocation();\n  let matches = useMatches();\n  let navigation = useNavigation();\n  React10.useEffect(() => {\n    window.history.scrollRestoration = \"manual\";\n    return () => {\n      window.history.scrollRestoration = \"auto\";\n    };\n  }, []);\n  usePageHide(\n    React10.useCallback(() => {\n      if (navigation.state === \"idle\") {\n        let key = getScrollRestorationKey(location, matches, basename, getKey);\n        savedScrollPositions[key] = window.scrollY;\n      }\n      try {\n        sessionStorage.setItem(\n          storageKey || SCROLL_RESTORATION_STORAGE_KEY,\n          JSON.stringify(savedScrollPositions)\n        );\n      } catch (error) {\n        warning(\n          false,\n          `Failed to save scroll positions in sessionStorage, <ScrollRestoration /> will not work properly (${error}).`\n        );\n      }\n      window.history.scrollRestoration = \"auto\";\n    }, [navigation.state, getKey, basename, location, matches, storageKey])\n  );\n  if (typeof document !== \"undefined\") {\n    React10.useLayoutEffect(() => {\n      try {\n        let sessionPositions = sessionStorage.getItem(\n          storageKey || SCROLL_RESTORATION_STORAGE_KEY\n        );\n        if (sessionPositions) {\n          savedScrollPositions = JSON.parse(sessionPositions);\n        }\n      } catch (e) {\n      }\n    }, [storageKey]);\n    React10.useLayoutEffect(() => {\n      let disableScrollRestoration = router?.enableScrollRestoration(\n        savedScrollPositions,\n        () => window.scrollY,\n        getKey ? (location2, matches2) => getScrollRestorationKey(location2, matches2, basename, getKey) : void 0\n      );\n      return () => disableScrollRestoration && disableScrollRestoration();\n    }, [router, basename, getKey]);\n    React10.useLayoutEffect(() => {\n      if (restoreScrollPosition === false) {\n        return;\n      }\n      if (typeof restoreScrollPosition === \"number\") {\n        window.scrollTo(0, restoreScrollPosition);\n        return;\n      }\n      try {\n        if (location.hash) {\n          let el = document.getElementById(\n            decodeURIComponent(location.hash.slice(1))\n          );\n          if (el) {\n            el.scrollIntoView();\n            return;\n          }\n        }\n      } catch {\n        warning(\n          false,\n          `\"${location.hash.slice(\n            1\n          )}\" is not a decodable element ID. The view will not scroll to it.`\n        );\n      }\n      if (preventScrollReset === true) {\n        return;\n      }\n      window.scrollTo(0, 0);\n    }, [location, restoreScrollPosition, preventScrollReset]);\n  }\n}\nfunction useBeforeUnload(callback, options) {\n  let { capture } = options || {};\n  React10.useEffect(() => {\n    let opts = capture != null ? { capture } : void 0;\n    window.addEventListener(\"beforeunload\", callback, opts);\n    return () => {\n      window.removeEventListener(\"beforeunload\", callback, opts);\n    };\n  }, [callback, capture]);\n}\nfunction usePageHide(callback, options) {\n  let { capture } = options || {};\n  React10.useEffect(() => {\n    let opts = capture != null ? { capture } : void 0;\n    window.addEventListener(\"pagehide\", callback, opts);\n    return () => {\n      window.removeEventListener(\"pagehide\", callback, opts);\n    };\n  }, [callback, capture]);\n}\nfunction usePrompt({\n  when,\n  message\n}) {\n  let blocker = useBlocker(when);\n  React10.useEffect(() => {\n    if (blocker.state === \"blocked\") {\n      let proceed = window.confirm(message);\n      if (proceed) {\n        setTimeout(blocker.proceed, 0);\n      } else {\n        blocker.reset();\n      }\n    }\n  }, [blocker, message]);\n  React10.useEffect(() => {\n    if (blocker.state === \"blocked\" && !when) {\n      blocker.reset();\n    }\n  }, [blocker, when]);\n}\nfunction useViewTransitionState(to, { relative } = {}) {\n  let vtContext = React10.useContext(ViewTransitionContext);\n  invariant(\n    vtContext != null,\n    \"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?\"\n  );\n  let { basename } = useDataRouterContext3(\n    \"useViewTransitionState\" /* useViewTransitionState */\n  );\n  let path = useResolvedPath(to, { relative });\n  if (!vtContext.isTransitioning) {\n    return false;\n  }\n  let currentPath = stripBasename(vtContext.currentLocation.pathname, basename) || vtContext.currentLocation.pathname;\n  let nextPath = stripBasename(vtContext.nextLocation.pathname, basename) || vtContext.nextLocation.pathname;\n  return matchPath(path.pathname, nextPath) != null || matchPath(path.pathname, currentPath) != null;\n}\n\n// lib/dom/server.tsx\nimport * as React11 from \"react\";\nfunction StaticRouter({\n  basename,\n  children,\n  location: locationProp = \"/\"\n}) {\n  if (typeof locationProp === \"string\") {\n    locationProp = parsePath(locationProp);\n  }\n  let action = \"POP\" /* Pop */;\n  let location = {\n    pathname: locationProp.pathname || \"/\",\n    search: locationProp.search || \"\",\n    hash: locationProp.hash || \"\",\n    state: locationProp.state != null ? locationProp.state : null,\n    key: locationProp.key || \"default\"\n  };\n  let staticNavigator = getStatelessNavigator();\n  return /* @__PURE__ */ React11.createElement(\n    Router,\n    {\n      basename,\n      children,\n      location,\n      navigationType: action,\n      navigator: staticNavigator,\n      static: true,\n      unstable_useTransitions: false\n    }\n  );\n}\nfunction StaticRouterProvider({\n  context,\n  router,\n  hydrate: hydrate2 = true,\n  nonce\n}) {\n  invariant(\n    router && context,\n    \"You must provide `router` and `context` to <StaticRouterProvider>\"\n  );\n  let dataRouterContext = {\n    router,\n    navigator: getStatelessNavigator(),\n    static: true,\n    staticContext: context,\n    basename: context.basename || \"/\"\n  };\n  let fetchersContext = /* @__PURE__ */ new Map();\n  let hydrateScript = \"\";\n  if (hydrate2 !== false) {\n    let data2 = {\n      loaderData: context.loaderData,\n      actionData: context.actionData,\n      errors: serializeErrors(context.errors)\n    };\n    let json = escapeHtml(JSON.stringify(JSON.stringify(data2)));\n    hydrateScript = `window.__staticRouterHydrationData = JSON.parse(${json});`;\n  }\n  let { state } = dataRouterContext.router;\n  return /* @__PURE__ */ React11.createElement(React11.Fragment, null, /* @__PURE__ */ React11.createElement(DataRouterContext.Provider, { value: dataRouterContext }, /* @__PURE__ */ React11.createElement(DataRouterStateContext.Provider, { value: state }, /* @__PURE__ */ React11.createElement(FetchersContext.Provider, { value: fetchersContext }, /* @__PURE__ */ React11.createElement(ViewTransitionContext.Provider, { value: { isTransitioning: false } }, /* @__PURE__ */ React11.createElement(\n    Router,\n    {\n      basename: dataRouterContext.basename,\n      location: state.location,\n      navigationType: state.historyAction,\n      navigator: dataRouterContext.navigator,\n      static: dataRouterContext.static,\n      unstable_useTransitions: false\n    },\n    /* @__PURE__ */ React11.createElement(\n      DataRoutes2,\n      {\n        routes: router.routes,\n        future: router.future,\n        state\n      }\n    )\n  ))))), hydrateScript ? /* @__PURE__ */ React11.createElement(\n    \"script\",\n    {\n      suppressHydrationWarning: true,\n      nonce,\n      dangerouslySetInnerHTML: { __html: hydrateScript }\n    }\n  ) : null);\n}\nfunction DataRoutes2({\n  routes,\n  future,\n  state\n}) {\n  return useRoutesImpl(routes, void 0, state, void 0, future);\n}\nfunction serializeErrors(errors) {\n  if (!errors) return null;\n  let entries = Object.entries(errors);\n  let serialized = {};\n  for (let [key, val] of entries) {\n    if (isRouteErrorResponse(val)) {\n      serialized[key] = { ...val, __type: \"RouteErrorResponse\" };\n    } else if (val instanceof Error) {\n      serialized[key] = {\n        message: val.message,\n        __type: \"Error\",\n        // If this is a subclass (i.e., ReferenceError), send up the type so we\n        // can re-create the same type during hydration.\n        ...val.name !== \"Error\" ? {\n          __subType: val.name\n        } : {}\n      };\n    } else {\n      serialized[key] = val;\n    }\n  }\n  return serialized;\n}\nfunction getStatelessNavigator() {\n  return {\n    createHref,\n    encodeLocation,\n    push(to) {\n      throw new Error(\n        `You cannot use navigator.push() on the server because it is a stateless environment. This error was probably triggered when you did a \\`navigate(${JSON.stringify(to)})\\` somewhere in your app.`\n      );\n    },\n    replace(to) {\n      throw new Error(\n        `You cannot use navigator.replace() on the server because it is a stateless environment. This error was probably triggered when you did a \\`navigate(${JSON.stringify(to)}, { replace: true })\\` somewhere in your app.`\n      );\n    },\n    go(delta) {\n      throw new Error(\n        `You cannot use navigator.go() on the server because it is a stateless environment. This error was probably triggered when you did a \\`navigate(${delta})\\` somewhere in your app.`\n      );\n    },\n    back() {\n      throw new Error(\n        `You cannot use navigator.back() on the server because it is a stateless environment.`\n      );\n    },\n    forward() {\n      throw new Error(\n        `You cannot use navigator.forward() on the server because it is a stateless environment.`\n      );\n    }\n  };\n}\nfunction createStaticHandler2(routes, opts) {\n  return createStaticHandler(routes, {\n    ...opts,\n    mapRouteProperties\n  });\n}\nfunction createStaticRouter(routes, context, opts = {}) {\n  let manifest = {};\n  let dataRoutes = convertRoutesToDataRoutes(\n    routes,\n    mapRouteProperties,\n    void 0,\n    manifest\n  );\n  let matches = context.matches.map((match) => {\n    let route = manifest[match.route.id] || match.route;\n    return {\n      ...match,\n      route\n    };\n  });\n  let msg = (method) => `You cannot use router.${method}() on the server because it is a stateless environment`;\n  return {\n    get basename() {\n      return context.basename;\n    },\n    get future() {\n      return {\n        v8_middleware: false,\n        ...opts?.future\n      };\n    },\n    get state() {\n      return {\n        historyAction: \"POP\" /* Pop */,\n        location: context.location,\n        matches,\n        loaderData: context.loaderData,\n        actionData: context.actionData,\n        errors: context.errors,\n        initialized: true,\n        navigation: IDLE_NAVIGATION,\n        restoreScrollPosition: null,\n        preventScrollReset: false,\n        revalidation: \"idle\",\n        fetchers: /* @__PURE__ */ new Map(),\n        blockers: /* @__PURE__ */ new Map()\n      };\n    },\n    get routes() {\n      return dataRoutes;\n    },\n    get window() {\n      return void 0;\n    },\n    initialize() {\n      throw msg(\"initialize\");\n    },\n    subscribe() {\n      throw msg(\"subscribe\");\n    },\n    enableScrollRestoration() {\n      throw msg(\"enableScrollRestoration\");\n    },\n    navigate() {\n      throw msg(\"navigate\");\n    },\n    fetch() {\n      throw msg(\"fetch\");\n    },\n    revalidate() {\n      throw msg(\"revalidate\");\n    },\n    createHref,\n    encodeLocation,\n    getFetcher() {\n      return IDLE_FETCHER;\n    },\n    deleteFetcher() {\n      throw msg(\"deleteFetcher\");\n    },\n    resetFetcher() {\n      throw msg(\"resetFetcher\");\n    },\n    dispose() {\n      throw msg(\"dispose\");\n    },\n    getBlocker() {\n      return IDLE_BLOCKER;\n    },\n    deleteBlocker() {\n      throw msg(\"deleteBlocker\");\n    },\n    patchRoutes() {\n      throw msg(\"patchRoutes\");\n    },\n    _internalFetchControllers: /* @__PURE__ */ new Map(),\n    _internalSetRoutes() {\n      throw msg(\"_internalSetRoutes\");\n    },\n    _internalSetStateDoNotUseOrYouWillBreakYourApp() {\n      throw msg(\"_internalSetStateDoNotUseOrYouWillBreakYourApp\");\n    }\n  };\n}\nfunction createHref(to) {\n  return typeof to === \"string\" ? to : createPath(to);\n}\nfunction encodeLocation(to) {\n  let href = typeof to === \"string\" ? to : createPath(to);\n  href = href.replace(/ $/, \"%20\");\n  let encoded = ABSOLUTE_URL_REGEX3.test(href) ? new URL(href) : new URL(href, \"http://localhost\");\n  return {\n    pathname: encoded.pathname,\n    search: encoded.search,\n    hash: encoded.hash\n  };\n}\nvar ABSOLUTE_URL_REGEX3 = /^(?:[a-z][a-z0-9+.-]*:|\\/\\/)/i;\n\nexport {\n  Action,\n  createMemoryHistory,\n  createBrowserHistory,\n  createHashHistory,\n  invariant,\n  createPath,\n  parsePath,\n  createContext,\n  RouterContextProvider,\n  convertRoutesToDataRoutes,\n  matchRoutes,\n  generatePath,\n  matchPath,\n  stripBasename,\n  resolvePath,\n  data,\n  redirect,\n  redirectDocument,\n  replace,\n  ErrorResponseImpl,\n  isRouteErrorResponse,\n  instrumentHandler,\n  IDLE_NAVIGATION,\n  IDLE_FETCHER,\n  IDLE_BLOCKER,\n  createRouter,\n  createStaticHandler,\n  getStaticContextFromError,\n  isDataWithResponseInit,\n  isResponse,\n  isRedirectStatusCode,\n  isRedirectResponse,\n  isMutationMethod,\n  DataRouterContext,\n  DataRouterStateContext,\n  RSCRouterContext,\n  ViewTransitionContext,\n  FetchersContext,\n  AwaitContextProvider,\n  NavigationContext,\n  LocationContext,\n  RouteContext,\n  ENABLE_DEV_WARNINGS,\n  decodeRedirectErrorDigest,\n  decodeRouteErrorResponseDigest,\n  useHref,\n  useInRouterContext,\n  useLocation,\n  useNavigationType,\n  useMatch,\n  useNavigate,\n  useOutletContext,\n  useOutlet,\n  useParams,\n  useResolvedPath,\n  useRoutes,\n  useNavigation,\n  useRevalidator,\n  useMatches,\n  useLoaderData,\n  useRouteLoaderData,\n  useActionData,\n  useRouteError,\n  useAsyncValue,\n  useAsyncError,\n  useBlocker,\n  useRoute,\n  warnOnce,\n  mapRouteProperties,\n  hydrationRouteProperties,\n  createMemoryRouter,\n  RouterProvider,\n  MemoryRouter,\n  Navigate,\n  Outlet,\n  Route,\n  Router,\n  Routes,\n  Await,\n  createRoutesFromChildren,\n  createRoutesFromElements,\n  renderMatches,\n  WithComponentProps,\n  withComponentProps,\n  WithHydrateFallbackProps,\n  withHydrateFallbackProps,\n  WithErrorBoundaryProps,\n  withErrorBoundaryProps,\n  createSearchParams,\n  escapeHtml,\n  encode,\n  createRequestInit,\n  SingleFetchRedirectSymbol,\n  SINGLE_FETCH_REDIRECT_STATUS,\n  NO_BODY_STATUS_CODES,\n  StreamTransfer,\n  getTurboStreamSingleFetchDataStrategy,\n  getSingleFetchDataStrategyImpl,\n  stripIndexParam,\n  singleFetchUrl,\n  decodeViaTurboStream,\n  RemixErrorBoundary,\n  createServerRoutes,\n  createClientRoutesWithHMRRevalidationOptOut,\n  noActionDefinedError,\n  createClientRoutes,\n  shouldHydrateRouteLoader,\n  getPatchRoutesOnNavigationFunction,\n  useFogOFWarDiscovery,\n  getManifestPath,\n  FrameworkContext,\n  CRITICAL_CSS_DATA_ATTRIBUTE,\n  Links,\n  PrefetchPageLinks,\n  Meta,\n  setIsHydrated,\n  Scripts,\n  createBrowserRouter,\n  createHashRouter,\n  BrowserRouter,\n  HashRouter,\n  HistoryRouter,\n  Link,\n  NavLink,\n  Form,\n  ScrollRestoration,\n  useLinkClickHandler,\n  useSearchParams,\n  useSubmit,\n  useFormAction,\n  useFetcher,\n  useFetchers,\n  useScrollRestoration,\n  useBeforeUnload,\n  usePrompt,\n  useViewTransitionState,\n  StaticRouter,\n  StaticRouterProvider,\n  createStaticHandler2,\n  createStaticRouter\n};\n","import React, { type AnchorHTMLAttributes, type ReactNode } from 'react';\r\nimport {\r\n  Link as RouterLink,\r\n  useInRouterContext,\r\n} from 'react-router-dom';\r\nimport classNames from 'classnames';\r\nimport './link.scss'; //   Global SCSS\r\n\r\nexport type LinkProps = {\r\n  href?: string;\r\n  external?: boolean;\r\n  noStyles?: boolean;\r\n  target?: string;\r\n  rel?: string;\r\n  children?: ReactNode;\r\n  className?: string;\r\n  disabled?: boolean;\r\n  style?: React.CSSProperties;\r\n  onClick?: (event: React.MouseEvent<HTMLAnchorElement>) => void;\r\n} & Omit<AnchorHTMLAttributes<HTMLAnchorElement>, 'href' | 'onClick'>;\r\n\r\nexport function Link({\r\n  href = '#',\r\n  external = false,\r\n  noStyles = false,\r\n  children,\r\n  className,\r\n  disabled,\r\n  target,\r\n  rel,\r\n  onClick,\r\n  style,\r\n  ...rest\r\n}: LinkProps) {\r\n  const inRouter = useInRouterContext();\r\n\r\n  // \r\n  const isExternal =\r\n    external ||\r\n    href.startsWith('http') ||\r\n    href.startsWith('mailto') ||\r\n    href.startsWith('tel');\r\n\r\n  //   Prefix 'lm-link'  styles object\r\n  const commonClasses = classNames(\r\n    {\r\n      'lm-link': !noStyles,\r\n      'lm-link-no-styles': noStyles,\r\n      'is-disabled': disabled,\r\n    },\r\n    className\r\n  );\r\n\r\n  const handleClick = (e: React.MouseEvent<HTMLAnchorElement>) => {\r\n    if (disabled) {\r\n      e.preventDefault();\r\n      return;\r\n    }\r\n    onClick?.(e);\r\n  };\r\n\r\n  //  Disabled  <span> \r\n  if (disabled) {\r\n    return (\r\n      <span className={commonClasses} style={style} aria-disabled=\"true\">\r\n        {children}\r\n      </span>\r\n    );\r\n  }\r\n\r\n  //  <a> :  Router Context, ,  Tab \r\n  if (!inRouter || isExternal || target === '_blank') {\r\n    return (\r\n      <a\r\n        href={href}\r\n        className={commonClasses}\r\n        target={target}\r\n        rel={rel || (target === '_blank' ? 'noopener noreferrer' : undefined)}\r\n        onClick={handleClick}\r\n        style={style}\r\n        {...rest}\r\n      >\r\n        {children}\r\n      </a>\r\n    );\r\n  }\r\n\r\n  //  RouterLink  Internal Navigation\r\n  return (\r\n    <RouterLink\r\n      to={href}\r\n      className={commonClasses}\r\n      onClick={handleClick}\r\n      style={style}\r\n      {...(rest as any)}\r\n    >\r\n      {children}\r\n    </RouterLink>\r\n  );\r\n}","import React, { type ButtonHTMLAttributes, type ReactNode } from 'react';\r\nimport classNames from 'classnames';\r\nimport { Link, type LinkProps } from '../../navigation/link/link';\r\nimport { type ButtonAppearance } from './button-appearance-type';\r\nimport './button.scss'; //   .module.scss\r\n\r\nexport type ButtonSize = 'sm' | 'md' | 'lg';\r\n\r\ntype CommonButtonProps = {\r\n  children?: ReactNode;\r\n  appearance?: ButtonAppearance;\r\n  size?: ButtonSize;\r\n  className?: string;\r\n  disabled?: boolean;\r\n  style?: React.CSSProperties;\r\n  fullWidth?: boolean;\r\n  loading?: boolean;\r\n};\r\n\r\ntype ButtonAsButton = CommonButtonProps & {\r\n  href?: undefined;\r\n  external?: undefined;\r\n  type?: ButtonHTMLAttributes<HTMLButtonElement>['type'];\r\n  onClick?: React.MouseEventHandler<HTMLButtonElement>;\r\n} & Omit<ButtonHTMLAttributes<HTMLButtonElement>, 'children' | 'className' | 'disabled' | 'type' | 'onClick'>;\r\n\r\ntype ButtonAsLink = CommonButtonProps & {\r\n  href: string;\r\n  external?: boolean;\r\n  type?: undefined;\r\n  onClick?: React.MouseEventHandler<HTMLAnchorElement>;\r\n} & Omit<LinkProps, 'children' | 'className' | 'disabled' | 'href' | 'external' | 'onClick'>;\r\n\r\nexport type ButtonProps = ButtonAsLink | ButtonAsButton;\r\n\r\nexport function Button({\r\n  children,\r\n  appearance = 'primary',\r\n  size = 'md',\r\n  className,\r\n  disabled,\r\n  style,\r\n  fullWidth,\r\n  loading,\r\n  ...props\r\n}: ButtonProps) {\r\n  \r\n  //   Class String  Prefix\r\n  const buttonClasses = classNames(\r\n    'lm-btn',\r\n    `lm-btn-${appearance}`,\r\n    `lm-btn-${size}`,\r\n    {\r\n      'is-disabled': disabled,\r\n      'is-full-width': fullWidth,\r\n      'is-loading': loading,\r\n    },\r\n    className\r\n  );\r\n\r\n  const content = (\r\n    <>\r\n      {loading && <span className=\"lm-btn-spinner\" />}\r\n      <span className=\"lm-btn-label\">{children}</span>\r\n    </>\r\n  );\r\n\r\n  if ('href' in props && props.href !== undefined) {\r\n    const { href, external, onClick, ...restOfLinkProps } = props as ButtonAsLink;\r\n\r\n    return (\r\n      <Link\r\n        href={(disabled || loading) ? undefined : href}\r\n        className={buttonClasses}\r\n        external={external}\r\n        disabled={disabled || loading}\r\n        onClick={onClick}\r\n        style={style}\r\n        {...(restOfLinkProps as any)}\r\n      >\r\n        {content}\r\n      </Link>\r\n    );\r\n  }\r\n\r\n  const { type = 'button', onClick, ...restOfButtonProps } = props as ButtonAsButton;\r\n\r\n  return (\r\n    <button\r\n      type={type}\r\n      className={buttonClasses}\r\n      disabled={disabled || loading}\r\n      onClick={onClick}\r\n      style={style}\r\n      {...restOfButtonProps}\r\n    >\r\n      {content}\r\n    </button>\r\n  );\r\n}","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport type { HeadingLevel } from './heading-level-type';\r\nimport './heading.scss'; //   CSS Modules  Global SCSS\r\n\r\nexport type HeadingProps = {\r\n  level?: HeadingLevel;\r\n  children?: React.ReactNode;\r\n  visualLevel?: HeadingLevel;\r\n  inverseColor?: boolean;\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n};\r\n\r\nexport function Heading({\r\n  children,\r\n  level = 'h2',\r\n  visualLevel,\r\n  inverseColor = false,\r\n  className,\r\n  style,\r\n}: HeadingProps) {\r\n  const Tag = level as keyof React.JSX.IntrinsicElements;\r\n  \r\n  //   Class String  Prefix 'lm-heading'\r\n  //  visualLevel  Tag \r\n  const sizeLevel = visualLevel || level;\r\n  \r\n  const headingClasses = classNames(\r\n    'lm-heading',\r\n    `is-${sizeLevel}`, //  is-h1, is-h2\r\n    {\r\n      'is-inverse': inverseColor,\r\n    },\r\n    className\r\n  );\r\n\r\n  return (\r\n    <Tag style={style} className={headingClasses}>\r\n      {children}\r\n    </Tag>\r\n  );\r\n}","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport './paragraph.scss'; //   CSS Modules  Global SCSS\r\n\r\nexport type ParagraphProps = {\r\n  children?: React.ReactNode;\r\n  /**\r\n   * The HTML element to render the paragraph as.\r\n   * Defaults to 'p'.\r\n   */\r\n  element?: keyof React.JSX.IntrinsicElements;\r\n  /**\r\n   * Size of the text.\r\n   * Defaults to 'body-default'.\r\n   */\r\n  size?: 'body-large' | 'body-medium' | 'body-default' | 'body-small' | 'caption';\r\n  /**\r\n   * Color of the text.\r\n   * Defaults to 'primary'.\r\n   */\r\n  color?: 'primary' | 'secondary' | 'tertiary' | 'inverse';\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n} & React.HTMLAttributes<HTMLElement>;\r\n\r\nexport function Paragraph({\r\n  children,\r\n  element = 'p',\r\n  size = 'body-default',\r\n  color = 'primary',\r\n  className,\r\n  style,\r\n  ...rest\r\n}: ParagraphProps) {\r\n  const Component = element as React.ElementType;\r\n\r\n  //   Class String  Prefix 'lm-paragraph'\r\n  const paragraphClasses = classNames(\r\n    'lm-paragraph',\r\n    `is-size-${size}`,\r\n    `is-color-${color}`,\r\n    className\r\n  );\r\n\r\n  return (\r\n    <Component\r\n      {...rest}\r\n      style={style}\r\n      className={paragraphClasses}\r\n    >\r\n      {children}\r\n    </Component>\r\n  );\r\n}","import React, { useState } from 'react';\r\nimport classNames from 'classnames';\r\nimport './image.scss';\r\nimport type { ImageProps } from './image.type';\r\n\r\nexport function Image({\r\n  src,\r\n  alt,\r\n  width,\r\n  height,\r\n  state = 'default',\r\n  padding = 'none',\r\n  radius = 'none',\r\n  fit = 'cover',\r\n  number,\r\n  className,\r\n  style,\r\n  ...rest\r\n}: ImageProps) {\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n\r\n  const rootClasses = classNames(\r\n    'jp-image-root',\r\n    `is-state-${state}`,\r\n    `is-padding-${padding}`,\r\n    `is-radius-${radius}`,\r\n    { 'is-loaded': isLoaded },\r\n    className\r\n  );\r\n\r\n  return (\r\n    <div className={rootClasses} style={{ width, height, ...style }}>\r\n      <img\r\n        src={src}\r\n        alt={alt}\r\n        className=\"jp-image-content\"\r\n        onLoad={() => setIsLoaded(true)}\r\n        style={{ objectFit: fit }}\r\n        loading=\"lazy\"\r\n        {...rest}\r\n      />\r\n      \r\n      {state === 'number' && (\r\n        <div className=\"jp-image-overlay jp-image-number\">\r\n          <span>{number}</span>\r\n        </div>\r\n      )}\r\n\r\n      {state === 'cant-upload' && (\r\n        <div className=\"jp-image-overlay jp-image-block\">\r\n          <span className=\"icon\"></span>\r\n        </div>\r\n      )}\r\n\r\n      {/* Loading Placeholder */}\r\n      {!isLoaded && state !== 'error' && (\r\n        <div className=\"jp-image-skeleton\" />\r\n      )}\r\n    </div>\r\n  );\r\n}","import React, { type ReactNode } from 'react';\r\nimport classNames from 'classnames';\r\nimport { Button } from '../../forms/button';\r\nimport { Heading } from '../../typography/heading';\r\nimport { Paragraph } from '../../typography/paragraph';\r\nimport { Image } from '../image';\r\nimport './banner.scss';\r\n\r\nexport type BannerProps = {\r\n  title?: string | ReactNode;\r\n  subtitle?: string | ReactNode;\r\n  ctaText?: string;\r\n  ctaHref?: string;\r\n  onCtaClick?: () => void;\r\n  action?: ReactNode;\r\n  backgroundImage?: string;\r\n  foregroundImage?: string;\r\n  variant?: 'hero' | 'promotional' | 'alert';\r\n  align?: 'left' | 'center' | 'right';\r\n  overlay?: boolean;\r\n  inverse?: boolean;\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n  children?: ReactNode;\r\n};\r\n\r\nexport function Banner({\r\n  title,\r\n  subtitle,\r\n  ctaText,\r\n  ctaHref,\r\n  onCtaClick,\r\n  action,\r\n  backgroundImage,\r\n  foregroundImage,\r\n  variant = 'hero',\r\n  align = 'center',\r\n  overlay = false,\r\n  inverse = false,\r\n  className,\r\n  children,\r\n  style,\r\n  ...rest\r\n}: BannerProps) {\r\n  const isAlert = variant === 'alert';\r\n  const headingLevel = isAlert ? 'h6' : (variant === 'hero' ? 'h1' : 'h2');\r\n\r\n  const renderActions = () => {\r\n    if (action) return action;\r\n    if (ctaText) {\r\n      return (\r\n        <Button\r\n          appearance={inverse ? 'secondary' : 'primary'}\r\n          href={ctaHref}\r\n          onClick={onCtaClick}\r\n        >\r\n          {ctaText}\r\n        </Button>\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const actionContent = renderActions();\r\n\r\n  return (\r\n    <div\r\n      className={classNames(\r\n        'banner',       //   String\r\n        variant,        //   Prop  (hero, promotional, alert)\r\n        align,          //   Prop  (left, center, right)\r\n        {\r\n          'inverse': inverse, //   String\r\n        },\r\n        className\r\n      )}\r\n      style={style}\r\n      {...rest}\r\n    >\r\n      {backgroundImage && (\r\n        <>\r\n          <Image\r\n            src={backgroundImage}\r\n            alt=\"\"\r\n            className=\"background\" //   String\r\n            fit=\"cover\"\r\n          />\r\n          {overlay && <div className=\"overlay\" />} {/*   String */}\r\n        </>\r\n      )}\r\n\r\n      <div className=\"content\"> {/*   String */}\r\n        {(title || subtitle) && (\r\n          <div className=\"text-wrapper\"> {/*  :  textWrapper  text-wrapper  */}\r\n            {title && (\r\n              <Heading\r\n                level={headingLevel}\r\n                className=\"title\" //   String\r\n                inverseColor={inverse}\r\n              >\r\n                {title}\r\n              </Heading>\r\n            )}\r\n            {subtitle && (\r\n              <Paragraph\r\n                size={isAlert ? 'body-small' : 'body-large'}\r\n                color={inverse ? 'inverse' : 'primary'}\r\n                className=\"subtitle\" //   String\r\n              >\r\n                {subtitle}\r\n              </Paragraph>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {actionContent && (\r\n          <div className=\"actions\"> {/*   String */}\r\n            {actionContent}\r\n          </div>\r\n        )}\r\n\r\n        {children}\r\n\r\n        {foregroundImage && (\r\n          <div className=\"foreground-image-wrapper\"> {/*   foregroundImageWrapper */}\r\n            <Image\r\n              src={foregroundImage}\r\n              alt=\"Banner Visual\"\r\n              width=\"auto\"\r\n              height=\"auto\"\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React, { type ReactNode } from 'react';\r\nimport classNames from 'classnames';\r\nimport { Image } from '../image';\r\nimport { Heading } from '../../typography/heading';\r\nimport './card.scss';\r\n\r\nexport type CardVariant = 'default' | 'glass' | 'compact';\r\n\r\nexport type CardProps = {\r\n  children?: ReactNode;\r\n  title?: string;\r\n  header?: ReactNode;\r\n  footer?: ReactNode;\r\n  image?: string;\r\n  imageAlt?: string;\r\n  variant?: CardVariant;\r\n  interactive?: boolean;\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n  onClick?: () => void;\r\n} & React.HTMLAttributes<HTMLDivElement>;\r\n\r\nexport function Card({\r\n  children,\r\n  title,\r\n  header,\r\n  footer,\r\n  image,\r\n  imageAlt,\r\n  variant = 'default',\r\n  interactive = false,\r\n  className,\r\n  onClick,\r\n  style,\r\n  ...rest //  props \r\n}: CardProps) {\r\n  return (\r\n    <div\r\n      className={classNames(\r\n        'card',         //   String \r\n        variant,        //   variant  ( 'glass')\r\n        {\r\n          'interactive': interactive, //   interactive  true\r\n        },\r\n        className\r\n      )}\r\n      onClick={interactive ? onClick : undefined}\r\n      style={style}\r\n      {...rest} //   ...rest ()  {...rest}  Spread attributes  div\r\n    >\r\n      {image && (\r\n        <div className=\"card-image-wrapper\">\r\n          <Image\r\n            src={image}\r\n            alt={imageAlt || ''}\r\n            width=\"100%\"\r\n          />\r\n        </div>\r\n      )}\r\n      \r\n      {header && <div className=\"card-header\">{header}</div>}\r\n\r\n      <div className=\"card-content\">\r\n        {title && (\r\n          <Heading level=\"h4\" className=\"card-title\">\r\n            {title}\r\n          </Heading>\r\n        )}\r\n        {children}\r\n      </div>\r\n\r\n      {footer && <div className=\"card-footer\">{footer}</div>}\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport './badge.scss'; //  Global ()\r\n\r\nexport interface BadgeProps {\r\n  content?: string | number;\r\n  variant?: 'primary' | 'secondary' | 'success' | 'danger' | 'warning';\r\n  size?: 'sm' | 'md';\r\n  isDot?: boolean;\r\n  max?: number;\r\n  children?: React.ReactNode;\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n}\r\n\r\nexport function Badge({\r\n  content,\r\n  variant = 'primary',\r\n  size = 'md',\r\n  isDot = false,\r\n  max = 99,\r\n  children,\r\n  className,\r\n}: BadgeProps) {\r\n  \r\n  const displayContent = typeof content === 'number' && content > max ? `${max}+` : content;\r\n\r\n  const badgeElement = (\r\n    <span\r\n      className={classNames(\r\n        'badge',          //   styles.badge  string\r\n        variant,          //   styles[variant]  variant  ( 'primary')\r\n        size,             //   styles[size]  size  ( 'md')\r\n        {\r\n          'dot': isDot,   //   string\r\n          'overlap': !!children, \r\n        },\r\n        className\r\n      )}\r\n    >\r\n      {!isDot && displayContent}\r\n    </span>\r\n  );\r\n\r\n  if (!children) {\r\n    return badgeElement;\r\n  }\r\n\r\n  return (\r\n    <div className=\"badge-container\"> {/*   styles.badgeContainer  'badge-container' */}\r\n      {children}\r\n      {badgeElement}\r\n    </div>\r\n  );\r\n}","import React from 'react'; //  import React\r\nimport classNames from 'classnames';\r\nimport './avatar.scss';\r\n\r\nexport interface AvatarProps {\r\n  src?: string;\r\n  alt?: string;\r\n  name?: string;\r\n  size?: 'sm' | 'md' | 'lg' | number;\r\n  shape?: 'circle' | 'square';\r\n  className?: string;\r\n}\r\n\r\nexport function Avatar({\r\n  src,\r\n  alt,\r\n  name,\r\n  size = 'md',\r\n  shape = 'circle',\r\n  className,\r\n}: AvatarProps) {\r\n  \r\n  const sizeValue = typeof size === 'number' ? size : undefined;\r\n  \r\n  const getInitials = (name: string) => {\r\n    return name.trim().charAt(0).toUpperCase();\r\n  };\r\n\r\n  const renderContent = () => {\r\n    if (src) {\r\n      //   styles.image  'avatar-image' ( scss)\r\n      return <img src={src} alt={alt || name} className=\"avatar-image\" />;\r\n    }\r\n    \r\n    if (name) {\r\n      //   styles.initials  'avatar-initials'\r\n      return <span className=\"avatar-initials\">{getInitials(name)}</span>;\r\n    }\r\n\r\n    //   styles.placeholderIcon  'avatar-placeholder-icon'\r\n    return (\r\n      <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" className=\"avatar-placeholder-icon\">\r\n        <path d=\"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2\" />\r\n        <circle cx=\"12\" cy=\"7\" r=\"4\" />\r\n      </svg>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={classNames(\r\n        'avatar', //   styles.avatar \r\n        shape,    //   styles[shape]  props ( 'circle'  'square')\r\n        typeof size === 'string' ? size : '', //   styles[size]  'sm', 'md',  'lg'\r\n        className\r\n      )}\r\n      style={sizeValue ? { width: sizeValue, height: sizeValue, fontSize: sizeValue / 2.5 } : {}}\r\n    >\r\n      {renderContent()}\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport './divider.scss';\r\n\r\nexport interface DividerProps {\r\n  orientation?: 'horizontal' | 'vertical';\r\n  type?: 'solid' | 'dashed' | 'dotted';\r\n  children?: React.ReactNode;\r\n  textAlign?: 'left' | 'center' | 'right';\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n}\r\n\r\nexport function Divider({\r\n  orientation = 'horizontal',\r\n  type = 'solid',\r\n  children,\r\n  textAlign = 'center',\r\n  className,\r\n  style,\r\n}: DividerProps) {\r\n  const hasContent = children && orientation === 'horizontal';\r\n\r\n  return (\r\n    <div\r\n      style={style}\r\n      className={classNames(\r\n        'divider',       //   String\r\n        orientation,     //  'horizontal'  'vertical'\r\n        type,            //  'solid', 'dashed',  'dotted'\r\n        {\r\n          'with-content': hasContent,           //   kebab-case  SCSS\r\n          [`text-align-${textAlign}`]: hasContent, //   template literal  string\r\n        },\r\n        className\r\n      )}\r\n      role=\"separator\"\r\n    >\r\n      {hasContent && <span className=\"divider-content\">{children}</span>}\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport { Link } from '../../navigation/link';\r\nimport type { LogoProps } from './logo-type';\r\nimport './logo.scss';\r\n\r\nexport function Logo({\r\n  name = 'LOOKMIX',\r\n  slogan,\r\n  href,\r\n  size = 39,\r\n  logo,\r\n  minimal = false,\r\n  className,\r\n  style,\r\n  ...rest\r\n}: LogoProps) {\r\n  const isClickable = Boolean(href);\r\n  \r\n  const content = (\r\n    <>\r\n      {/*   String  kebab-case */}\r\n      <div className=\"logo-icon-container\" style={{ width: size, height: size }}>\r\n        {logo || (\r\n          <svg \r\n            width={size} \r\n            height={size} \r\n            viewBox=\"0 0 39 39\" \r\n            fill=\"none\" \r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n          >\r\n            <g clipPath=\"url(#clip0_logo)\">\r\n              <rect width=\"39\" height=\"39\" rx=\"19.5\" fill=\"white\"/>\r\n              <path d=\"M24.8387 6.37045C17.3511 3.781 3.73228 3.79303 9.15709 24.5568C14.5819 45.3205 -2.5406 39.7335 -11.78 34.3446\" stroke=\"url(#paint0_linear_logo)\" strokeWidth=\"20\"/>\r\n              <path d=\"M38.2161 8.59953C31.061 6.98879 17.3461 9.02203 19.7278 30.0409C22.1095 51.0597 5.69744 47.728 -2.80629 43.4347\" stroke=\"url(#paint1_linear_logo)\" strokeWidth=\"20\"/>\r\n              <path d=\"M43.342 24.529C35.0899 20.7761 20.8095 18.685 29.7052 40.344C38.6009 62.003 19.7816 53.7562 9.25996 46.9255\" stroke=\"url(#paint2_linear_logo)\" strokeWidth=\"20\"/>\r\n            </g>\r\n            <defs>\r\n              <linearGradient id=\"paint0_linear_logo\" x1=\"1.00179\" y1=\"15.7296\" x2=\"25.7788\" y2=\"25.4165\" gradientUnits=\"userSpaceOnUse\">\r\n                <stop stopColor=\"white\"/>\r\n                <stop offset=\"0.5\" stopColor=\"#FFC0FE\"/>\r\n                <stop offset=\"1\" stopColor=\"white\"/>\r\n              </linearGradient>\r\n              <linearGradient id=\"paint1_linear_logo\" x1=\"12.8257\" y1=\"21.9731\" x2=\"34.3701\" y2=\"32.5026\" gradientUnits=\"userSpaceOnUse\">\r\n                <stop stopColor=\"white\"/>\r\n                <stop offset=\"0.5\" stopColor=\"#B7DFFF\"/>\r\n                <stop offset=\"1\" stopColor=\"white\"/>\r\n              </linearGradient>\r\n              <linearGradient id=\"paint2_linear_logo\" x1=\"19.7895\" y1=\"30.2329\" x2=\"48.8071\" y2=\"38.1024\" gradientUnits=\"userSpaceOnUse\">\r\n                <stop stopColor=\"white\"/>\r\n                <stop offset=\"0.5\" stopColor=\"#FFC0C0\"/>\r\n                <stop offset=\"1\" stopColor=\"white\"/>\r\n              </linearGradient>\r\n              <clipPath id=\"clip0_logo\">\r\n                <rect width=\"39\" height=\"39\" rx=\"19.5\" fill=\"white\"/>\r\n              </clipPath>\r\n            </defs>\r\n          </svg>\r\n        )}\r\n      </div>\r\n      {!minimal && (\r\n        <div className=\"logo-content\"> {/*   String */}\r\n          <span className=\"logo-name\">{name}</span>\r\n          {slogan && <span className=\"logo-slogan\">{slogan}</span>}\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n\r\n  const containerClass = classNames(\r\n    'logo',              //   styles.logo\r\n    { 'clickable': isClickable }, //   styles.clickable\r\n    className\r\n  );\r\n\r\n  if (href) {\r\n    return (\r\n      <Link href={href} className={containerClass} style={style} noStyles>\r\n        {content}\r\n      </Link>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={containerClass} style={style} {...rest}>\r\n      {content}\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport './loading.scss';\r\n\r\nexport interface SpinnerProps {\r\n  size?: 'sm' | 'md' | 'lg' | number;\r\n  color?: string;\r\n  className?: string;\r\n}\r\n\r\nexport function Spinner({ size = 'md', color, className }: SpinnerProps) {\r\n  const sizeValue = typeof size === 'number' ? size : undefined;\r\n\r\n  return (\r\n    <div\r\n      className={classNames(\r\n        'lm-spinner', //   styles.spinner\r\n        typeof size === 'string' ? `is-${size}` : '', //   template literal  styles[size]\r\n        className\r\n      )}\r\n      style={{\r\n        ...(sizeValue ? { width: sizeValue, height: sizeValue } : {}),\r\n        ...(color ? { borderTopColor: color } : {}),\r\n      }}\r\n      role=\"status\"\r\n    >\r\n      <span className=\"lm-sr-only\">Loading...</span>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport './loading.scss';\r\n\r\nexport interface SkeletonProps {\r\n  variant?: 'text' | 'circular' | 'rectangular';\r\n  width?: string | number;\r\n  height?: string | number;\r\n  animation?: 'pulse' | 'wave' | 'none';\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n}\r\n\r\nexport function Skeleton({\r\n  variant = 'text',\r\n  width,\r\n  height,\r\n  animation = 'pulse',\r\n  className,\r\n  style,\r\n}: SkeletonProps) {\r\n  return (\r\n    <div\r\n      className={classNames(\r\n        'lm-skeleton', //   styles.skeleton\r\n        `is-${variant}`, //   styles[variant]\r\n        `anim-${animation}`, //   styles[animation]\r\n        className\r\n      )}\r\n      style={{ \r\n        width, \r\n        height, \r\n        ...style \r\n      }}\r\n    />\r\n  );\r\n}","function hasWindow() {\n  return typeof window !== 'undefined';\n}\nfunction getNodeName(node) {\n  if (isNode(node)) {\n    return (node.nodeName || '').toLowerCase();\n  }\n  // Mocked nodes in testing environments may not be instances of Node. By\n  // returning `#document` an infinite loop won't occur.\n  // https://github.com/floating-ui/floating-ui/issues/2317\n  return '#document';\n}\nfunction getWindow(node) {\n  var _node$ownerDocument;\n  return (node == null || (_node$ownerDocument = node.ownerDocument) == null ? void 0 : _node$ownerDocument.defaultView) || window;\n}\nfunction getDocumentElement(node) {\n  var _ref;\n  return (_ref = (isNode(node) ? node.ownerDocument : node.document) || window.document) == null ? void 0 : _ref.documentElement;\n}\nfunction isNode(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof Node || value instanceof getWindow(value).Node;\n}\nfunction isElement(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof Element || value instanceof getWindow(value).Element;\n}\nfunction isHTMLElement(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof HTMLElement || value instanceof getWindow(value).HTMLElement;\n}\nfunction isShadowRoot(value) {\n  if (!hasWindow() || typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n  return value instanceof ShadowRoot || value instanceof getWindow(value).ShadowRoot;\n}\nconst invalidOverflowDisplayValues = /*#__PURE__*/new Set(['inline', 'contents']);\nfunction isOverflowElement(element) {\n  const {\n    overflow,\n    overflowX,\n    overflowY,\n    display\n  } = getComputedStyle(element);\n  return /auto|scroll|overlay|hidden|clip/.test(overflow + overflowY + overflowX) && !invalidOverflowDisplayValues.has(display);\n}\nconst tableElements = /*#__PURE__*/new Set(['table', 'td', 'th']);\nfunction isTableElement(element) {\n  return tableElements.has(getNodeName(element));\n}\nconst topLayerSelectors = [':popover-open', ':modal'];\nfunction isTopLayer(element) {\n  return topLayerSelectors.some(selector => {\n    try {\n      return element.matches(selector);\n    } catch (_e) {\n      return false;\n    }\n  });\n}\nconst transformProperties = ['transform', 'translate', 'scale', 'rotate', 'perspective'];\nconst willChangeValues = ['transform', 'translate', 'scale', 'rotate', 'perspective', 'filter'];\nconst containValues = ['paint', 'layout', 'strict', 'content'];\nfunction isContainingBlock(elementOrCss) {\n  const webkit = isWebKit();\n  const css = isElement(elementOrCss) ? getComputedStyle(elementOrCss) : elementOrCss;\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n  // https://drafts.csswg.org/css-transforms-2/#individual-transforms\n  return transformProperties.some(value => css[value] ? css[value] !== 'none' : false) || (css.containerType ? css.containerType !== 'normal' : false) || !webkit && (css.backdropFilter ? css.backdropFilter !== 'none' : false) || !webkit && (css.filter ? css.filter !== 'none' : false) || willChangeValues.some(value => (css.willChange || '').includes(value)) || containValues.some(value => (css.contain || '').includes(value));\n}\nfunction getContainingBlock(element) {\n  let currentNode = getParentNode(element);\n  while (isHTMLElement(currentNode) && !isLastTraversableNode(currentNode)) {\n    if (isContainingBlock(currentNode)) {\n      return currentNode;\n    } else if (isTopLayer(currentNode)) {\n      return null;\n    }\n    currentNode = getParentNode(currentNode);\n  }\n  return null;\n}\nfunction isWebKit() {\n  if (typeof CSS === 'undefined' || !CSS.supports) return false;\n  return CSS.supports('-webkit-backdrop-filter', 'none');\n}\nconst lastTraversableNodeNames = /*#__PURE__*/new Set(['html', 'body', '#document']);\nfunction isLastTraversableNode(node) {\n  return lastTraversableNodeNames.has(getNodeName(node));\n}\nfunction getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}\nfunction getNodeScroll(element) {\n  if (isElement(element)) {\n    return {\n      scrollLeft: element.scrollLeft,\n      scrollTop: element.scrollTop\n    };\n  }\n  return {\n    scrollLeft: element.scrollX,\n    scrollTop: element.scrollY\n  };\n}\nfunction getParentNode(node) {\n  if (getNodeName(node) === 'html') {\n    return node;\n  }\n  const result =\n  // Step into the shadow DOM of the parent of a slotted node.\n  node.assignedSlot ||\n  // DOM Element detected.\n  node.parentNode ||\n  // ShadowRoot detected.\n  isShadowRoot(node) && node.host ||\n  // Fallback.\n  getDocumentElement(node);\n  return isShadowRoot(result) ? result.host : result;\n}\nfunction getNearestOverflowAncestor(node) {\n  const parentNode = getParentNode(node);\n  if (isLastTraversableNode(parentNode)) {\n    return node.ownerDocument ? node.ownerDocument.body : node.body;\n  }\n  if (isHTMLElement(parentNode) && isOverflowElement(parentNode)) {\n    return parentNode;\n  }\n  return getNearestOverflowAncestor(parentNode);\n}\nfunction getOverflowAncestors(node, list, traverseIframes) {\n  var _node$ownerDocument2;\n  if (list === void 0) {\n    list = [];\n  }\n  if (traverseIframes === void 0) {\n    traverseIframes = true;\n  }\n  const scrollableAncestor = getNearestOverflowAncestor(node);\n  const isBody = scrollableAncestor === ((_node$ownerDocument2 = node.ownerDocument) == null ? void 0 : _node$ownerDocument2.body);\n  const win = getWindow(scrollableAncestor);\n  if (isBody) {\n    const frameElement = getFrameElement(win);\n    return list.concat(win, win.visualViewport || [], isOverflowElement(scrollableAncestor) ? scrollableAncestor : [], frameElement && traverseIframes ? getOverflowAncestors(frameElement) : []);\n  }\n  return list.concat(scrollableAncestor, getOverflowAncestors(scrollableAncestor, [], traverseIframes));\n}\nfunction getFrameElement(win) {\n  return win.parent && Object.getPrototypeOf(win.parent) ? win.frameElement : null;\n}\n\nexport { getComputedStyle, getContainingBlock, getDocumentElement, getFrameElement, getNearestOverflowAncestor, getNodeName, getNodeScroll, getOverflowAncestors, getParentNode, getWindow, isContainingBlock, isElement, isHTMLElement, isLastTraversableNode, isNode, isOverflowElement, isShadowRoot, isTableElement, isTopLayer, isWebKit };\n","/**\n * Custom positioning reference element.\n * @see https://floating-ui.com/docs/virtual-elements\n */\n\nconst sides = ['top', 'right', 'bottom', 'left'];\nconst alignments = ['start', 'end'];\nconst placements = /*#__PURE__*/sides.reduce((acc, side) => acc.concat(side, side + \"-\" + alignments[0], side + \"-\" + alignments[1]), []);\nconst min = Math.min;\nconst max = Math.max;\nconst round = Math.round;\nconst floor = Math.floor;\nconst createCoords = v => ({\n  x: v,\n  y: v\n});\nconst oppositeSideMap = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nconst oppositeAlignmentMap = {\n  start: 'end',\n  end: 'start'\n};\nfunction clamp(start, value, end) {\n  return max(start, min(value, end));\n}\nfunction evaluate(value, param) {\n  return typeof value === 'function' ? value(param) : value;\n}\nfunction getSide(placement) {\n  return placement.split('-')[0];\n}\nfunction getAlignment(placement) {\n  return placement.split('-')[1];\n}\nfunction getOppositeAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}\nfunction getAxisLength(axis) {\n  return axis === 'y' ? 'height' : 'width';\n}\nconst yAxisSides = /*#__PURE__*/new Set(['top', 'bottom']);\nfunction getSideAxis(placement) {\n  return yAxisSides.has(getSide(placement)) ? 'y' : 'x';\n}\nfunction getAlignmentAxis(placement) {\n  return getOppositeAxis(getSideAxis(placement));\n}\nfunction getAlignmentSides(placement, rects, rtl) {\n  if (rtl === void 0) {\n    rtl = false;\n  }\n  const alignment = getAlignment(placement);\n  const alignmentAxis = getAlignmentAxis(placement);\n  const length = getAxisLength(alignmentAxis);\n  let mainAlignmentSide = alignmentAxis === 'x' ? alignment === (rtl ? 'end' : 'start') ? 'right' : 'left' : alignment === 'start' ? 'bottom' : 'top';\n  if (rects.reference[length] > rects.floating[length]) {\n    mainAlignmentSide = getOppositePlacement(mainAlignmentSide);\n  }\n  return [mainAlignmentSide, getOppositePlacement(mainAlignmentSide)];\n}\nfunction getExpandedPlacements(placement) {\n  const oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeAlignmentPlacement(placement), oppositePlacement, getOppositeAlignmentPlacement(oppositePlacement)];\n}\nfunction getOppositeAlignmentPlacement(placement) {\n  return placement.replace(/start|end/g, alignment => oppositeAlignmentMap[alignment]);\n}\nconst lrPlacement = ['left', 'right'];\nconst rlPlacement = ['right', 'left'];\nconst tbPlacement = ['top', 'bottom'];\nconst btPlacement = ['bottom', 'top'];\nfunction getSideList(side, isStart, rtl) {\n  switch (side) {\n    case 'top':\n    case 'bottom':\n      if (rtl) return isStart ? rlPlacement : lrPlacement;\n      return isStart ? lrPlacement : rlPlacement;\n    case 'left':\n    case 'right':\n      return isStart ? tbPlacement : btPlacement;\n    default:\n      return [];\n  }\n}\nfunction getOppositeAxisPlacements(placement, flipAlignment, direction, rtl) {\n  const alignment = getAlignment(placement);\n  let list = getSideList(getSide(placement), direction === 'start', rtl);\n  if (alignment) {\n    list = list.map(side => side + \"-\" + alignment);\n    if (flipAlignment) {\n      list = list.concat(list.map(getOppositeAlignmentPlacement));\n    }\n  }\n  return list;\n}\nfunction getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, side => oppositeSideMap[side]);\n}\nfunction expandPaddingObject(padding) {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    ...padding\n  };\n}\nfunction getPaddingObject(padding) {\n  return typeof padding !== 'number' ? expandPaddingObject(padding) : {\n    top: padding,\n    right: padding,\n    bottom: padding,\n    left: padding\n  };\n}\nfunction rectToClientRect(rect) {\n  const {\n    x,\n    y,\n    width,\n    height\n  } = rect;\n  return {\n    width,\n    height,\n    top: y,\n    left: x,\n    right: x + width,\n    bottom: y + height,\n    x,\n    y\n  };\n}\n\nexport { alignments, clamp, createCoords, evaluate, expandPaddingObject, floor, getAlignment, getAlignmentAxis, getAlignmentSides, getAxisLength, getExpandedPlacements, getOppositeAlignmentPlacement, getOppositeAxis, getOppositeAxisPlacements, getOppositePlacement, getPaddingObject, getSide, getSideAxis, max, min, placements, rectToClientRect, round, sides };\n","/*!\n* tabbable 6.4.0\n* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE\n*/\n// NOTE: separate `:not()` selectors has broader browser support than the newer\n//  `:not([inert], [inert] *)` (Feb 2023)\nvar candidateSelectors = ['input:not([inert]):not([inert] *)', 'select:not([inert]):not([inert] *)', 'textarea:not([inert]):not([inert] *)', 'a[href]:not([inert]):not([inert] *)', 'button:not([inert]):not([inert] *)', '[tabindex]:not(slot):not([inert]):not([inert] *)', 'audio[controls]:not([inert]):not([inert] *)', 'video[controls]:not([inert]):not([inert] *)', '[contenteditable]:not([contenteditable=\"false\"]):not([inert]):not([inert] *)', 'details>summary:first-of-type:not([inert]):not([inert] *)', 'details:not([inert]):not([inert] *)'];\nvar candidateSelector = /* #__PURE__ */candidateSelectors.join(',');\nvar NoElement = typeof Element === 'undefined';\nvar matches = NoElement ? function () {} : Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\nvar getRootNode = !NoElement && Element.prototype.getRootNode ? function (element) {\n  var _element$getRootNode;\n  return element === null || element === void 0 ? void 0 : (_element$getRootNode = element.getRootNode) === null || _element$getRootNode === void 0 ? void 0 : _element$getRootNode.call(element);\n} : function (element) {\n  return element === null || element === void 0 ? void 0 : element.ownerDocument;\n};\n\n/**\n * Determines if a node is inert or in an inert ancestor.\n * @param {Node} [node]\n * @param {boolean} [lookUp] If true and `node` is not inert, looks up at ancestors to\n *  see if any of them are inert. If false, only `node` itself is considered.\n * @returns {boolean} True if inert itself or by way of being in an inert ancestor.\n *  False if `node` is falsy.\n */\nvar _isInert = function isInert(node, lookUp) {\n  var _node$getAttribute;\n  if (lookUp === void 0) {\n    lookUp = true;\n  }\n  // CAREFUL: JSDom does not support inert at all, so we can't use the `HTMLElement.inert`\n  //  JS API property; we have to check the attribute, which can either be empty or 'true';\n  //  if it's `null` (not specified) or 'false', it's an active element\n  var inertAtt = node === null || node === void 0 ? void 0 : (_node$getAttribute = node.getAttribute) === null || _node$getAttribute === void 0 ? void 0 : _node$getAttribute.call(node, 'inert');\n  var inert = inertAtt === '' || inertAtt === 'true';\n\n  // NOTE: this could also be handled with `node.matches('[inert], :is([inert] *)')`\n  //  if it weren't for `matches()` not being a function on shadow roots; the following\n  //  code works for any kind of node\n  var result = inert || lookUp && node && (\n  // closest does not exist on shadow roots, so we fall back to a manual\n  // lookup upward, in case it is not defined.\n  typeof node.closest === 'function' ? node.closest('[inert]') : _isInert(node.parentNode));\n  return result;\n};\n\n/**\n * Determines if a node's content is editable.\n * @param {Element} [node]\n * @returns True if it's content-editable; false if it's not or `node` is falsy.\n */\nvar isContentEditable = function isContentEditable(node) {\n  var _node$getAttribute2;\n  // CAREFUL: JSDom does not support the `HTMLElement.isContentEditable` API so we have\n  //  to use the attribute directly to check for this, which can either be empty or 'true';\n  //  if it's `null` (not specified) or 'false', it's a non-editable element\n  var attValue = node === null || node === void 0 ? void 0 : (_node$getAttribute2 = node.getAttribute) === null || _node$getAttribute2 === void 0 ? void 0 : _node$getAttribute2.call(node, 'contenteditable');\n  return attValue === '' || attValue === 'true';\n};\n\n/**\n * @param {Element} el container to check in\n * @param {boolean} includeContainer add container to check\n * @param {(node: Element) => boolean} filter filter candidates\n * @returns {Element[]}\n */\nvar getCandidates = function getCandidates(el, includeContainer, filter) {\n  // even if `includeContainer=false`, we still have to check it for inertness because\n  //  if it's inert (either by itself or via its parent), then all its children are inert\n  if (_isInert(el)) {\n    return [];\n  }\n  var candidates = Array.prototype.slice.apply(el.querySelectorAll(candidateSelector));\n  if (includeContainer && matches.call(el, candidateSelector)) {\n    candidates.unshift(el);\n  }\n  candidates = candidates.filter(filter);\n  return candidates;\n};\n\n/**\n * @callback GetShadowRoot\n * @param {Element} element to check for shadow root\n * @returns {ShadowRoot|boolean} ShadowRoot if available or boolean indicating if a shadowRoot is attached but not available.\n */\n\n/**\n * @callback ShadowRootFilter\n * @param {Element} shadowHostNode the element which contains shadow content\n * @returns {boolean} true if a shadow root could potentially contain valid candidates.\n */\n\n/**\n * @typedef {Object} CandidateScope\n * @property {Element} scopeParent contains inner candidates\n * @property {Element[]} candidates list of candidates found in the scope parent\n */\n\n/**\n * @typedef {Object} IterativeOptions\n * @property {GetShadowRoot|boolean} getShadowRoot true if shadow support is enabled; falsy if not;\n *  if a function, implies shadow support is enabled and either returns the shadow root of an element\n *  or a boolean stating if it has an undisclosed shadow root\n * @property {(node: Element) => boolean} filter filter candidates\n * @property {boolean} flatten if true then result will flatten any CandidateScope into the returned list\n * @property {ShadowRootFilter} shadowRootFilter filter shadow roots;\n */\n\n/**\n * @param {Element[]} elements list of element containers to match candidates from\n * @param {boolean} includeContainer add container list to check\n * @param {IterativeOptions} options\n * @returns {Array.<Element|CandidateScope>}\n */\nvar _getCandidatesIteratively = function getCandidatesIteratively(elements, includeContainer, options) {\n  var candidates = [];\n  var elementsToCheck = Array.from(elements);\n  while (elementsToCheck.length) {\n    var element = elementsToCheck.shift();\n    if (_isInert(element, false)) {\n      // no need to look up since we're drilling down\n      // anything inside this container will also be inert\n      continue;\n    }\n    if (element.tagName === 'SLOT') {\n      // add shadow dom slot scope (slot itself cannot be focusable)\n      var assigned = element.assignedElements();\n      var content = assigned.length ? assigned : element.children;\n      var nestedCandidates = _getCandidatesIteratively(content, true, options);\n      if (options.flatten) {\n        candidates.push.apply(candidates, nestedCandidates);\n      } else {\n        candidates.push({\n          scopeParent: element,\n          candidates: nestedCandidates\n        });\n      }\n    } else {\n      // check candidate element\n      var validCandidate = matches.call(element, candidateSelector);\n      if (validCandidate && options.filter(element) && (includeContainer || !elements.includes(element))) {\n        candidates.push(element);\n      }\n\n      // iterate over shadow content if possible\n      var shadowRoot = element.shadowRoot ||\n      // check for an undisclosed shadow\n      typeof options.getShadowRoot === 'function' && options.getShadowRoot(element);\n\n      // no inert look up because we're already drilling down and checking for inertness\n      //  on the way down, so all containers to this root node should have already been\n      //  vetted as non-inert\n      var validShadowRoot = !_isInert(shadowRoot, false) && (!options.shadowRootFilter || options.shadowRootFilter(element));\n      if (shadowRoot && validShadowRoot) {\n        // add shadow dom scope IIF a shadow root node was given; otherwise, an undisclosed\n        //  shadow exists, so look at light dom children as fallback BUT create a scope for any\n        //  child candidates found because they're likely slotted elements (elements that are\n        //  children of the web component element (which has the shadow), in the light dom, but\n        //  slotted somewhere _inside_ the undisclosed shadow) -- the scope is created below,\n        //  _after_ we return from this recursive call\n        var _nestedCandidates = _getCandidatesIteratively(shadowRoot === true ? element.children : shadowRoot.children, true, options);\n        if (options.flatten) {\n          candidates.push.apply(candidates, _nestedCandidates);\n        } else {\n          candidates.push({\n            scopeParent: element,\n            candidates: _nestedCandidates\n          });\n        }\n      } else {\n        // there's not shadow so just dig into the element's (light dom) children\n        //  __without__ giving the element special scope treatment\n        elementsToCheck.unshift.apply(elementsToCheck, element.children);\n      }\n    }\n  }\n  return candidates;\n};\n\n/**\n * @private\n * Determines if the node has an explicitly specified `tabindex` attribute.\n * @param {HTMLElement} node\n * @returns {boolean} True if so; false if not.\n */\nvar hasTabIndex = function hasTabIndex(node) {\n  return !isNaN(parseInt(node.getAttribute('tabindex'), 10));\n};\n\n/**\n * Determine the tab index of a given node.\n * @param {HTMLElement} node\n * @returns {number} Tab order (negative, 0, or positive number).\n * @throws {Error} If `node` is falsy.\n */\nvar getTabIndex = function getTabIndex(node) {\n  if (!node) {\n    throw new Error('No node provided');\n  }\n  if (node.tabIndex < 0) {\n    // in Chrome, <details/>, <audio controls/> and <video controls/> elements get a default\n    // `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,\n    // yet they are still part of the regular tab order; in FF, they get a default\n    // `tabIndex` of 0; since Chrome still puts those elements in the regular tab\n    // order, consider their tab index to be 0.\n    // Also browsers do not return `tabIndex` correctly for contentEditable nodes;\n    // so if they don't have a tabindex attribute specifically set, assume it's 0.\n    if ((/^(AUDIO|VIDEO|DETAILS)$/.test(node.tagName) || isContentEditable(node)) && !hasTabIndex(node)) {\n      return 0;\n    }\n  }\n  return node.tabIndex;\n};\n\n/**\n * Determine the tab index of a given node __for sort order purposes__.\n * @param {HTMLElement} node\n * @param {boolean} [isScope] True for a custom element with shadow root or slot that, by default,\n *  has tabIndex -1, but needs to be sorted by document order in order for its content to be\n *  inserted into the correct sort position.\n * @returns {number} Tab order (negative, 0, or positive number).\n */\nvar getSortOrderTabIndex = function getSortOrderTabIndex(node, isScope) {\n  var tabIndex = getTabIndex(node);\n  if (tabIndex < 0 && isScope && !hasTabIndex(node)) {\n    return 0;\n  }\n  return tabIndex;\n};\nvar sortOrderedTabbables = function sortOrderedTabbables(a, b) {\n  return a.tabIndex === b.tabIndex ? a.documentOrder - b.documentOrder : a.tabIndex - b.tabIndex;\n};\nvar isInput = function isInput(node) {\n  return node.tagName === 'INPUT';\n};\nvar isHiddenInput = function isHiddenInput(node) {\n  return isInput(node) && node.type === 'hidden';\n};\nvar isDetailsWithSummary = function isDetailsWithSummary(node) {\n  var r = node.tagName === 'DETAILS' && Array.prototype.slice.apply(node.children).some(function (child) {\n    return child.tagName === 'SUMMARY';\n  });\n  return r;\n};\nvar getCheckedRadio = function getCheckedRadio(nodes, form) {\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked && nodes[i].form === form) {\n      return nodes[i];\n    }\n  }\n};\nvar isTabbableRadio = function isTabbableRadio(node) {\n  if (!node.name) {\n    return true;\n  }\n  var radioScope = node.form || getRootNode(node);\n  var queryRadios = function queryRadios(name) {\n    return radioScope.querySelectorAll('input[type=\"radio\"][name=\"' + name + '\"]');\n  };\n  var radioSet;\n  if (typeof window !== 'undefined' && typeof window.CSS !== 'undefined' && typeof window.CSS.escape === 'function') {\n    radioSet = queryRadios(window.CSS.escape(node.name));\n  } else {\n    try {\n      radioSet = queryRadios(node.name);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error('Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s', err.message);\n      return false;\n    }\n  }\n  var checked = getCheckedRadio(radioSet, node.form);\n  return !checked || checked === node;\n};\nvar isRadio = function isRadio(node) {\n  return isInput(node) && node.type === 'radio';\n};\nvar isNonTabbableRadio = function isNonTabbableRadio(node) {\n  return isRadio(node) && !isTabbableRadio(node);\n};\n\n// determines if a node is ultimately attached to the window's document\nvar isNodeAttached = function isNodeAttached(node) {\n  var _nodeRoot;\n  // The root node is the shadow root if the node is in a shadow DOM; some document otherwise\n  //  (but NOT _the_ document; see second 'If' comment below for more).\n  // If rootNode is shadow root, it'll have a host, which is the element to which the shadow\n  //  is attached, and the one we need to check if it's in the document or not (because the\n  //  shadow, and all nodes it contains, is never considered in the document since shadows\n  //  behave like self-contained DOMs; but if the shadow's HOST, which is part of the document,\n  //  is hidden, or is not in the document itself but is detached, it will affect the shadow's\n  //  visibility, including all the nodes it contains). The host could be any normal node,\n  //  or a custom element (i.e. web component). Either way, that's the one that is considered\n  //  part of the document, not the shadow root, nor any of its children (i.e. the node being\n  //  tested).\n  // To further complicate things, we have to look all the way up until we find a shadow HOST\n  //  that is attached (or find none) because the node might be in nested shadows...\n  // If rootNode is not a shadow root, it won't have a host, and so rootNode should be the\n  //  document (per the docs) and while it's a Document-type object, that document does not\n  //  appear to be the same as the node's `ownerDocument` for some reason, so it's safer\n  //  to ignore the rootNode at this point, and use `node.ownerDocument`. Otherwise,\n  //  using `rootNode.contains(node)` will _always_ be true we'll get false-positives when\n  //  node is actually detached.\n  // NOTE: If `nodeRootHost` or `node` happens to be the `document` itself (which is possible\n  //  if a tabbable/focusable node was quickly added to the DOM, focused, and then removed\n  //  from the DOM as in https://github.com/focus-trap/focus-trap-react/issues/905), then\n  //  `ownerDocument` will be `null`, hence the optional chaining on it.\n  var nodeRoot = node && getRootNode(node);\n  var nodeRootHost = (_nodeRoot = nodeRoot) === null || _nodeRoot === void 0 ? void 0 : _nodeRoot.host;\n\n  // in some cases, a detached node will return itself as the root instead of a document or\n  //  shadow root object, in which case, we shouldn't try to look further up the host chain\n  var attached = false;\n  if (nodeRoot && nodeRoot !== node) {\n    var _nodeRootHost, _nodeRootHost$ownerDo, _node$ownerDocument;\n    attached = !!((_nodeRootHost = nodeRootHost) !== null && _nodeRootHost !== void 0 && (_nodeRootHost$ownerDo = _nodeRootHost.ownerDocument) !== null && _nodeRootHost$ownerDo !== void 0 && _nodeRootHost$ownerDo.contains(nodeRootHost) || node !== null && node !== void 0 && (_node$ownerDocument = node.ownerDocument) !== null && _node$ownerDocument !== void 0 && _node$ownerDocument.contains(node));\n    while (!attached && nodeRootHost) {\n      var _nodeRoot2, _nodeRootHost2, _nodeRootHost2$ownerD;\n      // since it's not attached and we have a root host, the node MUST be in a nested shadow DOM,\n      //  which means we need to get the host's host and check if that parent host is contained\n      //  in (i.e. attached to) the document\n      nodeRoot = getRootNode(nodeRootHost);\n      nodeRootHost = (_nodeRoot2 = nodeRoot) === null || _nodeRoot2 === void 0 ? void 0 : _nodeRoot2.host;\n      attached = !!((_nodeRootHost2 = nodeRootHost) !== null && _nodeRootHost2 !== void 0 && (_nodeRootHost2$ownerD = _nodeRootHost2.ownerDocument) !== null && _nodeRootHost2$ownerD !== void 0 && _nodeRootHost2$ownerD.contains(nodeRootHost));\n    }\n  }\n  return attached;\n};\nvar isZeroArea = function isZeroArea(node) {\n  var _node$getBoundingClie = node.getBoundingClientRect(),\n    width = _node$getBoundingClie.width,\n    height = _node$getBoundingClie.height;\n  return width === 0 && height === 0;\n};\nvar isHidden = function isHidden(node, _ref) {\n  var displayCheck = _ref.displayCheck,\n    getShadowRoot = _ref.getShadowRoot;\n  if (displayCheck === 'full-native') {\n    if ('checkVisibility' in node) {\n      // Chrome >= 105, Edge >= 105, Firefox >= 106, Safari >= 17.4\n      // @see https://developer.mozilla.org/en-US/docs/Web/API/Element/checkVisibility#browser_compatibility\n      var visible = node.checkVisibility({\n        // Checking opacity might be desirable for some use cases, but natively,\n        // opacity zero elements _are_ focusable and tabbable.\n        checkOpacity: false,\n        opacityProperty: false,\n        contentVisibilityAuto: true,\n        visibilityProperty: true,\n        // This is an alias for `visibilityProperty`. Contemporary browsers\n        // support both. However, this alias has wider browser support (Chrome\n        // >= 105 and Firefox >= 106, vs. Chrome >= 121 and Firefox >= 122), so\n        // we include it anyway.\n        checkVisibilityCSS: true\n      });\n      return !visible;\n    }\n    // Fall through to manual visibility checks\n  }\n\n  // NOTE: visibility will be `undefined` if node is detached from the document\n  //  (see notes about this further down), which means we will consider it visible\n  //  (this is legacy behavior from a very long way back)\n  // NOTE: we check this regardless of `displayCheck=\"none\"` because this is a\n  //  _visibility_ check, not a _display_ check\n  if (getComputedStyle(node).visibility === 'hidden') {\n    return true;\n  }\n  var isDirectSummary = matches.call(node, 'details>summary:first-of-type');\n  var nodeUnderDetails = isDirectSummary ? node.parentElement : node;\n  if (matches.call(nodeUnderDetails, 'details:not([open]) *')) {\n    return true;\n  }\n  if (!displayCheck || displayCheck === 'full' ||\n  // full-native can run this branch when it falls through in case\n  // Element#checkVisibility is unsupported\n  displayCheck === 'full-native' || displayCheck === 'legacy-full') {\n    if (typeof getShadowRoot === 'function') {\n      // figure out if we should consider the node to be in an undisclosed shadow and use the\n      //  'non-zero-area' fallback\n      var originalNode = node;\n      while (node) {\n        var parentElement = node.parentElement;\n        var rootNode = getRootNode(node);\n        if (parentElement && !parentElement.shadowRoot && getShadowRoot(parentElement) === true // check if there's an undisclosed shadow\n        ) {\n          // node has an undisclosed shadow which means we can only treat it as a black box, so we\n          //  fall back to a non-zero-area test\n          return isZeroArea(node);\n        } else if (node.assignedSlot) {\n          // iterate up slot\n          node = node.assignedSlot;\n        } else if (!parentElement && rootNode !== node.ownerDocument) {\n          // cross shadow boundary\n          node = rootNode.host;\n        } else {\n          // iterate up normal dom\n          node = parentElement;\n        }\n      }\n      node = originalNode;\n    }\n    // else, `getShadowRoot` might be true, but all that does is enable shadow DOM support\n    //  (i.e. it does not also presume that all nodes might have undisclosed shadows); or\n    //  it might be a falsy value, which means shadow DOM support is disabled\n\n    // Since we didn't find it sitting in an undisclosed shadow (or shadows are disabled)\n    //  now we can just test to see if it would normally be visible or not, provided it's\n    //  attached to the main document.\n    // NOTE: We must consider case where node is inside a shadow DOM and given directly to\n    //  `isTabbable()` or `isFocusable()` -- regardless of `getShadowRoot` option setting.\n\n    if (isNodeAttached(node)) {\n      // this works wherever the node is: if there's at least one client rect, it's\n      //  somehow displayed; it also covers the CSS 'display: contents' case where the\n      //  node itself is hidden in place of its contents; and there's no need to search\n      //  up the hierarchy either\n      return !node.getClientRects().length;\n    }\n\n    // Else, the node isn't attached to the document, which means the `getClientRects()`\n    //  API will __always__ return zero rects (this can happen, for example, if React\n    //  is used to render nodes onto a detached tree, as confirmed in this thread:\n    //  https://github.com/facebook/react/issues/9117#issuecomment-284228870)\n    //\n    // It also means that even window.getComputedStyle(node).display will return `undefined`\n    //  because styles are only computed for nodes that are in the document.\n    //\n    // NOTE: THIS HAS BEEN THE CASE FOR YEARS. It is not new, nor is it caused by tabbable\n    //  somehow. Though it was never stated officially, anyone who has ever used tabbable\n    //  APIs on nodes in detached containers has actually implicitly used tabbable in what\n    //  was later (as of v5.2.0 on Apr 9, 2021) called `displayCheck=\"none\"` mode -- essentially\n    //  considering __everything__ to be visible because of the innability to determine styles.\n    //\n    // v6.0.0: As of this major release, the default 'full' option __no longer treats detached\n    //  nodes as visible with the 'none' fallback.__\n    if (displayCheck !== 'legacy-full') {\n      return true; // hidden\n    }\n    // else, fallback to 'none' mode and consider the node visible\n  } else if (displayCheck === 'non-zero-area') {\n    // NOTE: Even though this tests that the node's client rect is non-zero to determine\n    //  whether it's displayed, and that a detached node will __always__ have a zero-area\n    //  client rect, we don't special-case for whether the node is attached or not. In\n    //  this mode, we do want to consider nodes that have a zero area to be hidden at all\n    //  times, and that includes attached or not.\n    return isZeroArea(node);\n  }\n\n  // visible, as far as we can tell, or per current `displayCheck=none` mode, we assume\n  //  it's visible\n  return false;\n};\n\n// form fields (nested) inside a disabled fieldset are not focusable/tabbable\n//  unless they are in the _first_ <legend> element of the top-most disabled\n//  fieldset\nvar isDisabledFromFieldset = function isDisabledFromFieldset(node) {\n  if (/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(node.tagName)) {\n    var parentNode = node.parentElement;\n    // check if `node` is contained in a disabled <fieldset>\n    while (parentNode) {\n      if (parentNode.tagName === 'FIELDSET' && parentNode.disabled) {\n        // look for the first <legend> among the children of the disabled <fieldset>\n        for (var i = 0; i < parentNode.children.length; i++) {\n          var child = parentNode.children.item(i);\n          // when the first <legend> (in document order) is found\n          if (child.tagName === 'LEGEND') {\n            // if its parent <fieldset> is not nested in another disabled <fieldset>,\n            // return whether `node` is a descendant of its first <legend>\n            return matches.call(parentNode, 'fieldset[disabled] *') ? true : !child.contains(node);\n          }\n        }\n        // the disabled <fieldset> containing `node` has no <legend>\n        return true;\n      }\n      parentNode = parentNode.parentElement;\n    }\n  }\n\n  // else, node's tabbable/focusable state should not be affected by a fieldset's\n  //  enabled/disabled state\n  return false;\n};\nvar isNodeMatchingSelectorFocusable = function isNodeMatchingSelectorFocusable(options, node) {\n  if (node.disabled || isHiddenInput(node) || isHidden(node, options) ||\n  // For a details element with a summary, the summary element gets the focus\n  isDetailsWithSummary(node) || isDisabledFromFieldset(node)) {\n    return false;\n  }\n  return true;\n};\nvar isNodeMatchingSelectorTabbable = function isNodeMatchingSelectorTabbable(options, node) {\n  if (isNonTabbableRadio(node) || getTabIndex(node) < 0 || !isNodeMatchingSelectorFocusable(options, node)) {\n    return false;\n  }\n  return true;\n};\nvar isShadowRootTabbable = function isShadowRootTabbable(shadowHostNode) {\n  var tabIndex = parseInt(shadowHostNode.getAttribute('tabindex'), 10);\n  if (isNaN(tabIndex) || tabIndex >= 0) {\n    return true;\n  }\n  // If a custom element has an explicit negative tabindex,\n  // browsers will not allow tab targeting said element's children.\n  return false;\n};\n\n/**\n * @param {Array.<Element|CandidateScope>} candidates\n * @returns Element[]\n */\nvar _sortByOrder = function sortByOrder(candidates) {\n  var regularTabbables = [];\n  var orderedTabbables = [];\n  candidates.forEach(function (item, i) {\n    var isScope = !!item.scopeParent;\n    var element = isScope ? item.scopeParent : item;\n    var candidateTabindex = getSortOrderTabIndex(element, isScope);\n    var elements = isScope ? _sortByOrder(item.candidates) : element;\n    if (candidateTabindex === 0) {\n      isScope ? regularTabbables.push.apply(regularTabbables, elements) : regularTabbables.push(element);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        item: item,\n        isScope: isScope,\n        content: elements\n      });\n    }\n  });\n  return orderedTabbables.sort(sortOrderedTabbables).reduce(function (acc, sortable) {\n    sortable.isScope ? acc.push.apply(acc, sortable.content) : acc.push(sortable.content);\n    return acc;\n  }, []).concat(regularTabbables);\n};\nvar tabbable = function tabbable(container, options) {\n  options = options || {};\n  var candidates;\n  if (options.getShadowRoot) {\n    candidates = _getCandidatesIteratively([container], options.includeContainer, {\n      filter: isNodeMatchingSelectorTabbable.bind(null, options),\n      flatten: false,\n      getShadowRoot: options.getShadowRoot,\n      shadowRootFilter: isShadowRootTabbable\n    });\n  } else {\n    candidates = getCandidates(container, options.includeContainer, isNodeMatchingSelectorTabbable.bind(null, options));\n  }\n  return _sortByOrder(candidates);\n};\nvar focusable = function focusable(container, options) {\n  options = options || {};\n  var candidates;\n  if (options.getShadowRoot) {\n    candidates = _getCandidatesIteratively([container], options.includeContainer, {\n      filter: isNodeMatchingSelectorFocusable.bind(null, options),\n      flatten: true,\n      getShadowRoot: options.getShadowRoot\n    });\n  } else {\n    candidates = getCandidates(container, options.includeContainer, isNodeMatchingSelectorFocusable.bind(null, options));\n  }\n  return candidates;\n};\nvar isTabbable = function isTabbable(node, options) {\n  options = options || {};\n  if (!node) {\n    throw new Error('No node provided');\n  }\n  if (matches.call(node, candidateSelector) === false) {\n    return false;\n  }\n  return isNodeMatchingSelectorTabbable(options, node);\n};\nvar focusableCandidateSelector = /* #__PURE__ */candidateSelectors.concat('iframe:not([inert]):not([inert] *)').join(',');\nvar isFocusable = function isFocusable(node, options) {\n  options = options || {};\n  if (!node) {\n    throw new Error('No node provided');\n  }\n  if (matches.call(node, focusableCandidateSelector) === false) {\n    return false;\n  }\n  return isNodeMatchingSelectorFocusable(options, node);\n};\n\nexport { focusable, getTabIndex, isFocusable, isTabbable, tabbable };\n//# sourceMappingURL=index.esm.js.map\n","import { isShadowRoot, isHTMLElement } from '@floating-ui/utils/dom';\nimport * as React from 'react';\nimport { useLayoutEffect } from 'react';\nimport { floor } from '@floating-ui/utils';\nimport { tabbable } from 'tabbable';\n\n// Avoid Chrome DevTools blue warning.\nfunction getPlatform() {\n  const uaData = navigator.userAgentData;\n  if (uaData != null && uaData.platform) {\n    return uaData.platform;\n  }\n  return navigator.platform;\n}\nfunction getUserAgent() {\n  const uaData = navigator.userAgentData;\n  if (uaData && Array.isArray(uaData.brands)) {\n    return uaData.brands.map(_ref => {\n      let {\n        brand,\n        version\n      } = _ref;\n      return brand + \"/\" + version;\n    }).join(' ');\n  }\n  return navigator.userAgent;\n}\nfunction isSafari() {\n  // Chrome DevTools does not complain about navigator.vendor\n  return /apple/i.test(navigator.vendor);\n}\nfunction isAndroid() {\n  const re = /android/i;\n  return re.test(getPlatform()) || re.test(getUserAgent());\n}\nfunction isMac() {\n  return getPlatform().toLowerCase().startsWith('mac') && !navigator.maxTouchPoints;\n}\nfunction isJSDOM() {\n  return getUserAgent().includes('jsdom/');\n}\n\nconst FOCUSABLE_ATTRIBUTE = 'data-floating-ui-focusable';\nconst TYPEABLE_SELECTOR = \"input:not([type='hidden']):not([disabled]),\" + \"[contenteditable]:not([contenteditable='false']),textarea:not([disabled])\";\nconst ARROW_LEFT = 'ArrowLeft';\nconst ARROW_RIGHT = 'ArrowRight';\nconst ARROW_UP = 'ArrowUp';\nconst ARROW_DOWN = 'ArrowDown';\n\nfunction activeElement(doc) {\n  let activeElement = doc.activeElement;\n  while (((_activeElement = activeElement) == null || (_activeElement = _activeElement.shadowRoot) == null ? void 0 : _activeElement.activeElement) != null) {\n    var _activeElement;\n    activeElement = activeElement.shadowRoot.activeElement;\n  }\n  return activeElement;\n}\nfunction contains(parent, child) {\n  if (!parent || !child) {\n    return false;\n  }\n  const rootNode = child.getRootNode == null ? void 0 : child.getRootNode();\n\n  // First, attempt with faster native method\n  if (parent.contains(child)) {\n    return true;\n  }\n\n  // then fallback to custom implementation with Shadow DOM support\n  if (rootNode && isShadowRoot(rootNode)) {\n    let next = child;\n    while (next) {\n      if (parent === next) {\n        return true;\n      }\n      // @ts-ignore\n      next = next.parentNode || next.host;\n    }\n  }\n\n  // Give up, the result is false\n  return false;\n}\nfunction getTarget(event) {\n  if ('composedPath' in event) {\n    return event.composedPath()[0];\n  }\n\n  // TS thinks `event` is of type never as it assumes all browsers support\n  // `composedPath()`, but browsers without shadow DOM don't.\n  return event.target;\n}\nfunction isEventTargetWithin(event, node) {\n  if (node == null) {\n    return false;\n  }\n  if ('composedPath' in event) {\n    return event.composedPath().includes(node);\n  }\n\n  // TS thinks `event` is of type never as it assumes all browsers support composedPath, but browsers without shadow dom don't\n  const e = event;\n  return e.target != null && node.contains(e.target);\n}\nfunction isRootElement(element) {\n  return element.matches('html,body');\n}\nfunction getDocument(node) {\n  return (node == null ? void 0 : node.ownerDocument) || document;\n}\nfunction isTypeableElement(element) {\n  return isHTMLElement(element) && element.matches(TYPEABLE_SELECTOR);\n}\nfunction isTypeableCombobox(element) {\n  if (!element) return false;\n  return element.getAttribute('role') === 'combobox' && isTypeableElement(element);\n}\nfunction matchesFocusVisible(element) {\n  // We don't want to block focus from working with `visibleOnly`\n  // (JSDOM doesn't match `:focus-visible` when the element has `:focus`)\n  if (!element || isJSDOM()) return true;\n  try {\n    return element.matches(':focus-visible');\n  } catch (_e) {\n    return true;\n  }\n}\nfunction getFloatingFocusElement(floatingElement) {\n  if (!floatingElement) {\n    return null;\n  }\n  // Try to find the element that has `{...getFloatingProps()}` spread on it.\n  // This indicates the floating element is acting as a positioning wrapper, and\n  // so focus should be managed on the child element with the event handlers and\n  // aria props.\n  return floatingElement.hasAttribute(FOCUSABLE_ATTRIBUTE) ? floatingElement : floatingElement.querySelector(\"[\" + FOCUSABLE_ATTRIBUTE + \"]\") || floatingElement;\n}\n\nfunction getNodeChildren(nodes, id, onlyOpenChildren) {\n  if (onlyOpenChildren === void 0) {\n    onlyOpenChildren = true;\n  }\n  const directChildren = nodes.filter(node => {\n    var _node$context;\n    return node.parentId === id && (!onlyOpenChildren || ((_node$context = node.context) == null ? void 0 : _node$context.open));\n  });\n  return directChildren.flatMap(child => [child, ...getNodeChildren(nodes, child.id, onlyOpenChildren)]);\n}\nfunction getDeepestNode(nodes, id) {\n  let deepestNodeId;\n  let maxDepth = -1;\n  function findDeepest(nodeId, depth) {\n    if (depth > maxDepth) {\n      deepestNodeId = nodeId;\n      maxDepth = depth;\n    }\n    const children = getNodeChildren(nodes, nodeId);\n    children.forEach(child => {\n      findDeepest(child.id, depth + 1);\n    });\n  }\n  findDeepest(id, 0);\n  return nodes.find(node => node.id === deepestNodeId);\n}\nfunction getNodeAncestors(nodes, id) {\n  var _nodes$find;\n  let allAncestors = [];\n  let currentParentId = (_nodes$find = nodes.find(node => node.id === id)) == null ? void 0 : _nodes$find.parentId;\n  while (currentParentId) {\n    const currentNode = nodes.find(node => node.id === currentParentId);\n    currentParentId = currentNode == null ? void 0 : currentNode.parentId;\n    if (currentNode) {\n      allAncestors = allAncestors.concat(currentNode);\n    }\n  }\n  return allAncestors;\n}\n\nfunction stopEvent(event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\nfunction isReactEvent(event) {\n  return 'nativeEvent' in event;\n}\n\n// License: https://github.com/adobe/react-spectrum/blob/b35d5c02fe900badccd0cf1a8f23bb593419f238/packages/@react-aria/utils/src/isVirtualEvent.ts\nfunction isVirtualClick(event) {\n  // FIXME: Firefox is now emitting a deprecation warning for `mozInputSource`.\n  // Try to find a workaround for this. `react-aria` source still has the check.\n  if (event.mozInputSource === 0 && event.isTrusted) {\n    return true;\n  }\n  if (isAndroid() && event.pointerType) {\n    return event.type === 'click' && event.buttons === 1;\n  }\n  return event.detail === 0 && !event.pointerType;\n}\nfunction isVirtualPointerEvent(event) {\n  if (isJSDOM()) return false;\n  return !isAndroid() && event.width === 0 && event.height === 0 || isAndroid() && event.width === 1 && event.height === 1 && event.pressure === 0 && event.detail === 0 && event.pointerType === 'mouse' ||\n  // iOS VoiceOver returns 0.333 for width/height.\n  event.width < 1 && event.height < 1 && event.pressure === 0 && event.detail === 0 && event.pointerType === 'touch';\n}\nfunction isMouseLikePointerType(pointerType, strict) {\n  // On some Linux machines with Chromium, mouse inputs return a `pointerType`\n  // of \"pen\": https://github.com/floating-ui/floating-ui/issues/2015\n  const values = ['mouse', 'pen'];\n  if (!strict) {\n    values.push('', undefined);\n  }\n  return values.includes(pointerType);\n}\n\nvar isClient = typeof document !== 'undefined';\n\nvar noop = function noop() {};\nvar index = isClient ? useLayoutEffect : noop;\n\n// https://github.com/mui/material-ui/issues/41190#issuecomment-2040873379\nconst SafeReact = {\n  ...React\n};\n\nfunction useLatestRef(value) {\n  const ref = React.useRef(value);\n  index(() => {\n    ref.current = value;\n  });\n  return ref;\n}\nconst useInsertionEffect = SafeReact.useInsertionEffect;\nconst useSafeInsertionEffect = useInsertionEffect || (fn => fn());\nfunction useEffectEvent(callback) {\n  const ref = React.useRef(() => {\n    if (process.env.NODE_ENV !== \"production\") {\n      throw new Error('Cannot call an event handler while rendering.');\n    }\n  });\n  useSafeInsertionEffect(() => {\n    ref.current = callback;\n  });\n  return React.useCallback(function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    return ref.current == null ? void 0 : ref.current(...args);\n  }, []);\n}\n\nfunction isDifferentGridRow(index, cols, prevRow) {\n  return Math.floor(index / cols) !== prevRow;\n}\nfunction isIndexOutOfListBounds(listRef, index) {\n  return index < 0 || index >= listRef.current.length;\n}\nfunction getMinListIndex(listRef, disabledIndices) {\n  return findNonDisabledListIndex(listRef, {\n    disabledIndices\n  });\n}\nfunction getMaxListIndex(listRef, disabledIndices) {\n  return findNonDisabledListIndex(listRef, {\n    decrement: true,\n    startingIndex: listRef.current.length,\n    disabledIndices\n  });\n}\nfunction findNonDisabledListIndex(listRef, _temp) {\n  let {\n    startingIndex = -1,\n    decrement = false,\n    disabledIndices,\n    amount = 1\n  } = _temp === void 0 ? {} : _temp;\n  let index = startingIndex;\n  do {\n    index += decrement ? -amount : amount;\n  } while (index >= 0 && index <= listRef.current.length - 1 && isListIndexDisabled(listRef, index, disabledIndices));\n  return index;\n}\nfunction getGridNavigatedIndex(listRef, _ref) {\n  let {\n    event,\n    orientation,\n    loop,\n    rtl,\n    cols,\n    disabledIndices,\n    minIndex,\n    maxIndex,\n    prevIndex,\n    stopEvent: stop = false\n  } = _ref;\n  let nextIndex = prevIndex;\n  if (event.key === ARROW_UP) {\n    stop && stopEvent(event);\n    if (prevIndex === -1) {\n      nextIndex = maxIndex;\n    } else {\n      nextIndex = findNonDisabledListIndex(listRef, {\n        startingIndex: nextIndex,\n        amount: cols,\n        decrement: true,\n        disabledIndices\n      });\n      if (loop && (prevIndex - cols < minIndex || nextIndex < 0)) {\n        const col = prevIndex % cols;\n        const maxCol = maxIndex % cols;\n        const offset = maxIndex - (maxCol - col);\n        if (maxCol === col) {\n          nextIndex = maxIndex;\n        } else {\n          nextIndex = maxCol > col ? offset : offset - cols;\n        }\n      }\n    }\n    if (isIndexOutOfListBounds(listRef, nextIndex)) {\n      nextIndex = prevIndex;\n    }\n  }\n  if (event.key === ARROW_DOWN) {\n    stop && stopEvent(event);\n    if (prevIndex === -1) {\n      nextIndex = minIndex;\n    } else {\n      nextIndex = findNonDisabledListIndex(listRef, {\n        startingIndex: prevIndex,\n        amount: cols,\n        disabledIndices\n      });\n      if (loop && prevIndex + cols > maxIndex) {\n        nextIndex = findNonDisabledListIndex(listRef, {\n          startingIndex: prevIndex % cols - cols,\n          amount: cols,\n          disabledIndices\n        });\n      }\n    }\n    if (isIndexOutOfListBounds(listRef, nextIndex)) {\n      nextIndex = prevIndex;\n    }\n  }\n\n  // Remains on the same row/column.\n  if (orientation === 'both') {\n    const prevRow = floor(prevIndex / cols);\n    if (event.key === (rtl ? ARROW_LEFT : ARROW_RIGHT)) {\n      stop && stopEvent(event);\n      if (prevIndex % cols !== cols - 1) {\n        nextIndex = findNonDisabledListIndex(listRef, {\n          startingIndex: prevIndex,\n          disabledIndices\n        });\n        if (loop && isDifferentGridRow(nextIndex, cols, prevRow)) {\n          nextIndex = findNonDisabledListIndex(listRef, {\n            startingIndex: prevIndex - prevIndex % cols - 1,\n            disabledIndices\n          });\n        }\n      } else if (loop) {\n        nextIndex = findNonDisabledListIndex(listRef, {\n          startingIndex: prevIndex - prevIndex % cols - 1,\n          disabledIndices\n        });\n      }\n      if (isDifferentGridRow(nextIndex, cols, prevRow)) {\n        nextIndex = prevIndex;\n      }\n    }\n    if (event.key === (rtl ? ARROW_RIGHT : ARROW_LEFT)) {\n      stop && stopEvent(event);\n      if (prevIndex % cols !== 0) {\n        nextIndex = findNonDisabledListIndex(listRef, {\n          startingIndex: prevIndex,\n          decrement: true,\n          disabledIndices\n        });\n        if (loop && isDifferentGridRow(nextIndex, cols, prevRow)) {\n          nextIndex = findNonDisabledListIndex(listRef, {\n            startingIndex: prevIndex + (cols - prevIndex % cols),\n            decrement: true,\n            disabledIndices\n          });\n        }\n      } else if (loop) {\n        nextIndex = findNonDisabledListIndex(listRef, {\n          startingIndex: prevIndex + (cols - prevIndex % cols),\n          decrement: true,\n          disabledIndices\n        });\n      }\n      if (isDifferentGridRow(nextIndex, cols, prevRow)) {\n        nextIndex = prevIndex;\n      }\n    }\n    const lastRow = floor(maxIndex / cols) === prevRow;\n    if (isIndexOutOfListBounds(listRef, nextIndex)) {\n      if (loop && lastRow) {\n        nextIndex = event.key === (rtl ? ARROW_RIGHT : ARROW_LEFT) ? maxIndex : findNonDisabledListIndex(listRef, {\n          startingIndex: prevIndex - prevIndex % cols - 1,\n          disabledIndices\n        });\n      } else {\n        nextIndex = prevIndex;\n      }\n    }\n  }\n  return nextIndex;\n}\n\n/** For each cell index, gets the item index that occupies that cell */\nfunction createGridCellMap(sizes, cols, dense) {\n  const cellMap = [];\n  let startIndex = 0;\n  sizes.forEach((_ref2, index) => {\n    let {\n      width,\n      height\n    } = _ref2;\n    if (width > cols) {\n      if (process.env.NODE_ENV !== \"production\") {\n        throw new Error(\"[Floating UI]: Invalid grid - item width at index \" + index + \" is greater than grid columns\");\n      }\n    }\n    let itemPlaced = false;\n    if (dense) {\n      startIndex = 0;\n    }\n    while (!itemPlaced) {\n      const targetCells = [];\n      for (let i = 0; i < width; i++) {\n        for (let j = 0; j < height; j++) {\n          targetCells.push(startIndex + i + j * cols);\n        }\n      }\n      if (startIndex % cols + width <= cols && targetCells.every(cell => cellMap[cell] == null)) {\n        targetCells.forEach(cell => {\n          cellMap[cell] = index;\n        });\n        itemPlaced = true;\n      } else {\n        startIndex++;\n      }\n    }\n  });\n\n  // convert into a non-sparse array\n  return [...cellMap];\n}\n\n/** Gets cell index of an item's corner or -1 when index is -1. */\nfunction getGridCellIndexOfCorner(index, sizes, cellMap, cols, corner) {\n  if (index === -1) return -1;\n  const firstCellIndex = cellMap.indexOf(index);\n  const sizeItem = sizes[index];\n  switch (corner) {\n    case 'tl':\n      return firstCellIndex;\n    case 'tr':\n      if (!sizeItem) {\n        return firstCellIndex;\n      }\n      return firstCellIndex + sizeItem.width - 1;\n    case 'bl':\n      if (!sizeItem) {\n        return firstCellIndex;\n      }\n      return firstCellIndex + (sizeItem.height - 1) * cols;\n    case 'br':\n      return cellMap.lastIndexOf(index);\n  }\n}\n\n/** Gets all cell indices that correspond to the specified indices */\nfunction getGridCellIndices(indices, cellMap) {\n  return cellMap.flatMap((index, cellIndex) => indices.includes(index) ? [cellIndex] : []);\n}\nfunction isListIndexDisabled(listRef, index, disabledIndices) {\n  if (typeof disabledIndices === 'function') {\n    return disabledIndices(index);\n  } else if (disabledIndices) {\n    return disabledIndices.includes(index);\n  }\n  const element = listRef.current[index];\n  return element == null || element.hasAttribute('disabled') || element.getAttribute('aria-disabled') === 'true';\n}\n\nconst getTabbableOptions = () => ({\n  getShadowRoot: true,\n  displayCheck:\n  // JSDOM does not support the `tabbable` library. To solve this we can\n  // check if `ResizeObserver` is a real function (not polyfilled), which\n  // determines if the current environment is JSDOM-like.\n  typeof ResizeObserver === 'function' && ResizeObserver.toString().includes('[native code]') ? 'full' : 'none'\n});\nfunction getTabbableIn(container, dir) {\n  const list = tabbable(container, getTabbableOptions());\n  const len = list.length;\n  if (len === 0) return;\n  const active = activeElement(getDocument(container));\n  const index = list.indexOf(active);\n  const nextIndex = index === -1 ? dir === 1 ? 0 : len - 1 : index + dir;\n  return list[nextIndex];\n}\nfunction getNextTabbable(referenceElement) {\n  return getTabbableIn(getDocument(referenceElement).body, 1) || referenceElement;\n}\nfunction getPreviousTabbable(referenceElement) {\n  return getTabbableIn(getDocument(referenceElement).body, -1) || referenceElement;\n}\nfunction isOutsideEvent(event, container) {\n  const containerElement = container || event.currentTarget;\n  const relatedTarget = event.relatedTarget;\n  return !relatedTarget || !contains(containerElement, relatedTarget);\n}\nfunction disableFocusInside(container) {\n  const tabbableElements = tabbable(container, getTabbableOptions());\n  tabbableElements.forEach(element => {\n    element.dataset.tabindex = element.getAttribute('tabindex') || '';\n    element.setAttribute('tabindex', '-1');\n  });\n}\nfunction enableFocusInside(container) {\n  const elements = container.querySelectorAll('[data-tabindex]');\n  elements.forEach(element => {\n    const tabindex = element.dataset.tabindex;\n    delete element.dataset.tabindex;\n    if (tabindex) {\n      element.setAttribute('tabindex', tabindex);\n    } else {\n      element.removeAttribute('tabindex');\n    }\n  });\n}\n\nexport { activeElement, contains, createGridCellMap, disableFocusInside, enableFocusInside, findNonDisabledListIndex, getDeepestNode, getDocument, getFloatingFocusElement, getGridCellIndexOfCorner, getGridCellIndices, getGridNavigatedIndex, getMaxListIndex, getMinListIndex, getNextTabbable, getNodeAncestors, getNodeChildren, getPlatform, getPreviousTabbable, getTabbableOptions, getTarget, getUserAgent, isAndroid, isDifferentGridRow, isEventTargetWithin, isIndexOutOfListBounds, isJSDOM, isListIndexDisabled, isMac, isMouseLikePointerType, isOutsideEvent, isReactEvent, isRootElement, isSafari, isTypeableCombobox, isTypeableElement, isVirtualClick, isVirtualPointerEvent, matchesFocusVisible, stopEvent, useEffectEvent, useLatestRef, index as useModernLayoutEffect };\n","import { getSideAxis, getAlignmentAxis, getAxisLength, getSide, getAlignment, evaluate, getPaddingObject, rectToClientRect, min, clamp, placements, getAlignmentSides, getOppositeAlignmentPlacement, getOppositePlacement, getExpandedPlacements, getOppositeAxisPlacements, sides, max, getOppositeAxis } from '@floating-ui/utils';\nexport { rectToClientRect } from '@floating-ui/utils';\n\nfunction computeCoordsFromPlacement(_ref, placement, rtl) {\n  let {\n    reference,\n    floating\n  } = _ref;\n  const sideAxis = getSideAxis(placement);\n  const alignmentAxis = getAlignmentAxis(placement);\n  const alignLength = getAxisLength(alignmentAxis);\n  const side = getSide(placement);\n  const isVertical = sideAxis === 'y';\n  const commonX = reference.x + reference.width / 2 - floating.width / 2;\n  const commonY = reference.y + reference.height / 2 - floating.height / 2;\n  const commonAlign = reference[alignLength] / 2 - floating[alignLength] / 2;\n  let coords;\n  switch (side) {\n    case 'top':\n      coords = {\n        x: commonX,\n        y: reference.y - floating.height\n      };\n      break;\n    case 'bottom':\n      coords = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n    case 'right':\n      coords = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n    case 'left':\n      coords = {\n        x: reference.x - floating.width,\n        y: commonY\n      };\n      break;\n    default:\n      coords = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n  switch (getAlignment(placement)) {\n    case 'start':\n      coords[alignmentAxis] -= commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n    case 'end':\n      coords[alignmentAxis] += commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n  }\n  return coords;\n}\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a given reference element.\n *\n * This export does not have any `platform` interface logic. You will need to\n * write one for the platform you are using Floating UI with.\n */\nconst computePosition = async (reference, floating, config) => {\n  const {\n    placement = 'bottom',\n    strategy = 'absolute',\n    middleware = [],\n    platform\n  } = config;\n  const validMiddleware = middleware.filter(Boolean);\n  const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(floating));\n  let rects = await platform.getElementRects({\n    reference,\n    floating,\n    strategy\n  });\n  let {\n    x,\n    y\n  } = computeCoordsFromPlacement(rects, placement, rtl);\n  let statefulPlacement = placement;\n  let middlewareData = {};\n  let resetCount = 0;\n  for (let i = 0; i < validMiddleware.length; i++) {\n    const {\n      name,\n      fn\n    } = validMiddleware[i];\n    const {\n      x: nextX,\n      y: nextY,\n      data,\n      reset\n    } = await fn({\n      x,\n      y,\n      initialPlacement: placement,\n      placement: statefulPlacement,\n      strategy,\n      middlewareData,\n      rects,\n      platform,\n      elements: {\n        reference,\n        floating\n      }\n    });\n    x = nextX != null ? nextX : x;\n    y = nextY != null ? nextY : y;\n    middlewareData = {\n      ...middlewareData,\n      [name]: {\n        ...middlewareData[name],\n        ...data\n      }\n    };\n    if (reset && resetCount <= 50) {\n      resetCount++;\n      if (typeof reset === 'object') {\n        if (reset.placement) {\n          statefulPlacement = reset.placement;\n        }\n        if (reset.rects) {\n          rects = reset.rects === true ? await platform.getElementRects({\n            reference,\n            floating,\n            strategy\n          }) : reset.rects;\n        }\n        ({\n          x,\n          y\n        } = computeCoordsFromPlacement(rects, statefulPlacement, rtl));\n      }\n      i = -1;\n    }\n  }\n  return {\n    x,\n    y,\n    placement: statefulPlacement,\n    strategy,\n    middlewareData\n  };\n};\n\n/**\n * Resolves with an object of overflow side offsets that determine how much the\n * element is overflowing a given clipping boundary on each side.\n * - positive = overflowing the boundary by that number of pixels\n * - negative = how many pixels left before it will overflow\n * - 0 = lies flush with the boundary\n * @see https://floating-ui.com/docs/detectOverflow\n */\nasync function detectOverflow(state, options) {\n  var _await$platform$isEle;\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    x,\n    y,\n    platform,\n    rects,\n    elements,\n    strategy\n  } = state;\n  const {\n    boundary = 'clippingAncestors',\n    rootBoundary = 'viewport',\n    elementContext = 'floating',\n    altBoundary = false,\n    padding = 0\n  } = evaluate(options, state);\n  const paddingObject = getPaddingObject(padding);\n  const altContext = elementContext === 'floating' ? 'reference' : 'floating';\n  const element = elements[altBoundary ? altContext : elementContext];\n  const clippingClientRect = rectToClientRect(await platform.getClippingRect({\n    element: ((_await$platform$isEle = await (platform.isElement == null ? void 0 : platform.isElement(element))) != null ? _await$platform$isEle : true) ? element : element.contextElement || (await (platform.getDocumentElement == null ? void 0 : platform.getDocumentElement(elements.floating))),\n    boundary,\n    rootBoundary,\n    strategy\n  }));\n  const rect = elementContext === 'floating' ? {\n    x,\n    y,\n    width: rects.floating.width,\n    height: rects.floating.height\n  } : rects.reference;\n  const offsetParent = await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(elements.floating));\n  const offsetScale = (await (platform.isElement == null ? void 0 : platform.isElement(offsetParent))) ? (await (platform.getScale == null ? void 0 : platform.getScale(offsetParent))) || {\n    x: 1,\n    y: 1\n  } : {\n    x: 1,\n    y: 1\n  };\n  const elementClientRect = rectToClientRect(platform.convertOffsetParentRelativeRectToViewportRelativeRect ? await platform.convertOffsetParentRelativeRectToViewportRelativeRect({\n    elements,\n    rect,\n    offsetParent,\n    strategy\n  }) : rect);\n  return {\n    top: (clippingClientRect.top - elementClientRect.top + paddingObject.top) / offsetScale.y,\n    bottom: (elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom) / offsetScale.y,\n    left: (clippingClientRect.left - elementClientRect.left + paddingObject.left) / offsetScale.x,\n    right: (elementClientRect.right - clippingClientRect.right + paddingObject.right) / offsetScale.x\n  };\n}\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = options => ({\n  name: 'arrow',\n  options,\n  async fn(state) {\n    const {\n      x,\n      y,\n      placement,\n      rects,\n      platform,\n      elements,\n      middlewareData\n    } = state;\n    // Since `element` is required, we don't Partial<> the type.\n    const {\n      element,\n      padding = 0\n    } = evaluate(options, state) || {};\n    if (element == null) {\n      return {};\n    }\n    const paddingObject = getPaddingObject(padding);\n    const coords = {\n      x,\n      y\n    };\n    const axis = getAlignmentAxis(placement);\n    const length = getAxisLength(axis);\n    const arrowDimensions = await platform.getDimensions(element);\n    const isYAxis = axis === 'y';\n    const minProp = isYAxis ? 'top' : 'left';\n    const maxProp = isYAxis ? 'bottom' : 'right';\n    const clientProp = isYAxis ? 'clientHeight' : 'clientWidth';\n    const endDiff = rects.reference[length] + rects.reference[axis] - coords[axis] - rects.floating[length];\n    const startDiff = coords[axis] - rects.reference[axis];\n    const arrowOffsetParent = await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(element));\n    let clientSize = arrowOffsetParent ? arrowOffsetParent[clientProp] : 0;\n\n    // DOM platform can return `window` as the `offsetParent`.\n    if (!clientSize || !(await (platform.isElement == null ? void 0 : platform.isElement(arrowOffsetParent)))) {\n      clientSize = elements.floating[clientProp] || rects.floating[length];\n    }\n    const centerToReference = endDiff / 2 - startDiff / 2;\n\n    // If the padding is large enough that it causes the arrow to no longer be\n    // centered, modify the padding so that it is centered.\n    const largestPossiblePadding = clientSize / 2 - arrowDimensions[length] / 2 - 1;\n    const minPadding = min(paddingObject[minProp], largestPossiblePadding);\n    const maxPadding = min(paddingObject[maxProp], largestPossiblePadding);\n\n    // Make sure the arrow doesn't overflow the floating element if the center\n    // point is outside the floating element's bounds.\n    const min$1 = minPadding;\n    const max = clientSize - arrowDimensions[length] - maxPadding;\n    const center = clientSize / 2 - arrowDimensions[length] / 2 + centerToReference;\n    const offset = clamp(min$1, center, max);\n\n    // If the reference is small enough that the arrow's padding causes it to\n    // to point to nothing for an aligned placement, adjust the offset of the\n    // floating element itself. To ensure `shift()` continues to take action,\n    // a single reset is performed when this is true.\n    const shouldAddOffset = !middlewareData.arrow && getAlignment(placement) != null && center !== offset && rects.reference[length] / 2 - (center < min$1 ? minPadding : maxPadding) - arrowDimensions[length] / 2 < 0;\n    const alignmentOffset = shouldAddOffset ? center < min$1 ? center - min$1 : center - max : 0;\n    return {\n      [axis]: coords[axis] + alignmentOffset,\n      data: {\n        [axis]: offset,\n        centerOffset: center - offset - alignmentOffset,\n        ...(shouldAddOffset && {\n          alignmentOffset\n        })\n      },\n      reset: shouldAddOffset\n    };\n  }\n});\n\nfunction getPlacementList(alignment, autoAlignment, allowedPlacements) {\n  const allowedPlacementsSortedByAlignment = alignment ? [...allowedPlacements.filter(placement => getAlignment(placement) === alignment), ...allowedPlacements.filter(placement => getAlignment(placement) !== alignment)] : allowedPlacements.filter(placement => getSide(placement) === placement);\n  return allowedPlacementsSortedByAlignment.filter(placement => {\n    if (alignment) {\n      return getAlignment(placement) === alignment || (autoAlignment ? getOppositeAlignmentPlacement(placement) !== placement : false);\n    }\n    return true;\n  });\n}\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'autoPlacement',\n    options,\n    async fn(state) {\n      var _middlewareData$autoP, _middlewareData$autoP2, _placementsThatFitOnE;\n      const {\n        rects,\n        middlewareData,\n        placement,\n        platform,\n        elements\n      } = state;\n      const {\n        crossAxis = false,\n        alignment,\n        allowedPlacements = placements,\n        autoAlignment = true,\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const placements$1 = alignment !== undefined || allowedPlacements === placements ? getPlacementList(alignment || null, autoAlignment, allowedPlacements) : allowedPlacements;\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const currentIndex = ((_middlewareData$autoP = middlewareData.autoPlacement) == null ? void 0 : _middlewareData$autoP.index) || 0;\n      const currentPlacement = placements$1[currentIndex];\n      if (currentPlacement == null) {\n        return {};\n      }\n      const alignmentSides = getAlignmentSides(currentPlacement, rects, await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating)));\n\n      // Make `computeCoords` start from the right place.\n      if (placement !== currentPlacement) {\n        return {\n          reset: {\n            placement: placements$1[0]\n          }\n        };\n      }\n      const currentOverflows = [overflow[getSide(currentPlacement)], overflow[alignmentSides[0]], overflow[alignmentSides[1]]];\n      const allOverflows = [...(((_middlewareData$autoP2 = middlewareData.autoPlacement) == null ? void 0 : _middlewareData$autoP2.overflows) || []), {\n        placement: currentPlacement,\n        overflows: currentOverflows\n      }];\n      const nextPlacement = placements$1[currentIndex + 1];\n\n      // There are more placements to check.\n      if (nextPlacement) {\n        return {\n          data: {\n            index: currentIndex + 1,\n            overflows: allOverflows\n          },\n          reset: {\n            placement: nextPlacement\n          }\n        };\n      }\n      const placementsSortedByMostSpace = allOverflows.map(d => {\n        const alignment = getAlignment(d.placement);\n        return [d.placement, alignment && crossAxis ?\n        // Check along the mainAxis and main crossAxis side.\n        d.overflows.slice(0, 2).reduce((acc, v) => acc + v, 0) :\n        // Check only the mainAxis.\n        d.overflows[0], d.overflows];\n      }).sort((a, b) => a[1] - b[1]);\n      const placementsThatFitOnEachSide = placementsSortedByMostSpace.filter(d => d[2].slice(0,\n      // Aligned placements should not check their opposite crossAxis\n      // side.\n      getAlignment(d[0]) ? 2 : 3).every(v => v <= 0));\n      const resetPlacement = ((_placementsThatFitOnE = placementsThatFitOnEachSide[0]) == null ? void 0 : _placementsThatFitOnE[0]) || placementsSortedByMostSpace[0][0];\n      if (resetPlacement !== placement) {\n        return {\n          data: {\n            index: currentIndex + 1,\n            overflows: allOverflows\n          },\n          reset: {\n            placement: resetPlacement\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'flip',\n    options,\n    async fn(state) {\n      var _middlewareData$arrow, _middlewareData$flip;\n      const {\n        placement,\n        middlewareData,\n        rects,\n        initialPlacement,\n        platform,\n        elements\n      } = state;\n      const {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true,\n        fallbackPlacements: specifiedFallbackPlacements,\n        fallbackStrategy = 'bestFit',\n        fallbackAxisSideDirection = 'none',\n        flipAlignment = true,\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n\n      // If a reset by the arrow was caused due to an alignment offset being\n      // added, we should skip any logic now since `flip()` has already done its\n      // work.\n      // https://github.com/floating-ui/floating-ui/issues/2549#issuecomment-1719601643\n      if ((_middlewareData$arrow = middlewareData.arrow) != null && _middlewareData$arrow.alignmentOffset) {\n        return {};\n      }\n      const side = getSide(placement);\n      const initialSideAxis = getSideAxis(initialPlacement);\n      const isBasePlacement = getSide(initialPlacement) === initialPlacement;\n      const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating));\n      const fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipAlignment ? [getOppositePlacement(initialPlacement)] : getExpandedPlacements(initialPlacement));\n      const hasFallbackAxisSideDirection = fallbackAxisSideDirection !== 'none';\n      if (!specifiedFallbackPlacements && hasFallbackAxisSideDirection) {\n        fallbackPlacements.push(...getOppositeAxisPlacements(initialPlacement, flipAlignment, fallbackAxisSideDirection, rtl));\n      }\n      const placements = [initialPlacement, ...fallbackPlacements];\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const overflows = [];\n      let overflowsData = ((_middlewareData$flip = middlewareData.flip) == null ? void 0 : _middlewareData$flip.overflows) || [];\n      if (checkMainAxis) {\n        overflows.push(overflow[side]);\n      }\n      if (checkCrossAxis) {\n        const sides = getAlignmentSides(placement, rects, rtl);\n        overflows.push(overflow[sides[0]], overflow[sides[1]]);\n      }\n      overflowsData = [...overflowsData, {\n        placement,\n        overflows\n      }];\n\n      // One or more sides is overflowing.\n      if (!overflows.every(side => side <= 0)) {\n        var _middlewareData$flip2, _overflowsData$filter;\n        const nextIndex = (((_middlewareData$flip2 = middlewareData.flip) == null ? void 0 : _middlewareData$flip2.index) || 0) + 1;\n        const nextPlacement = placements[nextIndex];\n        if (nextPlacement) {\n          const ignoreCrossAxisOverflow = checkCrossAxis === 'alignment' ? initialSideAxis !== getSideAxis(nextPlacement) : false;\n          if (!ignoreCrossAxisOverflow ||\n          // We leave the current main axis only if every placement on that axis\n          // overflows the main axis.\n          overflowsData.every(d => getSideAxis(d.placement) === initialSideAxis ? d.overflows[0] > 0 : true)) {\n            // Try next placement and re-run the lifecycle.\n            return {\n              data: {\n                index: nextIndex,\n                overflows: overflowsData\n              },\n              reset: {\n                placement: nextPlacement\n              }\n            };\n          }\n        }\n\n        // First, find the candidates that fit on the mainAxis side of overflow,\n        // then find the placement that fits the best on the main crossAxis side.\n        let resetPlacement = (_overflowsData$filter = overflowsData.filter(d => d.overflows[0] <= 0).sort((a, b) => a.overflows[1] - b.overflows[1])[0]) == null ? void 0 : _overflowsData$filter.placement;\n\n        // Otherwise fallback.\n        if (!resetPlacement) {\n          switch (fallbackStrategy) {\n            case 'bestFit':\n              {\n                var _overflowsData$filter2;\n                const placement = (_overflowsData$filter2 = overflowsData.filter(d => {\n                  if (hasFallbackAxisSideDirection) {\n                    const currentSideAxis = getSideAxis(d.placement);\n                    return currentSideAxis === initialSideAxis ||\n                    // Create a bias to the `y` side axis due to horizontal\n                    // reading directions favoring greater width.\n                    currentSideAxis === 'y';\n                  }\n                  return true;\n                }).map(d => [d.placement, d.overflows.filter(overflow => overflow > 0).reduce((acc, overflow) => acc + overflow, 0)]).sort((a, b) => a[1] - b[1])[0]) == null ? void 0 : _overflowsData$filter2[0];\n                if (placement) {\n                  resetPlacement = placement;\n                }\n                break;\n              }\n            case 'initialPlacement':\n              resetPlacement = initialPlacement;\n              break;\n          }\n        }\n        if (placement !== resetPlacement) {\n          return {\n            reset: {\n              placement: resetPlacement\n            }\n          };\n        }\n      }\n      return {};\n    }\n  };\n};\n\nfunction getSideOffsets(overflow, rect) {\n  return {\n    top: overflow.top - rect.height,\n    right: overflow.right - rect.width,\n    bottom: overflow.bottom - rect.height,\n    left: overflow.left - rect.width\n  };\n}\nfunction isAnySideFullyClipped(overflow) {\n  return sides.some(side => overflow[side] >= 0);\n}\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'hide',\n    options,\n    async fn(state) {\n      const {\n        rects\n      } = state;\n      const {\n        strategy = 'referenceHidden',\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      switch (strategy) {\n        case 'referenceHidden':\n          {\n            const overflow = await detectOverflow(state, {\n              ...detectOverflowOptions,\n              elementContext: 'reference'\n            });\n            const offsets = getSideOffsets(overflow, rects.reference);\n            return {\n              data: {\n                referenceHiddenOffsets: offsets,\n                referenceHidden: isAnySideFullyClipped(offsets)\n              }\n            };\n          }\n        case 'escaped':\n          {\n            const overflow = await detectOverflow(state, {\n              ...detectOverflowOptions,\n              altBoundary: true\n            });\n            const offsets = getSideOffsets(overflow, rects.floating);\n            return {\n              data: {\n                escapedOffsets: offsets,\n                escaped: isAnySideFullyClipped(offsets)\n              }\n            };\n          }\n        default:\n          {\n            return {};\n          }\n      }\n    }\n  };\n};\n\nfunction getBoundingRect(rects) {\n  const minX = min(...rects.map(rect => rect.left));\n  const minY = min(...rects.map(rect => rect.top));\n  const maxX = max(...rects.map(rect => rect.right));\n  const maxY = max(...rects.map(rect => rect.bottom));\n  return {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY\n  };\n}\nfunction getRectsByLine(rects) {\n  const sortedRects = rects.slice().sort((a, b) => a.y - b.y);\n  const groups = [];\n  let prevRect = null;\n  for (let i = 0; i < sortedRects.length; i++) {\n    const rect = sortedRects[i];\n    if (!prevRect || rect.y - prevRect.y > prevRect.height / 2) {\n      groups.push([rect]);\n    } else {\n      groups[groups.length - 1].push(rect);\n    }\n    prevRect = rect;\n  }\n  return groups.map(rect => rectToClientRect(getBoundingRect(rect)));\n}\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'inline',\n    options,\n    async fn(state) {\n      const {\n        placement,\n        elements,\n        rects,\n        platform,\n        strategy\n      } = state;\n      // A MouseEvent's client{X,Y} coords can be up to 2 pixels off a\n      // ClientRect's bounds, despite the event listener being triggered. A\n      // padding of 2 seems to handle this issue.\n      const {\n        padding = 2,\n        x,\n        y\n      } = evaluate(options, state);\n      const nativeClientRects = Array.from((await (platform.getClientRects == null ? void 0 : platform.getClientRects(elements.reference))) || []);\n      const clientRects = getRectsByLine(nativeClientRects);\n      const fallback = rectToClientRect(getBoundingRect(nativeClientRects));\n      const paddingObject = getPaddingObject(padding);\n      function getBoundingClientRect() {\n        // There are two rects and they are disjoined.\n        if (clientRects.length === 2 && clientRects[0].left > clientRects[1].right && x != null && y != null) {\n          // Find the first rect in which the point is fully inside.\n          return clientRects.find(rect => x > rect.left - paddingObject.left && x < rect.right + paddingObject.right && y > rect.top - paddingObject.top && y < rect.bottom + paddingObject.bottom) || fallback;\n        }\n\n        // There are 2 or more connected rects.\n        if (clientRects.length >= 2) {\n          if (getSideAxis(placement) === 'y') {\n            const firstRect = clientRects[0];\n            const lastRect = clientRects[clientRects.length - 1];\n            const isTop = getSide(placement) === 'top';\n            const top = firstRect.top;\n            const bottom = lastRect.bottom;\n            const left = isTop ? firstRect.left : lastRect.left;\n            const right = isTop ? firstRect.right : lastRect.right;\n            const width = right - left;\n            const height = bottom - top;\n            return {\n              top,\n              bottom,\n              left,\n              right,\n              width,\n              height,\n              x: left,\n              y: top\n            };\n          }\n          const isLeftSide = getSide(placement) === 'left';\n          const maxRight = max(...clientRects.map(rect => rect.right));\n          const minLeft = min(...clientRects.map(rect => rect.left));\n          const measureRects = clientRects.filter(rect => isLeftSide ? rect.left === minLeft : rect.right === maxRight);\n          const top = measureRects[0].top;\n          const bottom = measureRects[measureRects.length - 1].bottom;\n          const left = minLeft;\n          const right = maxRight;\n          const width = right - left;\n          const height = bottom - top;\n          return {\n            top,\n            bottom,\n            left,\n            right,\n            width,\n            height,\n            x: left,\n            y: top\n          };\n        }\n        return fallback;\n      }\n      const resetRects = await platform.getElementRects({\n        reference: {\n          getBoundingClientRect\n        },\n        floating: elements.floating,\n        strategy\n      });\n      if (rects.reference.x !== resetRects.reference.x || rects.reference.y !== resetRects.reference.y || rects.reference.width !== resetRects.reference.width || rects.reference.height !== resetRects.reference.height) {\n        return {\n          reset: {\n            rects: resetRects\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\nconst originSides = /*#__PURE__*/new Set(['left', 'top']);\n\n// For type backwards-compatibility, the `OffsetOptions` type was also\n// Derivable.\n\nasync function convertValueToCoords(state, options) {\n  const {\n    placement,\n    platform,\n    elements\n  } = state;\n  const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating));\n  const side = getSide(placement);\n  const alignment = getAlignment(placement);\n  const isVertical = getSideAxis(placement) === 'y';\n  const mainAxisMulti = originSides.has(side) ? -1 : 1;\n  const crossAxisMulti = rtl && isVertical ? -1 : 1;\n  const rawValue = evaluate(options, state);\n\n  // eslint-disable-next-line prefer-const\n  let {\n    mainAxis,\n    crossAxis,\n    alignmentAxis\n  } = typeof rawValue === 'number' ? {\n    mainAxis: rawValue,\n    crossAxis: 0,\n    alignmentAxis: null\n  } : {\n    mainAxis: rawValue.mainAxis || 0,\n    crossAxis: rawValue.crossAxis || 0,\n    alignmentAxis: rawValue.alignmentAxis\n  };\n  if (alignment && typeof alignmentAxis === 'number') {\n    crossAxis = alignment === 'end' ? alignmentAxis * -1 : alignmentAxis;\n  }\n  return isVertical ? {\n    x: crossAxis * crossAxisMulti,\n    y: mainAxis * mainAxisMulti\n  } : {\n    x: mainAxis * mainAxisMulti,\n    y: crossAxis * crossAxisMulti\n  };\n}\n\n/**\n * Modifies the placement by translating the floating element along the\n * specified axes.\n * A number (shorthand for `mainAxis` or distance), or an axes configuration\n * object may be passed.\n * @see https://floating-ui.com/docs/offset\n */\nconst offset = function (options) {\n  if (options === void 0) {\n    options = 0;\n  }\n  return {\n    name: 'offset',\n    options,\n    async fn(state) {\n      var _middlewareData$offse, _middlewareData$arrow;\n      const {\n        x,\n        y,\n        placement,\n        middlewareData\n      } = state;\n      const diffCoords = await convertValueToCoords(state, options);\n\n      // If the placement is the same and the arrow caused an alignment offset\n      // then we don't need to change the positioning coordinates.\n      if (placement === ((_middlewareData$offse = middlewareData.offset) == null ? void 0 : _middlewareData$offse.placement) && (_middlewareData$arrow = middlewareData.arrow) != null && _middlewareData$arrow.alignmentOffset) {\n        return {};\n      }\n      return {\n        x: x + diffCoords.x,\n        y: y + diffCoords.y,\n        data: {\n          ...diffCoords,\n          placement\n        }\n      };\n    }\n  };\n};\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'shift',\n    options,\n    async fn(state) {\n      const {\n        x,\n        y,\n        placement\n      } = state;\n      const {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = false,\n        limiter = {\n          fn: _ref => {\n            let {\n              x,\n              y\n            } = _ref;\n            return {\n              x,\n              y\n            };\n          }\n        },\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const coords = {\n        x,\n        y\n      };\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const crossAxis = getSideAxis(getSide(placement));\n      const mainAxis = getOppositeAxis(crossAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      if (checkMainAxis) {\n        const minSide = mainAxis === 'y' ? 'top' : 'left';\n        const maxSide = mainAxis === 'y' ? 'bottom' : 'right';\n        const min = mainAxisCoord + overflow[minSide];\n        const max = mainAxisCoord - overflow[maxSide];\n        mainAxisCoord = clamp(min, mainAxisCoord, max);\n      }\n      if (checkCrossAxis) {\n        const minSide = crossAxis === 'y' ? 'top' : 'left';\n        const maxSide = crossAxis === 'y' ? 'bottom' : 'right';\n        const min = crossAxisCoord + overflow[minSide];\n        const max = crossAxisCoord - overflow[maxSide];\n        crossAxisCoord = clamp(min, crossAxisCoord, max);\n      }\n      const limitedCoords = limiter.fn({\n        ...state,\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      });\n      return {\n        ...limitedCoords,\n        data: {\n          x: limitedCoords.x - x,\n          y: limitedCoords.y - y,\n          enabled: {\n            [mainAxis]: checkMainAxis,\n            [crossAxis]: checkCrossAxis\n          }\n        }\n      };\n    }\n  };\n};\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    options,\n    fn(state) {\n      const {\n        x,\n        y,\n        placement,\n        rects,\n        middlewareData\n      } = state;\n      const {\n        offset = 0,\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true\n      } = evaluate(options, state);\n      const coords = {\n        x,\n        y\n      };\n      const crossAxis = getSideAxis(placement);\n      const mainAxis = getOppositeAxis(crossAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      const rawOffset = evaluate(offset, state);\n      const computedOffset = typeof rawOffset === 'number' ? {\n        mainAxis: rawOffset,\n        crossAxis: 0\n      } : {\n        mainAxis: 0,\n        crossAxis: 0,\n        ...rawOffset\n      };\n      if (checkMainAxis) {\n        const len = mainAxis === 'y' ? 'height' : 'width';\n        const limitMin = rects.reference[mainAxis] - rects.floating[len] + computedOffset.mainAxis;\n        const limitMax = rects.reference[mainAxis] + rects.reference[len] - computedOffset.mainAxis;\n        if (mainAxisCoord < limitMin) {\n          mainAxisCoord = limitMin;\n        } else if (mainAxisCoord > limitMax) {\n          mainAxisCoord = limitMax;\n        }\n      }\n      if (checkCrossAxis) {\n        var _middlewareData$offse, _middlewareData$offse2;\n        const len = mainAxis === 'y' ? 'width' : 'height';\n        const isOriginSide = originSides.has(getSide(placement));\n        const limitMin = rects.reference[crossAxis] - rects.floating[len] + (isOriginSide ? ((_middlewareData$offse = middlewareData.offset) == null ? void 0 : _middlewareData$offse[crossAxis]) || 0 : 0) + (isOriginSide ? 0 : computedOffset.crossAxis);\n        const limitMax = rects.reference[crossAxis] + rects.reference[len] + (isOriginSide ? 0 : ((_middlewareData$offse2 = middlewareData.offset) == null ? void 0 : _middlewareData$offse2[crossAxis]) || 0) - (isOriginSide ? computedOffset.crossAxis : 0);\n        if (crossAxisCoord < limitMin) {\n          crossAxisCoord = limitMin;\n        } else if (crossAxisCoord > limitMax) {\n          crossAxisCoord = limitMax;\n        }\n      }\n      return {\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      };\n    }\n  };\n};\n\n/**\n * Provides data that allows you to change the size of the floating element \n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'size',\n    options,\n    async fn(state) {\n      var _state$middlewareData, _state$middlewareData2;\n      const {\n        placement,\n        rects,\n        platform,\n        elements\n      } = state;\n      const {\n        apply = () => {},\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const side = getSide(placement);\n      const alignment = getAlignment(placement);\n      const isYAxis = getSideAxis(placement) === 'y';\n      const {\n        width,\n        height\n      } = rects.floating;\n      let heightSide;\n      let widthSide;\n      if (side === 'top' || side === 'bottom') {\n        heightSide = side;\n        widthSide = alignment === ((await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating))) ? 'start' : 'end') ? 'left' : 'right';\n      } else {\n        widthSide = side;\n        heightSide = alignment === 'end' ? 'top' : 'bottom';\n      }\n      const maximumClippingHeight = height - overflow.top - overflow.bottom;\n      const maximumClippingWidth = width - overflow.left - overflow.right;\n      const overflowAvailableHeight = min(height - overflow[heightSide], maximumClippingHeight);\n      const overflowAvailableWidth = min(width - overflow[widthSide], maximumClippingWidth);\n      const noShift = !state.middlewareData.shift;\n      let availableHeight = overflowAvailableHeight;\n      let availableWidth = overflowAvailableWidth;\n      if ((_state$middlewareData = state.middlewareData.shift) != null && _state$middlewareData.enabled.x) {\n        availableWidth = maximumClippingWidth;\n      }\n      if ((_state$middlewareData2 = state.middlewareData.shift) != null && _state$middlewareData2.enabled.y) {\n        availableHeight = maximumClippingHeight;\n      }\n      if (noShift && !alignment) {\n        const xMin = max(overflow.left, 0);\n        const xMax = max(overflow.right, 0);\n        const yMin = max(overflow.top, 0);\n        const yMax = max(overflow.bottom, 0);\n        if (isYAxis) {\n          availableWidth = width - 2 * (xMin !== 0 || xMax !== 0 ? xMin + xMax : max(overflow.left, overflow.right));\n        } else {\n          availableHeight = height - 2 * (yMin !== 0 || yMax !== 0 ? yMin + yMax : max(overflow.top, overflow.bottom));\n        }\n      }\n      await apply({\n        ...state,\n        availableWidth,\n        availableHeight\n      });\n      const nextDimensions = await platform.getDimensions(elements.floating);\n      if (width !== nextDimensions.width || height !== nextDimensions.height) {\n        return {\n          reset: {\n            rects: true\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\nexport { arrow, autoPlacement, computePosition, detectOverflow, flip, hide, inline, limitShift, offset, shift, size };\n","import { rectToClientRect, arrow as arrow$1, autoPlacement as autoPlacement$1, detectOverflow as detectOverflow$1, flip as flip$1, hide as hide$1, inline as inline$1, limitShift as limitShift$1, offset as offset$1, shift as shift$1, size as size$1, computePosition as computePosition$1 } from '@floating-ui/core';\nimport { round, createCoords, max, min, floor } from '@floating-ui/utils';\nimport { getComputedStyle as getComputedStyle$1, isHTMLElement, isElement, getWindow, isWebKit, getFrameElement, getNodeScroll, getDocumentElement, isTopLayer, getNodeName, isOverflowElement, getOverflowAncestors, getParentNode, isLastTraversableNode, isContainingBlock, isTableElement, getContainingBlock } from '@floating-ui/utils/dom';\nexport { getOverflowAncestors } from '@floating-ui/utils/dom';\n\nfunction getCssDimensions(element) {\n  const css = getComputedStyle$1(element);\n  // In testing environments, the `width` and `height` properties are empty\n  // strings for SVG elements, returning NaN. Fallback to `0` in this case.\n  let width = parseFloat(css.width) || 0;\n  let height = parseFloat(css.height) || 0;\n  const hasOffset = isHTMLElement(element);\n  const offsetWidth = hasOffset ? element.offsetWidth : width;\n  const offsetHeight = hasOffset ? element.offsetHeight : height;\n  const shouldFallback = round(width) !== offsetWidth || round(height) !== offsetHeight;\n  if (shouldFallback) {\n    width = offsetWidth;\n    height = offsetHeight;\n  }\n  return {\n    width,\n    height,\n    $: shouldFallback\n  };\n}\n\nfunction unwrapElement(element) {\n  return !isElement(element) ? element.contextElement : element;\n}\n\nfunction getScale(element) {\n  const domElement = unwrapElement(element);\n  if (!isHTMLElement(domElement)) {\n    return createCoords(1);\n  }\n  const rect = domElement.getBoundingClientRect();\n  const {\n    width,\n    height,\n    $\n  } = getCssDimensions(domElement);\n  let x = ($ ? round(rect.width) : rect.width) / width;\n  let y = ($ ? round(rect.height) : rect.height) / height;\n\n  // 0, NaN, or Infinity should always fallback to 1.\n\n  if (!x || !Number.isFinite(x)) {\n    x = 1;\n  }\n  if (!y || !Number.isFinite(y)) {\n    y = 1;\n  }\n  return {\n    x,\n    y\n  };\n}\n\nconst noOffsets = /*#__PURE__*/createCoords(0);\nfunction getVisualOffsets(element) {\n  const win = getWindow(element);\n  if (!isWebKit() || !win.visualViewport) {\n    return noOffsets;\n  }\n  return {\n    x: win.visualViewport.offsetLeft,\n    y: win.visualViewport.offsetTop\n  };\n}\nfunction shouldAddVisualOffsets(element, isFixed, floatingOffsetParent) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n  if (!floatingOffsetParent || isFixed && floatingOffsetParent !== getWindow(element)) {\n    return false;\n  }\n  return isFixed;\n}\n\nfunction getBoundingClientRect(element, includeScale, isFixedStrategy, offsetParent) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n  if (isFixedStrategy === void 0) {\n    isFixedStrategy = false;\n  }\n  const clientRect = element.getBoundingClientRect();\n  const domElement = unwrapElement(element);\n  let scale = createCoords(1);\n  if (includeScale) {\n    if (offsetParent) {\n      if (isElement(offsetParent)) {\n        scale = getScale(offsetParent);\n      }\n    } else {\n      scale = getScale(element);\n    }\n  }\n  const visualOffsets = shouldAddVisualOffsets(domElement, isFixedStrategy, offsetParent) ? getVisualOffsets(domElement) : createCoords(0);\n  let x = (clientRect.left + visualOffsets.x) / scale.x;\n  let y = (clientRect.top + visualOffsets.y) / scale.y;\n  let width = clientRect.width / scale.x;\n  let height = clientRect.height / scale.y;\n  if (domElement) {\n    const win = getWindow(domElement);\n    const offsetWin = offsetParent && isElement(offsetParent) ? getWindow(offsetParent) : offsetParent;\n    let currentWin = win;\n    let currentIFrame = getFrameElement(currentWin);\n    while (currentIFrame && offsetParent && offsetWin !== currentWin) {\n      const iframeScale = getScale(currentIFrame);\n      const iframeRect = currentIFrame.getBoundingClientRect();\n      const css = getComputedStyle$1(currentIFrame);\n      const left = iframeRect.left + (currentIFrame.clientLeft + parseFloat(css.paddingLeft)) * iframeScale.x;\n      const top = iframeRect.top + (currentIFrame.clientTop + parseFloat(css.paddingTop)) * iframeScale.y;\n      x *= iframeScale.x;\n      y *= iframeScale.y;\n      width *= iframeScale.x;\n      height *= iframeScale.y;\n      x += left;\n      y += top;\n      currentWin = getWindow(currentIFrame);\n      currentIFrame = getFrameElement(currentWin);\n    }\n  }\n  return rectToClientRect({\n    width,\n    height,\n    x,\n    y\n  });\n}\n\n// If <html> has a CSS width greater than the viewport, then this will be\n// incorrect for RTL.\nfunction getWindowScrollBarX(element, rect) {\n  const leftScroll = getNodeScroll(element).scrollLeft;\n  if (!rect) {\n    return getBoundingClientRect(getDocumentElement(element)).left + leftScroll;\n  }\n  return rect.left + leftScroll;\n}\n\nfunction getHTMLOffset(documentElement, scroll) {\n  const htmlRect = documentElement.getBoundingClientRect();\n  const x = htmlRect.left + scroll.scrollLeft - getWindowScrollBarX(documentElement, htmlRect);\n  const y = htmlRect.top + scroll.scrollTop;\n  return {\n    x,\n    y\n  };\n}\n\nfunction convertOffsetParentRelativeRectToViewportRelativeRect(_ref) {\n  let {\n    elements,\n    rect,\n    offsetParent,\n    strategy\n  } = _ref;\n  const isFixed = strategy === 'fixed';\n  const documentElement = getDocumentElement(offsetParent);\n  const topLayer = elements ? isTopLayer(elements.floating) : false;\n  if (offsetParent === documentElement || topLayer && isFixed) {\n    return rect;\n  }\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  let scale = createCoords(1);\n  const offsets = createCoords(0);\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isHTMLElement(offsetParent)) {\n      const offsetRect = getBoundingClientRect(offsetParent);\n      scale = getScale(offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    }\n  }\n  const htmlOffset = documentElement && !isOffsetParentAnElement && !isFixed ? getHTMLOffset(documentElement, scroll) : createCoords(0);\n  return {\n    width: rect.width * scale.x,\n    height: rect.height * scale.y,\n    x: rect.x * scale.x - scroll.scrollLeft * scale.x + offsets.x + htmlOffset.x,\n    y: rect.y * scale.y - scroll.scrollTop * scale.y + offsets.y + htmlOffset.y\n  };\n}\n\nfunction getClientRects(element) {\n  return Array.from(element.getClientRects());\n}\n\n// Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable.\nfunction getDocumentRect(element) {\n  const html = getDocumentElement(element);\n  const scroll = getNodeScroll(element);\n  const body = element.ownerDocument.body;\n  const width = max(html.scrollWidth, html.clientWidth, body.scrollWidth, body.clientWidth);\n  const height = max(html.scrollHeight, html.clientHeight, body.scrollHeight, body.clientHeight);\n  let x = -scroll.scrollLeft + getWindowScrollBarX(element);\n  const y = -scroll.scrollTop;\n  if (getComputedStyle$1(body).direction === 'rtl') {\n    x += max(html.clientWidth, body.clientWidth) - width;\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\n// Safety check: ensure the scrollbar space is reasonable in case this\n// calculation is affected by unusual styles.\n// Most scrollbars leave 15-18px of space.\nconst SCROLLBAR_MAX = 25;\nfunction getViewportRect(element, strategy) {\n  const win = getWindow(element);\n  const html = getDocumentElement(element);\n  const visualViewport = win.visualViewport;\n  let width = html.clientWidth;\n  let height = html.clientHeight;\n  let x = 0;\n  let y = 0;\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    const visualViewportBased = isWebKit();\n    if (!visualViewportBased || visualViewportBased && strategy === 'fixed') {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n  const windowScrollbarX = getWindowScrollBarX(html);\n  // <html> `overflow: hidden` + `scrollbar-gutter: stable` reduces the\n  // visual width of the <html> but this is not considered in the size\n  // of `html.clientWidth`.\n  if (windowScrollbarX <= 0) {\n    const doc = html.ownerDocument;\n    const body = doc.body;\n    const bodyStyles = getComputedStyle(body);\n    const bodyMarginInline = doc.compatMode === 'CSS1Compat' ? parseFloat(bodyStyles.marginLeft) + parseFloat(bodyStyles.marginRight) || 0 : 0;\n    const clippingStableScrollbarWidth = Math.abs(html.clientWidth - body.clientWidth - bodyMarginInline);\n    if (clippingStableScrollbarWidth <= SCROLLBAR_MAX) {\n      width -= clippingStableScrollbarWidth;\n    }\n  } else if (windowScrollbarX <= SCROLLBAR_MAX) {\n    // If the <body> scrollbar is on the left, the width needs to be extended\n    // by the scrollbar amount so there isn't extra space on the right.\n    width += windowScrollbarX;\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\nconst absoluteOrFixed = /*#__PURE__*/new Set(['absolute', 'fixed']);\n// Returns the inner client rect, subtracting scrollbars if present.\nfunction getInnerBoundingClientRect(element, strategy) {\n  const clientRect = getBoundingClientRect(element, true, strategy === 'fixed');\n  const top = clientRect.top + element.clientTop;\n  const left = clientRect.left + element.clientLeft;\n  const scale = isHTMLElement(element) ? getScale(element) : createCoords(1);\n  const width = element.clientWidth * scale.x;\n  const height = element.clientHeight * scale.y;\n  const x = left * scale.x;\n  const y = top * scale.y;\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\nfunction getClientRectFromClippingAncestor(element, clippingAncestor, strategy) {\n  let rect;\n  if (clippingAncestor === 'viewport') {\n    rect = getViewportRect(element, strategy);\n  } else if (clippingAncestor === 'document') {\n    rect = getDocumentRect(getDocumentElement(element));\n  } else if (isElement(clippingAncestor)) {\n    rect = getInnerBoundingClientRect(clippingAncestor, strategy);\n  } else {\n    const visualOffsets = getVisualOffsets(element);\n    rect = {\n      x: clippingAncestor.x - visualOffsets.x,\n      y: clippingAncestor.y - visualOffsets.y,\n      width: clippingAncestor.width,\n      height: clippingAncestor.height\n    };\n  }\n  return rectToClientRect(rect);\n}\nfunction hasFixedPositionAncestor(element, stopNode) {\n  const parentNode = getParentNode(element);\n  if (parentNode === stopNode || !isElement(parentNode) || isLastTraversableNode(parentNode)) {\n    return false;\n  }\n  return getComputedStyle$1(parentNode).position === 'fixed' || hasFixedPositionAncestor(parentNode, stopNode);\n}\n\n// A \"clipping ancestor\" is an `overflow` element with the characteristic of\n// clipping (or hiding) child elements. This returns all clipping ancestors\n// of the given element up the tree.\nfunction getClippingElementAncestors(element, cache) {\n  const cachedResult = cache.get(element);\n  if (cachedResult) {\n    return cachedResult;\n  }\n  let result = getOverflowAncestors(element, [], false).filter(el => isElement(el) && getNodeName(el) !== 'body');\n  let currentContainingBlockComputedStyle = null;\n  const elementIsFixed = getComputedStyle$1(element).position === 'fixed';\n  let currentNode = elementIsFixed ? getParentNode(element) : element;\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n  while (isElement(currentNode) && !isLastTraversableNode(currentNode)) {\n    const computedStyle = getComputedStyle$1(currentNode);\n    const currentNodeIsContaining = isContainingBlock(currentNode);\n    if (!currentNodeIsContaining && computedStyle.position === 'fixed') {\n      currentContainingBlockComputedStyle = null;\n    }\n    const shouldDropCurrentNode = elementIsFixed ? !currentNodeIsContaining && !currentContainingBlockComputedStyle : !currentNodeIsContaining && computedStyle.position === 'static' && !!currentContainingBlockComputedStyle && absoluteOrFixed.has(currentContainingBlockComputedStyle.position) || isOverflowElement(currentNode) && !currentNodeIsContaining && hasFixedPositionAncestor(element, currentNode);\n    if (shouldDropCurrentNode) {\n      // Drop non-containing blocks.\n      result = result.filter(ancestor => ancestor !== currentNode);\n    } else {\n      // Record last containing block for next iteration.\n      currentContainingBlockComputedStyle = computedStyle;\n    }\n    currentNode = getParentNode(currentNode);\n  }\n  cache.set(element, result);\n  return result;\n}\n\n// Gets the maximum area that the element is visible in due to any number of\n// clipping ancestors.\nfunction getClippingRect(_ref) {\n  let {\n    element,\n    boundary,\n    rootBoundary,\n    strategy\n  } = _ref;\n  const elementClippingAncestors = boundary === 'clippingAncestors' ? isTopLayer(element) ? [] : getClippingElementAncestors(element, this._c) : [].concat(boundary);\n  const clippingAncestors = [...elementClippingAncestors, rootBoundary];\n  const firstClippingAncestor = clippingAncestors[0];\n  const clippingRect = clippingAncestors.reduce((accRect, clippingAncestor) => {\n    const rect = getClientRectFromClippingAncestor(element, clippingAncestor, strategy);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromClippingAncestor(element, firstClippingAncestor, strategy));\n  return {\n    width: clippingRect.right - clippingRect.left,\n    height: clippingRect.bottom - clippingRect.top,\n    x: clippingRect.left,\n    y: clippingRect.top\n  };\n}\n\nfunction getDimensions(element) {\n  const {\n    width,\n    height\n  } = getCssDimensions(element);\n  return {\n    width,\n    height\n  };\n}\n\nfunction getRectRelativeToOffsetParent(element, offsetParent, strategy) {\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  const documentElement = getDocumentElement(offsetParent);\n  const isFixed = strategy === 'fixed';\n  const rect = getBoundingClientRect(element, true, isFixed, offsetParent);\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  const offsets = createCoords(0);\n\n  // If the <body> scrollbar appears on the left (e.g. RTL systems). Use\n  // Firefox with layout.scrollbar.side = 3 in about:config to test this.\n  function setLeftRTLScrollbarOffset() {\n    offsets.x = getWindowScrollBarX(documentElement);\n  }\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isOffsetParentAnElement) {\n      const offsetRect = getBoundingClientRect(offsetParent, true, isFixed, offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    } else if (documentElement) {\n      setLeftRTLScrollbarOffset();\n    }\n  }\n  if (isFixed && !isOffsetParentAnElement && documentElement) {\n    setLeftRTLScrollbarOffset();\n  }\n  const htmlOffset = documentElement && !isOffsetParentAnElement && !isFixed ? getHTMLOffset(documentElement, scroll) : createCoords(0);\n  const x = rect.left + scroll.scrollLeft - offsets.x - htmlOffset.x;\n  const y = rect.top + scroll.scrollTop - offsets.y - htmlOffset.y;\n  return {\n    x,\n    y,\n    width: rect.width,\n    height: rect.height\n  };\n}\n\nfunction isStaticPositioned(element) {\n  return getComputedStyle$1(element).position === 'static';\n}\n\nfunction getTrueOffsetParent(element, polyfill) {\n  if (!isHTMLElement(element) || getComputedStyle$1(element).position === 'fixed') {\n    return null;\n  }\n  if (polyfill) {\n    return polyfill(element);\n  }\n  let rawOffsetParent = element.offsetParent;\n\n  // Firefox returns the <html> element as the offsetParent if it's non-static,\n  // while Chrome and Safari return the <body> element. The <body> element must\n  // be used to perform the correct calculations even if the <html> element is\n  // non-static.\n  if (getDocumentElement(element) === rawOffsetParent) {\n    rawOffsetParent = rawOffsetParent.ownerDocument.body;\n  }\n  return rawOffsetParent;\n}\n\n// Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\nfunction getOffsetParent(element, polyfill) {\n  const win = getWindow(element);\n  if (isTopLayer(element)) {\n    return win;\n  }\n  if (!isHTMLElement(element)) {\n    let svgOffsetParent = getParentNode(element);\n    while (svgOffsetParent && !isLastTraversableNode(svgOffsetParent)) {\n      if (isElement(svgOffsetParent) && !isStaticPositioned(svgOffsetParent)) {\n        return svgOffsetParent;\n      }\n      svgOffsetParent = getParentNode(svgOffsetParent);\n    }\n    return win;\n  }\n  let offsetParent = getTrueOffsetParent(element, polyfill);\n  while (offsetParent && isTableElement(offsetParent) && isStaticPositioned(offsetParent)) {\n    offsetParent = getTrueOffsetParent(offsetParent, polyfill);\n  }\n  if (offsetParent && isLastTraversableNode(offsetParent) && isStaticPositioned(offsetParent) && !isContainingBlock(offsetParent)) {\n    return win;\n  }\n  return offsetParent || getContainingBlock(element) || win;\n}\n\nconst getElementRects = async function (data) {\n  const getOffsetParentFn = this.getOffsetParent || getOffsetParent;\n  const getDimensionsFn = this.getDimensions;\n  const floatingDimensions = await getDimensionsFn(data.floating);\n  return {\n    reference: getRectRelativeToOffsetParent(data.reference, await getOffsetParentFn(data.floating), data.strategy),\n    floating: {\n      x: 0,\n      y: 0,\n      width: floatingDimensions.width,\n      height: floatingDimensions.height\n    }\n  };\n};\n\nfunction isRTL(element) {\n  return getComputedStyle$1(element).direction === 'rtl';\n}\n\nconst platform = {\n  convertOffsetParentRelativeRectToViewportRelativeRect,\n  getDocumentElement,\n  getClippingRect,\n  getOffsetParent,\n  getElementRects,\n  getClientRects,\n  getDimensions,\n  getScale,\n  isElement,\n  isRTL\n};\n\nfunction rectsAreEqual(a, b) {\n  return a.x === b.x && a.y === b.y && a.width === b.width && a.height === b.height;\n}\n\n// https://samthor.au/2021/observing-dom/\nfunction observeMove(element, onMove) {\n  let io = null;\n  let timeoutId;\n  const root = getDocumentElement(element);\n  function cleanup() {\n    var _io;\n    clearTimeout(timeoutId);\n    (_io = io) == null || _io.disconnect();\n    io = null;\n  }\n  function refresh(skip, threshold) {\n    if (skip === void 0) {\n      skip = false;\n    }\n    if (threshold === void 0) {\n      threshold = 1;\n    }\n    cleanup();\n    const elementRectForRootMargin = element.getBoundingClientRect();\n    const {\n      left,\n      top,\n      width,\n      height\n    } = elementRectForRootMargin;\n    if (!skip) {\n      onMove();\n    }\n    if (!width || !height) {\n      return;\n    }\n    const insetTop = floor(top);\n    const insetRight = floor(root.clientWidth - (left + width));\n    const insetBottom = floor(root.clientHeight - (top + height));\n    const insetLeft = floor(left);\n    const rootMargin = -insetTop + \"px \" + -insetRight + \"px \" + -insetBottom + \"px \" + -insetLeft + \"px\";\n    const options = {\n      rootMargin,\n      threshold: max(0, min(1, threshold)) || 1\n    };\n    let isFirstUpdate = true;\n    function handleObserve(entries) {\n      const ratio = entries[0].intersectionRatio;\n      if (ratio !== threshold) {\n        if (!isFirstUpdate) {\n          return refresh();\n        }\n        if (!ratio) {\n          // If the reference is clipped, the ratio is 0. Throttle the refresh\n          // to prevent an infinite loop of updates.\n          timeoutId = setTimeout(() => {\n            refresh(false, 1e-7);\n          }, 1000);\n        } else {\n          refresh(false, ratio);\n        }\n      }\n      if (ratio === 1 && !rectsAreEqual(elementRectForRootMargin, element.getBoundingClientRect())) {\n        // It's possible that even though the ratio is reported as 1, the\n        // element is not actually fully within the IntersectionObserver's root\n        // area anymore. This can happen under performance constraints. This may\n        // be a bug in the browser's IntersectionObserver implementation. To\n        // work around this, we compare the element's bounding rect now with\n        // what it was at the time we created the IntersectionObserver. If they\n        // are not equal then the element moved, so we refresh.\n        refresh();\n      }\n      isFirstUpdate = false;\n    }\n\n    // Older browsers don't support a `document` as the root and will throw an\n    // error.\n    try {\n      io = new IntersectionObserver(handleObserve, {\n        ...options,\n        // Handle <iframe>s\n        root: root.ownerDocument\n      });\n    } catch (_e) {\n      io = new IntersectionObserver(handleObserve, options);\n    }\n    io.observe(element);\n  }\n  refresh(true);\n  return cleanup;\n}\n\n/**\n * Automatically updates the position of the floating element when necessary.\n * Should only be called when the floating element is mounted on the DOM or\n * visible on the screen.\n * @returns cleanup function that should be invoked when the floating element is\n * removed from the DOM or hidden from the screen.\n * @see https://floating-ui.com/docs/autoUpdate\n */\nfunction autoUpdate(reference, floating, update, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    ancestorScroll = true,\n    ancestorResize = true,\n    elementResize = typeof ResizeObserver === 'function',\n    layoutShift = typeof IntersectionObserver === 'function',\n    animationFrame = false\n  } = options;\n  const referenceEl = unwrapElement(reference);\n  const ancestors = ancestorScroll || ancestorResize ? [...(referenceEl ? getOverflowAncestors(referenceEl) : []), ...getOverflowAncestors(floating)] : [];\n  ancestors.forEach(ancestor => {\n    ancestorScroll && ancestor.addEventListener('scroll', update, {\n      passive: true\n    });\n    ancestorResize && ancestor.addEventListener('resize', update);\n  });\n  const cleanupIo = referenceEl && layoutShift ? observeMove(referenceEl, update) : null;\n  let reobserveFrame = -1;\n  let resizeObserver = null;\n  if (elementResize) {\n    resizeObserver = new ResizeObserver(_ref => {\n      let [firstEntry] = _ref;\n      if (firstEntry && firstEntry.target === referenceEl && resizeObserver) {\n        // Prevent update loops when using the `size` middleware.\n        // https://github.com/floating-ui/floating-ui/issues/1740\n        resizeObserver.unobserve(floating);\n        cancelAnimationFrame(reobserveFrame);\n        reobserveFrame = requestAnimationFrame(() => {\n          var _resizeObserver;\n          (_resizeObserver = resizeObserver) == null || _resizeObserver.observe(floating);\n        });\n      }\n      update();\n    });\n    if (referenceEl && !animationFrame) {\n      resizeObserver.observe(referenceEl);\n    }\n    resizeObserver.observe(floating);\n  }\n  let frameId;\n  let prevRefRect = animationFrame ? getBoundingClientRect(reference) : null;\n  if (animationFrame) {\n    frameLoop();\n  }\n  function frameLoop() {\n    const nextRefRect = getBoundingClientRect(reference);\n    if (prevRefRect && !rectsAreEqual(prevRefRect, nextRefRect)) {\n      update();\n    }\n    prevRefRect = nextRefRect;\n    frameId = requestAnimationFrame(frameLoop);\n  }\n  update();\n  return () => {\n    var _resizeObserver2;\n    ancestors.forEach(ancestor => {\n      ancestorScroll && ancestor.removeEventListener('scroll', update);\n      ancestorResize && ancestor.removeEventListener('resize', update);\n    });\n    cleanupIo == null || cleanupIo();\n    (_resizeObserver2 = resizeObserver) == null || _resizeObserver2.disconnect();\n    resizeObserver = null;\n    if (animationFrame) {\n      cancelAnimationFrame(frameId);\n    }\n  };\n}\n\n/**\n * Resolves with an object of overflow side offsets that determine how much the\n * element is overflowing a given clipping boundary on each side.\n * - positive = overflowing the boundary by that number of pixels\n * - negative = how many pixels left before it will overflow\n * - 0 = lies flush with the boundary\n * @see https://floating-ui.com/docs/detectOverflow\n */\nconst detectOverflow = detectOverflow$1;\n\n/**\n * Modifies the placement by translating the floating element along the\n * specified axes.\n * A number (shorthand for `mainAxis` or distance), or an axes configuration\n * object may be passed.\n * @see https://floating-ui.com/docs/offset\n */\nconst offset = offset$1;\n\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = autoPlacement$1;\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = shift$1;\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = flip$1;\n\n/**\n * Provides data that allows you to change the size of the floating element \n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = size$1;\n\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = hide$1;\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = arrow$1;\n\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = inline$1;\n\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = limitShift$1;\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a given reference element.\n */\nconst computePosition = (reference, floating, options) => {\n  // This caches the expensive `getClippingElementAncestors` function so that\n  // multiple lifecycle resets re-use the same result. It only lives for a\n  // single call. If other functions become expensive, we can add them as well.\n  const cache = new Map();\n  const mergedOptions = {\n    platform,\n    ...options\n  };\n  const platformWithCache = {\n    ...mergedOptions.platform,\n    _c: cache\n  };\n  return computePosition$1(reference, floating, {\n    ...mergedOptions,\n    platform: platformWithCache\n  });\n};\n\nexport { arrow, autoPlacement, autoUpdate, computePosition, detectOverflow, flip, hide, inline, limitShift, offset, platform, shift, size };\n","import { computePosition, arrow as arrow$2, autoPlacement as autoPlacement$1, flip as flip$1, hide as hide$1, inline as inline$1, limitShift as limitShift$1, offset as offset$1, shift as shift$1, size as size$1 } from '@floating-ui/dom';\nexport { autoUpdate, computePosition, detectOverflow, getOverflowAncestors, platform } from '@floating-ui/dom';\nimport * as React from 'react';\nimport { useLayoutEffect } from 'react';\nimport * as ReactDOM from 'react-dom';\n\nvar isClient = typeof document !== 'undefined';\n\nvar noop = function noop() {};\nvar index = isClient ? useLayoutEffect : noop;\n\n// Fork of `fast-deep-equal` that only does the comparisons we need and compares\n// functions\nfunction deepEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n  if (typeof a !== typeof b) {\n    return false;\n  }\n  if (typeof a === 'function' && a.toString() === b.toString()) {\n    return true;\n  }\n  let length;\n  let i;\n  let keys;\n  if (a && b && typeof a === 'object') {\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length !== b.length) return false;\n      for (i = length; i-- !== 0;) {\n        if (!deepEqual(a[i], b[i])) {\n          return false;\n        }\n      }\n      return true;\n    }\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) {\n      return false;\n    }\n    for (i = length; i-- !== 0;) {\n      if (!{}.hasOwnProperty.call(b, keys[i])) {\n        return false;\n      }\n    }\n    for (i = length; i-- !== 0;) {\n      const key = keys[i];\n      if (key === '_owner' && a.$$typeof) {\n        continue;\n      }\n      if (!deepEqual(a[key], b[key])) {\n        return false;\n      }\n    }\n    return true;\n  }\n  return a !== a && b !== b;\n}\n\nfunction getDPR(element) {\n  if (typeof window === 'undefined') {\n    return 1;\n  }\n  const win = element.ownerDocument.defaultView || window;\n  return win.devicePixelRatio || 1;\n}\n\nfunction roundByDPR(element, value) {\n  const dpr = getDPR(element);\n  return Math.round(value * dpr) / dpr;\n}\n\nfunction useLatestRef(value) {\n  const ref = React.useRef(value);\n  index(() => {\n    ref.current = value;\n  });\n  return ref;\n}\n\n/**\n * Provides data to position a floating element.\n * @see https://floating-ui.com/docs/useFloating\n */\nfunction useFloating(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    placement = 'bottom',\n    strategy = 'absolute',\n    middleware = [],\n    platform,\n    elements: {\n      reference: externalReference,\n      floating: externalFloating\n    } = {},\n    transform = true,\n    whileElementsMounted,\n    open\n  } = options;\n  const [data, setData] = React.useState({\n    x: 0,\n    y: 0,\n    strategy,\n    placement,\n    middlewareData: {},\n    isPositioned: false\n  });\n  const [latestMiddleware, setLatestMiddleware] = React.useState(middleware);\n  if (!deepEqual(latestMiddleware, middleware)) {\n    setLatestMiddleware(middleware);\n  }\n  const [_reference, _setReference] = React.useState(null);\n  const [_floating, _setFloating] = React.useState(null);\n  const setReference = React.useCallback(node => {\n    if (node !== referenceRef.current) {\n      referenceRef.current = node;\n      _setReference(node);\n    }\n  }, []);\n  const setFloating = React.useCallback(node => {\n    if (node !== floatingRef.current) {\n      floatingRef.current = node;\n      _setFloating(node);\n    }\n  }, []);\n  const referenceEl = externalReference || _reference;\n  const floatingEl = externalFloating || _floating;\n  const referenceRef = React.useRef(null);\n  const floatingRef = React.useRef(null);\n  const dataRef = React.useRef(data);\n  const hasWhileElementsMounted = whileElementsMounted != null;\n  const whileElementsMountedRef = useLatestRef(whileElementsMounted);\n  const platformRef = useLatestRef(platform);\n  const openRef = useLatestRef(open);\n  const update = React.useCallback(() => {\n    if (!referenceRef.current || !floatingRef.current) {\n      return;\n    }\n    const config = {\n      placement,\n      strategy,\n      middleware: latestMiddleware\n    };\n    if (platformRef.current) {\n      config.platform = platformRef.current;\n    }\n    computePosition(referenceRef.current, floatingRef.current, config).then(data => {\n      const fullData = {\n        ...data,\n        // The floating element's position may be recomputed while it's closed\n        // but still mounted (such as when transitioning out). To ensure\n        // `isPositioned` will be `false` initially on the next open, avoid\n        // setting it to `true` when `open === false` (must be specified).\n        isPositioned: openRef.current !== false\n      };\n      if (isMountedRef.current && !deepEqual(dataRef.current, fullData)) {\n        dataRef.current = fullData;\n        ReactDOM.flushSync(() => {\n          setData(fullData);\n        });\n      }\n    });\n  }, [latestMiddleware, placement, strategy, platformRef, openRef]);\n  index(() => {\n    if (open === false && dataRef.current.isPositioned) {\n      dataRef.current.isPositioned = false;\n      setData(data => ({\n        ...data,\n        isPositioned: false\n      }));\n    }\n  }, [open]);\n  const isMountedRef = React.useRef(false);\n  index(() => {\n    isMountedRef.current = true;\n    return () => {\n      isMountedRef.current = false;\n    };\n  }, []);\n  index(() => {\n    if (referenceEl) referenceRef.current = referenceEl;\n    if (floatingEl) floatingRef.current = floatingEl;\n    if (referenceEl && floatingEl) {\n      if (whileElementsMountedRef.current) {\n        return whileElementsMountedRef.current(referenceEl, floatingEl, update);\n      }\n      update();\n    }\n  }, [referenceEl, floatingEl, update, whileElementsMountedRef, hasWhileElementsMounted]);\n  const refs = React.useMemo(() => ({\n    reference: referenceRef,\n    floating: floatingRef,\n    setReference,\n    setFloating\n  }), [setReference, setFloating]);\n  const elements = React.useMemo(() => ({\n    reference: referenceEl,\n    floating: floatingEl\n  }), [referenceEl, floatingEl]);\n  const floatingStyles = React.useMemo(() => {\n    const initialStyles = {\n      position: strategy,\n      left: 0,\n      top: 0\n    };\n    if (!elements.floating) {\n      return initialStyles;\n    }\n    const x = roundByDPR(elements.floating, data.x);\n    const y = roundByDPR(elements.floating, data.y);\n    if (transform) {\n      return {\n        ...initialStyles,\n        transform: \"translate(\" + x + \"px, \" + y + \"px)\",\n        ...(getDPR(elements.floating) >= 1.5 && {\n          willChange: 'transform'\n        })\n      };\n    }\n    return {\n      position: strategy,\n      left: x,\n      top: y\n    };\n  }, [strategy, transform, elements.floating, data.x, data.y]);\n  return React.useMemo(() => ({\n    ...data,\n    update,\n    refs,\n    elements,\n    floatingStyles\n  }), [data, update, refs, elements, floatingStyles]);\n}\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * This wraps the core `arrow` middleware to allow React refs as the element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow$1 = options => {\n  function isRef(value) {\n    return {}.hasOwnProperty.call(value, 'current');\n  }\n  return {\n    name: 'arrow',\n    options,\n    fn(state) {\n      const {\n        element,\n        padding\n      } = typeof options === 'function' ? options(state) : options;\n      if (element && isRef(element)) {\n        if (element.current != null) {\n          return arrow$2({\n            element: element.current,\n            padding\n          }).fn(state);\n        }\n        return {};\n      }\n      if (element) {\n        return arrow$2({\n          element,\n          padding\n        }).fn(state);\n      }\n      return {};\n    }\n  };\n};\n\n/**\n * Modifies the placement by translating the floating element along the\n * specified axes.\n * A number (shorthand for `mainAxis` or distance), or an axes configuration\n * object may be passed.\n * @see https://floating-ui.com/docs/offset\n */\nconst offset = (options, deps) => ({\n  ...offset$1(options),\n  options: [options, deps]\n});\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = (options, deps) => ({\n  ...shift$1(options),\n  options: [options, deps]\n});\n\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = (options, deps) => ({\n  ...limitShift$1(options),\n  options: [options, deps]\n});\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = (options, deps) => ({\n  ...flip$1(options),\n  options: [options, deps]\n});\n\n/**\n * Provides data that allows you to change the size of the floating element \n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = (options, deps) => ({\n  ...size$1(options),\n  options: [options, deps]\n});\n\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = (options, deps) => ({\n  ...autoPlacement$1(options),\n  options: [options, deps]\n});\n\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = (options, deps) => ({\n  ...hide$1(options),\n  options: [options, deps]\n});\n\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = (options, deps) => ({\n  ...inline$1(options),\n  options: [options, deps]\n});\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * This wraps the core `arrow` middleware to allow React refs as the element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = (options, deps) => ({\n  ...arrow$1(options),\n  options: [options, deps]\n});\n\nexport { arrow, autoPlacement, flip, hide, inline, limitShift, offset, shift, size, useFloating };\n","import * as React from 'react';\nimport { useModernLayoutEffect, useEffectEvent, getMinListIndex, getMaxListIndex, createGridCellMap, isListIndexDisabled, getGridNavigatedIndex, getGridCellIndexOfCorner, getGridCellIndices, findNonDisabledListIndex, isIndexOutOfListBounds, useLatestRef, getDocument as getDocument$1, isMouseLikePointerType, contains as contains$1, isSafari, enableFocusInside, isOutsideEvent, getPreviousTabbable, getNextTabbable, disableFocusInside, isTypeableCombobox, getFloatingFocusElement, getTabbableOptions, getNodeAncestors, activeElement, getNodeChildren as getNodeChildren$1, stopEvent, getTarget as getTarget$1, isVirtualClick, isVirtualPointerEvent, getPlatform, isTypeableElement, isReactEvent, isRootElement, isEventTargetWithin, matchesFocusVisible, isMac, getDeepestNode, getUserAgent } from '@floating-ui/react/utils';\nimport { jsx, jsxs, Fragment } from 'react/jsx-runtime';\nimport { getComputedStyle, isElement, isShadowRoot, getNodeName, isNode, isHTMLElement, getWindow, isLastTraversableNode, getParentNode, isWebKit } from '@floating-ui/utils/dom';\nimport { tabbable, isTabbable, focusable } from 'tabbable';\nimport * as ReactDOM from 'react-dom';\nimport { getOverflowAncestors, useFloating as useFloating$1, offset, detectOverflow } from '@floating-ui/react-dom';\nexport { arrow, autoPlacement, autoUpdate, computePosition, detectOverflow, flip, getOverflowAncestors, hide, inline, limitShift, offset, platform, shift, size } from '@floating-ui/react-dom';\nimport { evaluate, max, round, min } from '@floating-ui/utils';\n\n/**\n * Merges an array of refs into a single memoized callback ref or `null`.\n * @see https://floating-ui.com/docs/react-utils#usemergerefs\n */\nfunction useMergeRefs(refs) {\n  const cleanupRef = React.useRef(undefined);\n  const refEffect = React.useCallback(instance => {\n    const cleanups = refs.map(ref => {\n      if (ref == null) {\n        return;\n      }\n      if (typeof ref === 'function') {\n        const refCallback = ref;\n        const refCleanup = refCallback(instance);\n        return typeof refCleanup === 'function' ? refCleanup : () => {\n          refCallback(null);\n        };\n      }\n      ref.current = instance;\n      return () => {\n        ref.current = null;\n      };\n    });\n    return () => {\n      cleanups.forEach(refCleanup => refCleanup == null ? void 0 : refCleanup());\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, refs);\n  return React.useMemo(() => {\n    if (refs.every(ref => ref == null)) {\n      return null;\n    }\n    return value => {\n      if (cleanupRef.current) {\n        cleanupRef.current();\n        cleanupRef.current = undefined;\n      }\n      if (value != null) {\n        cleanupRef.current = refEffect(value);\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, refs);\n}\n\nfunction sortByDocumentPosition(a, b) {\n  const position = a.compareDocumentPosition(b);\n  if (position & Node.DOCUMENT_POSITION_FOLLOWING || position & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n    return -1;\n  }\n  if (position & Node.DOCUMENT_POSITION_PRECEDING || position & Node.DOCUMENT_POSITION_CONTAINS) {\n    return 1;\n  }\n  return 0;\n}\nconst FloatingListContext = /*#__PURE__*/React.createContext({\n  register: () => {},\n  unregister: () => {},\n  map: /*#__PURE__*/new Map(),\n  elementsRef: {\n    current: []\n  }\n});\n/**\n * Provides context for a list of items within the floating element.\n * @see https://floating-ui.com/docs/FloatingList\n */\nfunction FloatingList(props) {\n  const {\n    children,\n    elementsRef,\n    labelsRef\n  } = props;\n  const [nodes, setNodes] = React.useState(() => new Set());\n  const register = React.useCallback(node => {\n    setNodes(prevSet => new Set(prevSet).add(node));\n  }, []);\n  const unregister = React.useCallback(node => {\n    setNodes(prevSet => {\n      const set = new Set(prevSet);\n      set.delete(node);\n      return set;\n    });\n  }, []);\n  const map = React.useMemo(() => {\n    const newMap = new Map();\n    const sortedNodes = Array.from(nodes.keys()).sort(sortByDocumentPosition);\n    sortedNodes.forEach((node, index) => {\n      newMap.set(node, index);\n    });\n    return newMap;\n  }, [nodes]);\n  return /*#__PURE__*/jsx(FloatingListContext.Provider, {\n    value: React.useMemo(() => ({\n      register,\n      unregister,\n      map,\n      elementsRef,\n      labelsRef\n    }), [register, unregister, map, elementsRef, labelsRef]),\n    children: children\n  });\n}\n/**\n * Used to register a list item and its index (DOM position) in the\n * `FloatingList`.\n * @see https://floating-ui.com/docs/FloatingList#uselistitem\n */\nfunction useListItem(props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    label\n  } = props;\n  const {\n    register,\n    unregister,\n    map,\n    elementsRef,\n    labelsRef\n  } = React.useContext(FloatingListContext);\n  const [index, setIndex] = React.useState(null);\n  const componentRef = React.useRef(null);\n  const ref = React.useCallback(node => {\n    componentRef.current = node;\n    if (index !== null) {\n      elementsRef.current[index] = node;\n      if (labelsRef) {\n        var _node$textContent;\n        const isLabelDefined = label !== undefined;\n        labelsRef.current[index] = isLabelDefined ? label : (_node$textContent = node == null ? void 0 : node.textContent) != null ? _node$textContent : null;\n      }\n    }\n  }, [index, elementsRef, labelsRef, label]);\n  useModernLayoutEffect(() => {\n    const node = componentRef.current;\n    if (node) {\n      register(node);\n      return () => {\n        unregister(node);\n      };\n    }\n  }, [register, unregister]);\n  useModernLayoutEffect(() => {\n    const index = componentRef.current ? map.get(componentRef.current) : null;\n    if (index != null) {\n      setIndex(index);\n    }\n  }, [map]);\n  return React.useMemo(() => ({\n    ref,\n    index: index == null ? -1 : index\n  }), [index, ref]);\n}\n\nconst FOCUSABLE_ATTRIBUTE = 'data-floating-ui-focusable';\nconst ACTIVE_KEY = 'active';\nconst SELECTED_KEY = 'selected';\nconst ARROW_LEFT = 'ArrowLeft';\nconst ARROW_RIGHT = 'ArrowRight';\nconst ARROW_UP = 'ArrowUp';\nconst ARROW_DOWN = 'ArrowDown';\n\nfunction renderJsx(render, computedProps) {\n  if (typeof render === 'function') {\n    return render(computedProps);\n  }\n  if (render) {\n    return /*#__PURE__*/React.cloneElement(render, computedProps);\n  }\n  return /*#__PURE__*/jsx(\"div\", {\n    ...computedProps\n  });\n}\nconst CompositeContext = /*#__PURE__*/React.createContext({\n  activeIndex: 0,\n  onNavigate: () => {}\n});\nconst horizontalKeys = [ARROW_LEFT, ARROW_RIGHT];\nconst verticalKeys = [ARROW_UP, ARROW_DOWN];\nconst allKeys = [...horizontalKeys, ...verticalKeys];\n\n/**\n * Creates a single tab stop whose items are navigated by arrow keys, which\n * provides list navigation outside of floating element contexts.\n *\n * This is useful to enable navigation of a list of items that arent part of a\n * floating element. A menubar is an example of a composite, with each reference\n * element being an item.\n * @see https://floating-ui.com/docs/Composite\n */\nconst Composite = /*#__PURE__*/React.forwardRef(function Composite(props, forwardedRef) {\n  const {\n    render,\n    orientation = 'both',\n    loop = true,\n    rtl = false,\n    cols = 1,\n    disabledIndices,\n    activeIndex: externalActiveIndex,\n    onNavigate: externalSetActiveIndex,\n    itemSizes,\n    dense = false,\n    ...domProps\n  } = props;\n  const [internalActiveIndex, internalSetActiveIndex] = React.useState(0);\n  const activeIndex = externalActiveIndex != null ? externalActiveIndex : internalActiveIndex;\n  const onNavigate = useEffectEvent(externalSetActiveIndex != null ? externalSetActiveIndex : internalSetActiveIndex);\n  const elementsRef = React.useRef([]);\n  const renderElementProps = render && typeof render !== 'function' ? render.props : {};\n  const contextValue = React.useMemo(() => ({\n    activeIndex,\n    onNavigate\n  }), [activeIndex, onNavigate]);\n  const isGrid = cols > 1;\n  function handleKeyDown(event) {\n    if (!allKeys.includes(event.key)) return;\n    let nextIndex = activeIndex;\n    const minIndex = getMinListIndex(elementsRef, disabledIndices);\n    const maxIndex = getMaxListIndex(elementsRef, disabledIndices);\n    const horizontalEndKey = rtl ? ARROW_LEFT : ARROW_RIGHT;\n    const horizontalStartKey = rtl ? ARROW_RIGHT : ARROW_LEFT;\n    if (isGrid) {\n      const sizes = itemSizes || Array.from({\n        length: elementsRef.current.length\n      }, () => ({\n        width: 1,\n        height: 1\n      }));\n      // To calculate movements on the grid, we use hypothetical cell indices\n      // as if every item was 1x1, then convert back to real indices.\n      const cellMap = createGridCellMap(sizes, cols, dense);\n      const minGridIndex = cellMap.findIndex(index => index != null && !isListIndexDisabled(elementsRef, index, disabledIndices));\n      // last enabled index\n      const maxGridIndex = cellMap.reduce((foundIndex, index, cellIndex) => index != null && !isListIndexDisabled(elementsRef, index, disabledIndices) ? cellIndex : foundIndex, -1);\n      const maybeNextIndex = cellMap[getGridNavigatedIndex({\n        current: cellMap.map(itemIndex => itemIndex ? elementsRef.current[itemIndex] : null)\n      }, {\n        event,\n        orientation,\n        loop,\n        rtl,\n        cols,\n        // treat undefined (empty grid spaces) as disabled indices so we\n        // don't end up in them\n        disabledIndices: getGridCellIndices([...((typeof disabledIndices !== 'function' ? disabledIndices : null) || elementsRef.current.map((_, index) => isListIndexDisabled(elementsRef, index, disabledIndices) ? index : undefined)), undefined], cellMap),\n        minIndex: minGridIndex,\n        maxIndex: maxGridIndex,\n        prevIndex: getGridCellIndexOfCorner(activeIndex > maxIndex ? minIndex : activeIndex, sizes, cellMap, cols,\n        // use a corner matching the edge closest to the direction we're\n        // moving in so we don't end up in the same item. Prefer\n        // top/left over bottom/right.\n        event.key === ARROW_DOWN ? 'bl' : event.key === horizontalEndKey ? 'tr' : 'tl')\n      })];\n      if (maybeNextIndex != null) {\n        nextIndex = maybeNextIndex;\n      }\n    }\n    const toEndKeys = {\n      horizontal: [horizontalEndKey],\n      vertical: [ARROW_DOWN],\n      both: [horizontalEndKey, ARROW_DOWN]\n    }[orientation];\n    const toStartKeys = {\n      horizontal: [horizontalStartKey],\n      vertical: [ARROW_UP],\n      both: [horizontalStartKey, ARROW_UP]\n    }[orientation];\n    const preventedKeys = isGrid ? allKeys : {\n      horizontal: horizontalKeys,\n      vertical: verticalKeys,\n      both: allKeys\n    }[orientation];\n    if (nextIndex === activeIndex && [...toEndKeys, ...toStartKeys].includes(event.key)) {\n      if (loop && nextIndex === maxIndex && toEndKeys.includes(event.key)) {\n        nextIndex = minIndex;\n      } else if (loop && nextIndex === minIndex && toStartKeys.includes(event.key)) {\n        nextIndex = maxIndex;\n      } else {\n        nextIndex = findNonDisabledListIndex(elementsRef, {\n          startingIndex: nextIndex,\n          decrement: toStartKeys.includes(event.key),\n          disabledIndices\n        });\n      }\n    }\n    if (nextIndex !== activeIndex && !isIndexOutOfListBounds(elementsRef, nextIndex)) {\n      var _elementsRef$current$;\n      event.stopPropagation();\n      if (preventedKeys.includes(event.key)) {\n        event.preventDefault();\n      }\n      onNavigate(nextIndex);\n      (_elementsRef$current$ = elementsRef.current[nextIndex]) == null || _elementsRef$current$.focus();\n    }\n  }\n  const computedProps = {\n    ...domProps,\n    ...renderElementProps,\n    ref: forwardedRef,\n    'aria-orientation': orientation === 'both' ? undefined : orientation,\n    onKeyDown(e) {\n      domProps.onKeyDown == null || domProps.onKeyDown(e);\n      renderElementProps.onKeyDown == null || renderElementProps.onKeyDown(e);\n      handleKeyDown(e);\n    }\n  };\n  return /*#__PURE__*/jsx(CompositeContext.Provider, {\n    value: contextValue,\n    children: /*#__PURE__*/jsx(FloatingList, {\n      elementsRef: elementsRef,\n      children: renderJsx(render, computedProps)\n    })\n  });\n});\n/**\n * @see https://floating-ui.com/docs/Composite\n */\nconst CompositeItem = /*#__PURE__*/React.forwardRef(function CompositeItem(props, forwardedRef) {\n  const {\n    render,\n    ...domProps\n  } = props;\n  const renderElementProps = render && typeof render !== 'function' ? render.props : {};\n  const {\n    activeIndex,\n    onNavigate\n  } = React.useContext(CompositeContext);\n  const {\n    ref,\n    index\n  } = useListItem();\n  const mergedRef = useMergeRefs([ref, forwardedRef, renderElementProps.ref]);\n  const isActive = activeIndex === index;\n  const computedProps = {\n    ...domProps,\n    ...renderElementProps,\n    ref: mergedRef,\n    tabIndex: isActive ? 0 : -1,\n    'data-active': isActive ? '' : undefined,\n    onFocus(e) {\n      domProps.onFocus == null || domProps.onFocus(e);\n      renderElementProps.onFocus == null || renderElementProps.onFocus(e);\n      onNavigate(index);\n    }\n  };\n  return renderJsx(render, computedProps);\n});\n\n// https://github.com/mui/material-ui/issues/41190#issuecomment-2040873379\nconst SafeReact = {\n  ...React\n};\n\nlet serverHandoffComplete = false;\nlet count = 0;\nconst genId = () => // Ensure the id is unique with multiple independent versions of Floating UI\n// on <React 18\n\"floating-ui-\" + Math.random().toString(36).slice(2, 6) + count++;\nfunction useFloatingId() {\n  const [id, setId] = React.useState(() => serverHandoffComplete ? genId() : undefined);\n  useModernLayoutEffect(() => {\n    if (id == null) {\n      setId(genId());\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  React.useEffect(() => {\n    serverHandoffComplete = true;\n  }, []);\n  return id;\n}\nconst useReactId = SafeReact.useId;\n\n/**\n * Uses React 18's built-in `useId()` when available, or falls back to a\n * slightly less performant (requiring a double render) implementation for\n * earlier React versions.\n * @see https://floating-ui.com/docs/react-utils#useid\n */\nconst useId = useReactId || useFloatingId;\n\nlet devMessageSet;\nif (process.env.NODE_ENV !== \"production\") {\n  devMessageSet = /*#__PURE__*/new Set();\n}\nfunction warn() {\n  var _devMessageSet;\n  for (var _len = arguments.length, messages = new Array(_len), _key = 0; _key < _len; _key++) {\n    messages[_key] = arguments[_key];\n  }\n  const message = \"Floating UI: \" + messages.join(' ');\n  if (!((_devMessageSet = devMessageSet) != null && _devMessageSet.has(message))) {\n    var _devMessageSet2;\n    (_devMessageSet2 = devMessageSet) == null || _devMessageSet2.add(message);\n    console.warn(message);\n  }\n}\nfunction error() {\n  var _devMessageSet3;\n  for (var _len2 = arguments.length, messages = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    messages[_key2] = arguments[_key2];\n  }\n  const message = \"Floating UI: \" + messages.join(' ');\n  if (!((_devMessageSet3 = devMessageSet) != null && _devMessageSet3.has(message))) {\n    var _devMessageSet4;\n    (_devMessageSet4 = devMessageSet) == null || _devMessageSet4.add(message);\n    console.error(message);\n  }\n}\n\n/**\n * Renders a pointing arrow triangle.\n * @see https://floating-ui.com/docs/FloatingArrow\n */\nconst FloatingArrow = /*#__PURE__*/React.forwardRef(function FloatingArrow(props, ref) {\n  const {\n    context: {\n      placement,\n      elements: {\n        floating\n      },\n      middlewareData: {\n        arrow,\n        shift\n      }\n    },\n    width = 14,\n    height = 7,\n    tipRadius = 0,\n    strokeWidth = 0,\n    staticOffset,\n    stroke,\n    d,\n    style: {\n      transform,\n      ...restStyle\n    } = {},\n    ...rest\n  } = props;\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!ref) {\n      warn('The `ref` prop is required for `FloatingArrow`.');\n    }\n  }\n  const clipPathId = useId();\n  const [isRTL, setIsRTL] = React.useState(false);\n\n  // https://github.com/floating-ui/floating-ui/issues/2932\n  useModernLayoutEffect(() => {\n    if (!floating) return;\n    const isRTL = getComputedStyle(floating).direction === 'rtl';\n    if (isRTL) {\n      setIsRTL(true);\n    }\n  }, [floating]);\n  if (!floating) {\n    return null;\n  }\n  const [side, alignment] = placement.split('-');\n  const isVerticalSide = side === 'top' || side === 'bottom';\n  let computedStaticOffset = staticOffset;\n  if (isVerticalSide && shift != null && shift.x || !isVerticalSide && shift != null && shift.y) {\n    computedStaticOffset = null;\n  }\n\n  // Strokes must be double the border width, this ensures the stroke's width\n  // works as you'd expect.\n  const computedStrokeWidth = strokeWidth * 2;\n  const halfStrokeWidth = computedStrokeWidth / 2;\n  const svgX = width / 2 * (tipRadius / -8 + 1);\n  const svgY = height / 2 * tipRadius / 4;\n  const isCustomShape = !!d;\n  const yOffsetProp = computedStaticOffset && alignment === 'end' ? 'bottom' : 'top';\n  let xOffsetProp = computedStaticOffset && alignment === 'end' ? 'right' : 'left';\n  if (computedStaticOffset && isRTL) {\n    xOffsetProp = alignment === 'end' ? 'left' : 'right';\n  }\n  const arrowX = (arrow == null ? void 0 : arrow.x) != null ? computedStaticOffset || arrow.x : '';\n  const arrowY = (arrow == null ? void 0 : arrow.y) != null ? computedStaticOffset || arrow.y : '';\n  const dValue = d || 'M0,0' + (\" H\" + width) + (\" L\" + (width - svgX) + \",\" + (height - svgY)) + (\" Q\" + width / 2 + \",\" + height + \" \" + svgX + \",\" + (height - svgY)) + ' Z';\n  const rotation = {\n    top: isCustomShape ? 'rotate(180deg)' : '',\n    left: isCustomShape ? 'rotate(90deg)' : 'rotate(-90deg)',\n    bottom: isCustomShape ? '' : 'rotate(180deg)',\n    right: isCustomShape ? 'rotate(-90deg)' : 'rotate(90deg)'\n  }[side];\n  return /*#__PURE__*/jsxs(\"svg\", {\n    ...rest,\n    \"aria-hidden\": true,\n    ref: ref,\n    width: isCustomShape ? width : width + computedStrokeWidth,\n    height: width,\n    viewBox: \"0 0 \" + width + \" \" + (height > width ? height : width),\n    style: {\n      position: 'absolute',\n      pointerEvents: 'none',\n      [xOffsetProp]: arrowX,\n      [yOffsetProp]: arrowY,\n      [side]: isVerticalSide || isCustomShape ? '100%' : \"calc(100% - \" + computedStrokeWidth / 2 + \"px)\",\n      transform: [rotation, transform].filter(t => !!t).join(' '),\n      ...restStyle\n    },\n    children: [computedStrokeWidth > 0 && /*#__PURE__*/jsx(\"path\", {\n      clipPath: \"url(#\" + clipPathId + \")\",\n      fill: \"none\",\n      stroke: stroke\n      // Account for the stroke on the fill path rendered below.\n      ,\n      strokeWidth: computedStrokeWidth + (d ? 0 : 1),\n      d: dValue\n    }), /*#__PURE__*/jsx(\"path\", {\n      stroke: computedStrokeWidth && !d ? rest.fill : 'none',\n      d: dValue\n    }), /*#__PURE__*/jsx(\"clipPath\", {\n      id: clipPathId,\n      children: /*#__PURE__*/jsx(\"rect\", {\n        x: -halfStrokeWidth,\n        y: halfStrokeWidth * (isCustomShape ? -1 : 1),\n        width: width + computedStrokeWidth,\n        height: width\n      })\n    })]\n  });\n});\n\nfunction createEventEmitter() {\n  const map = new Map();\n  return {\n    emit(event, data) {\n      var _map$get;\n      (_map$get = map.get(event)) == null || _map$get.forEach(listener => listener(data));\n    },\n    on(event, listener) {\n      if (!map.has(event)) {\n        map.set(event, new Set());\n      }\n      map.get(event).add(listener);\n    },\n    off(event, listener) {\n      var _map$get2;\n      (_map$get2 = map.get(event)) == null || _map$get2.delete(listener);\n    }\n  };\n}\n\nconst FloatingNodeContext = /*#__PURE__*/React.createContext(null);\nconst FloatingTreeContext = /*#__PURE__*/React.createContext(null);\n\n/**\n * Returns the parent node id for nested floating elements, if available.\n * Returns `null` for top-level floating elements.\n */\nconst useFloatingParentNodeId = () => {\n  var _React$useContext;\n  return ((_React$useContext = React.useContext(FloatingNodeContext)) == null ? void 0 : _React$useContext.id) || null;\n};\n\n/**\n * Returns the nearest floating tree context, if available.\n */\nconst useFloatingTree = () => React.useContext(FloatingTreeContext);\n\n/**\n * Registers a node into the `FloatingTree`, returning its id.\n * @see https://floating-ui.com/docs/FloatingTree\n */\nfunction useFloatingNodeId(customParentId) {\n  const id = useId();\n  const tree = useFloatingTree();\n  const reactParentId = useFloatingParentNodeId();\n  const parentId = customParentId || reactParentId;\n  useModernLayoutEffect(() => {\n    if (!id) return;\n    const node = {\n      id,\n      parentId\n    };\n    tree == null || tree.addNode(node);\n    return () => {\n      tree == null || tree.removeNode(node);\n    };\n  }, [tree, id, parentId]);\n  return id;\n}\n/**\n * Provides parent node context for nested floating elements.\n * @see https://floating-ui.com/docs/FloatingTree\n */\nfunction FloatingNode(props) {\n  const {\n    children,\n    id\n  } = props;\n  const parentId = useFloatingParentNodeId();\n  return /*#__PURE__*/jsx(FloatingNodeContext.Provider, {\n    value: React.useMemo(() => ({\n      id,\n      parentId\n    }), [id, parentId]),\n    children: children\n  });\n}\n/**\n * Provides context for nested floating elements when they are not children of\n * each other on the DOM.\n * This is not necessary in all cases, except when there must be explicit communication between parent and child floating elements. It is necessary for:\n * - The `bubbles` option in the `useDismiss()` Hook\n * - Nested virtual list navigation\n * - Nested floating elements that each open on hover\n * - Custom communication between parent and child floating elements\n * @see https://floating-ui.com/docs/FloatingTree\n */\nfunction FloatingTree(props) {\n  const {\n    children\n  } = props;\n  const nodesRef = React.useRef([]);\n  const addNode = React.useCallback(node => {\n    nodesRef.current = [...nodesRef.current, node];\n  }, []);\n  const removeNode = React.useCallback(node => {\n    nodesRef.current = nodesRef.current.filter(n => n !== node);\n  }, []);\n  const [events] = React.useState(() => createEventEmitter());\n  return /*#__PURE__*/jsx(FloatingTreeContext.Provider, {\n    value: React.useMemo(() => ({\n      nodesRef,\n      addNode,\n      removeNode,\n      events\n    }), [addNode, removeNode, events]),\n    children: children\n  });\n}\n\nfunction createAttribute(name) {\n  return \"data-floating-ui-\" + name;\n}\n\nfunction clearTimeoutIfSet(timeoutRef) {\n  if (timeoutRef.current !== -1) {\n    clearTimeout(timeoutRef.current);\n    timeoutRef.current = -1;\n  }\n}\n\nconst safePolygonIdentifier = /*#__PURE__*/createAttribute('safe-polygon');\nfunction getDelay(value, prop, pointerType) {\n  if (pointerType && !isMouseLikePointerType(pointerType)) {\n    return 0;\n  }\n  if (typeof value === 'number') {\n    return value;\n  }\n  if (typeof value === 'function') {\n    const result = value();\n    if (typeof result === 'number') {\n      return result;\n    }\n    return result == null ? void 0 : result[prop];\n  }\n  return value == null ? void 0 : value[prop];\n}\nfunction getRestMs(value) {\n  if (typeof value === 'function') {\n    return value();\n  }\n  return value;\n}\n/**\n * Opens the floating element while hovering over the reference element, like\n * CSS `:hover`.\n * @see https://floating-ui.com/docs/useHover\n */\nfunction useHover(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    onOpenChange,\n    dataRef,\n    events,\n    elements\n  } = context;\n  const {\n    enabled = true,\n    delay = 0,\n    handleClose = null,\n    mouseOnly = false,\n    restMs = 0,\n    move = true\n  } = props;\n  const tree = useFloatingTree();\n  const parentId = useFloatingParentNodeId();\n  const handleCloseRef = useLatestRef(handleClose);\n  const delayRef = useLatestRef(delay);\n  const openRef = useLatestRef(open);\n  const restMsRef = useLatestRef(restMs);\n  const pointerTypeRef = React.useRef();\n  const timeoutRef = React.useRef(-1);\n  const handlerRef = React.useRef();\n  const restTimeoutRef = React.useRef(-1);\n  const blockMouseMoveRef = React.useRef(true);\n  const performedPointerEventsMutationRef = React.useRef(false);\n  const unbindMouseMoveRef = React.useRef(() => {});\n  const restTimeoutPendingRef = React.useRef(false);\n  const isHoverOpen = useEffectEvent(() => {\n    var _dataRef$current$open;\n    const type = (_dataRef$current$open = dataRef.current.openEvent) == null ? void 0 : _dataRef$current$open.type;\n    return (type == null ? void 0 : type.includes('mouse')) && type !== 'mousedown';\n  });\n\n  // When closing before opening, clear the delay timeouts to cancel it\n  // from showing.\n  React.useEffect(() => {\n    if (!enabled) return;\n    function onOpenChange(_ref) {\n      let {\n        open\n      } = _ref;\n      if (!open) {\n        clearTimeoutIfSet(timeoutRef);\n        clearTimeoutIfSet(restTimeoutRef);\n        blockMouseMoveRef.current = true;\n        restTimeoutPendingRef.current = false;\n      }\n    }\n    events.on('openchange', onOpenChange);\n    return () => {\n      events.off('openchange', onOpenChange);\n    };\n  }, [enabled, events]);\n  React.useEffect(() => {\n    if (!enabled) return;\n    if (!handleCloseRef.current) return;\n    if (!open) return;\n    function onLeave(event) {\n      if (isHoverOpen()) {\n        onOpenChange(false, event, 'hover');\n      }\n    }\n    const html = getDocument$1(elements.floating).documentElement;\n    html.addEventListener('mouseleave', onLeave);\n    return () => {\n      html.removeEventListener('mouseleave', onLeave);\n    };\n  }, [elements.floating, open, onOpenChange, enabled, handleCloseRef, isHoverOpen]);\n  const closeWithDelay = React.useCallback(function (event, runElseBranch, reason) {\n    if (runElseBranch === void 0) {\n      runElseBranch = true;\n    }\n    if (reason === void 0) {\n      reason = 'hover';\n    }\n    const closeDelay = getDelay(delayRef.current, 'close', pointerTypeRef.current);\n    if (closeDelay && !handlerRef.current) {\n      clearTimeoutIfSet(timeoutRef);\n      timeoutRef.current = window.setTimeout(() => onOpenChange(false, event, reason), closeDelay);\n    } else if (runElseBranch) {\n      clearTimeoutIfSet(timeoutRef);\n      onOpenChange(false, event, reason);\n    }\n  }, [delayRef, onOpenChange]);\n  const cleanupMouseMoveHandler = useEffectEvent(() => {\n    unbindMouseMoveRef.current();\n    handlerRef.current = undefined;\n  });\n  const clearPointerEvents = useEffectEvent(() => {\n    if (performedPointerEventsMutationRef.current) {\n      const body = getDocument$1(elements.floating).body;\n      body.style.pointerEvents = '';\n      body.removeAttribute(safePolygonIdentifier);\n      performedPointerEventsMutationRef.current = false;\n    }\n  });\n  const isClickLikeOpenEvent = useEffectEvent(() => {\n    return dataRef.current.openEvent ? ['click', 'mousedown'].includes(dataRef.current.openEvent.type) : false;\n  });\n\n  // Registering the mouse events on the reference directly to bypass React's\n  // delegation system. If the cursor was on a disabled element and then entered\n  // the reference (no gap), `mouseenter` doesn't fire in the delegation system.\n  React.useEffect(() => {\n    if (!enabled) return;\n    function onReferenceMouseEnter(event) {\n      clearTimeoutIfSet(timeoutRef);\n      blockMouseMoveRef.current = false;\n      if (mouseOnly && !isMouseLikePointerType(pointerTypeRef.current) || getRestMs(restMsRef.current) > 0 && !getDelay(delayRef.current, 'open')) {\n        return;\n      }\n      const openDelay = getDelay(delayRef.current, 'open', pointerTypeRef.current);\n      if (openDelay) {\n        timeoutRef.current = window.setTimeout(() => {\n          if (!openRef.current) {\n            onOpenChange(true, event, 'hover');\n          }\n        }, openDelay);\n      } else if (!open) {\n        onOpenChange(true, event, 'hover');\n      }\n    }\n    function onReferenceMouseLeave(event) {\n      if (isClickLikeOpenEvent()) {\n        clearPointerEvents();\n        return;\n      }\n      unbindMouseMoveRef.current();\n      const doc = getDocument$1(elements.floating);\n      clearTimeoutIfSet(restTimeoutRef);\n      restTimeoutPendingRef.current = false;\n      if (handleCloseRef.current && dataRef.current.floatingContext) {\n        // Prevent clearing `onScrollMouseLeave` timeout.\n        if (!open) {\n          clearTimeoutIfSet(timeoutRef);\n        }\n        handlerRef.current = handleCloseRef.current({\n          ...dataRef.current.floatingContext,\n          tree,\n          x: event.clientX,\n          y: event.clientY,\n          onClose() {\n            clearPointerEvents();\n            cleanupMouseMoveHandler();\n            if (!isClickLikeOpenEvent()) {\n              closeWithDelay(event, true, 'safe-polygon');\n            }\n          }\n        });\n        const handler = handlerRef.current;\n        doc.addEventListener('mousemove', handler);\n        unbindMouseMoveRef.current = () => {\n          doc.removeEventListener('mousemove', handler);\n        };\n        return;\n      }\n\n      // Allow interactivity without `safePolygon` on touch devices. With a\n      // pointer, a short close delay is an alternative, so it should work\n      // consistently.\n      const shouldClose = pointerTypeRef.current === 'touch' ? !contains$1(elements.floating, event.relatedTarget) : true;\n      if (shouldClose) {\n        closeWithDelay(event);\n      }\n    }\n\n    // Ensure the floating element closes after scrolling even if the pointer\n    // did not move.\n    // https://github.com/floating-ui/floating-ui/discussions/1692\n    function onScrollMouseLeave(event) {\n      if (isClickLikeOpenEvent()) return;\n      if (!dataRef.current.floatingContext) return;\n      handleCloseRef.current == null || handleCloseRef.current({\n        ...dataRef.current.floatingContext,\n        tree,\n        x: event.clientX,\n        y: event.clientY,\n        onClose() {\n          clearPointerEvents();\n          cleanupMouseMoveHandler();\n          if (!isClickLikeOpenEvent()) {\n            closeWithDelay(event);\n          }\n        }\n      })(event);\n    }\n    function onFloatingMouseEnter() {\n      clearTimeoutIfSet(timeoutRef);\n    }\n    function onFloatingMouseLeave(event) {\n      if (!isClickLikeOpenEvent()) {\n        closeWithDelay(event, false);\n      }\n    }\n    if (isElement(elements.domReference)) {\n      const reference = elements.domReference;\n      const floating = elements.floating;\n      if (open) {\n        reference.addEventListener('mouseleave', onScrollMouseLeave);\n      }\n      if (move) {\n        reference.addEventListener('mousemove', onReferenceMouseEnter, {\n          once: true\n        });\n      }\n      reference.addEventListener('mouseenter', onReferenceMouseEnter);\n      reference.addEventListener('mouseleave', onReferenceMouseLeave);\n      if (floating) {\n        floating.addEventListener('mouseleave', onScrollMouseLeave);\n        floating.addEventListener('mouseenter', onFloatingMouseEnter);\n        floating.addEventListener('mouseleave', onFloatingMouseLeave);\n      }\n      return () => {\n        if (open) {\n          reference.removeEventListener('mouseleave', onScrollMouseLeave);\n        }\n        if (move) {\n          reference.removeEventListener('mousemove', onReferenceMouseEnter);\n        }\n        reference.removeEventListener('mouseenter', onReferenceMouseEnter);\n        reference.removeEventListener('mouseleave', onReferenceMouseLeave);\n        if (floating) {\n          floating.removeEventListener('mouseleave', onScrollMouseLeave);\n          floating.removeEventListener('mouseenter', onFloatingMouseEnter);\n          floating.removeEventListener('mouseleave', onFloatingMouseLeave);\n        }\n      };\n    }\n  }, [elements, enabled, context, mouseOnly, move, closeWithDelay, cleanupMouseMoveHandler, clearPointerEvents, onOpenChange, open, openRef, tree, delayRef, handleCloseRef, dataRef, isClickLikeOpenEvent, restMsRef]);\n\n  // Block pointer-events of every element other than the reference and floating\n  // while the floating element is open and has a `handleClose` handler. Also\n  // handles nested floating elements.\n  // https://github.com/floating-ui/floating-ui/issues/1722\n  useModernLayoutEffect(() => {\n    var _handleCloseRef$curre;\n    if (!enabled) return;\n    if (open && (_handleCloseRef$curre = handleCloseRef.current) != null && (_handleCloseRef$curre = _handleCloseRef$curre.__options) != null && _handleCloseRef$curre.blockPointerEvents && isHoverOpen()) {\n      performedPointerEventsMutationRef.current = true;\n      const floatingEl = elements.floating;\n      if (isElement(elements.domReference) && floatingEl) {\n        var _tree$nodesRef$curren;\n        const body = getDocument$1(elements.floating).body;\n        body.setAttribute(safePolygonIdentifier, '');\n        const ref = elements.domReference;\n        const parentFloating = tree == null || (_tree$nodesRef$curren = tree.nodesRef.current.find(node => node.id === parentId)) == null || (_tree$nodesRef$curren = _tree$nodesRef$curren.context) == null ? void 0 : _tree$nodesRef$curren.elements.floating;\n        if (parentFloating) {\n          parentFloating.style.pointerEvents = '';\n        }\n        body.style.pointerEvents = 'none';\n        ref.style.pointerEvents = 'auto';\n        floatingEl.style.pointerEvents = 'auto';\n        return () => {\n          body.style.pointerEvents = '';\n          ref.style.pointerEvents = '';\n          floatingEl.style.pointerEvents = '';\n        };\n      }\n    }\n  }, [enabled, open, parentId, elements, tree, handleCloseRef, isHoverOpen]);\n  useModernLayoutEffect(() => {\n    if (!open) {\n      pointerTypeRef.current = undefined;\n      restTimeoutPendingRef.current = false;\n      cleanupMouseMoveHandler();\n      clearPointerEvents();\n    }\n  }, [open, cleanupMouseMoveHandler, clearPointerEvents]);\n  React.useEffect(() => {\n    return () => {\n      cleanupMouseMoveHandler();\n      clearTimeoutIfSet(timeoutRef);\n      clearTimeoutIfSet(restTimeoutRef);\n      clearPointerEvents();\n    };\n  }, [enabled, elements.domReference, cleanupMouseMoveHandler, clearPointerEvents]);\n  const reference = React.useMemo(() => {\n    function setPointerRef(event) {\n      pointerTypeRef.current = event.pointerType;\n    }\n    return {\n      onPointerDown: setPointerRef,\n      onPointerEnter: setPointerRef,\n      onMouseMove(event) {\n        const {\n          nativeEvent\n        } = event;\n        function handleMouseMove() {\n          if (!blockMouseMoveRef.current && !openRef.current) {\n            onOpenChange(true, nativeEvent, 'hover');\n          }\n        }\n        if (mouseOnly && !isMouseLikePointerType(pointerTypeRef.current)) {\n          return;\n        }\n        if (open || getRestMs(restMsRef.current) === 0) {\n          return;\n        }\n\n        // Ignore insignificant movements to account for tremors.\n        if (restTimeoutPendingRef.current && event.movementX ** 2 + event.movementY ** 2 < 2) {\n          return;\n        }\n        clearTimeoutIfSet(restTimeoutRef);\n        if (pointerTypeRef.current === 'touch') {\n          handleMouseMove();\n        } else {\n          restTimeoutPendingRef.current = true;\n          restTimeoutRef.current = window.setTimeout(handleMouseMove, getRestMs(restMsRef.current));\n        }\n      }\n    };\n  }, [mouseOnly, onOpenChange, open, openRef, restMsRef]);\n  return React.useMemo(() => enabled ? {\n    reference\n  } : {}, [enabled, reference]);\n}\n\nconst NOOP = () => {};\nconst FloatingDelayGroupContext = /*#__PURE__*/React.createContext({\n  delay: 0,\n  initialDelay: 0,\n  timeoutMs: 0,\n  currentId: null,\n  setCurrentId: NOOP,\n  setState: NOOP,\n  isInstantPhase: false\n});\n\n/**\n * @deprecated\n * Use the return value of `useDelayGroup()` instead.\n */\nconst useDelayGroupContext = () => React.useContext(FloatingDelayGroupContext);\n/**\n * Provides context for a group of floating elements that should share a\n * `delay`.\n * @see https://floating-ui.com/docs/FloatingDelayGroup\n */\nfunction FloatingDelayGroup(props) {\n  const {\n    children,\n    delay,\n    timeoutMs = 0\n  } = props;\n  const [state, setState] = React.useReducer((prev, next) => ({\n    ...prev,\n    ...next\n  }), {\n    delay,\n    timeoutMs,\n    initialDelay: delay,\n    currentId: null,\n    isInstantPhase: false\n  });\n  const initialCurrentIdRef = React.useRef(null);\n  const setCurrentId = React.useCallback(currentId => {\n    setState({\n      currentId\n    });\n  }, []);\n  useModernLayoutEffect(() => {\n    if (state.currentId) {\n      if (initialCurrentIdRef.current === null) {\n        initialCurrentIdRef.current = state.currentId;\n      } else if (!state.isInstantPhase) {\n        setState({\n          isInstantPhase: true\n        });\n      }\n    } else {\n      if (state.isInstantPhase) {\n        setState({\n          isInstantPhase: false\n        });\n      }\n      initialCurrentIdRef.current = null;\n    }\n  }, [state.currentId, state.isInstantPhase]);\n  return /*#__PURE__*/jsx(FloatingDelayGroupContext.Provider, {\n    value: React.useMemo(() => ({\n      ...state,\n      setState,\n      setCurrentId\n    }), [state, setCurrentId]),\n    children: children\n  });\n}\n/**\n * Enables grouping when called inside a component that's a child of a\n * `FloatingDelayGroup`.\n * @see https://floating-ui.com/docs/FloatingDelayGroup\n */\nfunction useDelayGroup(context, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    open,\n    onOpenChange,\n    floatingId\n  } = context;\n  const {\n    id: optionId,\n    enabled = true\n  } = options;\n  const id = optionId != null ? optionId : floatingId;\n  const groupContext = useDelayGroupContext();\n  const {\n    currentId,\n    setCurrentId,\n    initialDelay,\n    setState,\n    timeoutMs\n  } = groupContext;\n  useModernLayoutEffect(() => {\n    if (!enabled) return;\n    if (!currentId) return;\n    setState({\n      delay: {\n        open: 1,\n        close: getDelay(initialDelay, 'close')\n      }\n    });\n    if (currentId !== id) {\n      onOpenChange(false);\n    }\n  }, [enabled, id, onOpenChange, setState, currentId, initialDelay]);\n  useModernLayoutEffect(() => {\n    function unset() {\n      onOpenChange(false);\n      setState({\n        delay: initialDelay,\n        currentId: null\n      });\n    }\n    if (!enabled) return;\n    if (!currentId) return;\n    if (!open && currentId === id) {\n      if (timeoutMs) {\n        const timeout = window.setTimeout(unset, timeoutMs);\n        return () => {\n          clearTimeout(timeout);\n        };\n      }\n      unset();\n    }\n  }, [enabled, open, setState, currentId, id, onOpenChange, initialDelay, timeoutMs]);\n  useModernLayoutEffect(() => {\n    if (!enabled) return;\n    if (setCurrentId === NOOP || !open) return;\n    setCurrentId(id);\n  }, [enabled, open, setCurrentId, id]);\n  return groupContext;\n}\n\nconst NextFloatingDelayGroupContext = /*#__PURE__*/React.createContext({\n  hasProvider: false,\n  timeoutMs: 0,\n  delayRef: {\n    current: 0\n  },\n  initialDelayRef: {\n    current: 0\n  },\n  timeoutIdRef: {\n    current: -1\n  },\n  currentIdRef: {\n    current: null\n  },\n  currentContextRef: {\n    current: null\n  }\n});\n/**\n * Experimental next version of `FloatingDelayGroup` to become the default\n * in the future. This component is not yet stable.\n * Provides context for a group of floating elements that should share a\n * `delay`. Unlike `FloatingDelayGroup`, `useNextDelayGroup` with this\n * component does not cause a re-render of unrelated consumers of the\n * context when the delay changes.\n * @see https://floating-ui.com/docs/FloatingDelayGroup\n */\nfunction NextFloatingDelayGroup(props) {\n  const {\n    children,\n    delay,\n    timeoutMs = 0\n  } = props;\n  const delayRef = React.useRef(delay);\n  const initialDelayRef = React.useRef(delay);\n  const currentIdRef = React.useRef(null);\n  const currentContextRef = React.useRef(null);\n  const timeoutIdRef = React.useRef(-1);\n  return /*#__PURE__*/jsx(NextFloatingDelayGroupContext.Provider, {\n    value: React.useMemo(() => ({\n      hasProvider: true,\n      delayRef,\n      initialDelayRef,\n      currentIdRef,\n      timeoutMs,\n      currentContextRef,\n      timeoutIdRef\n    }), [timeoutMs]),\n    children: children\n  });\n}\n/**\n * Enables grouping when called inside a component that's a child of a\n * `NextFloatingDelayGroup`.\n * @see https://floating-ui.com/docs/FloatingDelayGroup\n */\nfunction useNextDelayGroup(context, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    open,\n    onOpenChange,\n    floatingId\n  } = context;\n  const {\n    enabled = true\n  } = options;\n  const groupContext = React.useContext(NextFloatingDelayGroupContext);\n  const {\n    currentIdRef,\n    delayRef,\n    timeoutMs,\n    initialDelayRef,\n    currentContextRef,\n    hasProvider,\n    timeoutIdRef\n  } = groupContext;\n  const [isInstantPhase, setIsInstantPhase] = React.useState(false);\n  useModernLayoutEffect(() => {\n    function unset() {\n      var _currentContextRef$cu;\n      setIsInstantPhase(false);\n      (_currentContextRef$cu = currentContextRef.current) == null || _currentContextRef$cu.setIsInstantPhase(false);\n      currentIdRef.current = null;\n      currentContextRef.current = null;\n      delayRef.current = initialDelayRef.current;\n    }\n    if (!enabled) return;\n    if (!currentIdRef.current) return;\n    if (!open && currentIdRef.current === floatingId) {\n      setIsInstantPhase(false);\n      if (timeoutMs) {\n        timeoutIdRef.current = window.setTimeout(unset, timeoutMs);\n        return () => {\n          clearTimeout(timeoutIdRef.current);\n        };\n      }\n      unset();\n    }\n  }, [enabled, open, floatingId, currentIdRef, delayRef, timeoutMs, initialDelayRef, currentContextRef, timeoutIdRef]);\n  useModernLayoutEffect(() => {\n    if (!enabled) return;\n    if (!open) return;\n    const prevContext = currentContextRef.current;\n    const prevId = currentIdRef.current;\n    currentContextRef.current = {\n      onOpenChange,\n      setIsInstantPhase\n    };\n    currentIdRef.current = floatingId;\n    delayRef.current = {\n      open: 0,\n      close: getDelay(initialDelayRef.current, 'close')\n    };\n    if (prevId !== null && prevId !== floatingId) {\n      clearTimeoutIfSet(timeoutIdRef);\n      setIsInstantPhase(true);\n      prevContext == null || prevContext.setIsInstantPhase(true);\n      prevContext == null || prevContext.onOpenChange(false);\n    } else {\n      setIsInstantPhase(false);\n      prevContext == null || prevContext.setIsInstantPhase(false);\n    }\n  }, [enabled, open, floatingId, onOpenChange, currentIdRef, delayRef, timeoutMs, initialDelayRef, currentContextRef, timeoutIdRef]);\n  useModernLayoutEffect(() => {\n    return () => {\n      currentContextRef.current = null;\n    };\n  }, [currentContextRef]);\n  return React.useMemo(() => ({\n    hasProvider,\n    delayRef,\n    isInstantPhase\n  }), [hasProvider, delayRef, isInstantPhase]);\n}\n\nlet rafId = 0;\nfunction enqueueFocus(el, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    preventScroll = false,\n    cancelPrevious = true,\n    sync = false\n  } = options;\n  cancelPrevious && cancelAnimationFrame(rafId);\n  const exec = () => el == null ? void 0 : el.focus({\n    preventScroll\n  });\n  if (sync) {\n    exec();\n  } else {\n    rafId = requestAnimationFrame(exec);\n  }\n}\n\nfunction contains(parent, child) {\n  if (!parent || !child) {\n    return false;\n  }\n  const rootNode = child.getRootNode == null ? void 0 : child.getRootNode();\n\n  // First, attempt with faster native method\n  if (parent.contains(child)) {\n    return true;\n  }\n\n  // then fallback to custom implementation with Shadow DOM support\n  if (rootNode && isShadowRoot(rootNode)) {\n    let next = child;\n    while (next) {\n      if (parent === next) {\n        return true;\n      }\n      // @ts-ignore\n      next = next.parentNode || next.host;\n    }\n  }\n\n  // Give up, the result is false\n  return false;\n}\nfunction getTarget(event) {\n  if ('composedPath' in event) {\n    return event.composedPath()[0];\n  }\n\n  // TS thinks `event` is of type never as it assumes all browsers support\n  // `composedPath()`, but browsers without shadow DOM don't.\n  return event.target;\n}\nfunction getDocument(node) {\n  return (node == null ? void 0 : node.ownerDocument) || document;\n}\n\n// Modified to add conditional `aria-hidden` support:\n// https://github.com/theKashey/aria-hidden/blob/9220c8f4a4fd35f63bee5510a9f41a37264382d4/src/index.ts\nconst counters = {\n  inert: /*#__PURE__*/new WeakMap(),\n  'aria-hidden': /*#__PURE__*/new WeakMap(),\n  none: /*#__PURE__*/new WeakMap()\n};\nfunction getCounterMap(control) {\n  if (control === 'inert') return counters.inert;\n  if (control === 'aria-hidden') return counters['aria-hidden'];\n  return counters.none;\n}\nlet uncontrolledElementsSet = /*#__PURE__*/new WeakSet();\nlet markerMap = {};\nlet lockCount$1 = 0;\nconst supportsInert = () => typeof HTMLElement !== 'undefined' && 'inert' in HTMLElement.prototype;\nconst unwrapHost = node => node && (node.host || unwrapHost(node.parentNode));\nconst correctElements = (parent, targets) => targets.map(target => {\n  if (parent.contains(target)) {\n    return target;\n  }\n  const correctedTarget = unwrapHost(target);\n  if (parent.contains(correctedTarget)) {\n    return correctedTarget;\n  }\n  return null;\n}).filter(x => x != null);\nfunction applyAttributeToOthers(uncorrectedAvoidElements, body, ariaHidden, inert) {\n  const markerName = 'data-floating-ui-inert';\n  const controlAttribute = inert ? 'inert' : ariaHidden ? 'aria-hidden' : null;\n  const avoidElements = correctElements(body, uncorrectedAvoidElements);\n  const elementsToKeep = new Set();\n  const elementsToStop = new Set(avoidElements);\n  const hiddenElements = [];\n  if (!markerMap[markerName]) {\n    markerMap[markerName] = new WeakMap();\n  }\n  const markerCounter = markerMap[markerName];\n  avoidElements.forEach(keep);\n  deep(body);\n  elementsToKeep.clear();\n  function keep(el) {\n    if (!el || elementsToKeep.has(el)) {\n      return;\n    }\n    elementsToKeep.add(el);\n    el.parentNode && keep(el.parentNode);\n  }\n  function deep(parent) {\n    if (!parent || elementsToStop.has(parent)) {\n      return;\n    }\n    [].forEach.call(parent.children, node => {\n      if (getNodeName(node) === 'script') return;\n      if (elementsToKeep.has(node)) {\n        deep(node);\n      } else {\n        const attr = controlAttribute ? node.getAttribute(controlAttribute) : null;\n        const alreadyHidden = attr !== null && attr !== 'false';\n        const counterMap = getCounterMap(controlAttribute);\n        const counterValue = (counterMap.get(node) || 0) + 1;\n        const markerValue = (markerCounter.get(node) || 0) + 1;\n        counterMap.set(node, counterValue);\n        markerCounter.set(node, markerValue);\n        hiddenElements.push(node);\n        if (counterValue === 1 && alreadyHidden) {\n          uncontrolledElementsSet.add(node);\n        }\n        if (markerValue === 1) {\n          node.setAttribute(markerName, '');\n        }\n        if (!alreadyHidden && controlAttribute) {\n          node.setAttribute(controlAttribute, controlAttribute === 'inert' ? '' : 'true');\n        }\n      }\n    });\n  }\n  lockCount$1++;\n  return () => {\n    hiddenElements.forEach(element => {\n      const counterMap = getCounterMap(controlAttribute);\n      const currentCounterValue = counterMap.get(element) || 0;\n      const counterValue = currentCounterValue - 1;\n      const markerValue = (markerCounter.get(element) || 0) - 1;\n      counterMap.set(element, counterValue);\n      markerCounter.set(element, markerValue);\n      if (!counterValue) {\n        if (!uncontrolledElementsSet.has(element) && controlAttribute) {\n          element.removeAttribute(controlAttribute);\n        }\n        uncontrolledElementsSet.delete(element);\n      }\n      if (!markerValue) {\n        element.removeAttribute(markerName);\n      }\n    });\n    lockCount$1--;\n    if (!lockCount$1) {\n      counters.inert = new WeakMap();\n      counters['aria-hidden'] = new WeakMap();\n      counters.none = new WeakMap();\n      uncontrolledElementsSet = new WeakSet();\n      markerMap = {};\n    }\n  };\n}\nfunction markOthers(avoidElements, ariaHidden, inert) {\n  if (ariaHidden === void 0) {\n    ariaHidden = false;\n  }\n  if (inert === void 0) {\n    inert = false;\n  }\n  const body = getDocument(avoidElements[0]).body;\n  return applyAttributeToOthers(avoidElements.concat(Array.from(body.querySelectorAll('[aria-live],[role=\"status\"],output'))), body, ariaHidden, inert);\n}\n\nconst HIDDEN_STYLES = {\n  border: 0,\n  clip: 'rect(0 0 0 0)',\n  height: '1px',\n  margin: '-1px',\n  overflow: 'hidden',\n  padding: 0,\n  position: 'fixed',\n  whiteSpace: 'nowrap',\n  width: '1px',\n  top: 0,\n  left: 0\n};\nconst FocusGuard = /*#__PURE__*/React.forwardRef(function FocusGuard(props, ref) {\n  const [role, setRole] = React.useState();\n  useModernLayoutEffect(() => {\n    if (isSafari()) {\n      // Unlike other screen readers such as NVDA and JAWS, the virtual cursor\n      // on VoiceOver does trigger the onFocus event, so we can use the focus\n      // trap element. On Safari, only buttons trigger the onFocus event.\n      // NB: \"group\" role in the Sandbox no longer appears to work, must be a\n      // button role.\n      setRole('button');\n    }\n  }, []);\n  const restProps = {\n    ref,\n    tabIndex: 0,\n    // Role is only for VoiceOver\n    role,\n    'aria-hidden': role ? undefined : true,\n    [createAttribute('focus-guard')]: '',\n    style: HIDDEN_STYLES\n  };\n  return /*#__PURE__*/jsx(\"span\", {\n    ...props,\n    ...restProps\n  });\n});\n\nconst PortalContext = /*#__PURE__*/React.createContext(null);\nconst attr = /*#__PURE__*/createAttribute('portal');\n/**\n * @see https://floating-ui.com/docs/FloatingPortal#usefloatingportalnode\n */\nfunction useFloatingPortalNode(props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    id,\n    root\n  } = props;\n  const uniqueId = useId();\n  const portalContext = usePortalContext();\n  const [portalNode, setPortalNode] = React.useState(null);\n  const portalNodeRef = React.useRef(null);\n  useModernLayoutEffect(() => {\n    return () => {\n      portalNode == null || portalNode.remove();\n      // Allow the subsequent layout effects to create a new node on updates.\n      // The portal node will still be cleaned up on unmount.\n      // https://github.com/floating-ui/floating-ui/issues/2454\n      queueMicrotask(() => {\n        portalNodeRef.current = null;\n      });\n    };\n  }, [portalNode]);\n  useModernLayoutEffect(() => {\n    // Wait for the uniqueId to be generated before creating the portal node in\n    // React <18 (using `useFloatingId` instead of the native `useId`).\n    // https://github.com/floating-ui/floating-ui/issues/2778\n    if (!uniqueId) return;\n    if (portalNodeRef.current) return;\n    const existingIdRoot = id ? document.getElementById(id) : null;\n    if (!existingIdRoot) return;\n    const subRoot = document.createElement('div');\n    subRoot.id = uniqueId;\n    subRoot.setAttribute(attr, '');\n    existingIdRoot.appendChild(subRoot);\n    portalNodeRef.current = subRoot;\n    setPortalNode(subRoot);\n  }, [id, uniqueId]);\n  useModernLayoutEffect(() => {\n    // Wait for the root to exist before creating the portal node. The root must\n    // be stored in state, not a ref, for this to work reactively.\n    if (root === null) return;\n    if (!uniqueId) return;\n    if (portalNodeRef.current) return;\n    let container = root || (portalContext == null ? void 0 : portalContext.portalNode);\n    if (container && !isNode(container)) container = container.current;\n    container = container || document.body;\n    let idWrapper = null;\n    if (id) {\n      idWrapper = document.createElement('div');\n      idWrapper.id = id;\n      container.appendChild(idWrapper);\n    }\n    const subRoot = document.createElement('div');\n    subRoot.id = uniqueId;\n    subRoot.setAttribute(attr, '');\n    container = idWrapper || container;\n    container.appendChild(subRoot);\n    portalNodeRef.current = subRoot;\n    setPortalNode(subRoot);\n  }, [id, root, uniqueId, portalContext]);\n  return portalNode;\n}\n/**\n * Portals the floating element into a given container element  by default,\n * outside of the app root and into the body.\n * This is necessary to ensure the floating element can appear outside any\n * potential parent containers that cause clipping (such as `overflow: hidden`),\n * while retaining its location in the React tree.\n * @see https://floating-ui.com/docs/FloatingPortal\n */\nfunction FloatingPortal(props) {\n  const {\n    children,\n    id,\n    root,\n    preserveTabOrder = true\n  } = props;\n  const portalNode = useFloatingPortalNode({\n    id,\n    root\n  });\n  const [focusManagerState, setFocusManagerState] = React.useState(null);\n  const beforeOutsideRef = React.useRef(null);\n  const afterOutsideRef = React.useRef(null);\n  const beforeInsideRef = React.useRef(null);\n  const afterInsideRef = React.useRef(null);\n  const modal = focusManagerState == null ? void 0 : focusManagerState.modal;\n  const open = focusManagerState == null ? void 0 : focusManagerState.open;\n  const shouldRenderGuards =\n  // The FocusManager and therefore floating element are currently open/\n  // rendered.\n  !!focusManagerState &&\n  // Guards are only for non-modal focus management.\n  !focusManagerState.modal &&\n  // Don't render if unmount is transitioning.\n  focusManagerState.open && preserveTabOrder && !!(root || portalNode);\n\n  // https://codesandbox.io/s/tabbable-portal-f4tng?file=/src/TabbablePortal.tsx\n  React.useEffect(() => {\n    if (!portalNode || !preserveTabOrder || modal) {\n      return;\n    }\n\n    // Make sure elements inside the portal element are tabbable only when the\n    // portal has already been focused, either by tabbing into a focus trap\n    // element outside or using the mouse.\n    function onFocus(event) {\n      if (portalNode && isOutsideEvent(event)) {\n        const focusing = event.type === 'focusin';\n        const manageFocus = focusing ? enableFocusInside : disableFocusInside;\n        manageFocus(portalNode);\n      }\n    }\n    // Listen to the event on the capture phase so they run before the focus\n    // trap elements onFocus prop is called.\n    portalNode.addEventListener('focusin', onFocus, true);\n    portalNode.addEventListener('focusout', onFocus, true);\n    return () => {\n      portalNode.removeEventListener('focusin', onFocus, true);\n      portalNode.removeEventListener('focusout', onFocus, true);\n    };\n  }, [portalNode, preserveTabOrder, modal]);\n  React.useEffect(() => {\n    if (!portalNode) return;\n    if (open) return;\n    enableFocusInside(portalNode);\n  }, [open, portalNode]);\n  return /*#__PURE__*/jsxs(PortalContext.Provider, {\n    value: React.useMemo(() => ({\n      preserveTabOrder,\n      beforeOutsideRef,\n      afterOutsideRef,\n      beforeInsideRef,\n      afterInsideRef,\n      portalNode,\n      setFocusManagerState\n    }), [preserveTabOrder, portalNode]),\n    children: [shouldRenderGuards && portalNode && /*#__PURE__*/jsx(FocusGuard, {\n      \"data-type\": \"outside\",\n      ref: beforeOutsideRef,\n      onFocus: event => {\n        if (isOutsideEvent(event, portalNode)) {\n          var _beforeInsideRef$curr;\n          (_beforeInsideRef$curr = beforeInsideRef.current) == null || _beforeInsideRef$curr.focus();\n        } else {\n          const domReference = focusManagerState ? focusManagerState.domReference : null;\n          const prevTabbable = getPreviousTabbable(domReference);\n          prevTabbable == null || prevTabbable.focus();\n        }\n      }\n    }), shouldRenderGuards && portalNode && /*#__PURE__*/jsx(\"span\", {\n      \"aria-owns\": portalNode.id,\n      style: HIDDEN_STYLES\n    }), portalNode && /*#__PURE__*/ReactDOM.createPortal(children, portalNode), shouldRenderGuards && portalNode && /*#__PURE__*/jsx(FocusGuard, {\n      \"data-type\": \"outside\",\n      ref: afterOutsideRef,\n      onFocus: event => {\n        if (isOutsideEvent(event, portalNode)) {\n          var _afterInsideRef$curre;\n          (_afterInsideRef$curre = afterInsideRef.current) == null || _afterInsideRef$curre.focus();\n        } else {\n          const domReference = focusManagerState ? focusManagerState.domReference : null;\n          const nextTabbable = getNextTabbable(domReference);\n          nextTabbable == null || nextTabbable.focus();\n          (focusManagerState == null ? void 0 : focusManagerState.closeOnFocusOut) && (focusManagerState == null ? void 0 : focusManagerState.onOpenChange(false, event.nativeEvent, 'focus-out'));\n        }\n      }\n    })]\n  });\n}\nconst usePortalContext = () => React.useContext(PortalContext);\n\nfunction useLiteMergeRefs(refs) {\n  return React.useMemo(() => {\n    return value => {\n      refs.forEach(ref => {\n        if (ref) {\n          ref.current = value;\n        }\n      });\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, refs);\n}\n\nconst LIST_LIMIT = 20;\nlet previouslyFocusedElements = [];\nfunction clearDisconnectedPreviouslyFocusedElements() {\n  previouslyFocusedElements = previouslyFocusedElements.filter(el => el.isConnected);\n}\nfunction addPreviouslyFocusedElement(element) {\n  clearDisconnectedPreviouslyFocusedElements();\n  if (element && getNodeName(element) !== 'body') {\n    previouslyFocusedElements.push(element);\n    if (previouslyFocusedElements.length > LIST_LIMIT) {\n      previouslyFocusedElements = previouslyFocusedElements.slice(-20);\n    }\n  }\n}\nfunction getPreviouslyFocusedElement() {\n  clearDisconnectedPreviouslyFocusedElements();\n  return previouslyFocusedElements[previouslyFocusedElements.length - 1];\n}\nfunction getFirstTabbableElement(container) {\n  const tabbableOptions = getTabbableOptions();\n  if (isTabbable(container, tabbableOptions)) {\n    return container;\n  }\n  return tabbable(container, tabbableOptions)[0] || container;\n}\nfunction handleTabIndex(floatingFocusElement, orderRef) {\n  var _floatingFocusElement;\n  if (!orderRef.current.includes('floating') && !((_floatingFocusElement = floatingFocusElement.getAttribute('role')) != null && _floatingFocusElement.includes('dialog'))) {\n    return;\n  }\n  const options = getTabbableOptions();\n  const focusableElements = focusable(floatingFocusElement, options);\n  const tabbableContent = focusableElements.filter(element => {\n    const dataTabIndex = element.getAttribute('data-tabindex') || '';\n    return isTabbable(element, options) || element.hasAttribute('data-tabindex') && !dataTabIndex.startsWith('-');\n  });\n  const tabIndex = floatingFocusElement.getAttribute('tabindex');\n  if (orderRef.current.includes('floating') || tabbableContent.length === 0) {\n    if (tabIndex !== '0') {\n      floatingFocusElement.setAttribute('tabindex', '0');\n    }\n  } else if (tabIndex !== '-1' || floatingFocusElement.hasAttribute('data-tabindex') && floatingFocusElement.getAttribute('data-tabindex') !== '-1') {\n    floatingFocusElement.setAttribute('tabindex', '-1');\n    floatingFocusElement.setAttribute('data-tabindex', '-1');\n  }\n}\nconst VisuallyHiddenDismiss = /*#__PURE__*/React.forwardRef(function VisuallyHiddenDismiss(props, ref) {\n  return /*#__PURE__*/jsx(\"button\", {\n    ...props,\n    type: \"button\",\n    ref: ref,\n    tabIndex: -1,\n    style: HIDDEN_STYLES\n  });\n});\n/**\n * Provides focus management for the floating element.\n * @see https://floating-ui.com/docs/FloatingFocusManager\n */\nfunction FloatingFocusManager(props) {\n  const {\n    context,\n    children,\n    disabled = false,\n    order = ['content'],\n    guards: _guards = true,\n    initialFocus = 0,\n    returnFocus = true,\n    restoreFocus = false,\n    modal = true,\n    visuallyHiddenDismiss = false,\n    closeOnFocusOut = true,\n    outsideElementsInert = false,\n    getInsideElements: _getInsideElements = () => []\n  } = props;\n  const {\n    open,\n    onOpenChange,\n    events,\n    dataRef,\n    elements: {\n      domReference,\n      floating\n    }\n  } = context;\n  const getNodeId = useEffectEvent(() => {\n    var _dataRef$current$floa;\n    return (_dataRef$current$floa = dataRef.current.floatingContext) == null ? void 0 : _dataRef$current$floa.nodeId;\n  });\n  const getInsideElements = useEffectEvent(_getInsideElements);\n  const ignoreInitialFocus = typeof initialFocus === 'number' && initialFocus < 0;\n  // If the reference is a combobox and is typeable (e.g. input/textarea),\n  // there are different focus semantics. The guards should not be rendered, but\n  // aria-hidden should be applied to all nodes still. Further, the visually\n  // hidden dismiss button should only appear at the end of the list, not the\n  // start.\n  const isUntrappedTypeableCombobox = isTypeableCombobox(domReference) && ignoreInitialFocus;\n\n  // Force the guards to be rendered if the `inert` attribute is not supported.\n  const inertSupported = supportsInert();\n  const guards = inertSupported ? _guards : true;\n  const useInert = !guards || inertSupported && outsideElementsInert;\n  const orderRef = useLatestRef(order);\n  const initialFocusRef = useLatestRef(initialFocus);\n  const returnFocusRef = useLatestRef(returnFocus);\n  const tree = useFloatingTree();\n  const portalContext = usePortalContext();\n  const startDismissButtonRef = React.useRef(null);\n  const endDismissButtonRef = React.useRef(null);\n  const preventReturnFocusRef = React.useRef(false);\n  const isPointerDownRef = React.useRef(false);\n  const tabbableIndexRef = React.useRef(-1);\n  const blurTimeoutRef = React.useRef(-1);\n  const isInsidePortal = portalContext != null;\n  const floatingFocusElement = getFloatingFocusElement(floating);\n  const getTabbableContent = useEffectEvent(function (container) {\n    if (container === void 0) {\n      container = floatingFocusElement;\n    }\n    return container ? tabbable(container, getTabbableOptions()) : [];\n  });\n  const getTabbableElements = useEffectEvent(container => {\n    const content = getTabbableContent(container);\n    return orderRef.current.map(type => {\n      if (domReference && type === 'reference') {\n        return domReference;\n      }\n      if (floatingFocusElement && type === 'floating') {\n        return floatingFocusElement;\n      }\n      return content;\n    }).filter(Boolean).flat();\n  });\n  React.useEffect(() => {\n    if (disabled) return;\n    if (!modal) return;\n    function onKeyDown(event) {\n      if (event.key === 'Tab') {\n        // The focus guards have nothing to focus, so we need to stop the event.\n        if (contains$1(floatingFocusElement, activeElement(getDocument$1(floatingFocusElement))) && getTabbableContent().length === 0 && !isUntrappedTypeableCombobox) {\n          stopEvent(event);\n        }\n        const els = getTabbableElements();\n        const target = getTarget$1(event);\n        if (orderRef.current[0] === 'reference' && target === domReference) {\n          stopEvent(event);\n          if (event.shiftKey) {\n            enqueueFocus(els[els.length - 1]);\n          } else {\n            enqueueFocus(els[1]);\n          }\n        }\n        if (orderRef.current[1] === 'floating' && target === floatingFocusElement && event.shiftKey) {\n          stopEvent(event);\n          enqueueFocus(els[0]);\n        }\n      }\n    }\n    const doc = getDocument$1(floatingFocusElement);\n    doc.addEventListener('keydown', onKeyDown);\n    return () => {\n      doc.removeEventListener('keydown', onKeyDown);\n    };\n  }, [disabled, domReference, floatingFocusElement, modal, orderRef, isUntrappedTypeableCombobox, getTabbableContent, getTabbableElements]);\n  React.useEffect(() => {\n    if (disabled) return;\n    if (!floating) return;\n    function handleFocusIn(event) {\n      const target = getTarget$1(event);\n      const tabbableContent = getTabbableContent();\n      const tabbableIndex = tabbableContent.indexOf(target);\n      if (tabbableIndex !== -1) {\n        tabbableIndexRef.current = tabbableIndex;\n      }\n    }\n    floating.addEventListener('focusin', handleFocusIn);\n    return () => {\n      floating.removeEventListener('focusin', handleFocusIn);\n    };\n  }, [disabled, floating, getTabbableContent]);\n  React.useEffect(() => {\n    if (disabled) return;\n    if (!closeOnFocusOut) return;\n\n    // In Safari, buttons lose focus when pressing them.\n    function handlePointerDown() {\n      isPointerDownRef.current = true;\n      setTimeout(() => {\n        isPointerDownRef.current = false;\n      });\n    }\n    function handleFocusOutside(event) {\n      const relatedTarget = event.relatedTarget;\n      const currentTarget = event.currentTarget;\n      const target = getTarget$1(event);\n      queueMicrotask(() => {\n        const nodeId = getNodeId();\n        const movedToUnrelatedNode = !(contains$1(domReference, relatedTarget) || contains$1(floating, relatedTarget) || contains$1(relatedTarget, floating) || contains$1(portalContext == null ? void 0 : portalContext.portalNode, relatedTarget) || relatedTarget != null && relatedTarget.hasAttribute(createAttribute('focus-guard')) || tree && (getNodeChildren$1(tree.nodesRef.current, nodeId).find(node => {\n          var _node$context, _node$context2;\n          return contains$1((_node$context = node.context) == null ? void 0 : _node$context.elements.floating, relatedTarget) || contains$1((_node$context2 = node.context) == null ? void 0 : _node$context2.elements.domReference, relatedTarget);\n        }) || getNodeAncestors(tree.nodesRef.current, nodeId).find(node => {\n          var _node$context3, _node$context4, _node$context5;\n          return [(_node$context3 = node.context) == null ? void 0 : _node$context3.elements.floating, getFloatingFocusElement((_node$context4 = node.context) == null ? void 0 : _node$context4.elements.floating)].includes(relatedTarget) || ((_node$context5 = node.context) == null ? void 0 : _node$context5.elements.domReference) === relatedTarget;\n        })));\n        if (currentTarget === domReference && floatingFocusElement) {\n          handleTabIndex(floatingFocusElement, orderRef);\n        }\n\n        // Restore focus to the previous tabbable element index to prevent\n        // focus from being lost outside the floating tree.\n        if (restoreFocus && currentTarget !== domReference && !(target != null && target.isConnected) && activeElement(getDocument$1(floatingFocusElement)) === getDocument$1(floatingFocusElement).body) {\n          // Let `FloatingPortal` effect knows that focus is still inside the\n          // floating tree.\n          if (isHTMLElement(floatingFocusElement)) {\n            floatingFocusElement.focus();\n          }\n          const prevTabbableIndex = tabbableIndexRef.current;\n          const tabbableContent = getTabbableContent();\n          const nodeToFocus = tabbableContent[prevTabbableIndex] || tabbableContent[tabbableContent.length - 1] || floatingFocusElement;\n          if (isHTMLElement(nodeToFocus)) {\n            nodeToFocus.focus();\n          }\n        }\n\n        // https://github.com/floating-ui/floating-ui/issues/3060\n        if (dataRef.current.insideReactTree) {\n          dataRef.current.insideReactTree = false;\n          return;\n        }\n\n        // Focus did not move inside the floating tree, and there are no tabbable\n        // portal guards to handle closing.\n        if ((isUntrappedTypeableCombobox ? true : !modal) && relatedTarget && movedToUnrelatedNode && !isPointerDownRef.current &&\n        // Fix React 18 Strict Mode returnFocus due to double rendering.\n        relatedTarget !== getPreviouslyFocusedElement()) {\n          preventReturnFocusRef.current = true;\n          onOpenChange(false, event, 'focus-out');\n        }\n      });\n    }\n    const shouldHandleBlurCapture = Boolean(!tree && portalContext);\n    function markInsideReactTree() {\n      clearTimeoutIfSet(blurTimeoutRef);\n      dataRef.current.insideReactTree = true;\n      blurTimeoutRef.current = window.setTimeout(() => {\n        dataRef.current.insideReactTree = false;\n      });\n    }\n    if (floating && isHTMLElement(domReference)) {\n      domReference.addEventListener('focusout', handleFocusOutside);\n      domReference.addEventListener('pointerdown', handlePointerDown);\n      floating.addEventListener('focusout', handleFocusOutside);\n      if (shouldHandleBlurCapture) {\n        floating.addEventListener('focusout', markInsideReactTree, true);\n      }\n      return () => {\n        domReference.removeEventListener('focusout', handleFocusOutside);\n        domReference.removeEventListener('pointerdown', handlePointerDown);\n        floating.removeEventListener('focusout', handleFocusOutside);\n        if (shouldHandleBlurCapture) {\n          floating.removeEventListener('focusout', markInsideReactTree, true);\n        }\n      };\n    }\n  }, [disabled, domReference, floating, floatingFocusElement, modal, tree, portalContext, onOpenChange, closeOnFocusOut, restoreFocus, getTabbableContent, isUntrappedTypeableCombobox, getNodeId, orderRef, dataRef]);\n  const beforeGuardRef = React.useRef(null);\n  const afterGuardRef = React.useRef(null);\n  const mergedBeforeGuardRef = useLiteMergeRefs([beforeGuardRef, portalContext == null ? void 0 : portalContext.beforeInsideRef]);\n  const mergedAfterGuardRef = useLiteMergeRefs([afterGuardRef, portalContext == null ? void 0 : portalContext.afterInsideRef]);\n  React.useEffect(() => {\n    var _portalContext$portal, _ancestors$find;\n    if (disabled) return;\n    if (!floating) return;\n\n    // Don't hide portals nested within the parent portal.\n    const portalNodes = Array.from((portalContext == null || (_portalContext$portal = portalContext.portalNode) == null ? void 0 : _portalContext$portal.querySelectorAll(\"[\" + createAttribute('portal') + \"]\")) || []);\n    const ancestors = tree ? getNodeAncestors(tree.nodesRef.current, getNodeId()) : [];\n    const rootAncestorComboboxDomReference = (_ancestors$find = ancestors.find(node => {\n      var _node$context6;\n      return isTypeableCombobox(((_node$context6 = node.context) == null ? void 0 : _node$context6.elements.domReference) || null);\n    })) == null || (_ancestors$find = _ancestors$find.context) == null ? void 0 : _ancestors$find.elements.domReference;\n    const insideElements = [floating, rootAncestorComboboxDomReference, ...portalNodes, ...getInsideElements(), startDismissButtonRef.current, endDismissButtonRef.current, beforeGuardRef.current, afterGuardRef.current, portalContext == null ? void 0 : portalContext.beforeOutsideRef.current, portalContext == null ? void 0 : portalContext.afterOutsideRef.current, orderRef.current.includes('reference') || isUntrappedTypeableCombobox ? domReference : null].filter(x => x != null);\n    const cleanup = modal || isUntrappedTypeableCombobox ? markOthers(insideElements, !useInert, useInert) : markOthers(insideElements);\n    return () => {\n      cleanup();\n    };\n  }, [disabled, domReference, floating, modal, orderRef, portalContext, isUntrappedTypeableCombobox, guards, useInert, tree, getNodeId, getInsideElements]);\n  useModernLayoutEffect(() => {\n    if (disabled || !isHTMLElement(floatingFocusElement)) return;\n    const doc = getDocument$1(floatingFocusElement);\n    const previouslyFocusedElement = activeElement(doc);\n\n    // Wait for any layout effect state setters to execute to set `tabIndex`.\n    queueMicrotask(() => {\n      const focusableElements = getTabbableElements(floatingFocusElement);\n      const initialFocusValue = initialFocusRef.current;\n      const elToFocus = (typeof initialFocusValue === 'number' ? focusableElements[initialFocusValue] : initialFocusValue.current) || floatingFocusElement;\n      const focusAlreadyInsideFloatingEl = contains$1(floatingFocusElement, previouslyFocusedElement);\n      if (!ignoreInitialFocus && !focusAlreadyInsideFloatingEl && open) {\n        enqueueFocus(elToFocus, {\n          preventScroll: elToFocus === floatingFocusElement\n        });\n      }\n    });\n  }, [disabled, open, floatingFocusElement, ignoreInitialFocus, getTabbableElements, initialFocusRef]);\n  useModernLayoutEffect(() => {\n    if (disabled || !floatingFocusElement) return;\n    const doc = getDocument$1(floatingFocusElement);\n    const previouslyFocusedElement = activeElement(doc);\n    addPreviouslyFocusedElement(previouslyFocusedElement);\n\n    // Dismissing via outside press should always ignore `returnFocus` to\n    // prevent unwanted scrolling.\n    function onOpenChange(_ref) {\n      let {\n        reason,\n        event,\n        nested\n      } = _ref;\n      if (['hover', 'safe-polygon'].includes(reason) && event.type === 'mouseleave') {\n        preventReturnFocusRef.current = true;\n      }\n      if (reason !== 'outside-press') return;\n      if (nested) {\n        preventReturnFocusRef.current = false;\n      } else if (isVirtualClick(event) || isVirtualPointerEvent(event)) {\n        preventReturnFocusRef.current = false;\n      } else {\n        let isPreventScrollSupported = false;\n        document.createElement('div').focus({\n          get preventScroll() {\n            isPreventScrollSupported = true;\n            return false;\n          }\n        });\n        if (isPreventScrollSupported) {\n          preventReturnFocusRef.current = false;\n        } else {\n          preventReturnFocusRef.current = true;\n        }\n      }\n    }\n    events.on('openchange', onOpenChange);\n    const fallbackEl = doc.createElement('span');\n    fallbackEl.setAttribute('tabindex', '-1');\n    fallbackEl.setAttribute('aria-hidden', 'true');\n    Object.assign(fallbackEl.style, HIDDEN_STYLES);\n    if (isInsidePortal && domReference) {\n      domReference.insertAdjacentElement('afterend', fallbackEl);\n    }\n    function getReturnElement() {\n      if (typeof returnFocusRef.current === 'boolean') {\n        const el = domReference || getPreviouslyFocusedElement();\n        return el && el.isConnected ? el : fallbackEl;\n      }\n      return returnFocusRef.current.current || fallbackEl;\n    }\n    return () => {\n      events.off('openchange', onOpenChange);\n      const activeEl = activeElement(doc);\n      const isFocusInsideFloatingTree = contains$1(floating, activeEl) || tree && getNodeChildren$1(tree.nodesRef.current, getNodeId(), false).some(node => {\n        var _node$context7;\n        return contains$1((_node$context7 = node.context) == null ? void 0 : _node$context7.elements.floating, activeEl);\n      });\n      const returnElement = getReturnElement();\n      queueMicrotask(() => {\n        // This is `returnElement`, if it's tabbable, or its first tabbable child.\n        const tabbableReturnElement = getFirstTabbableElement(returnElement);\n        if (\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        returnFocusRef.current && !preventReturnFocusRef.current && isHTMLElement(tabbableReturnElement) && (\n        // If the focus moved somewhere else after mount, avoid returning focus\n        // since it likely entered a different element which should be\n        // respected: https://github.com/floating-ui/floating-ui/issues/2607\n        tabbableReturnElement !== activeEl && activeEl !== doc.body ? isFocusInsideFloatingTree : true)) {\n          tabbableReturnElement.focus({\n            preventScroll: true\n          });\n        }\n        fallbackEl.remove();\n      });\n    };\n  }, [disabled, floating, floatingFocusElement, returnFocusRef, dataRef, events, tree, isInsidePortal, domReference, getNodeId]);\n  React.useEffect(() => {\n    // The `returnFocus` cleanup behavior is inside a microtask; ensure we\n    // wait for it to complete before resetting the flag.\n    queueMicrotask(() => {\n      preventReturnFocusRef.current = false;\n    });\n    return () => {\n      queueMicrotask(clearDisconnectedPreviouslyFocusedElements);\n    };\n  }, [disabled]);\n\n  // Synchronize the `context` & `modal` value to the FloatingPortal context.\n  // It will decide whether or not it needs to render its own guards.\n  useModernLayoutEffect(() => {\n    if (disabled) return;\n    if (!portalContext) return;\n    portalContext.setFocusManagerState({\n      modal,\n      closeOnFocusOut,\n      open,\n      onOpenChange,\n      domReference\n    });\n    return () => {\n      portalContext.setFocusManagerState(null);\n    };\n  }, [disabled, portalContext, modal, open, onOpenChange, closeOnFocusOut, domReference]);\n  useModernLayoutEffect(() => {\n    if (disabled) return;\n    if (!floatingFocusElement) return;\n    handleTabIndex(floatingFocusElement, orderRef);\n  }, [disabled, floatingFocusElement, orderRef]);\n  function renderDismissButton(location) {\n    if (disabled || !visuallyHiddenDismiss || !modal) {\n      return null;\n    }\n    return /*#__PURE__*/jsx(VisuallyHiddenDismiss, {\n      ref: location === 'start' ? startDismissButtonRef : endDismissButtonRef,\n      onClick: event => onOpenChange(false, event.nativeEvent),\n      children: typeof visuallyHiddenDismiss === 'string' ? visuallyHiddenDismiss : 'Dismiss'\n    });\n  }\n  const shouldRenderGuards = !disabled && guards && (modal ? !isUntrappedTypeableCombobox : true) && (isInsidePortal || modal);\n  return /*#__PURE__*/jsxs(Fragment, {\n    children: [shouldRenderGuards && /*#__PURE__*/jsx(FocusGuard, {\n      \"data-type\": \"inside\",\n      ref: mergedBeforeGuardRef,\n      onFocus: event => {\n        if (modal) {\n          const els = getTabbableElements();\n          enqueueFocus(order[0] === 'reference' ? els[0] : els[els.length - 1]);\n        } else if (portalContext != null && portalContext.preserveTabOrder && portalContext.portalNode) {\n          preventReturnFocusRef.current = false;\n          if (isOutsideEvent(event, portalContext.portalNode)) {\n            const nextTabbable = getNextTabbable(domReference);\n            nextTabbable == null || nextTabbable.focus();\n          } else {\n            var _portalContext$before;\n            (_portalContext$before = portalContext.beforeOutsideRef.current) == null || _portalContext$before.focus();\n          }\n        }\n      }\n    }), !isUntrappedTypeableCombobox && renderDismissButton('start'), children, renderDismissButton('end'), shouldRenderGuards && /*#__PURE__*/jsx(FocusGuard, {\n      \"data-type\": \"inside\",\n      ref: mergedAfterGuardRef,\n      onFocus: event => {\n        if (modal) {\n          enqueueFocus(getTabbableElements()[0]);\n        } else if (portalContext != null && portalContext.preserveTabOrder && portalContext.portalNode) {\n          if (closeOnFocusOut) {\n            preventReturnFocusRef.current = true;\n          }\n          if (isOutsideEvent(event, portalContext.portalNode)) {\n            const prevTabbable = getPreviousTabbable(domReference);\n            prevTabbable == null || prevTabbable.focus();\n          } else {\n            var _portalContext$afterO;\n            (_portalContext$afterO = portalContext.afterOutsideRef.current) == null || _portalContext$afterO.focus();\n          }\n        }\n      }\n    })]\n  });\n}\n\nlet lockCount = 0;\nconst scrollbarProperty = '--floating-ui-scrollbar-width';\nfunction enableScrollLock() {\n  const platform = getPlatform();\n  const isIOS = /iP(hone|ad|od)|iOS/.test(platform) ||\n  // iPads can claim to be MacIntel\n  platform === 'MacIntel' && navigator.maxTouchPoints > 1;\n  const bodyStyle = document.body.style;\n  // RTL <body> scrollbar\n  const scrollbarX = Math.round(document.documentElement.getBoundingClientRect().left) + document.documentElement.scrollLeft;\n  const paddingProp = scrollbarX ? 'paddingLeft' : 'paddingRight';\n  const scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;\n  const scrollX = bodyStyle.left ? parseFloat(bodyStyle.left) : window.scrollX;\n  const scrollY = bodyStyle.top ? parseFloat(bodyStyle.top) : window.scrollY;\n  bodyStyle.overflow = 'hidden';\n  bodyStyle.setProperty(scrollbarProperty, scrollbarWidth + \"px\");\n  if (scrollbarWidth) {\n    bodyStyle[paddingProp] = scrollbarWidth + \"px\";\n  }\n\n  // Only iOS doesn't respect `overflow: hidden` on document.body, and this\n  // technique has fewer side effects.\n  if (isIOS) {\n    var _window$visualViewpor, _window$visualViewpor2;\n    // iOS 12 does not support `visualViewport`.\n    const offsetLeft = ((_window$visualViewpor = window.visualViewport) == null ? void 0 : _window$visualViewpor.offsetLeft) || 0;\n    const offsetTop = ((_window$visualViewpor2 = window.visualViewport) == null ? void 0 : _window$visualViewpor2.offsetTop) || 0;\n    Object.assign(bodyStyle, {\n      position: 'fixed',\n      top: -(scrollY - Math.floor(offsetTop)) + \"px\",\n      left: -(scrollX - Math.floor(offsetLeft)) + \"px\",\n      right: '0'\n    });\n  }\n  return () => {\n    Object.assign(bodyStyle, {\n      overflow: '',\n      [paddingProp]: ''\n    });\n    bodyStyle.removeProperty(scrollbarProperty);\n    if (isIOS) {\n      Object.assign(bodyStyle, {\n        position: '',\n        top: '',\n        left: '',\n        right: ''\n      });\n      window.scrollTo(scrollX, scrollY);\n    }\n  };\n}\nlet cleanup = () => {};\n\n/**\n * Provides base styling for a fixed overlay element to dim content or block\n * pointer events behind a floating element.\n * It's a regular `<div>`, so it can be styled via any CSS solution you prefer.\n * @see https://floating-ui.com/docs/FloatingOverlay\n */\nconst FloatingOverlay = /*#__PURE__*/React.forwardRef(function FloatingOverlay(props, ref) {\n  const {\n    lockScroll = false,\n    ...rest\n  } = props;\n  useModernLayoutEffect(() => {\n    if (!lockScroll) return;\n    lockCount++;\n    if (lockCount === 1) {\n      cleanup = enableScrollLock();\n    }\n    return () => {\n      lockCount--;\n      if (lockCount === 0) {\n        cleanup();\n      }\n    };\n  }, [lockScroll]);\n  return /*#__PURE__*/jsx(\"div\", {\n    ref: ref,\n    ...rest,\n    style: {\n      position: 'fixed',\n      overflow: 'auto',\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0,\n      ...rest.style\n    }\n  });\n});\n\nfunction isButtonTarget(event) {\n  return isHTMLElement(event.target) && event.target.tagName === 'BUTTON';\n}\nfunction isAnchorTarget(event) {\n  return isHTMLElement(event.target) && event.target.tagName === 'A';\n}\nfunction isSpaceIgnored(element) {\n  return isTypeableElement(element);\n}\n/**\n * Opens or closes the floating element when clicking the reference element.\n * @see https://floating-ui.com/docs/useClick\n */\nfunction useClick(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    onOpenChange,\n    dataRef,\n    elements: {\n      domReference\n    }\n  } = context;\n  const {\n    enabled = true,\n    event: eventOption = 'click',\n    toggle = true,\n    ignoreMouse = false,\n    keyboardHandlers = true,\n    stickIfOpen = true\n  } = props;\n  const pointerTypeRef = React.useRef();\n  const didKeyDownRef = React.useRef(false);\n  const reference = React.useMemo(() => ({\n    onPointerDown(event) {\n      pointerTypeRef.current = event.pointerType;\n    },\n    onMouseDown(event) {\n      const pointerType = pointerTypeRef.current;\n\n      // Ignore all buttons except for the \"main\" button.\n      // https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button\n      if (event.button !== 0) return;\n      if (eventOption === 'click') return;\n      if (isMouseLikePointerType(pointerType, true) && ignoreMouse) return;\n      if (open && toggle && (dataRef.current.openEvent && stickIfOpen ? dataRef.current.openEvent.type === 'mousedown' : true)) {\n        onOpenChange(false, event.nativeEvent, 'click');\n      } else {\n        // Prevent stealing focus from the floating element\n        event.preventDefault();\n        onOpenChange(true, event.nativeEvent, 'click');\n      }\n    },\n    onClick(event) {\n      const pointerType = pointerTypeRef.current;\n      if (eventOption === 'mousedown' && pointerTypeRef.current) {\n        pointerTypeRef.current = undefined;\n        return;\n      }\n      if (isMouseLikePointerType(pointerType, true) && ignoreMouse) return;\n      if (open && toggle && (dataRef.current.openEvent && stickIfOpen ? dataRef.current.openEvent.type === 'click' : true)) {\n        onOpenChange(false, event.nativeEvent, 'click');\n      } else {\n        onOpenChange(true, event.nativeEvent, 'click');\n      }\n    },\n    onKeyDown(event) {\n      pointerTypeRef.current = undefined;\n      if (event.defaultPrevented || !keyboardHandlers || isButtonTarget(event)) {\n        return;\n      }\n      if (event.key === ' ' && !isSpaceIgnored(domReference)) {\n        // Prevent scrolling\n        event.preventDefault();\n        didKeyDownRef.current = true;\n      }\n      if (isAnchorTarget(event)) {\n        return;\n      }\n      if (event.key === 'Enter') {\n        if (open && toggle) {\n          onOpenChange(false, event.nativeEvent, 'click');\n        } else {\n          onOpenChange(true, event.nativeEvent, 'click');\n        }\n      }\n    },\n    onKeyUp(event) {\n      if (event.defaultPrevented || !keyboardHandlers || isButtonTarget(event) || isSpaceIgnored(domReference)) {\n        return;\n      }\n      if (event.key === ' ' && didKeyDownRef.current) {\n        didKeyDownRef.current = false;\n        if (open && toggle) {\n          onOpenChange(false, event.nativeEvent, 'click');\n        } else {\n          onOpenChange(true, event.nativeEvent, 'click');\n        }\n      }\n    }\n  }), [dataRef, domReference, eventOption, ignoreMouse, keyboardHandlers, onOpenChange, open, stickIfOpen, toggle]);\n  return React.useMemo(() => enabled ? {\n    reference\n  } : {}, [enabled, reference]);\n}\n\nfunction createVirtualElement(domElement, data) {\n  let offsetX = null;\n  let offsetY = null;\n  let isAutoUpdateEvent = false;\n  return {\n    contextElement: domElement || undefined,\n    getBoundingClientRect() {\n      var _data$dataRef$current;\n      const domRect = (domElement == null ? void 0 : domElement.getBoundingClientRect()) || {\n        width: 0,\n        height: 0,\n        x: 0,\n        y: 0\n      };\n      const isXAxis = data.axis === 'x' || data.axis === 'both';\n      const isYAxis = data.axis === 'y' || data.axis === 'both';\n      const canTrackCursorOnAutoUpdate = ['mouseenter', 'mousemove'].includes(((_data$dataRef$current = data.dataRef.current.openEvent) == null ? void 0 : _data$dataRef$current.type) || '') && data.pointerType !== 'touch';\n      let width = domRect.width;\n      let height = domRect.height;\n      let x = domRect.x;\n      let y = domRect.y;\n      if (offsetX == null && data.x && isXAxis) {\n        offsetX = domRect.x - data.x;\n      }\n      if (offsetY == null && data.y && isYAxis) {\n        offsetY = domRect.y - data.y;\n      }\n      x -= offsetX || 0;\n      y -= offsetY || 0;\n      width = 0;\n      height = 0;\n      if (!isAutoUpdateEvent || canTrackCursorOnAutoUpdate) {\n        width = data.axis === 'y' ? domRect.width : 0;\n        height = data.axis === 'x' ? domRect.height : 0;\n        x = isXAxis && data.x != null ? data.x : x;\n        y = isYAxis && data.y != null ? data.y : y;\n      } else if (isAutoUpdateEvent && !canTrackCursorOnAutoUpdate) {\n        height = data.axis === 'x' ? domRect.height : height;\n        width = data.axis === 'y' ? domRect.width : width;\n      }\n      isAutoUpdateEvent = true;\n      return {\n        width,\n        height,\n        x,\n        y,\n        top: y,\n        right: x + width,\n        bottom: y + height,\n        left: x\n      };\n    }\n  };\n}\nfunction isMouseBasedEvent(event) {\n  return event != null && event.clientX != null;\n}\n/**\n * Positions the floating element relative to a client point (in the viewport),\n * such as the mouse position. By default, it follows the mouse cursor.\n * @see https://floating-ui.com/docs/useClientPoint\n */\nfunction useClientPoint(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    dataRef,\n    elements: {\n      floating,\n      domReference\n    },\n    refs\n  } = context;\n  const {\n    enabled = true,\n    axis = 'both',\n    x = null,\n    y = null\n  } = props;\n  const initialRef = React.useRef(false);\n  const cleanupListenerRef = React.useRef(null);\n  const [pointerType, setPointerType] = React.useState();\n  const [reactive, setReactive] = React.useState([]);\n  const setReference = useEffectEvent((x, y) => {\n    if (initialRef.current) return;\n\n    // Prevent setting if the open event was not a mouse-like one\n    // (e.g. focus to open, then hover over the reference element).\n    // Only apply if the event exists.\n    if (dataRef.current.openEvent && !isMouseBasedEvent(dataRef.current.openEvent)) {\n      return;\n    }\n    refs.setPositionReference(createVirtualElement(domReference, {\n      x,\n      y,\n      axis,\n      dataRef,\n      pointerType\n    }));\n  });\n  const handleReferenceEnterOrMove = useEffectEvent(event => {\n    if (x != null || y != null) return;\n    if (!open) {\n      setReference(event.clientX, event.clientY);\n    } else if (!cleanupListenerRef.current) {\n      // If there's no cleanup, there's no listener, but we want to ensure\n      // we add the listener if the cursor landed on the floating element and\n      // then back on the reference (i.e. it's interactive).\n      setReactive([]);\n    }\n  });\n\n  // If the pointer is a mouse-like pointer, we want to continue following the\n  // mouse even if the floating element is transitioning out. On touch\n  // devices, this is undesirable because the floating element will move to\n  // the dismissal touch point.\n  const openCheck = isMouseLikePointerType(pointerType) ? floating : open;\n  const addListener = React.useCallback(() => {\n    // Explicitly specified `x`/`y` coordinates shouldn't add a listener.\n    if (!openCheck || !enabled || x != null || y != null) return;\n    const win = getWindow(floating);\n    function handleMouseMove(event) {\n      const target = getTarget$1(event);\n      if (!contains$1(floating, target)) {\n        setReference(event.clientX, event.clientY);\n      } else {\n        win.removeEventListener('mousemove', handleMouseMove);\n        cleanupListenerRef.current = null;\n      }\n    }\n    if (!dataRef.current.openEvent || isMouseBasedEvent(dataRef.current.openEvent)) {\n      win.addEventListener('mousemove', handleMouseMove);\n      const cleanup = () => {\n        win.removeEventListener('mousemove', handleMouseMove);\n        cleanupListenerRef.current = null;\n      };\n      cleanupListenerRef.current = cleanup;\n      return cleanup;\n    }\n    refs.setPositionReference(domReference);\n  }, [openCheck, enabled, x, y, floating, dataRef, refs, domReference, setReference]);\n  React.useEffect(() => {\n    return addListener();\n  }, [addListener, reactive]);\n  React.useEffect(() => {\n    if (enabled && !floating) {\n      initialRef.current = false;\n    }\n  }, [enabled, floating]);\n  React.useEffect(() => {\n    if (!enabled && open) {\n      initialRef.current = true;\n    }\n  }, [enabled, open]);\n  useModernLayoutEffect(() => {\n    if (enabled && (x != null || y != null)) {\n      initialRef.current = false;\n      setReference(x, y);\n    }\n  }, [enabled, x, y, setReference]);\n  const reference = React.useMemo(() => {\n    function setPointerTypeRef(_ref) {\n      let {\n        pointerType\n      } = _ref;\n      setPointerType(pointerType);\n    }\n    return {\n      onPointerDown: setPointerTypeRef,\n      onPointerEnter: setPointerTypeRef,\n      onMouseMove: handleReferenceEnterOrMove,\n      onMouseEnter: handleReferenceEnterOrMove\n    };\n  }, [handleReferenceEnterOrMove]);\n  return React.useMemo(() => enabled ? {\n    reference\n  } : {}, [enabled, reference]);\n}\n\nconst bubbleHandlerKeys = {\n  pointerdown: 'onPointerDown',\n  mousedown: 'onMouseDown',\n  click: 'onClick'\n};\nconst captureHandlerKeys = {\n  pointerdown: 'onPointerDownCapture',\n  mousedown: 'onMouseDownCapture',\n  click: 'onClickCapture'\n};\nconst normalizeProp = normalizable => {\n  var _normalizable$escapeK, _normalizable$outside;\n  return {\n    escapeKey: typeof normalizable === 'boolean' ? normalizable : (_normalizable$escapeK = normalizable == null ? void 0 : normalizable.escapeKey) != null ? _normalizable$escapeK : false,\n    outsidePress: typeof normalizable === 'boolean' ? normalizable : (_normalizable$outside = normalizable == null ? void 0 : normalizable.outsidePress) != null ? _normalizable$outside : true\n  };\n};\n/**\n * Closes the floating element when a dismissal is requested  by default, when\n * the user presses the `escape` key or outside of the floating element.\n * @see https://floating-ui.com/docs/useDismiss\n */\nfunction useDismiss(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    onOpenChange,\n    elements,\n    dataRef\n  } = context;\n  const {\n    enabled = true,\n    escapeKey = true,\n    outsidePress: unstable_outsidePress = true,\n    outsidePressEvent = 'pointerdown',\n    referencePress = false,\n    referencePressEvent = 'pointerdown',\n    ancestorScroll = false,\n    bubbles,\n    capture\n  } = props;\n  const tree = useFloatingTree();\n  const outsidePressFn = useEffectEvent(typeof unstable_outsidePress === 'function' ? unstable_outsidePress : () => false);\n  const outsidePress = typeof unstable_outsidePress === 'function' ? outsidePressFn : unstable_outsidePress;\n  const endedOrStartedInsideRef = React.useRef(false);\n  const {\n    escapeKey: escapeKeyBubbles,\n    outsidePress: outsidePressBubbles\n  } = normalizeProp(bubbles);\n  const {\n    escapeKey: escapeKeyCapture,\n    outsidePress: outsidePressCapture\n  } = normalizeProp(capture);\n  const isComposingRef = React.useRef(false);\n  const closeOnEscapeKeyDown = useEffectEvent(event => {\n    var _dataRef$current$floa;\n    if (!open || !enabled || !escapeKey || event.key !== 'Escape') {\n      return;\n    }\n\n    // Wait until IME is settled. Pressing `Escape` while composing should\n    // close the compose menu, but not the floating element.\n    if (isComposingRef.current) {\n      return;\n    }\n    const nodeId = (_dataRef$current$floa = dataRef.current.floatingContext) == null ? void 0 : _dataRef$current$floa.nodeId;\n    const children = tree ? getNodeChildren$1(tree.nodesRef.current, nodeId) : [];\n    if (!escapeKeyBubbles) {\n      event.stopPropagation();\n      if (children.length > 0) {\n        let shouldDismiss = true;\n        children.forEach(child => {\n          var _child$context;\n          if ((_child$context = child.context) != null && _child$context.open && !child.context.dataRef.current.__escapeKeyBubbles) {\n            shouldDismiss = false;\n            return;\n          }\n        });\n        if (!shouldDismiss) {\n          return;\n        }\n      }\n    }\n    onOpenChange(false, isReactEvent(event) ? event.nativeEvent : event, 'escape-key');\n  });\n  const closeOnEscapeKeyDownCapture = useEffectEvent(event => {\n    var _getTarget2;\n    const callback = () => {\n      var _getTarget;\n      closeOnEscapeKeyDown(event);\n      (_getTarget = getTarget$1(event)) == null || _getTarget.removeEventListener('keydown', callback);\n    };\n    (_getTarget2 = getTarget$1(event)) == null || _getTarget2.addEventListener('keydown', callback);\n  });\n  const closeOnPressOutside = useEffectEvent(event => {\n    var _dataRef$current$floa2;\n    // Given developers can stop the propagation of the synthetic event,\n    // we can only be confident with a positive value.\n    const insideReactTree = dataRef.current.insideReactTree;\n    dataRef.current.insideReactTree = false;\n\n    // When click outside is lazy (`click` event), handle dragging.\n    // Don't close if:\n    // - The click started inside the floating element.\n    // - The click ended inside the floating element.\n    const endedOrStartedInside = endedOrStartedInsideRef.current;\n    endedOrStartedInsideRef.current = false;\n    if (outsidePressEvent === 'click' && endedOrStartedInside) {\n      return;\n    }\n    if (insideReactTree) {\n      return;\n    }\n    if (typeof outsidePress === 'function' && !outsidePress(event)) {\n      return;\n    }\n    const target = getTarget$1(event);\n    const inertSelector = \"[\" + createAttribute('inert') + \"]\";\n    const markers = getDocument$1(elements.floating).querySelectorAll(inertSelector);\n    let targetRootAncestor = isElement(target) ? target : null;\n    while (targetRootAncestor && !isLastTraversableNode(targetRootAncestor)) {\n      const nextParent = getParentNode(targetRootAncestor);\n      if (isLastTraversableNode(nextParent) || !isElement(nextParent)) {\n        break;\n      }\n      targetRootAncestor = nextParent;\n    }\n\n    // Check if the click occurred on a third-party element injected after the\n    // floating element rendered.\n    if (markers.length && isElement(target) && !isRootElement(target) &&\n    // Clicked on a direct ancestor (e.g. FloatingOverlay).\n    !contains$1(target, elements.floating) &&\n    // If the target root element contains none of the markers, then the\n    // element was injected after the floating element rendered.\n    Array.from(markers).every(marker => !contains$1(targetRootAncestor, marker))) {\n      return;\n    }\n\n    // Check if the click occurred on the scrollbar\n    if (isHTMLElement(target) && floating) {\n      const lastTraversableNode = isLastTraversableNode(target);\n      const style = getComputedStyle(target);\n      const scrollRe = /auto|scroll/;\n      const isScrollableX = lastTraversableNode || scrollRe.test(style.overflowX);\n      const isScrollableY = lastTraversableNode || scrollRe.test(style.overflowY);\n      const canScrollX = isScrollableX && target.clientWidth > 0 && target.scrollWidth > target.clientWidth;\n      const canScrollY = isScrollableY && target.clientHeight > 0 && target.scrollHeight > target.clientHeight;\n      const isRTL = style.direction === 'rtl';\n\n      // Check click position relative to scrollbar.\n      // In some browsers it is possible to change the <body> (or window)\n      // scrollbar to the left side, but is very rare and is difficult to\n      // check for. Plus, for modal dialogs with backdrops, it is more\n      // important that the backdrop is checked but not so much the window.\n      const pressedVerticalScrollbar = canScrollY && (isRTL ? event.offsetX <= target.offsetWidth - target.clientWidth : event.offsetX > target.clientWidth);\n      const pressedHorizontalScrollbar = canScrollX && event.offsetY > target.clientHeight;\n      if (pressedVerticalScrollbar || pressedHorizontalScrollbar) {\n        return;\n      }\n    }\n    const nodeId = (_dataRef$current$floa2 = dataRef.current.floatingContext) == null ? void 0 : _dataRef$current$floa2.nodeId;\n    const targetIsInsideChildren = tree && getNodeChildren$1(tree.nodesRef.current, nodeId).some(node => {\n      var _node$context;\n      return isEventTargetWithin(event, (_node$context = node.context) == null ? void 0 : _node$context.elements.floating);\n    });\n    if (isEventTargetWithin(event, elements.floating) || isEventTargetWithin(event, elements.domReference) || targetIsInsideChildren) {\n      return;\n    }\n    const children = tree ? getNodeChildren$1(tree.nodesRef.current, nodeId) : [];\n    if (children.length > 0) {\n      let shouldDismiss = true;\n      children.forEach(child => {\n        var _child$context2;\n        if ((_child$context2 = child.context) != null && _child$context2.open && !child.context.dataRef.current.__outsidePressBubbles) {\n          shouldDismiss = false;\n          return;\n        }\n      });\n      if (!shouldDismiss) {\n        return;\n      }\n    }\n    onOpenChange(false, event, 'outside-press');\n  });\n  const closeOnPressOutsideCapture = useEffectEvent(event => {\n    var _getTarget4;\n    const callback = () => {\n      var _getTarget3;\n      closeOnPressOutside(event);\n      (_getTarget3 = getTarget$1(event)) == null || _getTarget3.removeEventListener(outsidePressEvent, callback);\n    };\n    (_getTarget4 = getTarget$1(event)) == null || _getTarget4.addEventListener(outsidePressEvent, callback);\n  });\n  React.useEffect(() => {\n    if (!open || !enabled) {\n      return;\n    }\n    dataRef.current.__escapeKeyBubbles = escapeKeyBubbles;\n    dataRef.current.__outsidePressBubbles = outsidePressBubbles;\n    let compositionTimeout = -1;\n    function onScroll(event) {\n      onOpenChange(false, event, 'ancestor-scroll');\n    }\n    function handleCompositionStart() {\n      window.clearTimeout(compositionTimeout);\n      isComposingRef.current = true;\n    }\n    function handleCompositionEnd() {\n      // Safari fires `compositionend` before `keydown`, so we need to wait\n      // until the next tick to set `isComposing` to `false`.\n      // https://bugs.webkit.org/show_bug.cgi?id=165004\n      compositionTimeout = window.setTimeout(() => {\n        isComposingRef.current = false;\n      },\n      // 0ms or 1ms don't work in Safari. 5ms appears to consistently work.\n      // Only apply to WebKit for the test to remain 0ms.\n      isWebKit() ? 5 : 0);\n    }\n    const doc = getDocument$1(elements.floating);\n    if (escapeKey) {\n      doc.addEventListener('keydown', escapeKeyCapture ? closeOnEscapeKeyDownCapture : closeOnEscapeKeyDown, escapeKeyCapture);\n      doc.addEventListener('compositionstart', handleCompositionStart);\n      doc.addEventListener('compositionend', handleCompositionEnd);\n    }\n    outsidePress && doc.addEventListener(outsidePressEvent, outsidePressCapture ? closeOnPressOutsideCapture : closeOnPressOutside, outsidePressCapture);\n    let ancestors = [];\n    if (ancestorScroll) {\n      if (isElement(elements.domReference)) {\n        ancestors = getOverflowAncestors(elements.domReference);\n      }\n      if (isElement(elements.floating)) {\n        ancestors = ancestors.concat(getOverflowAncestors(elements.floating));\n      }\n      if (!isElement(elements.reference) && elements.reference && elements.reference.contextElement) {\n        ancestors = ancestors.concat(getOverflowAncestors(elements.reference.contextElement));\n      }\n    }\n\n    // Ignore the visual viewport for scrolling dismissal (allow pinch-zoom)\n    ancestors = ancestors.filter(ancestor => {\n      var _doc$defaultView;\n      return ancestor !== ((_doc$defaultView = doc.defaultView) == null ? void 0 : _doc$defaultView.visualViewport);\n    });\n    ancestors.forEach(ancestor => {\n      ancestor.addEventListener('scroll', onScroll, {\n        passive: true\n      });\n    });\n    return () => {\n      if (escapeKey) {\n        doc.removeEventListener('keydown', escapeKeyCapture ? closeOnEscapeKeyDownCapture : closeOnEscapeKeyDown, escapeKeyCapture);\n        doc.removeEventListener('compositionstart', handleCompositionStart);\n        doc.removeEventListener('compositionend', handleCompositionEnd);\n      }\n      outsidePress && doc.removeEventListener(outsidePressEvent, outsidePressCapture ? closeOnPressOutsideCapture : closeOnPressOutside, outsidePressCapture);\n      ancestors.forEach(ancestor => {\n        ancestor.removeEventListener('scroll', onScroll);\n      });\n      window.clearTimeout(compositionTimeout);\n    };\n  }, [dataRef, elements, escapeKey, outsidePress, outsidePressEvent, open, onOpenChange, ancestorScroll, enabled, escapeKeyBubbles, outsidePressBubbles, closeOnEscapeKeyDown, escapeKeyCapture, closeOnEscapeKeyDownCapture, closeOnPressOutside, outsidePressCapture, closeOnPressOutsideCapture]);\n  React.useEffect(() => {\n    dataRef.current.insideReactTree = false;\n  }, [dataRef, outsidePress, outsidePressEvent]);\n  const reference = React.useMemo(() => ({\n    onKeyDown: closeOnEscapeKeyDown,\n    ...(referencePress && {\n      [bubbleHandlerKeys[referencePressEvent]]: event => {\n        onOpenChange(false, event.nativeEvent, 'reference-press');\n      },\n      ...(referencePressEvent !== 'click' && {\n        onClick(event) {\n          onOpenChange(false, event.nativeEvent, 'reference-press');\n        }\n      })\n    })\n  }), [closeOnEscapeKeyDown, onOpenChange, referencePress, referencePressEvent]);\n  const floating = React.useMemo(() => ({\n    onKeyDown: closeOnEscapeKeyDown,\n    onMouseDown() {\n      endedOrStartedInsideRef.current = true;\n    },\n    onMouseUp() {\n      endedOrStartedInsideRef.current = true;\n    },\n    [captureHandlerKeys[outsidePressEvent]]: () => {\n      dataRef.current.insideReactTree = true;\n    }\n  }), [closeOnEscapeKeyDown, outsidePressEvent, dataRef]);\n  return React.useMemo(() => enabled ? {\n    reference,\n    floating\n  } : {}, [enabled, reference, floating]);\n}\n\nfunction useFloatingRootContext(options) {\n  const {\n    open = false,\n    onOpenChange: onOpenChangeProp,\n    elements: elementsProp\n  } = options;\n  const floatingId = useId();\n  const dataRef = React.useRef({});\n  const [events] = React.useState(() => createEventEmitter());\n  const nested = useFloatingParentNodeId() != null;\n  if (process.env.NODE_ENV !== \"production\") {\n    const optionDomReference = elementsProp.reference;\n    if (optionDomReference && !isElement(optionDomReference)) {\n      error('Cannot pass a virtual element to the `elements.reference` option,', 'as it must be a real DOM element. Use `refs.setPositionReference()`', 'instead.');\n    }\n  }\n  const [positionReference, setPositionReference] = React.useState(elementsProp.reference);\n  const onOpenChange = useEffectEvent((open, event, reason) => {\n    dataRef.current.openEvent = open ? event : undefined;\n    events.emit('openchange', {\n      open,\n      event,\n      reason,\n      nested\n    });\n    onOpenChangeProp == null || onOpenChangeProp(open, event, reason);\n  });\n  const refs = React.useMemo(() => ({\n    setPositionReference\n  }), []);\n  const elements = React.useMemo(() => ({\n    reference: positionReference || elementsProp.reference || null,\n    floating: elementsProp.floating || null,\n    domReference: elementsProp.reference\n  }), [positionReference, elementsProp.reference, elementsProp.floating]);\n  return React.useMemo(() => ({\n    dataRef,\n    open,\n    onOpenChange,\n    elements,\n    events,\n    floatingId,\n    refs\n  }), [open, onOpenChange, elements, events, floatingId, refs]);\n}\n\n/**\n * Provides data to position a floating element and context to add interactions.\n * @see https://floating-ui.com/docs/useFloating\n */\nfunction useFloating(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    nodeId\n  } = options;\n  const internalRootContext = useFloatingRootContext({\n    ...options,\n    elements: {\n      reference: null,\n      floating: null,\n      ...options.elements\n    }\n  });\n  const rootContext = options.rootContext || internalRootContext;\n  const computedElements = rootContext.elements;\n  const [_domReference, setDomReference] = React.useState(null);\n  const [positionReference, _setPositionReference] = React.useState(null);\n  const optionDomReference = computedElements == null ? void 0 : computedElements.domReference;\n  const domReference = optionDomReference || _domReference;\n  const domReferenceRef = React.useRef(null);\n  const tree = useFloatingTree();\n  useModernLayoutEffect(() => {\n    if (domReference) {\n      domReferenceRef.current = domReference;\n    }\n  }, [domReference]);\n  const position = useFloating$1({\n    ...options,\n    elements: {\n      ...computedElements,\n      ...(positionReference && {\n        reference: positionReference\n      })\n    }\n  });\n  const setPositionReference = React.useCallback(node => {\n    const computedPositionReference = isElement(node) ? {\n      getBoundingClientRect: () => node.getBoundingClientRect(),\n      getClientRects: () => node.getClientRects(),\n      contextElement: node\n    } : node;\n    // Store the positionReference in state if the DOM reference is specified externally via the\n    // `elements.reference` option. This ensures that it won't be overridden on future renders.\n    _setPositionReference(computedPositionReference);\n    position.refs.setReference(computedPositionReference);\n  }, [position.refs]);\n  const setReference = React.useCallback(node => {\n    if (isElement(node) || node === null) {\n      domReferenceRef.current = node;\n      setDomReference(node);\n    }\n\n    // Backwards-compatibility for passing a virtual element to `reference`\n    // after it has set the DOM reference.\n    if (isElement(position.refs.reference.current) || position.refs.reference.current === null ||\n    // Don't allow setting virtual elements using the old technique back to\n    // `null` to support `positionReference` + an unstable `reference`\n    // callback ref.\n    node !== null && !isElement(node)) {\n      position.refs.setReference(node);\n    }\n  }, [position.refs]);\n  const refs = React.useMemo(() => ({\n    ...position.refs,\n    setReference,\n    setPositionReference,\n    domReference: domReferenceRef\n  }), [position.refs, setReference, setPositionReference]);\n  const elements = React.useMemo(() => ({\n    ...position.elements,\n    domReference: domReference\n  }), [position.elements, domReference]);\n  const context = React.useMemo(() => ({\n    ...position,\n    ...rootContext,\n    refs,\n    elements,\n    nodeId\n  }), [position, refs, elements, nodeId, rootContext]);\n  useModernLayoutEffect(() => {\n    rootContext.dataRef.current.floatingContext = context;\n    const node = tree == null ? void 0 : tree.nodesRef.current.find(node => node.id === nodeId);\n    if (node) {\n      node.context = context;\n    }\n  });\n  return React.useMemo(() => ({\n    ...position,\n    context,\n    refs,\n    elements\n  }), [position, refs, elements, context]);\n}\n\nfunction isMacSafari() {\n  return isMac() && isSafari();\n}\n/**\n * Opens the floating element while the reference element has focus, like CSS\n * `:focus`.\n * @see https://floating-ui.com/docs/useFocus\n */\nfunction useFocus(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    onOpenChange,\n    events,\n    dataRef,\n    elements\n  } = context;\n  const {\n    enabled = true,\n    visibleOnly = true\n  } = props;\n  const blockFocusRef = React.useRef(false);\n  const timeoutRef = React.useRef(-1);\n  const keyboardModalityRef = React.useRef(true);\n  React.useEffect(() => {\n    if (!enabled) return;\n    const win = getWindow(elements.domReference);\n\n    // If the reference was focused and the user left the tab/window, and the\n    // floating element was not open, the focus should be blocked when they\n    // return to the tab/window.\n    function onBlur() {\n      if (!open && isHTMLElement(elements.domReference) && elements.domReference === activeElement(getDocument$1(elements.domReference))) {\n        blockFocusRef.current = true;\n      }\n    }\n    function onKeyDown() {\n      keyboardModalityRef.current = true;\n    }\n    function onPointerDown() {\n      keyboardModalityRef.current = false;\n    }\n    win.addEventListener('blur', onBlur);\n    if (isMacSafari()) {\n      win.addEventListener('keydown', onKeyDown, true);\n      win.addEventListener('pointerdown', onPointerDown, true);\n    }\n    return () => {\n      win.removeEventListener('blur', onBlur);\n      if (isMacSafari()) {\n        win.removeEventListener('keydown', onKeyDown, true);\n        win.removeEventListener('pointerdown', onPointerDown, true);\n      }\n    };\n  }, [elements.domReference, open, enabled]);\n  React.useEffect(() => {\n    if (!enabled) return;\n    function onOpenChange(_ref) {\n      let {\n        reason\n      } = _ref;\n      if (reason === 'reference-press' || reason === 'escape-key') {\n        blockFocusRef.current = true;\n      }\n    }\n    events.on('openchange', onOpenChange);\n    return () => {\n      events.off('openchange', onOpenChange);\n    };\n  }, [events, enabled]);\n  React.useEffect(() => {\n    return () => {\n      clearTimeoutIfSet(timeoutRef);\n    };\n  }, []);\n  const reference = React.useMemo(() => ({\n    onMouseLeave() {\n      blockFocusRef.current = false;\n    },\n    onFocus(event) {\n      if (blockFocusRef.current) return;\n      const target = getTarget$1(event.nativeEvent);\n      if (visibleOnly && isElement(target)) {\n        // Safari fails to match `:focus-visible` if focus was initially\n        // outside the document.\n        if (isMacSafari() && !event.relatedTarget) {\n          if (!keyboardModalityRef.current && !isTypeableElement(target)) {\n            return;\n          }\n        } else if (!matchesFocusVisible(target)) {\n          return;\n        }\n      }\n      onOpenChange(true, event.nativeEvent, 'focus');\n    },\n    onBlur(event) {\n      blockFocusRef.current = false;\n      const relatedTarget = event.relatedTarget;\n      const nativeEvent = event.nativeEvent;\n\n      // Hit the non-modal focus management portal guard. Focus will be\n      // moved into the floating element immediately after.\n      const movedToFocusGuard = isElement(relatedTarget) && relatedTarget.hasAttribute(createAttribute('focus-guard')) && relatedTarget.getAttribute('data-type') === 'outside';\n\n      // Wait for the window blur listener to fire.\n      timeoutRef.current = window.setTimeout(() => {\n        var _dataRef$current$floa;\n        const activeEl = activeElement(elements.domReference ? elements.domReference.ownerDocument : document);\n\n        // Focus left the page, keep it open.\n        if (!relatedTarget && activeEl === elements.domReference) return;\n\n        // When focusing the reference element (e.g. regular click), then\n        // clicking into the floating element, prevent it from hiding.\n        // Note: it must be focusable, e.g. `tabindex=\"-1\"`.\n        // We can not rely on relatedTarget to point to the correct element\n        // as it will only point to the shadow host of the newly focused element\n        // and not the element that actually has received focus if it is located\n        // inside a shadow root.\n        if (contains$1((_dataRef$current$floa = dataRef.current.floatingContext) == null ? void 0 : _dataRef$current$floa.refs.floating.current, activeEl) || contains$1(elements.domReference, activeEl) || movedToFocusGuard) {\n          return;\n        }\n        onOpenChange(false, nativeEvent, 'focus');\n      });\n    }\n  }), [dataRef, elements.domReference, onOpenChange, visibleOnly]);\n  return React.useMemo(() => enabled ? {\n    reference\n  } : {}, [enabled, reference]);\n}\n\nfunction mergeProps(userProps, propsList, elementKey) {\n  const map = new Map();\n  const isItem = elementKey === 'item';\n  let domUserProps = userProps;\n  if (isItem && userProps) {\n    const {\n      [ACTIVE_KEY]: _,\n      [SELECTED_KEY]: __,\n      ...validProps\n    } = userProps;\n    domUserProps = validProps;\n  }\n  return {\n    ...(elementKey === 'floating' && {\n      tabIndex: -1,\n      [FOCUSABLE_ATTRIBUTE]: ''\n    }),\n    ...domUserProps,\n    ...propsList.map(value => {\n      const propsOrGetProps = value ? value[elementKey] : null;\n      if (typeof propsOrGetProps === 'function') {\n        return userProps ? propsOrGetProps(userProps) : null;\n      }\n      return propsOrGetProps;\n    }).concat(userProps).reduce((acc, props) => {\n      if (!props) {\n        return acc;\n      }\n      Object.entries(props).forEach(_ref => {\n        let [key, value] = _ref;\n        if (isItem && [ACTIVE_KEY, SELECTED_KEY].includes(key)) {\n          return;\n        }\n        if (key.indexOf('on') === 0) {\n          if (!map.has(key)) {\n            map.set(key, []);\n          }\n          if (typeof value === 'function') {\n            var _map$get;\n            (_map$get = map.get(key)) == null || _map$get.push(value);\n            acc[key] = function () {\n              var _map$get2;\n              for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n                args[_key] = arguments[_key];\n              }\n              return (_map$get2 = map.get(key)) == null ? void 0 : _map$get2.map(fn => fn(...args)).find(val => val !== undefined);\n            };\n          }\n        } else {\n          acc[key] = value;\n        }\n      });\n      return acc;\n    }, {})\n  };\n}\n/**\n * Merges an array of interaction hooks' props into prop getters, allowing\n * event handler functions to be composed together without overwriting one\n * another.\n * @see https://floating-ui.com/docs/useInteractions\n */\nfunction useInteractions(propsList) {\n  if (propsList === void 0) {\n    propsList = [];\n  }\n  const referenceDeps = propsList.map(key => key == null ? void 0 : key.reference);\n  const floatingDeps = propsList.map(key => key == null ? void 0 : key.floating);\n  const itemDeps = propsList.map(key => key == null ? void 0 : key.item);\n  const getReferenceProps = React.useCallback(userProps => mergeProps(userProps, propsList, 'reference'),\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  referenceDeps);\n  const getFloatingProps = React.useCallback(userProps => mergeProps(userProps, propsList, 'floating'),\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  floatingDeps);\n  const getItemProps = React.useCallback(userProps => mergeProps(userProps, propsList, 'item'),\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  itemDeps);\n  return React.useMemo(() => ({\n    getReferenceProps,\n    getFloatingProps,\n    getItemProps\n  }), [getReferenceProps, getFloatingProps, getItemProps]);\n}\n\nconst ESCAPE = 'Escape';\nfunction doSwitch(orientation, vertical, horizontal) {\n  switch (orientation) {\n    case 'vertical':\n      return vertical;\n    case 'horizontal':\n      return horizontal;\n    default:\n      return vertical || horizontal;\n  }\n}\nfunction isMainOrientationKey(key, orientation) {\n  const vertical = key === ARROW_UP || key === ARROW_DOWN;\n  const horizontal = key === ARROW_LEFT || key === ARROW_RIGHT;\n  return doSwitch(orientation, vertical, horizontal);\n}\nfunction isMainOrientationToEndKey(key, orientation, rtl) {\n  const vertical = key === ARROW_DOWN;\n  const horizontal = rtl ? key === ARROW_LEFT : key === ARROW_RIGHT;\n  return doSwitch(orientation, vertical, horizontal) || key === 'Enter' || key === ' ' || key === '';\n}\nfunction isCrossOrientationOpenKey(key, orientation, rtl) {\n  const vertical = rtl ? key === ARROW_LEFT : key === ARROW_RIGHT;\n  const horizontal = key === ARROW_DOWN;\n  return doSwitch(orientation, vertical, horizontal);\n}\nfunction isCrossOrientationCloseKey(key, orientation, rtl, cols) {\n  const vertical = rtl ? key === ARROW_RIGHT : key === ARROW_LEFT;\n  const horizontal = key === ARROW_UP;\n  if (orientation === 'both' || orientation === 'horizontal' && cols && cols > 1) {\n    return key === ESCAPE;\n  }\n  return doSwitch(orientation, vertical, horizontal);\n}\n/**\n * Adds arrow key-based navigation of a list of items, either using real DOM\n * focus or virtual focus.\n * @see https://floating-ui.com/docs/useListNavigation\n */\nfunction useListNavigation(context, props) {\n  const {\n    open,\n    onOpenChange,\n    elements,\n    floatingId\n  } = context;\n  const {\n    listRef,\n    activeIndex,\n    onNavigate: unstable_onNavigate = () => {},\n    enabled = true,\n    selectedIndex = null,\n    allowEscape = false,\n    loop = false,\n    nested = false,\n    rtl = false,\n    virtual = false,\n    focusItemOnOpen = 'auto',\n    focusItemOnHover = true,\n    openOnArrowKeyDown = true,\n    disabledIndices = undefined,\n    orientation = 'vertical',\n    parentOrientation,\n    cols = 1,\n    scrollItemIntoView = true,\n    virtualItemRef,\n    itemSizes,\n    dense = false\n  } = props;\n  if (process.env.NODE_ENV !== \"production\") {\n    if (allowEscape) {\n      if (!loop) {\n        warn('`useListNavigation` looping must be enabled to allow escaping.');\n      }\n      if (!virtual) {\n        warn('`useListNavigation` must be virtual to allow escaping.');\n      }\n    }\n    if (orientation === 'vertical' && cols > 1) {\n      warn('In grid list navigation mode (`cols` > 1), the `orientation` should', 'be either \"horizontal\" or \"both\".');\n    }\n  }\n  const floatingFocusElement = getFloatingFocusElement(elements.floating);\n  const floatingFocusElementRef = useLatestRef(floatingFocusElement);\n  const parentId = useFloatingParentNodeId();\n  const tree = useFloatingTree();\n  useModernLayoutEffect(() => {\n    context.dataRef.current.orientation = orientation;\n  }, [context, orientation]);\n  const onNavigate = useEffectEvent(() => {\n    unstable_onNavigate(indexRef.current === -1 ? null : indexRef.current);\n  });\n  const typeableComboboxReference = isTypeableCombobox(elements.domReference);\n  const focusItemOnOpenRef = React.useRef(focusItemOnOpen);\n  const indexRef = React.useRef(selectedIndex != null ? selectedIndex : -1);\n  const keyRef = React.useRef(null);\n  const isPointerModalityRef = React.useRef(true);\n  const previousOnNavigateRef = React.useRef(onNavigate);\n  const previousMountedRef = React.useRef(!!elements.floating);\n  const previousOpenRef = React.useRef(open);\n  const forceSyncFocusRef = React.useRef(false);\n  const forceScrollIntoViewRef = React.useRef(false);\n  const disabledIndicesRef = useLatestRef(disabledIndices);\n  const latestOpenRef = useLatestRef(open);\n  const scrollItemIntoViewRef = useLatestRef(scrollItemIntoView);\n  const selectedIndexRef = useLatestRef(selectedIndex);\n  const [activeId, setActiveId] = React.useState();\n  const [virtualId, setVirtualId] = React.useState();\n  const focusItem = useEffectEvent(() => {\n    function runFocus(item) {\n      if (virtual) {\n        var _item$id;\n        if ((_item$id = item.id) != null && _item$id.endsWith('-fui-option')) {\n          item.id = floatingId + \"-\" + Math.random().toString(16).slice(2, 10);\n        }\n        setActiveId(item.id);\n        tree == null || tree.events.emit('virtualfocus', item);\n        if (virtualItemRef) {\n          virtualItemRef.current = item;\n        }\n      } else {\n        enqueueFocus(item, {\n          sync: forceSyncFocusRef.current,\n          preventScroll: true\n        });\n      }\n    }\n    const initialItem = listRef.current[indexRef.current];\n    const forceScrollIntoView = forceScrollIntoViewRef.current;\n    if (initialItem) {\n      runFocus(initialItem);\n    }\n    const scheduler = forceSyncFocusRef.current ? v => v() : requestAnimationFrame;\n    scheduler(() => {\n      const waitedItem = listRef.current[indexRef.current] || initialItem;\n      if (!waitedItem) return;\n      if (!initialItem) {\n        runFocus(waitedItem);\n      }\n      const scrollIntoViewOptions = scrollItemIntoViewRef.current;\n      const shouldScrollIntoView = scrollIntoViewOptions && item && (forceScrollIntoView || !isPointerModalityRef.current);\n      if (shouldScrollIntoView) {\n        // JSDOM doesn't support `.scrollIntoView()` but it's widely supported\n        // by all browsers.\n        waitedItem.scrollIntoView == null || waitedItem.scrollIntoView(typeof scrollIntoViewOptions === 'boolean' ? {\n          block: 'nearest',\n          inline: 'nearest'\n        } : scrollIntoViewOptions);\n      }\n    });\n  });\n\n  // Sync `selectedIndex` to be the `activeIndex` upon opening the floating\n  // element. Also, reset `activeIndex` upon closing the floating element.\n  useModernLayoutEffect(() => {\n    if (!enabled) return;\n    if (open && elements.floating) {\n      if (focusItemOnOpenRef.current && selectedIndex != null) {\n        // Regardless of the pointer modality, we want to ensure the selected\n        // item comes into view when the floating element is opened.\n        forceScrollIntoViewRef.current = true;\n        indexRef.current = selectedIndex;\n        onNavigate();\n      }\n    } else if (previousMountedRef.current) {\n      // Since the user can specify `onNavigate` conditionally\n      // (onNavigate: open ? setActiveIndex : setSelectedIndex),\n      // we store and call the previous function.\n      indexRef.current = -1;\n      previousOnNavigateRef.current();\n    }\n  }, [enabled, open, elements.floating, selectedIndex, onNavigate]);\n\n  // Sync `activeIndex` to be the focused item while the floating element is\n  // open.\n  useModernLayoutEffect(() => {\n    if (!enabled) return;\n    if (!open) return;\n    if (!elements.floating) return;\n    if (activeIndex == null) {\n      forceSyncFocusRef.current = false;\n      if (selectedIndexRef.current != null) {\n        return;\n      }\n\n      // Reset while the floating element was open (e.g. the list changed).\n      if (previousMountedRef.current) {\n        indexRef.current = -1;\n        focusItem();\n      }\n\n      // Initial sync.\n      if ((!previousOpenRef.current || !previousMountedRef.current) && focusItemOnOpenRef.current && (keyRef.current != null || focusItemOnOpenRef.current === true && keyRef.current == null)) {\n        let runs = 0;\n        const waitForListPopulated = () => {\n          if (listRef.current[0] == null) {\n            // Avoid letting the browser paint if possible on the first try,\n            // otherwise use rAF. Don't try more than twice, since something\n            // is wrong otherwise.\n            if (runs < 2) {\n              const scheduler = runs ? requestAnimationFrame : queueMicrotask;\n              scheduler(waitForListPopulated);\n            }\n            runs++;\n          } else {\n            indexRef.current = keyRef.current == null || isMainOrientationToEndKey(keyRef.current, orientation, rtl) || nested ? getMinListIndex(listRef, disabledIndicesRef.current) : getMaxListIndex(listRef, disabledIndicesRef.current);\n            keyRef.current = null;\n            onNavigate();\n          }\n        };\n        waitForListPopulated();\n      }\n    } else if (!isIndexOutOfListBounds(listRef, activeIndex)) {\n      indexRef.current = activeIndex;\n      focusItem();\n      forceScrollIntoViewRef.current = false;\n    }\n  }, [enabled, open, elements.floating, activeIndex, selectedIndexRef, nested, listRef, orientation, rtl, onNavigate, focusItem, disabledIndicesRef]);\n\n  // Ensure the parent floating element has focus when a nested child closes\n  // to allow arrow key navigation to work after the pointer leaves the child.\n  useModernLayoutEffect(() => {\n    var _nodes$find;\n    if (!enabled || elements.floating || !tree || virtual || !previousMountedRef.current) {\n      return;\n    }\n    const nodes = tree.nodesRef.current;\n    const parent = (_nodes$find = nodes.find(node => node.id === parentId)) == null || (_nodes$find = _nodes$find.context) == null ? void 0 : _nodes$find.elements.floating;\n    const activeEl = activeElement(getDocument$1(elements.floating));\n    const treeContainsActiveEl = nodes.some(node => node.context && contains$1(node.context.elements.floating, activeEl));\n    if (parent && !treeContainsActiveEl && isPointerModalityRef.current) {\n      parent.focus({\n        preventScroll: true\n      });\n    }\n  }, [enabled, elements.floating, tree, parentId, virtual]);\n  useModernLayoutEffect(() => {\n    if (!enabled) return;\n    if (!tree) return;\n    if (!virtual) return;\n    if (parentId) return;\n    function handleVirtualFocus(item) {\n      setVirtualId(item.id);\n      if (virtualItemRef) {\n        virtualItemRef.current = item;\n      }\n    }\n    tree.events.on('virtualfocus', handleVirtualFocus);\n    return () => {\n      tree.events.off('virtualfocus', handleVirtualFocus);\n    };\n  }, [enabled, tree, virtual, parentId, virtualItemRef]);\n  useModernLayoutEffect(() => {\n    previousOnNavigateRef.current = onNavigate;\n    previousOpenRef.current = open;\n    previousMountedRef.current = !!elements.floating;\n  });\n  useModernLayoutEffect(() => {\n    if (!open) {\n      keyRef.current = null;\n      focusItemOnOpenRef.current = focusItemOnOpen;\n    }\n  }, [open, focusItemOnOpen]);\n  const hasActiveIndex = activeIndex != null;\n  const item = React.useMemo(() => {\n    function syncCurrentTarget(currentTarget) {\n      if (!latestOpenRef.current) return;\n      const index = listRef.current.indexOf(currentTarget);\n      if (index !== -1 && indexRef.current !== index) {\n        indexRef.current = index;\n        onNavigate();\n      }\n    }\n    const props = {\n      onFocus(_ref) {\n        let {\n          currentTarget\n        } = _ref;\n        forceSyncFocusRef.current = true;\n        syncCurrentTarget(currentTarget);\n      },\n      onClick: _ref2 => {\n        let {\n          currentTarget\n        } = _ref2;\n        return currentTarget.focus({\n          preventScroll: true\n        });\n      },\n      // Safari\n      onMouseMove(_ref3) {\n        let {\n          currentTarget\n        } = _ref3;\n        forceSyncFocusRef.current = true;\n        forceScrollIntoViewRef.current = false;\n        if (focusItemOnHover) {\n          syncCurrentTarget(currentTarget);\n        }\n      },\n      onPointerLeave(_ref4) {\n        let {\n          pointerType\n        } = _ref4;\n        if (!isPointerModalityRef.current || pointerType === 'touch') {\n          return;\n        }\n        forceSyncFocusRef.current = true;\n        if (!focusItemOnHover) {\n          return;\n        }\n        indexRef.current = -1;\n        onNavigate();\n        if (!virtual) {\n          var _floatingFocusElement;\n          (_floatingFocusElement = floatingFocusElementRef.current) == null || _floatingFocusElement.focus({\n            preventScroll: true\n          });\n        }\n      }\n    };\n    return props;\n  }, [latestOpenRef, floatingFocusElementRef, focusItemOnHover, listRef, onNavigate, virtual]);\n  const getParentOrientation = React.useCallback(() => {\n    var _tree$nodesRef$curren;\n    return parentOrientation != null ? parentOrientation : tree == null || (_tree$nodesRef$curren = tree.nodesRef.current.find(node => node.id === parentId)) == null || (_tree$nodesRef$curren = _tree$nodesRef$curren.context) == null || (_tree$nodesRef$curren = _tree$nodesRef$curren.dataRef) == null ? void 0 : _tree$nodesRef$curren.current.orientation;\n  }, [parentId, tree, parentOrientation]);\n  const commonOnKeyDown = useEffectEvent(event => {\n    isPointerModalityRef.current = false;\n    forceSyncFocusRef.current = true;\n\n    // When composing a character, Chrome fires ArrowDown twice. Firefox/Safari\n    // don't appear to suffer from this. `event.isComposing` is avoided due to\n    // Safari not supporting it properly (although it's not needed in the first\n    // place for Safari, just avoiding any possible issues).\n    if (event.which === 229) {\n      return;\n    }\n\n    // If the floating element is animating out, ignore navigation. Otherwise,\n    // the `activeIndex` gets set to 0 despite not being open so the next time\n    // the user ArrowDowns, the first item won't be focused.\n    if (!latestOpenRef.current && event.currentTarget === floatingFocusElementRef.current) {\n      return;\n    }\n    if (nested && isCrossOrientationCloseKey(event.key, orientation, rtl, cols)) {\n      // If the nested list's close key is also the parent navigation key,\n      // let the parent navigate. Otherwise, stop propagating the event.\n      if (!isMainOrientationKey(event.key, getParentOrientation())) {\n        stopEvent(event);\n      }\n      onOpenChange(false, event.nativeEvent, 'list-navigation');\n      if (isHTMLElement(elements.domReference)) {\n        if (virtual) {\n          tree == null || tree.events.emit('virtualfocus', elements.domReference);\n        } else {\n          elements.domReference.focus();\n        }\n      }\n      return;\n    }\n    const currentIndex = indexRef.current;\n    const minIndex = getMinListIndex(listRef, disabledIndices);\n    const maxIndex = getMaxListIndex(listRef, disabledIndices);\n    if (!typeableComboboxReference) {\n      if (event.key === 'Home') {\n        stopEvent(event);\n        indexRef.current = minIndex;\n        onNavigate();\n      }\n      if (event.key === 'End') {\n        stopEvent(event);\n        indexRef.current = maxIndex;\n        onNavigate();\n      }\n    }\n\n    // Grid navigation.\n    if (cols > 1) {\n      const sizes = itemSizes || Array.from({\n        length: listRef.current.length\n      }, () => ({\n        width: 1,\n        height: 1\n      }));\n      // To calculate movements on the grid, we use hypothetical cell indices\n      // as if every item was 1x1, then convert back to real indices.\n      const cellMap = createGridCellMap(sizes, cols, dense);\n      const minGridIndex = cellMap.findIndex(index => index != null && !isListIndexDisabled(listRef, index, disabledIndices));\n      // last enabled index\n      const maxGridIndex = cellMap.reduce((foundIndex, index, cellIndex) => index != null && !isListIndexDisabled(listRef, index, disabledIndices) ? cellIndex : foundIndex, -1);\n      const index = cellMap[getGridNavigatedIndex({\n        current: cellMap.map(itemIndex => itemIndex != null ? listRef.current[itemIndex] : null)\n      }, {\n        event,\n        orientation,\n        loop,\n        rtl,\n        cols,\n        // treat undefined (empty grid spaces) as disabled indices so we\n        // don't end up in them\n        disabledIndices: getGridCellIndices([...((typeof disabledIndices !== 'function' ? disabledIndices : null) || listRef.current.map((_, index) => isListIndexDisabled(listRef, index, disabledIndices) ? index : undefined)), undefined], cellMap),\n        minIndex: minGridIndex,\n        maxIndex: maxGridIndex,\n        prevIndex: getGridCellIndexOfCorner(indexRef.current > maxIndex ? minIndex : indexRef.current, sizes, cellMap, cols,\n        // use a corner matching the edge closest to the direction\n        // we're moving in so we don't end up in the same item. Prefer\n        // top/left over bottom/right.\n        event.key === ARROW_DOWN ? 'bl' : event.key === (rtl ? ARROW_LEFT : ARROW_RIGHT) ? 'tr' : 'tl'),\n        stopEvent: true\n      })];\n      if (index != null) {\n        indexRef.current = index;\n        onNavigate();\n      }\n      if (orientation === 'both') {\n        return;\n      }\n    }\n    if (isMainOrientationKey(event.key, orientation)) {\n      stopEvent(event);\n\n      // Reset the index if no item is focused.\n      if (open && !virtual && activeElement(event.currentTarget.ownerDocument) === event.currentTarget) {\n        indexRef.current = isMainOrientationToEndKey(event.key, orientation, rtl) ? minIndex : maxIndex;\n        onNavigate();\n        return;\n      }\n      if (isMainOrientationToEndKey(event.key, orientation, rtl)) {\n        if (loop) {\n          indexRef.current = currentIndex >= maxIndex ? allowEscape && currentIndex !== listRef.current.length ? -1 : minIndex : findNonDisabledListIndex(listRef, {\n            startingIndex: currentIndex,\n            disabledIndices\n          });\n        } else {\n          indexRef.current = Math.min(maxIndex, findNonDisabledListIndex(listRef, {\n            startingIndex: currentIndex,\n            disabledIndices\n          }));\n        }\n      } else {\n        if (loop) {\n          indexRef.current = currentIndex <= minIndex ? allowEscape && currentIndex !== -1 ? listRef.current.length : maxIndex : findNonDisabledListIndex(listRef, {\n            startingIndex: currentIndex,\n            decrement: true,\n            disabledIndices\n          });\n        } else {\n          indexRef.current = Math.max(minIndex, findNonDisabledListIndex(listRef, {\n            startingIndex: currentIndex,\n            decrement: true,\n            disabledIndices\n          }));\n        }\n      }\n      if (isIndexOutOfListBounds(listRef, indexRef.current)) {\n        indexRef.current = -1;\n      }\n      onNavigate();\n    }\n  });\n  const ariaActiveDescendantProp = React.useMemo(() => {\n    return virtual && open && hasActiveIndex && {\n      'aria-activedescendant': virtualId || activeId\n    };\n  }, [virtual, open, hasActiveIndex, virtualId, activeId]);\n  const floating = React.useMemo(() => {\n    return {\n      'aria-orientation': orientation === 'both' ? undefined : orientation,\n      ...(!typeableComboboxReference ? ariaActiveDescendantProp : {}),\n      onKeyDown: commonOnKeyDown,\n      onPointerMove() {\n        isPointerModalityRef.current = true;\n      }\n    };\n  }, [ariaActiveDescendantProp, commonOnKeyDown, orientation, typeableComboboxReference]);\n  const reference = React.useMemo(() => {\n    function checkVirtualMouse(event) {\n      if (focusItemOnOpen === 'auto' && isVirtualClick(event.nativeEvent)) {\n        focusItemOnOpenRef.current = true;\n      }\n    }\n    function checkVirtualPointer(event) {\n      // `pointerdown` fires first, reset the state then perform the checks.\n      focusItemOnOpenRef.current = focusItemOnOpen;\n      if (focusItemOnOpen === 'auto' && isVirtualPointerEvent(event.nativeEvent)) {\n        focusItemOnOpenRef.current = true;\n      }\n    }\n    return {\n      ...ariaActiveDescendantProp,\n      onKeyDown(event) {\n        isPointerModalityRef.current = false;\n        const isArrowKey = event.key.startsWith('Arrow');\n        const isHomeOrEndKey = ['Home', 'End'].includes(event.key);\n        const isMoveKey = isArrowKey || isHomeOrEndKey;\n        const isCrossOpenKey = isCrossOrientationOpenKey(event.key, orientation, rtl);\n        const isCrossCloseKey = isCrossOrientationCloseKey(event.key, orientation, rtl, cols);\n        const isParentCrossOpenKey = isCrossOrientationOpenKey(event.key, getParentOrientation(), rtl);\n        const isMainKey = isMainOrientationKey(event.key, orientation);\n        const isNavigationKey = (nested ? isParentCrossOpenKey : isMainKey) || event.key === 'Enter' || event.key.trim() === '';\n        if (virtual && open) {\n          const rootNode = tree == null ? void 0 : tree.nodesRef.current.find(node => node.parentId == null);\n          const deepestNode = tree && rootNode ? getDeepestNode(tree.nodesRef.current, rootNode.id) : null;\n          if (isMoveKey && deepestNode && virtualItemRef) {\n            const eventObject = new KeyboardEvent('keydown', {\n              key: event.key,\n              bubbles: true\n            });\n            if (isCrossOpenKey || isCrossCloseKey) {\n              var _deepestNode$context, _deepestNode$context2;\n              const isCurrentTarget = ((_deepestNode$context = deepestNode.context) == null ? void 0 : _deepestNode$context.elements.domReference) === event.currentTarget;\n              const dispatchItem = isCrossCloseKey && !isCurrentTarget ? (_deepestNode$context2 = deepestNode.context) == null ? void 0 : _deepestNode$context2.elements.domReference : isCrossOpenKey ? listRef.current.find(item => (item == null ? void 0 : item.id) === activeId) : null;\n              if (dispatchItem) {\n                stopEvent(event);\n                dispatchItem.dispatchEvent(eventObject);\n                setVirtualId(undefined);\n              }\n            }\n            if ((isMainKey || isHomeOrEndKey) && deepestNode.context) {\n              if (deepestNode.context.open && deepestNode.parentId && event.currentTarget !== deepestNode.context.elements.domReference) {\n                var _deepestNode$context$;\n                stopEvent(event);\n                (_deepestNode$context$ = deepestNode.context.elements.domReference) == null || _deepestNode$context$.dispatchEvent(eventObject);\n                return;\n              }\n            }\n          }\n          return commonOnKeyDown(event);\n        }\n        // If a floating element should not open on arrow key down, avoid\n        // setting `activeIndex` while it's closed.\n        if (!open && !openOnArrowKeyDown && isArrowKey) {\n          return;\n        }\n        if (isNavigationKey) {\n          const isParentMainKey = isMainOrientationKey(event.key, getParentOrientation());\n          keyRef.current = nested && isParentMainKey ? null : event.key;\n        }\n        if (nested) {\n          if (isParentCrossOpenKey) {\n            stopEvent(event);\n            if (open) {\n              indexRef.current = getMinListIndex(listRef, disabledIndicesRef.current);\n              onNavigate();\n            } else {\n              onOpenChange(true, event.nativeEvent, 'list-navigation');\n            }\n          }\n          return;\n        }\n        if (isMainKey) {\n          if (selectedIndex != null) {\n            indexRef.current = selectedIndex;\n          }\n          stopEvent(event);\n          if (!open && openOnArrowKeyDown) {\n            onOpenChange(true, event.nativeEvent, 'list-navigation');\n          } else {\n            commonOnKeyDown(event);\n          }\n          if (open) {\n            onNavigate();\n          }\n        }\n      },\n      onFocus() {\n        if (open && !virtual) {\n          indexRef.current = -1;\n          onNavigate();\n        }\n      },\n      onPointerDown: checkVirtualPointer,\n      onPointerEnter: checkVirtualPointer,\n      onMouseDown: checkVirtualMouse,\n      onClick: checkVirtualMouse\n    };\n  }, [activeId, ariaActiveDescendantProp, cols, commonOnKeyDown, disabledIndicesRef, focusItemOnOpen, listRef, nested, onNavigate, onOpenChange, open, openOnArrowKeyDown, orientation, getParentOrientation, rtl, selectedIndex, tree, virtual, virtualItemRef]);\n  return React.useMemo(() => enabled ? {\n    reference,\n    floating,\n    item\n  } : {}, [enabled, reference, floating, item]);\n}\n\nconst componentRoleToAriaRoleMap = /*#__PURE__*/new Map([['select', 'listbox'], ['combobox', 'listbox'], ['label', false]]);\n\n/**\n * Adds base screen reader props to the reference and floating elements for a\n * given floating element `role`.\n * @see https://floating-ui.com/docs/useRole\n */\nfunction useRole(context, props) {\n  var _elements$domReferenc, _componentRoleToAriaR;\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    elements,\n    floatingId: defaultFloatingId\n  } = context;\n  const {\n    enabled = true,\n    role = 'dialog'\n  } = props;\n  const defaultReferenceId = useId();\n  const referenceId = ((_elements$domReferenc = elements.domReference) == null ? void 0 : _elements$domReferenc.id) || defaultReferenceId;\n  const floatingId = React.useMemo(() => {\n    var _getFloatingFocusElem;\n    return ((_getFloatingFocusElem = getFloatingFocusElement(elements.floating)) == null ? void 0 : _getFloatingFocusElem.id) || defaultFloatingId;\n  }, [elements.floating, defaultFloatingId]);\n  const ariaRole = (_componentRoleToAriaR = componentRoleToAriaRoleMap.get(role)) != null ? _componentRoleToAriaR : role;\n  const parentId = useFloatingParentNodeId();\n  const isNested = parentId != null;\n  const reference = React.useMemo(() => {\n    if (ariaRole === 'tooltip' || role === 'label') {\n      return {\n        [\"aria-\" + (role === 'label' ? 'labelledby' : 'describedby')]: open ? floatingId : undefined\n      };\n    }\n    return {\n      'aria-expanded': open ? 'true' : 'false',\n      'aria-haspopup': ariaRole === 'alertdialog' ? 'dialog' : ariaRole,\n      'aria-controls': open ? floatingId : undefined,\n      ...(ariaRole === 'listbox' && {\n        role: 'combobox'\n      }),\n      ...(ariaRole === 'menu' && {\n        id: referenceId\n      }),\n      ...(ariaRole === 'menu' && isNested && {\n        role: 'menuitem'\n      }),\n      ...(role === 'select' && {\n        'aria-autocomplete': 'none'\n      }),\n      ...(role === 'combobox' && {\n        'aria-autocomplete': 'list'\n      })\n    };\n  }, [ariaRole, floatingId, isNested, open, referenceId, role]);\n  const floating = React.useMemo(() => {\n    const floatingProps = {\n      id: floatingId,\n      ...(ariaRole && {\n        role: ariaRole\n      })\n    };\n    if (ariaRole === 'tooltip' || role === 'label') {\n      return floatingProps;\n    }\n    return {\n      ...floatingProps,\n      ...(ariaRole === 'menu' && {\n        'aria-labelledby': referenceId\n      })\n    };\n  }, [ariaRole, floatingId, referenceId, role]);\n  const item = React.useCallback(_ref => {\n    let {\n      active,\n      selected\n    } = _ref;\n    const commonProps = {\n      role: 'option',\n      ...(active && {\n        id: floatingId + \"-fui-option\"\n      })\n    };\n\n    // For `menu`, we are unable to tell if the item is a `menuitemradio`\n    // or `menuitemcheckbox`. For backwards-compatibility reasons, also\n    // avoid defaulting to `menuitem` as it may overwrite custom role props.\n    switch (role) {\n      case 'select':\n      case 'combobox':\n        return {\n          ...commonProps,\n          'aria-selected': selected\n        };\n    }\n    return {};\n  }, [floatingId, role]);\n  return React.useMemo(() => enabled ? {\n    reference,\n    floating,\n    item\n  } : {}, [enabled, reference, floating, item]);\n}\n\n// Converts a JS style key like `backgroundColor` to a CSS transition-property\n// like `background-color`.\nconst camelCaseToKebabCase = str => str.replace(/[A-Z]+(?![a-z])|[A-Z]/g, ($, ofs) => (ofs ? '-' : '') + $.toLowerCase());\nfunction execWithArgsOrReturn(valueOrFn, args) {\n  return typeof valueOrFn === 'function' ? valueOrFn(args) : valueOrFn;\n}\nfunction useDelayUnmount(open, durationMs) {\n  const [isMounted, setIsMounted] = React.useState(open);\n  if (open && !isMounted) {\n    setIsMounted(true);\n  }\n  React.useEffect(() => {\n    if (!open && isMounted) {\n      const timeout = setTimeout(() => setIsMounted(false), durationMs);\n      return () => clearTimeout(timeout);\n    }\n  }, [open, isMounted, durationMs]);\n  return isMounted;\n}\n/**\n * Provides a status string to apply CSS transitions to a floating element,\n * correctly handling placement-aware transitions.\n * @see https://floating-ui.com/docs/useTransition#usetransitionstatus\n */\nfunction useTransitionStatus(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    elements: {\n      floating\n    }\n  } = context;\n  const {\n    duration = 250\n  } = props;\n  const isNumberDuration = typeof duration === 'number';\n  const closeDuration = (isNumberDuration ? duration : duration.close) || 0;\n  const [status, setStatus] = React.useState('unmounted');\n  const isMounted = useDelayUnmount(open, closeDuration);\n  if (!isMounted && status === 'close') {\n    setStatus('unmounted');\n  }\n  useModernLayoutEffect(() => {\n    if (!floating) return;\n    if (open) {\n      setStatus('initial');\n      const frame = requestAnimationFrame(() => {\n        // Ensure it opens before paint. With `FloatingDelayGroup`,\n        // this avoids a flicker when moving between floating elements\n        // to ensure one is always open with no missing frames.\n        ReactDOM.flushSync(() => {\n          setStatus('open');\n        });\n      });\n      return () => {\n        cancelAnimationFrame(frame);\n      };\n    }\n    setStatus('close');\n  }, [open, floating]);\n  return {\n    isMounted,\n    status\n  };\n}\n/**\n * Provides styles to apply CSS transitions to a floating element, correctly\n * handling placement-aware transitions. Wrapper around `useTransitionStatus`.\n * @see https://floating-ui.com/docs/useTransition#usetransitionstyles\n */\nfunction useTransitionStyles(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    initial: unstable_initial = {\n      opacity: 0\n    },\n    open: unstable_open,\n    close: unstable_close,\n    common: unstable_common,\n    duration = 250\n  } = props;\n  const placement = context.placement;\n  const side = placement.split('-')[0];\n  const fnArgs = React.useMemo(() => ({\n    side,\n    placement\n  }), [side, placement]);\n  const isNumberDuration = typeof duration === 'number';\n  const openDuration = (isNumberDuration ? duration : duration.open) || 0;\n  const closeDuration = (isNumberDuration ? duration : duration.close) || 0;\n  const [styles, setStyles] = React.useState(() => ({\n    ...execWithArgsOrReturn(unstable_common, fnArgs),\n    ...execWithArgsOrReturn(unstable_initial, fnArgs)\n  }));\n  const {\n    isMounted,\n    status\n  } = useTransitionStatus(context, {\n    duration\n  });\n  const initialRef = useLatestRef(unstable_initial);\n  const openRef = useLatestRef(unstable_open);\n  const closeRef = useLatestRef(unstable_close);\n  const commonRef = useLatestRef(unstable_common);\n  useModernLayoutEffect(() => {\n    const initialStyles = execWithArgsOrReturn(initialRef.current, fnArgs);\n    const closeStyles = execWithArgsOrReturn(closeRef.current, fnArgs);\n    const commonStyles = execWithArgsOrReturn(commonRef.current, fnArgs);\n    const openStyles = execWithArgsOrReturn(openRef.current, fnArgs) || Object.keys(initialStyles).reduce((acc, key) => {\n      acc[key] = '';\n      return acc;\n    }, {});\n    if (status === 'initial') {\n      setStyles(styles => ({\n        transitionProperty: styles.transitionProperty,\n        ...commonStyles,\n        ...initialStyles\n      }));\n    }\n    if (status === 'open') {\n      setStyles({\n        transitionProperty: Object.keys(openStyles).map(camelCaseToKebabCase).join(','),\n        transitionDuration: openDuration + \"ms\",\n        ...commonStyles,\n        ...openStyles\n      });\n    }\n    if (status === 'close') {\n      const styles = closeStyles || initialStyles;\n      setStyles({\n        transitionProperty: Object.keys(styles).map(camelCaseToKebabCase).join(','),\n        transitionDuration: closeDuration + \"ms\",\n        ...commonStyles,\n        ...styles\n      });\n    }\n  }, [closeDuration, closeRef, initialRef, openRef, commonRef, openDuration, status, fnArgs]);\n  return {\n    isMounted,\n    styles\n  };\n}\n\n/**\n * Provides a matching callback that can be used to focus an item as the user\n * types, often used in tandem with `useListNavigation()`.\n * @see https://floating-ui.com/docs/useTypeahead\n */\nfunction useTypeahead(context, props) {\n  var _ref;\n  const {\n    open,\n    dataRef\n  } = context;\n  const {\n    listRef,\n    activeIndex,\n    onMatch: unstable_onMatch,\n    onTypingChange: unstable_onTypingChange,\n    enabled = true,\n    findMatch = null,\n    resetMs = 750,\n    ignoreKeys = [],\n    selectedIndex = null\n  } = props;\n  const timeoutIdRef = React.useRef(-1);\n  const stringRef = React.useRef('');\n  const prevIndexRef = React.useRef((_ref = selectedIndex != null ? selectedIndex : activeIndex) != null ? _ref : -1);\n  const matchIndexRef = React.useRef(null);\n  const onMatch = useEffectEvent(unstable_onMatch);\n  const onTypingChange = useEffectEvent(unstable_onTypingChange);\n  const findMatchRef = useLatestRef(findMatch);\n  const ignoreKeysRef = useLatestRef(ignoreKeys);\n  useModernLayoutEffect(() => {\n    if (open) {\n      clearTimeoutIfSet(timeoutIdRef);\n      matchIndexRef.current = null;\n      stringRef.current = '';\n    }\n  }, [open]);\n  useModernLayoutEffect(() => {\n    // Sync arrow key navigation but not typeahead navigation.\n    if (open && stringRef.current === '') {\n      var _ref2;\n      prevIndexRef.current = (_ref2 = selectedIndex != null ? selectedIndex : activeIndex) != null ? _ref2 : -1;\n    }\n  }, [open, selectedIndex, activeIndex]);\n  const setTypingChange = useEffectEvent(value => {\n    if (value) {\n      if (!dataRef.current.typing) {\n        dataRef.current.typing = value;\n        onTypingChange(value);\n      }\n    } else {\n      if (dataRef.current.typing) {\n        dataRef.current.typing = value;\n        onTypingChange(value);\n      }\n    }\n  });\n  const onKeyDown = useEffectEvent(event => {\n    function getMatchingIndex(list, orderedList, string) {\n      const str = findMatchRef.current ? findMatchRef.current(orderedList, string) : orderedList.find(text => (text == null ? void 0 : text.toLocaleLowerCase().indexOf(string.toLocaleLowerCase())) === 0);\n      return str ? list.indexOf(str) : -1;\n    }\n    const listContent = listRef.current;\n    if (stringRef.current.length > 0 && stringRef.current[0] !== ' ') {\n      if (getMatchingIndex(listContent, listContent, stringRef.current) === -1) {\n        setTypingChange(false);\n      } else if (event.key === ' ') {\n        stopEvent(event);\n      }\n    }\n    if (listContent == null || ignoreKeysRef.current.includes(event.key) ||\n    // Character key.\n    event.key.length !== 1 ||\n    // Modifier key.\n    event.ctrlKey || event.metaKey || event.altKey) {\n      return;\n    }\n    if (open && event.key !== ' ') {\n      stopEvent(event);\n      setTypingChange(true);\n    }\n\n    // Bail out if the list contains a word like \"llama\" or \"aaron\". TODO:\n    // allow it in this case, too.\n    const allowRapidSuccessionOfFirstLetter = listContent.every(text => {\n      var _text$, _text$2;\n      return text ? ((_text$ = text[0]) == null ? void 0 : _text$.toLocaleLowerCase()) !== ((_text$2 = text[1]) == null ? void 0 : _text$2.toLocaleLowerCase()) : true;\n    });\n\n    // Allows the user to cycle through items that start with the same letter\n    // in rapid succession.\n    if (allowRapidSuccessionOfFirstLetter && stringRef.current === event.key) {\n      stringRef.current = '';\n      prevIndexRef.current = matchIndexRef.current;\n    }\n    stringRef.current += event.key;\n    clearTimeoutIfSet(timeoutIdRef);\n    timeoutIdRef.current = window.setTimeout(() => {\n      stringRef.current = '';\n      prevIndexRef.current = matchIndexRef.current;\n      setTypingChange(false);\n    }, resetMs);\n    const prevIndex = prevIndexRef.current;\n    const index = getMatchingIndex(listContent, [...listContent.slice((prevIndex || 0) + 1), ...listContent.slice(0, (prevIndex || 0) + 1)], stringRef.current);\n    if (index !== -1) {\n      onMatch(index);\n      matchIndexRef.current = index;\n    } else if (event.key !== ' ') {\n      stringRef.current = '';\n      setTypingChange(false);\n    }\n  });\n  const reference = React.useMemo(() => ({\n    onKeyDown\n  }), [onKeyDown]);\n  const floating = React.useMemo(() => {\n    return {\n      onKeyDown,\n      onKeyUp(event) {\n        if (event.key === ' ') {\n          setTypingChange(false);\n        }\n      }\n    };\n  }, [onKeyDown, setTypingChange]);\n  return React.useMemo(() => enabled ? {\n    reference,\n    floating\n  } : {}, [enabled, reference, floating]);\n}\n\nfunction getArgsWithCustomFloatingHeight(state, height) {\n  return {\n    ...state,\n    rects: {\n      ...state.rects,\n      floating: {\n        ...state.rects.floating,\n        height\n      }\n    }\n  };\n}\n/**\n * Positions the floating element such that an inner element inside of it is\n * anchored to the reference element.\n * @see https://floating-ui.com/docs/inner\n * @deprecated\n */\nconst inner = props => ({\n  name: 'inner',\n  options: props,\n  async fn(state) {\n    const {\n      listRef,\n      overflowRef,\n      onFallbackChange,\n      offset: innerOffset = 0,\n      index = 0,\n      minItemsVisible = 4,\n      referenceOverflowThreshold = 0,\n      scrollRef,\n      ...detectOverflowOptions\n    } = evaluate(props, state);\n    const {\n      rects,\n      elements: {\n        floating\n      }\n    } = state;\n    const item = listRef.current[index];\n    const scrollEl = (scrollRef == null ? void 0 : scrollRef.current) || floating;\n\n    // Valid combinations:\n    // 1. Floating element is the scrollRef and has a border (default)\n    // 2. Floating element is not the scrollRef, floating element has a border\n    // 3. Floating element is not the scrollRef, scrollRef has a border\n    // Floating > {...getFloatingProps()} wrapper > scrollRef > items is not\n    // allowed as VoiceOver doesn't work.\n    const clientTop = floating.clientTop || scrollEl.clientTop;\n    const floatingIsBordered = floating.clientTop !== 0;\n    const scrollElIsBordered = scrollEl.clientTop !== 0;\n    const floatingIsScrollEl = floating === scrollEl;\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!state.placement.startsWith('bottom')) {\n        warn('`placement` side must be \"bottom\" when using the `inner`', 'middleware.');\n      }\n    }\n    if (!item) {\n      return {};\n    }\n    const nextArgs = {\n      ...state,\n      ...(await offset(-item.offsetTop - floating.clientTop - rects.reference.height / 2 - item.offsetHeight / 2 - innerOffset).fn(state))\n    };\n    const overflow = await detectOverflow(getArgsWithCustomFloatingHeight(nextArgs, scrollEl.scrollHeight + clientTop + floating.clientTop), detectOverflowOptions);\n    const refOverflow = await detectOverflow(nextArgs, {\n      ...detectOverflowOptions,\n      elementContext: 'reference'\n    });\n    const diffY = max(0, overflow.top);\n    const nextY = nextArgs.y + diffY;\n    const isScrollable = scrollEl.scrollHeight > scrollEl.clientHeight;\n    const rounder = isScrollable ? v => v : round;\n    const maxHeight = rounder(max(0, scrollEl.scrollHeight + (floatingIsBordered && floatingIsScrollEl || scrollElIsBordered ? clientTop * 2 : 0) - diffY - max(0, overflow.bottom)));\n    scrollEl.style.maxHeight = maxHeight + \"px\";\n    scrollEl.scrollTop = diffY;\n\n    // There is not enough space, fallback to standard anchored positioning\n    if (onFallbackChange) {\n      const shouldFallback = scrollEl.offsetHeight < item.offsetHeight * min(minItemsVisible, listRef.current.length) - 1 || refOverflow.top >= -referenceOverflowThreshold || refOverflow.bottom >= -referenceOverflowThreshold;\n      ReactDOM.flushSync(() => onFallbackChange(shouldFallback));\n    }\n    if (overflowRef) {\n      overflowRef.current = await detectOverflow(getArgsWithCustomFloatingHeight({\n        ...nextArgs,\n        y: nextY\n      }, scrollEl.offsetHeight + clientTop + floating.clientTop), detectOverflowOptions);\n    }\n    return {\n      y: nextY\n    };\n  }\n});\n/**\n * Changes the `inner` middleware's `offset` upon a `wheel` event to\n * expand the floating element's height, revealing more list items.\n * @see https://floating-ui.com/docs/inner\n * @deprecated\n */\nfunction useInnerOffset(context, props) {\n  const {\n    open,\n    elements\n  } = context;\n  const {\n    enabled = true,\n    overflowRef,\n    scrollRef,\n    onChange: unstable_onChange\n  } = props;\n  const onChange = useEffectEvent(unstable_onChange);\n  const controlledScrollingRef = React.useRef(false);\n  const prevScrollTopRef = React.useRef(null);\n  const initialOverflowRef = React.useRef(null);\n  React.useEffect(() => {\n    if (!enabled) return;\n    function onWheel(e) {\n      if (e.ctrlKey || !el || overflowRef.current == null) {\n        return;\n      }\n      const dY = e.deltaY;\n      const isAtTop = overflowRef.current.top >= -0.5;\n      const isAtBottom = overflowRef.current.bottom >= -0.5;\n      const remainingScroll = el.scrollHeight - el.clientHeight;\n      const sign = dY < 0 ? -1 : 1;\n      const method = dY < 0 ? 'max' : 'min';\n      if (el.scrollHeight <= el.clientHeight) {\n        return;\n      }\n      if (!isAtTop && dY > 0 || !isAtBottom && dY < 0) {\n        e.preventDefault();\n        ReactDOM.flushSync(() => {\n          onChange(d => d + Math[method](dY, remainingScroll * sign));\n        });\n      } else if (/firefox/i.test(getUserAgent())) {\n        // Needed to propagate scrolling during momentum scrolling phase once\n        // it gets limited by the boundary. UX improvement, not critical.\n        el.scrollTop += dY;\n      }\n    }\n    const el = (scrollRef == null ? void 0 : scrollRef.current) || elements.floating;\n    if (open && el) {\n      el.addEventListener('wheel', onWheel);\n\n      // Wait for the position to be ready.\n      requestAnimationFrame(() => {\n        prevScrollTopRef.current = el.scrollTop;\n        if (overflowRef.current != null) {\n          initialOverflowRef.current = {\n            ...overflowRef.current\n          };\n        }\n      });\n      return () => {\n        prevScrollTopRef.current = null;\n        initialOverflowRef.current = null;\n        el.removeEventListener('wheel', onWheel);\n      };\n    }\n  }, [enabled, open, elements.floating, overflowRef, scrollRef, onChange]);\n  const floating = React.useMemo(() => ({\n    onKeyDown() {\n      controlledScrollingRef.current = true;\n    },\n    onWheel() {\n      controlledScrollingRef.current = false;\n    },\n    onPointerMove() {\n      controlledScrollingRef.current = false;\n    },\n    onScroll() {\n      const el = (scrollRef == null ? void 0 : scrollRef.current) || elements.floating;\n      if (!overflowRef.current || !el || !controlledScrollingRef.current) {\n        return;\n      }\n      if (prevScrollTopRef.current !== null) {\n        const scrollDiff = el.scrollTop - prevScrollTopRef.current;\n        if (overflowRef.current.bottom < -0.5 && scrollDiff < -1 || overflowRef.current.top < -0.5 && scrollDiff > 1) {\n          ReactDOM.flushSync(() => onChange(d => d + scrollDiff));\n        }\n      }\n\n      // [Firefox] Wait for the height change to have been applied.\n      requestAnimationFrame(() => {\n        prevScrollTopRef.current = el.scrollTop;\n      });\n    }\n  }), [elements.floating, onChange, overflowRef, scrollRef]);\n  return React.useMemo(() => enabled ? {\n    floating\n  } : {}, [enabled, floating]);\n}\n\nfunction getNodeChildren(nodes, id, onlyOpenChildren) {\n  if (onlyOpenChildren === void 0) {\n    onlyOpenChildren = true;\n  }\n  const directChildren = nodes.filter(node => {\n    var _node$context;\n    return node.parentId === id && (!onlyOpenChildren || ((_node$context = node.context) == null ? void 0 : _node$context.open));\n  });\n  return directChildren.flatMap(child => [child, ...getNodeChildren(nodes, child.id, onlyOpenChildren)]);\n}\n\nfunction isPointInPolygon(point, polygon) {\n  const [x, y] = point;\n  let isInside = false;\n  const length = polygon.length;\n  for (let i = 0, j = length - 1; i < length; j = i++) {\n    const [xi, yi] = polygon[i] || [0, 0];\n    const [xj, yj] = polygon[j] || [0, 0];\n    const intersect = yi >= y !== yj >= y && x <= (xj - xi) * (y - yi) / (yj - yi) + xi;\n    if (intersect) {\n      isInside = !isInside;\n    }\n  }\n  return isInside;\n}\nfunction isInside(point, rect) {\n  return point[0] >= rect.x && point[0] <= rect.x + rect.width && point[1] >= rect.y && point[1] <= rect.y + rect.height;\n}\n/**\n * Generates a safe polygon area that the user can traverse without closing the\n * floating element once leaving the reference element.\n * @see https://floating-ui.com/docs/useHover#safepolygon\n */\nfunction safePolygon(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    buffer = 0.5,\n    blockPointerEvents = false,\n    requireIntent = true\n  } = options;\n  const timeoutRef = {\n    current: -1\n  };\n  let hasLanded = false;\n  let lastX = null;\n  let lastY = null;\n  let lastCursorTime = typeof performance !== 'undefined' ? performance.now() : 0;\n  function getCursorSpeed(x, y) {\n    const currentTime = performance.now();\n    const elapsedTime = currentTime - lastCursorTime;\n    if (lastX === null || lastY === null || elapsedTime === 0) {\n      lastX = x;\n      lastY = y;\n      lastCursorTime = currentTime;\n      return null;\n    }\n    const deltaX = x - lastX;\n    const deltaY = y - lastY;\n    const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n    const speed = distance / elapsedTime; // px / ms\n\n    lastX = x;\n    lastY = y;\n    lastCursorTime = currentTime;\n    return speed;\n  }\n  const fn = _ref => {\n    let {\n      x,\n      y,\n      placement,\n      elements,\n      onClose,\n      nodeId,\n      tree\n    } = _ref;\n    return function onMouseMove(event) {\n      function close() {\n        clearTimeoutIfSet(timeoutRef);\n        onClose();\n      }\n      clearTimeoutIfSet(timeoutRef);\n      if (!elements.domReference || !elements.floating || placement == null || x == null || y == null) {\n        return;\n      }\n      const {\n        clientX,\n        clientY\n      } = event;\n      const clientPoint = [clientX, clientY];\n      const target = getTarget(event);\n      const isLeave = event.type === 'mouseleave';\n      const isOverFloatingEl = contains(elements.floating, target);\n      const isOverReferenceEl = contains(elements.domReference, target);\n      const refRect = elements.domReference.getBoundingClientRect();\n      const rect = elements.floating.getBoundingClientRect();\n      const side = placement.split('-')[0];\n      const cursorLeaveFromRight = x > rect.right - rect.width / 2;\n      const cursorLeaveFromBottom = y > rect.bottom - rect.height / 2;\n      const isOverReferenceRect = isInside(clientPoint, refRect);\n      const isFloatingWider = rect.width > refRect.width;\n      const isFloatingTaller = rect.height > refRect.height;\n      const left = (isFloatingWider ? refRect : rect).left;\n      const right = (isFloatingWider ? refRect : rect).right;\n      const top = (isFloatingTaller ? refRect : rect).top;\n      const bottom = (isFloatingTaller ? refRect : rect).bottom;\n      if (isOverFloatingEl) {\n        hasLanded = true;\n        if (!isLeave) {\n          return;\n        }\n      }\n      if (isOverReferenceEl) {\n        hasLanded = false;\n      }\n      if (isOverReferenceEl && !isLeave) {\n        hasLanded = true;\n        return;\n      }\n\n      // Prevent overlapping floating element from being stuck in an open-close\n      // loop: https://github.com/floating-ui/floating-ui/issues/1910\n      if (isLeave && isElement(event.relatedTarget) && contains(elements.floating, event.relatedTarget)) {\n        return;\n      }\n\n      // If any nested child is open, abort.\n      if (tree && getNodeChildren(tree.nodesRef.current, nodeId).length) {\n        return;\n      }\n\n      // If the pointer is leaving from the opposite side, the \"buffer\" logic\n      // creates a point where the floating element remains open, but should be\n      // ignored.\n      // A constant of 1 handles floating point rounding errors.\n      if (side === 'top' && y >= refRect.bottom - 1 || side === 'bottom' && y <= refRect.top + 1 || side === 'left' && x >= refRect.right - 1 || side === 'right' && x <= refRect.left + 1) {\n        return close();\n      }\n\n      // Ignore when the cursor is within the rectangular trough between the\n      // two elements. Since the triangle is created from the cursor point,\n      // which can start beyond the ref element's edge, traversing back and\n      // forth from the ref to the floating element can cause it to close. This\n      // ensures it always remains open in that case.\n      let rectPoly = [];\n      switch (side) {\n        case 'top':\n          rectPoly = [[left, refRect.top + 1], [left, rect.bottom - 1], [right, rect.bottom - 1], [right, refRect.top + 1]];\n          break;\n        case 'bottom':\n          rectPoly = [[left, rect.top + 1], [left, refRect.bottom - 1], [right, refRect.bottom - 1], [right, rect.top + 1]];\n          break;\n        case 'left':\n          rectPoly = [[rect.right - 1, bottom], [rect.right - 1, top], [refRect.left + 1, top], [refRect.left + 1, bottom]];\n          break;\n        case 'right':\n          rectPoly = [[refRect.right - 1, bottom], [refRect.right - 1, top], [rect.left + 1, top], [rect.left + 1, bottom]];\n          break;\n      }\n      function getPolygon(_ref2) {\n        let [x, y] = _ref2;\n        switch (side) {\n          case 'top':\n            {\n              const cursorPointOne = [isFloatingWider ? x + buffer / 2 : cursorLeaveFromRight ? x + buffer * 4 : x - buffer * 4, y + buffer + 1];\n              const cursorPointTwo = [isFloatingWider ? x - buffer / 2 : cursorLeaveFromRight ? x + buffer * 4 : x - buffer * 4, y + buffer + 1];\n              const commonPoints = [[rect.left, cursorLeaveFromRight ? rect.bottom - buffer : isFloatingWider ? rect.bottom - buffer : rect.top], [rect.right, cursorLeaveFromRight ? isFloatingWider ? rect.bottom - buffer : rect.top : rect.bottom - buffer]];\n              return [cursorPointOne, cursorPointTwo, ...commonPoints];\n            }\n          case 'bottom':\n            {\n              const cursorPointOne = [isFloatingWider ? x + buffer / 2 : cursorLeaveFromRight ? x + buffer * 4 : x - buffer * 4, y - buffer];\n              const cursorPointTwo = [isFloatingWider ? x - buffer / 2 : cursorLeaveFromRight ? x + buffer * 4 : x - buffer * 4, y - buffer];\n              const commonPoints = [[rect.left, cursorLeaveFromRight ? rect.top + buffer : isFloatingWider ? rect.top + buffer : rect.bottom], [rect.right, cursorLeaveFromRight ? isFloatingWider ? rect.top + buffer : rect.bottom : rect.top + buffer]];\n              return [cursorPointOne, cursorPointTwo, ...commonPoints];\n            }\n          case 'left':\n            {\n              const cursorPointOne = [x + buffer + 1, isFloatingTaller ? y + buffer / 2 : cursorLeaveFromBottom ? y + buffer * 4 : y - buffer * 4];\n              const cursorPointTwo = [x + buffer + 1, isFloatingTaller ? y - buffer / 2 : cursorLeaveFromBottom ? y + buffer * 4 : y - buffer * 4];\n              const commonPoints = [[cursorLeaveFromBottom ? rect.right - buffer : isFloatingTaller ? rect.right - buffer : rect.left, rect.top], [cursorLeaveFromBottom ? isFloatingTaller ? rect.right - buffer : rect.left : rect.right - buffer, rect.bottom]];\n              return [...commonPoints, cursorPointOne, cursorPointTwo];\n            }\n          case 'right':\n            {\n              const cursorPointOne = [x - buffer, isFloatingTaller ? y + buffer / 2 : cursorLeaveFromBottom ? y + buffer * 4 : y - buffer * 4];\n              const cursorPointTwo = [x - buffer, isFloatingTaller ? y - buffer / 2 : cursorLeaveFromBottom ? y + buffer * 4 : y - buffer * 4];\n              const commonPoints = [[cursorLeaveFromBottom ? rect.left + buffer : isFloatingTaller ? rect.left + buffer : rect.right, rect.top], [cursorLeaveFromBottom ? isFloatingTaller ? rect.left + buffer : rect.right : rect.left + buffer, rect.bottom]];\n              return [cursorPointOne, cursorPointTwo, ...commonPoints];\n            }\n        }\n      }\n      if (isPointInPolygon([clientX, clientY], rectPoly)) {\n        return;\n      }\n      if (hasLanded && !isOverReferenceRect) {\n        return close();\n      }\n      if (!isLeave && requireIntent) {\n        const cursorSpeed = getCursorSpeed(event.clientX, event.clientY);\n        const cursorSpeedThreshold = 0.1;\n        if (cursorSpeed !== null && cursorSpeed < cursorSpeedThreshold) {\n          return close();\n        }\n      }\n      if (!isPointInPolygon([clientX, clientY], getPolygon([x, y]))) {\n        close();\n      } else if (!hasLanded && requireIntent) {\n        timeoutRef.current = window.setTimeout(close, 40);\n      }\n    };\n  };\n  fn.__options = {\n    blockPointerEvents\n  };\n  return fn;\n}\n\nexport { Composite, CompositeItem, FloatingArrow, FloatingDelayGroup, FloatingFocusManager, FloatingList, FloatingNode, FloatingOverlay, FloatingPortal, FloatingTree, NextFloatingDelayGroup, inner, safePolygon, useClick, useClientPoint, useDelayGroup, useDelayGroupContext, useDismiss, useFloating, useFloatingNodeId, useFloatingParentNodeId, useFloatingPortalNode, useFloatingRootContext, useFloatingTree, useFocus, useHover, useId, useInnerOffset, useInteractions, useListItem, useListNavigation, useMergeRefs, useNextDelayGroup, useRole, useTransitionStatus, useTransitionStyles, useTypeahead };\n","import React, { useEffect } from 'react';\r\nimport {\r\n  useFloating,\r\n  useInteractions,\r\n  useClick,\r\n  useRole,\r\n  useDismiss,\r\n  useId,\r\n  FloatingPortal,\r\n  FloatingOverlay,\r\n  FloatingFocusManager,\r\n} from '@floating-ui/react';\r\nimport classNames from 'classnames';\r\nimport './modal.scss'; //   import\r\n\r\nexport interface ModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  title?: string;\r\n  children: React.ReactNode;\r\n  footer?: React.ReactNode;\r\n  size?: 'sm' | 'md' | 'lg' | 'full';\r\n  closeOnOverlayClick?: boolean;\r\n}\r\n\r\nexport function Modal({\r\n  isOpen,\r\n  onClose,\r\n  title,\r\n  children,\r\n  footer,\r\n  size = 'md',\r\n  closeOnOverlayClick = true,\r\n}: ModalProps) {\r\n  const { refs, context } = useFloating({\r\n    open: isOpen,\r\n    onOpenChange: (open) => {\r\n      if (!open) onClose();\r\n    },\r\n  });\r\n\r\n  const click = useClick(context, { enabled: closeOnOverlayClick });\r\n  const dismiss = useDismiss(context);\r\n  const role = useRole(context);\r\n\r\n  const { getFloatingProps } = useInteractions([click, dismiss, role]);\r\n  const headingId = useId();\r\n  const descriptionId = useId();\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      document.body.style.overflow = 'hidden';\r\n    } else {\r\n      document.body.style.overflow = '';\r\n    }\r\n    return () => {\r\n      document.body.style.overflow = '';\r\n    };\r\n  }, [isOpen]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <FloatingPortal>\r\n      {/*   string  */}\r\n      <FloatingOverlay className=\"lm-modal-overlay\" lockScroll>\r\n        <FloatingFocusManager context={context}>\r\n          <div\r\n            ref={refs.setFloating}\r\n            className={classNames('lm-modal-container', `is-${size}`)}\r\n            {...getFloatingProps()}\r\n            aria-labelledby={headingId}\r\n            aria-describedby={descriptionId}\r\n          >\r\n            {/* Header */}\r\n            <div className=\"lm-modal-header\">\r\n              <h2 id={headingId} className=\"lm-modal-title\">{title}</h2>\r\n              <button className=\"lm-modal-close-button\" onClick={onClose} aria-label=\"Close\">\r\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                  <path d=\"M18 6L6 18M6 6l12 12\" />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div id={descriptionId} className=\"lm-modal-content\">\r\n              {children}\r\n            </div>\r\n\r\n            {/* Footer */}\r\n            {footer && <div className=\"lm-modal-footer\">{footer}</div>}\r\n          </div>\r\n        </FloatingFocusManager>\r\n      </FloatingOverlay>\r\n    </FloatingPortal>\r\n  );\r\n}","import React, { useEffect } from 'react';\r\nimport classNames from 'classnames';\r\nimport './toast.scss'; //   import  .scss\r\n\r\nexport interface ToastProps {\r\n  id: string;\r\n  message: string;\r\n  type?: 'success' | 'error' | 'info' | 'warning';\r\n  duration?: number;\r\n  onClose: (id: string) => void;\r\n}\r\n\r\nexport function Toast({ \r\n  id, \r\n  message, \r\n  type = 'info', \r\n  duration = 3000, \r\n  onClose \r\n}: ToastProps) {\r\n  \r\n  useEffect(() => {\r\n    const timer = setTimeout(() => onClose(id), duration);\r\n    return () => clearTimeout(timer);\r\n  }, [id, duration, onClose]);\r\n\r\n  return (\r\n    <div className={classNames('lm-toast', `is-${type}`)} role=\"alert\">\r\n      <div className=\"lm-toast-icon\">\r\n        {/*  Icon  type  */}\r\n      </div>\r\n      <div className=\"lm-toast-message\">{message}</div>\r\n      <button \r\n        className=\"lm-toast-close-btn\" \r\n        onClick={() => onClose(id)}\r\n        aria-label=\"Close\"\r\n      >\r\n        \r\n      </button>\r\n    </div>\r\n  );\r\n}","import React, { useState, createContext, useContext, useCallback } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport { Toast, ToastProps } from './toast';\r\nimport './toast.scss';\r\n\r\ninterface ToastContextType {\r\n  addToast: (message: string, type?: ToastProps['type']) => void;\r\n}\r\n\r\nconst ToastContext = createContext<ToastContextType | undefined>(undefined);\r\n\r\nexport function ToastProvider({ children }: { children: React.ReactNode }) {\r\n  const [toasts, setToasts] = useState<Array<Pick<ToastProps, 'id' | 'message' | 'type'>>>([]);\r\n\r\n  const addToast = useCallback((message: string, type: ToastProps['type'] = 'info') => {\r\n    const id = Math.random().toString(36).substr(2, 9);\r\n    setToasts((prev) => [...prev, { id, message, type }]);\r\n  }, []);\r\n\r\n  const removeToast = useCallback((id: string) => {\r\n    setToasts((prev) => prev.filter((toast) => toast.id !== id));\r\n  }, []);\r\n\r\n  return (\r\n    <ToastContext.Provider value={{ addToast }}>\r\n      {children}\r\n      {createPortal(\r\n        <div className=\"toastContainer\">\r\n          {toasts.map((toast) => (\r\n            <Toast key={toast.id} {...toast} onClose={removeToast} />\r\n          ))}\r\n        </div>,\r\n        document.body\r\n      )}\r\n    </ToastContext.Provider>\r\n  );\r\n}\r\n\r\nexport const useToast = () => {\r\n  const context = useContext(ToastContext);\r\n  if (!context) throw new Error('useToast must be used within a ToastProvider');\r\n  return context;\r\n};","'use client';\n\nimport { createElement, forwardRef, useState, useEffect } from 'react';\n\n/**\n* Resolve icon set icons\n*\n* Returns parent icon for each icon\n*/\nfunction getIconsTree(data, names) {\n\tconst icons = data.icons;\n\tconst aliases = data.aliases || Object.create(null);\n\tconst resolved = Object.create(null);\n\tfunction resolve(name) {\n\t\tif (icons[name]) return resolved[name] = [];\n\t\tif (!(name in resolved)) {\n\t\t\tresolved[name] = null;\n\t\t\tconst parent = aliases[name] && aliases[name].parent;\n\t\t\tconst value = parent && resolve(parent);\n\t\t\tif (value) resolved[name] = [parent].concat(value);\n\t\t}\n\t\treturn resolved[name];\n\t}\n\t(Object.keys(icons).concat(Object.keys(aliases))).forEach(resolve);\n\treturn resolved;\n}\n\n/**\n* Default values for dimensions\n*/\nconst defaultIconDimensions = Object.freeze({\n\tleft: 0,\n\ttop: 0,\n\twidth: 16,\n\theight: 16\n});\n/**\n* Default values for transformations\n*/\nconst defaultIconTransformations = Object.freeze({\n\trotate: 0,\n\tvFlip: false,\n\thFlip: false\n});\n/**\n* Default values for all optional IconifyIcon properties\n*/\nconst defaultIconProps = Object.freeze({\n\t...defaultIconDimensions,\n\t...defaultIconTransformations\n});\n/**\n* Default values for all properties used in ExtendedIconifyIcon\n*/\nconst defaultExtendedIconProps = Object.freeze({\n\t...defaultIconProps,\n\tbody: \"\",\n\thidden: false\n});\n\n/**\n* Merge transformations\n*/\nfunction mergeIconTransformations(obj1, obj2) {\n\tconst result = {};\n\tif (!obj1.hFlip !== !obj2.hFlip) result.hFlip = true;\n\tif (!obj1.vFlip !== !obj2.vFlip) result.vFlip = true;\n\tconst rotate = ((obj1.rotate || 0) + (obj2.rotate || 0)) % 4;\n\tif (rotate) result.rotate = rotate;\n\treturn result;\n}\n\n/**\n* Merge icon and alias\n*\n* Can also be used to merge default values and icon\n*/\nfunction mergeIconData(parent, child) {\n\tconst result = mergeIconTransformations(parent, child);\n\tfor (const key in defaultExtendedIconProps) if (key in defaultIconTransformations) {\n\t\tif (key in parent && !(key in result)) result[key] = defaultIconTransformations[key];\n\t} else if (key in child) result[key] = child[key];\n\telse if (key in parent) result[key] = parent[key];\n\treturn result;\n}\n\n/**\n* Get icon data, using prepared aliases tree\n*/\nfunction internalGetIconData(data, name, tree) {\n\tconst icons = data.icons;\n\tconst aliases = data.aliases || Object.create(null);\n\tlet currentProps = {};\n\tfunction parse(name$1) {\n\t\tcurrentProps = mergeIconData(icons[name$1] || aliases[name$1], currentProps);\n\t}\n\tparse(name);\n\ttree.forEach(parse);\n\treturn mergeIconData(data, currentProps);\n}\n\n/**\n* Extract icons from an icon set\n*\n* Returns list of icons that were found in icon set\n*/\nfunction parseIconSet(data, callback) {\n\tconst names = [];\n\tif (typeof data !== \"object\" || typeof data.icons !== \"object\") return names;\n\tif (data.not_found instanceof Array) data.not_found.forEach((name) => {\n\t\tcallback(name, null);\n\t\tnames.push(name);\n\t});\n\tconst tree = getIconsTree(data);\n\tfor (const name in tree) {\n\t\tconst item = tree[name];\n\t\tif (item) {\n\t\t\tcallback(name, internalGetIconData(data, name, item));\n\t\t\tnames.push(name);\n\t\t}\n\t}\n\treturn names;\n}\n\n/**\n* Optional properties\n*/\nconst optionalPropertyDefaults = {\n\tprovider: \"\",\n\taliases: {},\n\tnot_found: {},\n\t...defaultIconDimensions\n};\n/**\n* Check props\n*/\nfunction checkOptionalProps(item, defaults) {\n\tfor (const prop in defaults) if (prop in item && typeof item[prop] !== typeof defaults[prop]) return false;\n\treturn true;\n}\n/**\n* Validate icon set, return it as IconifyJSON on success, null on failure\n*\n* Unlike validateIconSet(), this function is very basic.\n* It does not throw exceptions, it does not check metadata, it does not fix stuff.\n*/\nfunction quicklyValidateIconSet(obj) {\n\tif (typeof obj !== \"object\" || obj === null) return null;\n\tconst data = obj;\n\tif (typeof data.prefix !== \"string\" || !obj.icons || typeof obj.icons !== \"object\") return null;\n\tif (!checkOptionalProps(obj, optionalPropertyDefaults)) return null;\n\tconst icons = data.icons;\n\tfor (const name in icons) {\n\t\tconst icon = icons[name];\n\t\tif (!name || typeof icon.body !== \"string\" || !checkOptionalProps(icon, defaultExtendedIconProps)) return null;\n\t}\n\tconst aliases = data.aliases || Object.create(null);\n\tfor (const name in aliases) {\n\t\tconst icon = aliases[name];\n\t\tconst parent = icon.parent;\n\t\tif (!name || typeof parent !== \"string\" || !icons[parent] && !aliases[parent] || !checkOptionalProps(icon, defaultExtendedIconProps)) return null;\n\t}\n\treturn data;\n}\n\n/**\n* Storage by provider and prefix\n*/\nconst dataStorage = Object.create(null);\n/**\n* Create new storage\n*/\nfunction newStorage(provider, prefix) {\n\treturn {\n\t\tprovider,\n\t\tprefix,\n\t\ticons: Object.create(null),\n\t\tmissing: /* @__PURE__ */ new Set()\n\t};\n}\n/**\n* Get storage for provider and prefix\n*/\nfunction getStorage(provider, prefix) {\n\tconst providerStorage = dataStorage[provider] || (dataStorage[provider] = Object.create(null));\n\treturn providerStorage[prefix] || (providerStorage[prefix] = newStorage(provider, prefix));\n}\n/**\n* Add icon set to storage\n*\n* Returns array of added icons\n*/\nfunction addIconSet(storage, data) {\n\tif (!quicklyValidateIconSet(data)) return [];\n\treturn parseIconSet(data, (name, icon) => {\n\t\tif (icon) storage.icons[name] = icon;\n\t\telse storage.missing.add(name);\n\t});\n}\n/**\n* Add icon to storage\n*/\nfunction addIconToStorage(storage, name, icon) {\n\ttry {\n\t\tif (typeof icon.body === \"string\") {\n\t\t\tstorage.icons[name] = { ...icon };\n\t\t\treturn true;\n\t\t}\n\t} catch (err) {}\n\treturn false;\n}\n/**\n* List available icons\n*/\nfunction listIcons(provider, prefix) {\n\tlet allIcons = [];\n\tconst providers = typeof provider === \"string\" ? [provider] : Object.keys(dataStorage);\n\tproviders.forEach((provider$1) => {\n\t\tconst prefixes = typeof provider$1 === \"string\" && typeof prefix === \"string\" ? [prefix] : Object.keys(dataStorage[provider$1] || {});\n\t\tprefixes.forEach((prefix$1) => {\n\t\t\tconst storage = getStorage(provider$1, prefix$1);\n\t\t\tallIcons = allIcons.concat(Object.keys(storage.icons).map((name) => (provider$1 !== \"\" ? \"@\" + provider$1 + \":\" : \"\") + prefix$1 + \":\" + name));\n\t\t});\n\t});\n\treturn allIcons;\n}\n\n/**\n* Expression to test part of icon name.\n*\n* Used when loading icons from Iconify API due to project naming convension.\n* Ignored when using custom icon sets - convension does not apply.\n*/\nconst matchIconName = /^[a-z0-9]+(-[a-z0-9]+)*$/;\n/**\n* Convert string icon name to IconifyIconName object.\n*/\nconst stringToIcon = (value, validate, allowSimpleName, provider = \"\") => {\n\tconst colonSeparated = value.split(\":\");\n\tif (value.slice(0, 1) === \"@\") {\n\t\tif (colonSeparated.length < 2 || colonSeparated.length > 3) return null;\n\t\tprovider = colonSeparated.shift().slice(1);\n\t}\n\tif (colonSeparated.length > 3 || !colonSeparated.length) return null;\n\tif (colonSeparated.length > 1) {\n\t\tconst name$1 = colonSeparated.pop();\n\t\tconst prefix = colonSeparated.pop();\n\t\tconst result = {\n\t\t\tprovider: colonSeparated.length > 0 ? colonSeparated[0] : provider,\n\t\t\tprefix,\n\t\t\tname: name$1\n\t\t};\n\t\treturn validate && !validateIconName(result) ? null : result;\n\t}\n\tconst name = colonSeparated[0];\n\tconst dashSeparated = name.split(\"-\");\n\tif (dashSeparated.length > 1) {\n\t\tconst result = {\n\t\t\tprovider,\n\t\t\tprefix: dashSeparated.shift(),\n\t\t\tname: dashSeparated.join(\"-\")\n\t\t};\n\t\treturn validate && !validateIconName(result) ? null : result;\n\t}\n\tif (allowSimpleName && provider === \"\") {\n\t\tconst result = {\n\t\t\tprovider,\n\t\t\tprefix: \"\",\n\t\t\tname\n\t\t};\n\t\treturn validate && !validateIconName(result, allowSimpleName) ? null : result;\n\t}\n\treturn null;\n};\n/**\n* Check if icon is valid.\n*\n* This function is not part of stringToIcon because validation is not needed for most code.\n*/\nconst validateIconName = (icon, allowSimpleName) => {\n\tif (!icon) return false;\n\treturn !!((allowSimpleName && icon.prefix === \"\" || !!icon.prefix) && !!icon.name);\n};\n\n/**\n* Allow storing icons without provider or prefix, making it possible to store icons like \"home\"\n*/\nlet simpleNames = false;\nfunction allowSimpleNames(allow) {\n\tif (typeof allow === \"boolean\") simpleNames = allow;\n\treturn simpleNames;\n}\n/**\n* Get icon data\n*\n* Returns:\n* - IconifyIcon on success, object directly from storage so don't modify it\n* - null if icon is marked as missing (returned in `not_found` property from API, so don't bother sending API requests)\n* - undefined if icon is missing in storage\n*/\nfunction getIconData(name) {\n\tconst icon = typeof name === \"string\" ? stringToIcon(name, true, simpleNames) : name;\n\tif (icon) {\n\t\tconst storage = getStorage(icon.provider, icon.prefix);\n\t\tconst iconName = icon.name;\n\t\treturn storage.icons[iconName] || (storage.missing.has(iconName) ? null : void 0);\n\t}\n}\n/**\n* Add one icon\n*/\nfunction addIcon(name, data) {\n\tconst icon = stringToIcon(name, true, simpleNames);\n\tif (!icon) return false;\n\tconst storage = getStorage(icon.provider, icon.prefix);\n\tif (data) return addIconToStorage(storage, icon.name, data);\n\telse {\n\t\tstorage.missing.add(icon.name);\n\t\treturn true;\n\t}\n}\n/**\n* Add icon set\n*/\nfunction addCollection(data, provider) {\n\tif (typeof data !== \"object\") return false;\n\tif (typeof provider !== \"string\") provider = data.provider || \"\";\n\tif (simpleNames && !provider && !data.prefix) {\n\t\tlet added = false;\n\t\tif (quicklyValidateIconSet(data)) {\n\t\t\tdata.prefix = \"\";\n\t\t\tparseIconSet(data, (name, icon) => {\n\t\t\t\tif (addIcon(name, icon)) added = true;\n\t\t\t});\n\t\t}\n\t\treturn added;\n\t}\n\tconst prefix = data.prefix;\n\tif (!validateIconName({\n\t\tprefix,\n\t\tname: \"a\"\n\t})) return false;\n\tconst storage = getStorage(provider, prefix);\n\treturn !!addIconSet(storage, data);\n}\n/**\n* Check if icon data is available\n*/\nfunction iconLoaded(name) {\n\treturn !!getIconData(name);\n}\n/**\n* Get full icon\n*/\nfunction getIcon(name) {\n\tconst result = getIconData(name);\n\treturn result ? {\n\t\t...defaultIconProps,\n\t\t...result\n\t} : result;\n}\n\n/**\n* Default icon customisations values\n*/\nconst defaultIconSizeCustomisations = Object.freeze({\n\twidth: null,\n\theight: null\n});\nconst defaultIconCustomisations = Object.freeze({\n\t...defaultIconSizeCustomisations,\n\t...defaultIconTransformations\n});\n\n/**\n* Regular expressions for calculating dimensions\n*/\nconst unitsSplit = /(-?[0-9.]*[0-9]+[0-9.]*)/g;\nconst unitsTest = /^-?[0-9.]*[0-9]+[0-9.]*$/g;\nfunction calculateSize(size, ratio, precision) {\n\tif (ratio === 1) return size;\n\tprecision = precision || 100;\n\tif (typeof size === \"number\") return Math.ceil(size * ratio * precision) / precision;\n\tif (typeof size !== \"string\") return size;\n\tconst oldParts = size.split(unitsSplit);\n\tif (oldParts === null || !oldParts.length) return size;\n\tconst newParts = [];\n\tlet code = oldParts.shift();\n\tlet isNumber = unitsTest.test(code);\n\twhile (true) {\n\t\tif (isNumber) {\n\t\t\tconst num = parseFloat(code);\n\t\t\tif (isNaN(num)) newParts.push(code);\n\t\t\telse newParts.push(Math.ceil(num * ratio * precision) / precision);\n\t\t} else newParts.push(code);\n\t\tcode = oldParts.shift();\n\t\tif (code === void 0) return newParts.join(\"\");\n\t\tisNumber = !isNumber;\n\t}\n}\n\nfunction splitSVGDefs(content, tag = \"defs\") {\n\tlet defs = \"\";\n\tconst index = content.indexOf(\"<\" + tag);\n\twhile (index >= 0) {\n\t\tconst start = content.indexOf(\">\", index);\n\t\tconst end = content.indexOf(\"</\" + tag);\n\t\tif (start === -1 || end === -1) break;\n\t\tconst endEnd = content.indexOf(\">\", end);\n\t\tif (endEnd === -1) break;\n\t\tdefs += content.slice(start + 1, end).trim();\n\t\tcontent = content.slice(0, index).trim() + content.slice(endEnd + 1);\n\t}\n\treturn {\n\t\tdefs,\n\t\tcontent\n\t};\n}\n/**\n* Merge defs and content\n*/\nfunction mergeDefsAndContent(defs, content) {\n\treturn defs ? \"<defs>\" + defs + \"</defs>\" + content : content;\n}\n/**\n* Wrap SVG content, without wrapping definitions\n*/\nfunction wrapSVGContent(body, start, end) {\n\tconst split = splitSVGDefs(body);\n\treturn mergeDefsAndContent(split.defs, start + split.content + end);\n}\n\n/**\n* Check if value should be unset. Allows multiple keywords\n*/\nconst isUnsetKeyword = (value) => value === \"unset\" || value === \"undefined\" || value === \"none\";\n/**\n* Get SVG attributes and content from icon + customisations\n*\n* Does not generate style to make it compatible with frameworks that use objects for style, such as React.\n* Instead, it generates 'inline' value. If true, rendering engine should add verticalAlign: -0.125em to icon.\n*\n* Customisations should be normalised by platform specific parser.\n* Result should be converted to <svg> by platform specific parser.\n* Use replaceIDs to generate unique IDs for body.\n*/\nfunction iconToSVG(icon, customisations) {\n\tconst fullIcon = {\n\t\t...defaultIconProps,\n\t\t...icon\n\t};\n\tconst fullCustomisations = {\n\t\t...defaultIconCustomisations,\n\t\t...customisations\n\t};\n\tconst box = {\n\t\tleft: fullIcon.left,\n\t\ttop: fullIcon.top,\n\t\twidth: fullIcon.width,\n\t\theight: fullIcon.height\n\t};\n\tlet body = fullIcon.body;\n\t[fullIcon, fullCustomisations].forEach((props) => {\n\t\tconst transformations = [];\n\t\tconst hFlip = props.hFlip;\n\t\tconst vFlip = props.vFlip;\n\t\tlet rotation = props.rotate;\n\t\tif (hFlip) if (vFlip) rotation += 2;\n\t\telse {\n\t\t\ttransformations.push(\"translate(\" + (box.width + box.left).toString() + \" \" + (0 - box.top).toString() + \")\");\n\t\t\ttransformations.push(\"scale(-1 1)\");\n\t\t\tbox.top = box.left = 0;\n\t\t}\n\t\telse if (vFlip) {\n\t\t\ttransformations.push(\"translate(\" + (0 - box.left).toString() + \" \" + (box.height + box.top).toString() + \")\");\n\t\t\ttransformations.push(\"scale(1 -1)\");\n\t\t\tbox.top = box.left = 0;\n\t\t}\n\t\tlet tempValue;\n\t\tif (rotation < 0) rotation -= Math.floor(rotation / 4) * 4;\n\t\trotation = rotation % 4;\n\t\tswitch (rotation) {\n\t\t\tcase 1:\n\t\t\t\ttempValue = box.height / 2 + box.top;\n\t\t\t\ttransformations.unshift(\"rotate(90 \" + tempValue.toString() + \" \" + tempValue.toString() + \")\");\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\ttransformations.unshift(\"rotate(180 \" + (box.width / 2 + box.left).toString() + \" \" + (box.height / 2 + box.top).toString() + \")\");\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\ttempValue = box.width / 2 + box.left;\n\t\t\t\ttransformations.unshift(\"rotate(-90 \" + tempValue.toString() + \" \" + tempValue.toString() + \")\");\n\t\t\t\tbreak;\n\t\t}\n\t\tif (rotation % 2 === 1) {\n\t\t\tif (box.left !== box.top) {\n\t\t\t\ttempValue = box.left;\n\t\t\t\tbox.left = box.top;\n\t\t\t\tbox.top = tempValue;\n\t\t\t}\n\t\t\tif (box.width !== box.height) {\n\t\t\t\ttempValue = box.width;\n\t\t\t\tbox.width = box.height;\n\t\t\t\tbox.height = tempValue;\n\t\t\t}\n\t\t}\n\t\tif (transformations.length) body = wrapSVGContent(body, \"<g transform=\\\"\" + transformations.join(\" \") + \"\\\">\", \"</g>\");\n\t});\n\tconst customisationsWidth = fullCustomisations.width;\n\tconst customisationsHeight = fullCustomisations.height;\n\tconst boxWidth = box.width;\n\tconst boxHeight = box.height;\n\tlet width;\n\tlet height;\n\tif (customisationsWidth === null) {\n\t\theight = customisationsHeight === null ? \"1em\" : customisationsHeight === \"auto\" ? boxHeight : customisationsHeight;\n\t\twidth = calculateSize(height, boxWidth / boxHeight);\n\t} else {\n\t\twidth = customisationsWidth === \"auto\" ? boxWidth : customisationsWidth;\n\t\theight = customisationsHeight === null ? calculateSize(width, boxHeight / boxWidth) : customisationsHeight === \"auto\" ? boxHeight : customisationsHeight;\n\t}\n\tconst attributes = {};\n\tconst setAttr = (prop, value) => {\n\t\tif (!isUnsetKeyword(value)) attributes[prop] = value.toString();\n\t};\n\tsetAttr(\"width\", width);\n\tsetAttr(\"height\", height);\n\tconst viewBox = [\n\t\tbox.left,\n\t\tbox.top,\n\t\tboxWidth,\n\t\tboxHeight\n\t];\n\tattributes.viewBox = viewBox.join(\" \");\n\treturn {\n\t\tattributes,\n\t\tviewBox,\n\t\tbody\n\t};\n}\n\n/**\n* IDs usage:\n*\n* id=\"{id}\"\n* xlink:href=\"#{id}\"\n* url(#{id})\n*\n* From SVG animations:\n*\n* begin=\"0;{id}.end\"\n* begin=\"{id}.end\"\n* begin=\"{id}.click\"\n*/\n/**\n* Regular expression for finding ids\n*/\nconst regex = /\\sid=\"(\\S+)\"/g;\n/**\n* New random-ish prefix for ids\n*\n* Do not use dash, it cannot be used in SVG 2 animations\n*/\nconst randomPrefix = \"IconifyId\" + Date.now().toString(16) + (Math.random() * 16777216 | 0).toString(16);\n/**\n* Counter for ids, increasing with every replacement\n*/\nlet counter = 0;\n/**\n* Replace IDs in SVG output with unique IDs\n*/\nfunction replaceIDs(body, prefix = randomPrefix) {\n\tconst ids = [];\n\tlet match;\n\twhile (match = regex.exec(body)) ids.push(match[1]);\n\tif (!ids.length) return body;\n\tconst suffix = \"suffix\" + (Math.random() * 16777216 | Date.now()).toString(16);\n\tids.forEach((id) => {\n\t\tconst newID = typeof prefix === \"function\" ? prefix(id) : prefix + (counter++).toString();\n\t\tconst escapedID = id.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n\t\tbody = body.replace(new RegExp(\"([#;\\\"])(\" + escapedID + \")([\\\")]|\\\\.[a-z])\", \"g\"), \"$1\" + newID + suffix + \"$3\");\n\t});\n\tbody = body.replace(new RegExp(suffix, \"g\"), \"\");\n\treturn body;\n}\n\n/**\n* Local storate types and entries\n*/\nconst storage = Object.create(null);\n/**\n* Set API module\n*/\nfunction setAPIModule(provider, item) {\n\tstorage[provider] = item;\n}\n/**\n* Get API module\n*/\nfunction getAPIModule(provider) {\n\treturn storage[provider] || storage[\"\"];\n}\n\n/**\n* Create full API configuration from partial data\n*/\nfunction createAPIConfig(source) {\n\tlet resources;\n\tif (typeof source.resources === \"string\") resources = [source.resources];\n\telse {\n\t\tresources = source.resources;\n\t\tif (!(resources instanceof Array) || !resources.length) return null;\n\t}\n\tconst result = {\n\t\tresources,\n\t\tpath: source.path || \"/\",\n\t\tmaxURL: source.maxURL || 500,\n\t\trotate: source.rotate || 750,\n\t\ttimeout: source.timeout || 5e3,\n\t\trandom: source.random === true,\n\t\tindex: source.index || 0,\n\t\tdataAfterTimeout: source.dataAfterTimeout !== false\n\t};\n\treturn result;\n}\n/**\n* Local storage\n*/\nconst configStorage = Object.create(null);\n/**\n* Redundancy for API servers.\n*\n* API should have very high uptime because of implemented redundancy at server level, but\n* sometimes bad things happen. On internet 100% uptime is not possible.\n*\n* There could be routing problems. Server might go down for whatever reason, but it takes\n* few minutes to detect that downtime, so during those few minutes API might not be accessible.\n*\n* This script has some redundancy to mitigate possible network issues.\n*\n* If one host cannot be reached in 'rotate' (750 by default) ms, script will try to retrieve\n* data from different host. Hosts have different configurations, pointing to different\n* API servers hosted at different providers.\n*/\nconst fallBackAPISources = [\"https://api.simplesvg.com\", \"https://api.unisvg.com\"];\nconst fallBackAPI = [];\nwhile (fallBackAPISources.length > 0) if (fallBackAPISources.length === 1) fallBackAPI.push(fallBackAPISources.shift());\nelse if (Math.random() > .5) fallBackAPI.push(fallBackAPISources.shift());\nelse fallBackAPI.push(fallBackAPISources.pop());\nconfigStorage[\"\"] = createAPIConfig({ resources: [\"https://api.iconify.design\"].concat(fallBackAPI) });\n/**\n* Add custom config for provider\n*/\nfunction addAPIProvider(provider, customConfig) {\n\tconst config = createAPIConfig(customConfig);\n\tif (config === null) return false;\n\tconfigStorage[provider] = config;\n\treturn true;\n}\n/**\n* Get API configuration\n*/\nfunction getAPIConfig(provider) {\n\treturn configStorage[provider];\n}\n/**\n* List API providers\n*/\nfunction listAPIProviders() {\n\treturn Object.keys(configStorage);\n}\n\nconst detectFetch = () => {\n\tlet callback;\n\ttry {\n\t\tcallback = fetch;\n\t\tif (typeof callback === \"function\") return callback;\n\t} catch (err) {}\n};\n/**\n* Fetch function\n*/\nlet fetchModule = detectFetch();\n/**\n* Set custom fetch() function\n*/\nfunction setFetch(fetch$1) {\n\tfetchModule = fetch$1;\n}\n/**\n* Get fetch() function. Used by Icon Finder Core\n*/\nfunction getFetch() {\n\treturn fetchModule;\n}\n/**\n* Calculate maximum icons list length for prefix\n*/\nfunction calculateMaxLength(provider, prefix) {\n\tconst config = getAPIConfig(provider);\n\tif (!config) return 0;\n\tlet result;\n\tif (!config.maxURL) result = 0;\n\telse {\n\t\tlet maxHostLength = 0;\n\t\tconfig.resources.forEach((item) => {\n\t\t\tconst host = item;\n\t\t\tmaxHostLength = Math.max(maxHostLength, host.length);\n\t\t});\n\t\tconst url = prefix + \".json?icons=\";\n\t\tresult = config.maxURL - maxHostLength - config.path.length - url.length;\n\t}\n\treturn result;\n}\n/**\n* Should query be aborted, based on last HTTP status\n*/\nfunction shouldAbort(status) {\n\treturn status === 404;\n}\n/**\n* Prepare params\n*/\nconst prepare = (provider, prefix, icons) => {\n\tconst results = [];\n\tconst maxLength = calculateMaxLength(provider, prefix);\n\tconst type = \"icons\";\n\tlet item = {\n\t\ttype,\n\t\tprovider,\n\t\tprefix,\n\t\ticons: []\n\t};\n\tlet length = 0;\n\ticons.forEach((name, index) => {\n\t\tlength += name.length + 1;\n\t\tif (length >= maxLength && index > 0) {\n\t\t\tresults.push(item);\n\t\t\titem = {\n\t\t\t\ttype,\n\t\t\t\tprovider,\n\t\t\t\tprefix,\n\t\t\t\ticons: []\n\t\t\t};\n\t\t\tlength = name.length;\n\t\t}\n\t\titem.icons.push(name);\n\t});\n\tresults.push(item);\n\treturn results;\n};\n/**\n* Get path\n*/\nfunction getPath(provider) {\n\tif (typeof provider === \"string\") {\n\t\tconst config = getAPIConfig(provider);\n\t\tif (config) return config.path;\n\t}\n\treturn \"/\";\n}\n/**\n* Load icons\n*/\nconst send = (host, params, callback) => {\n\tif (!fetchModule) {\n\t\tcallback(\"abort\", 424);\n\t\treturn;\n\t}\n\tlet path = getPath(params.provider);\n\tswitch (params.type) {\n\t\tcase \"icons\": {\n\t\t\tconst prefix = params.prefix;\n\t\t\tconst icons = params.icons;\n\t\t\tconst iconsList = icons.join(\",\");\n\t\t\tconst urlParams = new URLSearchParams({ icons: iconsList });\n\t\t\tpath += prefix + \".json?\" + urlParams.toString();\n\t\t\tbreak;\n\t\t}\n\t\tcase \"custom\": {\n\t\t\tconst uri = params.uri;\n\t\t\tpath += uri.slice(0, 1) === \"/\" ? uri.slice(1) : uri;\n\t\t\tbreak;\n\t\t}\n\t\tdefault:\n\t\t\tcallback(\"abort\", 400);\n\t\t\treturn;\n\t}\n\tlet defaultError = 503;\n\tfetchModule(host + path).then((response) => {\n\t\tconst status = response.status;\n\t\tif (status !== 200) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tcallback(shouldAbort(status) ? \"abort\" : \"next\", status);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tdefaultError = 501;\n\t\treturn response.json();\n\t}).then((data) => {\n\t\tif (typeof data !== \"object\" || data === null) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (data === 404) callback(\"abort\", data);\n\t\t\t\telse callback(\"next\", defaultError);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tsetTimeout(() => {\n\t\t\tcallback(\"success\", data);\n\t\t});\n\t}).catch(() => {\n\t\tcallback(\"next\", defaultError);\n\t});\n};\n/**\n* Export module\n*/\nconst fetchAPIModule = {\n\tprepare,\n\tsend\n};\n\n/**\n* Remove callback\n*/\nfunction removeCallback(storages, id) {\n\tstorages.forEach((storage) => {\n\t\tconst items = storage.loaderCallbacks;\n\t\tif (items) storage.loaderCallbacks = items.filter((row) => row.id !== id);\n\t});\n}\n/**\n* Update all callbacks for provider and prefix\n*/\nfunction updateCallbacks(storage) {\n\tif (!storage.pendingCallbacksFlag) {\n\t\tstorage.pendingCallbacksFlag = true;\n\t\tsetTimeout(() => {\n\t\t\tstorage.pendingCallbacksFlag = false;\n\t\t\tconst items = storage.loaderCallbacks ? storage.loaderCallbacks.slice(0) : [];\n\t\t\tif (!items.length) return;\n\t\t\tlet hasPending = false;\n\t\t\tconst provider = storage.provider;\n\t\t\tconst prefix = storage.prefix;\n\t\t\titems.forEach((item) => {\n\t\t\t\tconst icons = item.icons;\n\t\t\t\tconst oldLength = icons.pending.length;\n\t\t\t\ticons.pending = icons.pending.filter((icon) => {\n\t\t\t\t\tif (icon.prefix !== prefix) return true;\n\t\t\t\t\tconst name = icon.name;\n\t\t\t\t\tif (storage.icons[name]) icons.loaded.push({\n\t\t\t\t\t\tprovider,\n\t\t\t\t\t\tprefix,\n\t\t\t\t\t\tname\n\t\t\t\t\t});\n\t\t\t\t\telse if (storage.missing.has(name)) icons.missing.push({\n\t\t\t\t\t\tprovider,\n\t\t\t\t\t\tprefix,\n\t\t\t\t\t\tname\n\t\t\t\t\t});\n\t\t\t\t\telse {\n\t\t\t\t\t\thasPending = true;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t\tif (icons.pending.length !== oldLength) {\n\t\t\t\t\tif (!hasPending) removeCallback([storage], item.id);\n\t\t\t\t\titem.callback(icons.loaded.slice(0), icons.missing.slice(0), icons.pending.slice(0), item.abort);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n}\n/**\n* Unique id counter for callbacks\n*/\nlet idCounter = 0;\n/**\n* Add callback\n*/\nfunction storeCallback(callback, icons, pendingSources) {\n\tconst id = idCounter++;\n\tconst abort = removeCallback.bind(null, pendingSources, id);\n\tif (!icons.pending.length) return abort;\n\tconst item = {\n\t\tid,\n\t\ticons,\n\t\tcallback,\n\t\tabort\n\t};\n\tpendingSources.forEach((storage) => {\n\t\t(storage.loaderCallbacks || (storage.loaderCallbacks = [])).push(item);\n\t});\n\treturn abort;\n}\n\n/**\n* Check if icons have been loaded\n*/\nfunction sortIcons(icons) {\n\tconst result = {\n\t\tloaded: [],\n\t\tmissing: [],\n\t\tpending: []\n\t};\n\tconst storage = Object.create(null);\n\ticons.sort((a, b) => {\n\t\tif (a.provider !== b.provider) return a.provider.localeCompare(b.provider);\n\t\tif (a.prefix !== b.prefix) return a.prefix.localeCompare(b.prefix);\n\t\treturn a.name.localeCompare(b.name);\n\t});\n\tlet lastIcon = {\n\t\tprovider: \"\",\n\t\tprefix: \"\",\n\t\tname: \"\"\n\t};\n\ticons.forEach((icon) => {\n\t\tif (lastIcon.name === icon.name && lastIcon.prefix === icon.prefix && lastIcon.provider === icon.provider) return;\n\t\tlastIcon = icon;\n\t\tconst provider = icon.provider;\n\t\tconst prefix = icon.prefix;\n\t\tconst name = icon.name;\n\t\tconst providerStorage = storage[provider] || (storage[provider] = Object.create(null));\n\t\tconst localStorage = providerStorage[prefix] || (providerStorage[prefix] = getStorage(provider, prefix));\n\t\tlet list;\n\t\tif (name in localStorage.icons) list = result.loaded;\n\t\telse if (prefix === \"\" || localStorage.missing.has(name)) list = result.missing;\n\t\telse list = result.pending;\n\t\tconst item = {\n\t\t\tprovider,\n\t\t\tprefix,\n\t\t\tname\n\t\t};\n\t\tlist.push(item);\n\t});\n\treturn result;\n}\n\n/**\n* Convert icons list from string/icon mix to icons and validate them\n*/\nfunction listToIcons(list, validate = true, simpleNames = false) {\n\tconst result = [];\n\tlist.forEach((item) => {\n\t\tconst icon = typeof item === \"string\" ? stringToIcon(item, validate, simpleNames) : item;\n\t\tif (icon) result.push(icon);\n\t});\n\treturn result;\n}\n\n/**\n* Default RedundancyConfig for API calls\n*/\nconst defaultConfig = {\n\tresources: [],\n\tindex: 0,\n\ttimeout: 2e3,\n\trotate: 750,\n\trandom: false,\n\tdataAfterTimeout: false\n};\n\n/**\n* Send query\n*/\nfunction sendQuery(config, payload, query, done) {\n\tconst resourcesCount = config.resources.length;\n\tconst startIndex = config.random ? Math.floor(Math.random() * resourcesCount) : config.index;\n\tlet resources;\n\tif (config.random) {\n\t\tlet list = config.resources.slice(0);\n\t\tresources = [];\n\t\twhile (list.length > 1) {\n\t\t\tconst nextIndex = Math.floor(Math.random() * list.length);\n\t\t\tresources.push(list[nextIndex]);\n\t\t\tlist = list.slice(0, nextIndex).concat(list.slice(nextIndex + 1));\n\t\t}\n\t\tresources = resources.concat(list);\n\t} else resources = config.resources.slice(startIndex).concat(config.resources.slice(0, startIndex));\n\tconst startTime = Date.now();\n\tlet status = \"pending\";\n\tlet queriesSent = 0;\n\tlet lastError;\n\tlet timer = null;\n\tlet queue = [];\n\tlet doneCallbacks = [];\n\tif (typeof done === \"function\") doneCallbacks.push(done);\n\t/**\n\t* Reset timer\n\t*/\n\tfunction resetTimer() {\n\t\tif (timer) {\n\t\t\tclearTimeout(timer);\n\t\t\ttimer = null;\n\t\t}\n\t}\n\t/**\n\t* Abort everything\n\t*/\n\tfunction abort() {\n\t\tif (status === \"pending\") status = \"aborted\";\n\t\tresetTimer();\n\t\tqueue.forEach((item) => {\n\t\t\tif (item.status === \"pending\") item.status = \"aborted\";\n\t\t});\n\t\tqueue = [];\n\t}\n\t/**\n\t* Add / replace callback to call when execution is complete.\n\t* This can be used to abort pending query implementations when query is complete or aborted.\n\t*/\n\tfunction subscribe(callback, overwrite) {\n\t\tif (overwrite) doneCallbacks = [];\n\t\tif (typeof callback === \"function\") doneCallbacks.push(callback);\n\t}\n\t/**\n\t* Get query status\n\t*/\n\tfunction getQueryStatus() {\n\t\treturn {\n\t\t\tstartTime,\n\t\t\tpayload,\n\t\t\tstatus,\n\t\t\tqueriesSent,\n\t\t\tqueriesPending: queue.length,\n\t\t\tsubscribe,\n\t\t\tabort\n\t\t};\n\t}\n\t/**\n\t* Fail query\n\t*/\n\tfunction failQuery() {\n\t\tstatus = \"failed\";\n\t\tdoneCallbacks.forEach((callback) => {\n\t\t\tcallback(void 0, lastError);\n\t\t});\n\t}\n\t/**\n\t* Clear queue\n\t*/\n\tfunction clearQueue() {\n\t\tqueue.forEach((item) => {\n\t\t\tif (item.status === \"pending\") item.status = \"aborted\";\n\t\t});\n\t\tqueue = [];\n\t}\n\t/**\n\t* Got response from module\n\t*/\n\tfunction moduleResponse(item, response, data) {\n\t\tconst isError = response !== \"success\";\n\t\tqueue = queue.filter((queued) => queued !== item);\n\t\tswitch (status) {\n\t\t\tcase \"pending\": break;\n\t\t\tcase \"failed\":\n\t\t\t\tif (isError || !config.dataAfterTimeout) return;\n\t\t\t\tbreak;\n\t\t\tdefault: return;\n\t\t}\n\t\tif (response === \"abort\") {\n\t\t\tlastError = data;\n\t\t\tfailQuery();\n\t\t\treturn;\n\t\t}\n\t\tif (isError) {\n\t\t\tlastError = data;\n\t\t\tif (!queue.length) if (!resources.length) failQuery();\n\t\t\telse execNext();\n\t\t\treturn;\n\t\t}\n\t\tresetTimer();\n\t\tclearQueue();\n\t\tif (!config.random) {\n\t\t\tconst index = config.resources.indexOf(item.resource);\n\t\t\tif (index !== -1 && index !== config.index) config.index = index;\n\t\t}\n\t\tstatus = \"completed\";\n\t\tdoneCallbacks.forEach((callback) => {\n\t\t\tcallback(data);\n\t\t});\n\t}\n\t/**\n\t* Execute next query\n\t*/\n\tfunction execNext() {\n\t\tif (status !== \"pending\") return;\n\t\tresetTimer();\n\t\tconst resource = resources.shift();\n\t\tif (resource === void 0) {\n\t\t\tif (queue.length) {\n\t\t\t\ttimer = setTimeout(() => {\n\t\t\t\t\tresetTimer();\n\t\t\t\t\tif (status === \"pending\") {\n\t\t\t\t\t\tclearQueue();\n\t\t\t\t\t\tfailQuery();\n\t\t\t\t\t}\n\t\t\t\t}, config.timeout);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfailQuery();\n\t\t\treturn;\n\t\t}\n\t\tconst item = {\n\t\t\tstatus: \"pending\",\n\t\t\tresource,\n\t\t\tcallback: (status$1, data) => {\n\t\t\t\tmoduleResponse(item, status$1, data);\n\t\t\t}\n\t\t};\n\t\tqueue.push(item);\n\t\tqueriesSent++;\n\t\ttimer = setTimeout(execNext, config.rotate);\n\t\tquery(resource, payload, item.callback);\n\t}\n\tsetTimeout(execNext);\n\treturn getQueryStatus;\n}\n\n/**\n* Redundancy instance\n*/\nfunction initRedundancy(cfg) {\n\tconst config = {\n\t\t...defaultConfig,\n\t\t...cfg\n\t};\n\tlet queries = [];\n\t/**\n\t* Remove aborted and completed queries\n\t*/\n\tfunction cleanup() {\n\t\tqueries = queries.filter((item) => item().status === \"pending\");\n\t}\n\t/**\n\t* Send query\n\t*/\n\tfunction query(payload, queryCallback, doneCallback) {\n\t\tconst query$1 = sendQuery(config, payload, queryCallback, (data, error) => {\n\t\t\tcleanup();\n\t\t\tif (doneCallback) doneCallback(data, error);\n\t\t});\n\t\tqueries.push(query$1);\n\t\treturn query$1;\n\t}\n\t/**\n\t* Find instance\n\t*/\n\tfunction find(callback) {\n\t\treturn queries.find((value) => {\n\t\t\treturn callback(value);\n\t\t}) || null;\n\t}\n\tconst instance = {\n\t\tquery,\n\t\tfind,\n\t\tsetIndex: (index) => {\n\t\t\tconfig.index = index;\n\t\t},\n\t\tgetIndex: () => config.index,\n\t\tcleanup\n\t};\n\treturn instance;\n}\n\nfunction emptyCallback$1() {}\nconst redundancyCache = Object.create(null);\n/**\n* Get Redundancy instance for provider\n*/\nfunction getRedundancyCache(provider) {\n\tif (!redundancyCache[provider]) {\n\t\tconst config = getAPIConfig(provider);\n\t\tif (!config) return;\n\t\tconst redundancy = initRedundancy(config);\n\t\tconst cachedReundancy = {\n\t\t\tconfig,\n\t\t\tredundancy\n\t\t};\n\t\tredundancyCache[provider] = cachedReundancy;\n\t}\n\treturn redundancyCache[provider];\n}\n/**\n* Send API query\n*/\nfunction sendAPIQuery(target, query, callback) {\n\tlet redundancy;\n\tlet send;\n\tif (typeof target === \"string\") {\n\t\tconst api = getAPIModule(target);\n\t\tif (!api) {\n\t\t\tcallback(void 0, 424);\n\t\t\treturn emptyCallback$1;\n\t\t}\n\t\tsend = api.send;\n\t\tconst cached = getRedundancyCache(target);\n\t\tif (cached) redundancy = cached.redundancy;\n\t} else {\n\t\tconst config = createAPIConfig(target);\n\t\tif (config) {\n\t\t\tredundancy = initRedundancy(config);\n\t\t\tconst moduleKey = target.resources ? target.resources[0] : \"\";\n\t\t\tconst api = getAPIModule(moduleKey);\n\t\t\tif (api) send = api.send;\n\t\t}\n\t}\n\tif (!redundancy || !send) {\n\t\tcallback(void 0, 424);\n\t\treturn emptyCallback$1;\n\t}\n\treturn redundancy.query(query, send, callback)().abort;\n}\n\nfunction emptyCallback() {}\n/**\n* Function called when new icons have been loaded\n*/\nfunction loadedNewIcons(storage) {\n\tif (!storage.iconsLoaderFlag) {\n\t\tstorage.iconsLoaderFlag = true;\n\t\tsetTimeout(() => {\n\t\t\tstorage.iconsLoaderFlag = false;\n\t\t\tupdateCallbacks(storage);\n\t\t});\n\t}\n}\n/**\n* Check icon names for API\n*/\nfunction checkIconNamesForAPI(icons) {\n\tconst valid = [];\n\tconst invalid = [];\n\ticons.forEach((name) => {\n\t\t(name.match(matchIconName) ? valid : invalid).push(name);\n\t});\n\treturn {\n\t\tvalid,\n\t\tinvalid\n\t};\n}\n/**\n* Parse loader response\n*/\nfunction parseLoaderResponse(storage, icons, data) {\n\tfunction checkMissing() {\n\t\tconst pending = storage.pendingIcons;\n\t\ticons.forEach((name) => {\n\t\t\tif (pending) pending.delete(name);\n\t\t\tif (!storage.icons[name]) storage.missing.add(name);\n\t\t});\n\t}\n\tif (data && typeof data === \"object\") try {\n\t\tconst parsed = addIconSet(storage, data);\n\t\tif (!parsed.length) {\n\t\t\tcheckMissing();\n\t\t\treturn;\n\t\t}\n\t} catch (err) {\n\t\tconsole.error(err);\n\t}\n\tcheckMissing();\n\tloadedNewIcons(storage);\n}\n/**\n* Handle response that can be async\n*/\nfunction parsePossiblyAsyncResponse(response, callback) {\n\tif (response instanceof Promise) response.then((data) => {\n\t\tcallback(data);\n\t}).catch(() => {\n\t\tcallback(null);\n\t});\n\telse callback(response);\n}\n/**\n* Load icons\n*/\nfunction loadNewIcons(storage, icons) {\n\tif (!storage.iconsToLoad) storage.iconsToLoad = icons;\n\telse storage.iconsToLoad = storage.iconsToLoad.concat(icons).sort();\n\tif (!storage.iconsQueueFlag) {\n\t\tstorage.iconsQueueFlag = true;\n\t\tsetTimeout(() => {\n\t\t\tstorage.iconsQueueFlag = false;\n\t\t\tconst { provider, prefix } = storage;\n\t\t\tconst icons$1 = storage.iconsToLoad;\n\t\t\tdelete storage.iconsToLoad;\n\t\t\tif (!icons$1 || !icons$1.length) return;\n\t\t\tconst customIconLoader = storage.loadIcon;\n\t\t\tif (storage.loadIcons && (icons$1.length > 1 || !customIconLoader)) {\n\t\t\t\tparsePossiblyAsyncResponse(storage.loadIcons(icons$1, prefix, provider), (data) => {\n\t\t\t\t\tparseLoaderResponse(storage, icons$1, data);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (customIconLoader) {\n\t\t\t\ticons$1.forEach((name) => {\n\t\t\t\t\tconst response = customIconLoader(name, prefix, provider);\n\t\t\t\t\tparsePossiblyAsyncResponse(response, (data) => {\n\t\t\t\t\t\tconst iconSet = data ? {\n\t\t\t\t\t\t\tprefix,\n\t\t\t\t\t\t\ticons: { [name]: data }\n\t\t\t\t\t\t} : null;\n\t\t\t\t\t\tparseLoaderResponse(storage, [name], iconSet);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst { valid, invalid } = checkIconNamesForAPI(icons$1);\n\t\t\tif (invalid.length) parseLoaderResponse(storage, invalid, null);\n\t\t\tif (!valid.length) return;\n\t\t\tconst api = prefix.match(matchIconName) ? getAPIModule(provider) : null;\n\t\t\tif (!api) {\n\t\t\t\tparseLoaderResponse(storage, valid, null);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst params = api.prepare(provider, prefix, valid);\n\t\t\tparams.forEach((item) => {\n\t\t\t\tsendAPIQuery(provider, item, (data) => {\n\t\t\t\t\tparseLoaderResponse(storage, item.icons, data);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n}\n/**\n* Load icons\n*/\nconst loadIcons = (icons, callback) => {\n\tconst cleanedIcons = listToIcons(icons, true, allowSimpleNames());\n\tconst sortedIcons = sortIcons(cleanedIcons);\n\tif (!sortedIcons.pending.length) {\n\t\tlet callCallback = true;\n\t\tif (callback) setTimeout(() => {\n\t\t\tif (callCallback) callback(sortedIcons.loaded, sortedIcons.missing, sortedIcons.pending, emptyCallback);\n\t\t});\n\t\treturn () => {\n\t\t\tcallCallback = false;\n\t\t};\n\t}\n\tconst newIcons = Object.create(null);\n\tconst sources = [];\n\tlet lastProvider, lastPrefix;\n\tsortedIcons.pending.forEach((icon) => {\n\t\tconst { provider, prefix } = icon;\n\t\tif (prefix === lastPrefix && provider === lastProvider) return;\n\t\tlastProvider = provider;\n\t\tlastPrefix = prefix;\n\t\tsources.push(getStorage(provider, prefix));\n\t\tconst providerNewIcons = newIcons[provider] || (newIcons[provider] = Object.create(null));\n\t\tif (!providerNewIcons[prefix]) providerNewIcons[prefix] = [];\n\t});\n\tsortedIcons.pending.forEach((icon) => {\n\t\tconst { provider, prefix, name } = icon;\n\t\tconst storage = getStorage(provider, prefix);\n\t\tconst pendingQueue = storage.pendingIcons || (storage.pendingIcons = /* @__PURE__ */ new Set());\n\t\tif (!pendingQueue.has(name)) {\n\t\t\tpendingQueue.add(name);\n\t\t\tnewIcons[provider][prefix].push(name);\n\t\t}\n\t});\n\tsources.forEach((storage) => {\n\t\tconst list = newIcons[storage.provider][storage.prefix];\n\t\tif (list.length) loadNewIcons(storage, list);\n\t});\n\treturn callback ? storeCallback(callback, sortedIcons, sources) : emptyCallback;\n};\n/**\n* Load one icon using Promise\n*/\nconst loadIcon = (icon) => {\n\treturn new Promise((fulfill, reject) => {\n\t\tconst iconObj = typeof icon === \"string\" ? stringToIcon(icon, true) : icon;\n\t\tif (!iconObj) {\n\t\t\treject(icon);\n\t\t\treturn;\n\t\t}\n\t\tloadIcons([iconObj || icon], (loaded) => {\n\t\t\tif (loaded.length && iconObj) {\n\t\t\t\tconst data = getIconData(iconObj);\n\t\t\t\tif (data) {\n\t\t\t\t\tfulfill({\n\t\t\t\t\t\t...defaultIconProps,\n\t\t\t\t\t\t...data\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\treject(icon);\n\t\t});\n\t});\n};\n\n/**\n* Set custom loader for multiple icons\n*/\nfunction setCustomIconsLoader(loader, prefix, provider) {\n\tgetStorage(provider || \"\", prefix).loadIcons = loader;\n}\n/**\n* Set custom loader for one icon\n*/\nfunction setCustomIconLoader(loader, prefix, provider) {\n\tgetStorage(provider || \"\", prefix).loadIcon = loader;\n}\n\n/**\n* Convert IconifyIconCustomisations to FullIconCustomisations, checking value types\n*/\nfunction mergeCustomisations(defaults, item) {\n\tconst result = { ...defaults };\n\tfor (const key in item) {\n\t\tconst value = item[key];\n\t\tconst valueType = typeof value;\n\t\tif (key in defaultIconSizeCustomisations) {\n\t\t\tif (value === null || value && (valueType === \"string\" || valueType === \"number\")) result[key] = value;\n\t\t} else if (valueType === typeof result[key]) result[key] = key === \"rotate\" ? value % 4 : value;\n\t}\n\treturn result;\n}\n\nconst separator = /[\\s,]+/;\n/**\n* Apply \"flip\" string to icon customisations\n*/\nfunction flipFromString(custom, flip) {\n\tflip.split(separator).forEach((str) => {\n\t\tconst value = str.trim();\n\t\tswitch (value) {\n\t\t\tcase \"horizontal\":\n\t\t\t\tcustom.hFlip = true;\n\t\t\t\tbreak;\n\t\t\tcase \"vertical\":\n\t\t\t\tcustom.vFlip = true;\n\t\t\t\tbreak;\n\t\t}\n\t});\n}\n\n/**\n* Get rotation value\n*/\nfunction rotateFromString(value, defaultValue = 0) {\n\tconst units = value.replace(/^-?[0-9.]*/, \"\");\n\tfunction cleanup(value$1) {\n\t\twhile (value$1 < 0) value$1 += 4;\n\t\treturn value$1 % 4;\n\t}\n\tif (units === \"\") {\n\t\tconst num = parseInt(value);\n\t\treturn isNaN(num) ? 0 : cleanup(num);\n\t} else if (units !== value) {\n\t\tlet split = 0;\n\t\tswitch (units) {\n\t\t\tcase \"%\":\n\t\t\t\tsplit = 25;\n\t\t\t\tbreak;\n\t\t\tcase \"deg\": split = 90;\n\t\t}\n\t\tif (split) {\n\t\t\tlet num = parseFloat(value.slice(0, value.length - units.length));\n\t\t\tif (isNaN(num)) return 0;\n\t\t\tnum = num / split;\n\t\t\treturn num % 1 === 0 ? cleanup(num) : 0;\n\t\t}\n\t}\n\treturn defaultValue;\n}\n\n/**\n* Generate <svg>\n*/\nfunction iconToHTML(body, attributes) {\n\tlet renderAttribsHTML = body.indexOf(\"xlink:\") === -1 ? \"\" : \" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\";\n\tfor (const attr in attributes) renderAttribsHTML += \" \" + attr + \"=\\\"\" + attributes[attr] + \"\\\"\";\n\treturn \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\"\" + renderAttribsHTML + \">\" + body + \"</svg>\";\n}\n\n/**\n* Encode SVG for use in url()\n*\n* Short alternative to encodeURIComponent() that encodes only stuff used in SVG, generating\n* smaller code.\n*/\nfunction encodeSVGforURL(svg) {\n\treturn svg.replace(/\"/g, \"'\").replace(/%/g, \"%25\").replace(/#/g, \"%23\").replace(/</g, \"%3C\").replace(/>/g, \"%3E\").replace(/\\s+/g, \" \");\n}\n/**\n* Generate data: URL from SVG\n*/\nfunction svgToData(svg) {\n\treturn \"data:image/svg+xml,\" + encodeSVGforURL(svg);\n}\n/**\n* Generate url() from SVG\n*/\nfunction svgToURL(svg) {\n\treturn \"url(\\\"\" + svgToData(svg) + \"\\\")\";\n}\n\nlet policy;\n/**\n* Attempt to create policy\n*/\nfunction createPolicy() {\n\ttry {\n\t\tpolicy = window.trustedTypes.createPolicy(\"iconify\", { createHTML: (s) => s });\n\t} catch (err) {\n\t\tpolicy = null;\n\t}\n}\n/**\n* Clean up value for innerHTML assignment\n*\n* This code doesn't actually clean up anything.\n* It is intended be used with Iconify icon data, which has already been validated\n*/\nfunction cleanUpInnerHTML(html) {\n\tif (policy === void 0) createPolicy();\n\treturn policy ? policy.createHTML(html) : html;\n}\n\nconst defaultExtendedIconCustomisations = {\n    ...defaultIconCustomisations,\n    inline: false,\n};\n\n/**\n * Default SVG attributes\n */\nconst svgDefaults = {\n    'xmlns': 'http://www.w3.org/2000/svg',\n    'xmlnsXlink': 'http://www.w3.org/1999/xlink',\n    'aria-hidden': true,\n    'role': 'img',\n};\n/**\n * Style modes\n */\nconst commonProps = {\n    display: 'inline-block',\n};\nconst monotoneProps = {\n    backgroundColor: 'currentColor',\n};\nconst coloredProps = {\n    backgroundColor: 'transparent',\n};\n// Dynamically add common props to variables above\nconst propsToAdd = {\n    Image: 'var(--svg)',\n    Repeat: 'no-repeat',\n    Size: '100% 100%',\n};\nconst propsToAddTo = {\n    WebkitMask: monotoneProps,\n    mask: monotoneProps,\n    background: coloredProps,\n};\nfor (const prefix in propsToAddTo) {\n    const list = propsToAddTo[prefix];\n    for (const prop in propsToAdd) {\n        list[prefix + prop] = propsToAdd[prop];\n    }\n}\n/**\n * Default values for customisations for inline icon\n */\nconst inlineDefaults = {\n    ...defaultExtendedIconCustomisations,\n    inline: true,\n};\n/**\n * Fix size: add 'px' to numbers\n */\nfunction fixSize(value) {\n    return value + (value.match(/^[-0-9.]+$/) ? 'px' : '');\n}\n/**\n * Render icon\n */\nconst render = (\n// Icon must be validated before calling this function\nicon, \n// Partial properties\nprops, \n// Icon name\nname) => {\n    // Get default properties\n    const defaultProps = props.inline\n        ? inlineDefaults\n        : defaultExtendedIconCustomisations;\n    // Get all customisations\n    const customisations = mergeCustomisations(defaultProps, props);\n    // Check mode\n    const mode = props.mode || 'svg';\n    // Create style\n    const style = {};\n    const customStyle = props.style || {};\n    // Create SVG component properties\n    const componentProps = {\n        ...(mode === 'svg' ? svgDefaults : {}),\n    };\n    if (name) {\n        const iconName = stringToIcon(name, false, true);\n        if (iconName) {\n            const classNames = ['iconify'];\n            const props = [\n                'provider',\n                'prefix',\n            ];\n            for (const prop of props) {\n                if (iconName[prop]) {\n                    classNames.push('iconify--' + iconName[prop]);\n                }\n            }\n            componentProps.className = classNames.join(' ');\n        }\n    }\n    // Get element properties\n    for (let key in props) {\n        const value = props[key];\n        if (value === void 0) {\n            continue;\n        }\n        switch (key) {\n            // Properties to ignore\n            case 'icon':\n            case 'style':\n            case 'children':\n            case 'onLoad':\n            case 'mode':\n            case 'ssr':\n            case 'fallback':\n                break;\n            // Forward ref\n            case '_ref':\n                componentProps.ref = value;\n                break;\n            // Merge class names\n            case 'className':\n                componentProps[key] =\n                    (componentProps[key] ? componentProps[key] + ' ' : '') +\n                        value;\n                break;\n            // Boolean attributes\n            case 'inline':\n            case 'hFlip':\n            case 'vFlip':\n                customisations[key] =\n                    value === true || value === 'true' || value === 1;\n                break;\n            // Flip as string: 'horizontal,vertical'\n            case 'flip':\n                if (typeof value === 'string') {\n                    flipFromString(customisations, value);\n                }\n                break;\n            // Color: copy to style\n            case 'color':\n                style.color = value;\n                break;\n            // Rotation as string\n            case 'rotate':\n                if (typeof value === 'string') {\n                    customisations[key] = rotateFromString(value);\n                }\n                else if (typeof value === 'number') {\n                    customisations[key] = value;\n                }\n                break;\n            // Remove aria-hidden\n            case 'ariaHidden':\n            case 'aria-hidden':\n                if (value !== true && value !== 'true') {\n                    delete componentProps['aria-hidden'];\n                }\n                break;\n            // Copy missing property if it does not exist in customisations\n            default:\n                if (defaultProps[key] === void 0) {\n                    componentProps[key] = value;\n                }\n        }\n    }\n    // Generate icon\n    const item = iconToSVG(icon, customisations);\n    const renderAttribs = item.attributes;\n    // Inline display\n    if (customisations.inline) {\n        style.verticalAlign = '-0.125em';\n    }\n    if (mode === 'svg') {\n        // Add style\n        componentProps.style = {\n            ...style,\n            ...customStyle,\n        };\n        // Add icon stuff\n        Object.assign(componentProps, renderAttribs);\n        // Counter for ids based on \"id\" property to render icons consistently on server and client\n        let localCounter = 0;\n        let id = props.id;\n        if (typeof id === 'string') {\n            // Convert '-' to '_' to avoid errors in animations\n            id = id.replace(/-/g, '_');\n        }\n        // Add icon stuff\n        componentProps.dangerouslySetInnerHTML = {\n            __html: cleanUpInnerHTML(replaceIDs(item.body, id ? () => id + 'ID' + localCounter++ : 'iconifyReact')),\n        };\n        return createElement('svg', componentProps);\n    }\n    // Render <span> with style\n    const { body, width, height } = icon;\n    const useMask = mode === 'mask' ||\n        (mode === 'bg' ? false : body.indexOf('currentColor') !== -1);\n    // Generate SVG\n    const html = iconToHTML(body, {\n        ...renderAttribs,\n        width: width + '',\n        height: height + '',\n    });\n    // Generate style\n    componentProps.style = {\n        ...style,\n        '--svg': svgToURL(html),\n        'width': fixSize(renderAttribs.width),\n        'height': fixSize(renderAttribs.height),\n        ...commonProps,\n        ...(useMask ? monotoneProps : coloredProps),\n        ...customStyle,\n    };\n    return createElement('span', componentProps);\n};\n\n/**\n * Initialise stuff\n */\n// Enable short names\nallowSimpleNames(true);\n// Set API module\nsetAPIModule('', fetchAPIModule);\n/**\n * Browser stuff\n */\nif (typeof document !== 'undefined' && typeof window !== 'undefined') {\n    const _window = window;\n    // Load icons from global \"IconifyPreload\"\n    if (_window.IconifyPreload !== void 0) {\n        const preload = _window.IconifyPreload;\n        const err = 'Invalid IconifyPreload syntax.';\n        if (typeof preload === 'object' && preload !== null) {\n            (preload instanceof Array ? preload : [preload]).forEach((item) => {\n                try {\n                    if (\n                    // Check if item is an object and not null/array\n                    typeof item !== 'object' ||\n                        item === null ||\n                        item instanceof Array ||\n                        // Check for 'icons' and 'prefix'\n                        typeof item.icons !== 'object' ||\n                        typeof item.prefix !== 'string' ||\n                        // Add icon set\n                        !addCollection(item)) {\n                        console.error(err);\n                    }\n                }\n                catch (e) {\n                    console.error(err);\n                }\n            });\n        }\n    }\n    // Set API from global \"IconifyProviders\"\n    if (_window.IconifyProviders !== void 0) {\n        const providers = _window.IconifyProviders;\n        if (typeof providers === 'object' && providers !== null) {\n            for (let key in providers) {\n                const err = 'IconifyProviders[' + key + '] is invalid.';\n                try {\n                    const value = providers[key];\n                    if (typeof value !== 'object' ||\n                        !value ||\n                        value.resources === void 0) {\n                        continue;\n                    }\n                    if (!addAPIProvider(key, value)) {\n                        console.error(err);\n                    }\n                }\n                catch (e) {\n                    console.error(err);\n                }\n            }\n        }\n    }\n}\nfunction IconComponent(props) {\n    const [mounted, setMounted] = useState(!!props.ssr);\n    const [abort, setAbort] = useState({});\n    // Get initial state\n    function getInitialState(mounted) {\n        if (mounted) {\n            const name = props.icon;\n            if (typeof name === 'object') {\n                // Icon as object\n                return {\n                    name: '',\n                    data: name,\n                };\n            }\n            const data = getIconData(name);\n            if (data) {\n                return {\n                    name,\n                    data,\n                };\n            }\n        }\n        return {\n            name: '',\n        };\n    }\n    const [state, setState] = useState(getInitialState(!!props.ssr));\n    // Cancel loading\n    function cleanup() {\n        const callback = abort.callback;\n        if (callback) {\n            callback();\n            setAbort({});\n        }\n    }\n    // Change state if it is different\n    function changeState(newState) {\n        if (JSON.stringify(state) !== JSON.stringify(newState)) {\n            cleanup();\n            setState(newState);\n            return true;\n        }\n    }\n    // Update state\n    function updateState() {\n        var _a;\n        const name = props.icon;\n        if (typeof name === 'object') {\n            // Icon as object\n            changeState({\n                name: '',\n                data: name,\n            });\n            return;\n        }\n        // New icon or got icon data\n        const data = getIconData(name);\n        if (changeState({\n            name,\n            data,\n        })) {\n            if (data === undefined) {\n                // Load icon, update state when done\n                const callback = loadIcons([name], updateState);\n                setAbort({\n                    callback,\n                });\n            }\n            else if (data) {\n                // Icon data is available: trigger onLoad callback if present\n                (_a = props.onLoad) === null || _a === void 0 ? void 0 : _a.call(props, name);\n            }\n        }\n    }\n    // Mounted state, cleanup for loader\n    useEffect(() => {\n        setMounted(true);\n        return cleanup;\n    }, []);\n    // Icon changed or component mounted\n    useEffect(() => {\n        if (mounted) {\n            updateState();\n        }\n    }, [props.icon, mounted]);\n    // Render icon\n    const { name, data } = state;\n    if (!data) {\n        return props.children\n            ? props.children\n            : props.fallback\n                ? props.fallback\n                : createElement('span', {});\n    }\n    return render({\n        ...defaultIconProps,\n        ...data,\n    }, props, name);\n}\n/**\n * Block icon\n *\n * @param props - Component properties\n */\nconst Icon = forwardRef((props, ref) => IconComponent({\n    ...props,\n    _ref: ref,\n}));\n/**\n * Inline icon (has negative verticalAlign that makes it behave like icon font)\n *\n * @param props - Component properties\n */\nconst InlineIcon = forwardRef((props, ref) => IconComponent({\n    inline: true,\n    ...props,\n    _ref: ref,\n}));\n/**\n * Internal API\n */\nconst _api = {\n    getAPIConfig,\n    setAPIModule,\n    sendAPIQuery,\n    setFetch,\n    getFetch,\n    listAPIProviders,\n};\n\nexport { Icon, InlineIcon, _api, addAPIProvider, addCollection, addIcon, iconToSVG as buildIcon, calculateSize, getIcon, iconLoaded, listIcons, loadIcon, loadIcons, replaceIDs, setCustomIconLoader, setCustomIconsLoader };\n","// src/icon/icon.tsx\r\nimport React from 'react';\r\nimport { Icon as IconifyRender } from '@iconify/react'; \r\n\r\nexport interface IconProps {\r\n  /**  Iconify  \"mingcute:home-line\" */\r\n  icon?: string; \r\n  /**  (px) */\r\n  size?: number | string;\r\n  /**  */\r\n  className?: string;\r\n  /**  ( 'currentColor') */\r\n  color?: string;\r\n  /**  */\r\n  style?: React.CSSProperties;\r\n  /**  Component   */\r\n  children?: React.ReactNode;\r\n}\r\n\r\nexport function Icon({ \r\n  icon,\r\n  size = 24, \r\n  className,\r\n  color,\r\n  style,\r\n  children,\r\n  ...rest \r\n}: IconProps) {\r\n  \r\n  const containerStyle: React.CSSProperties = {\r\n    display: 'inline-flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    width: size,\r\n    height: size,\r\n    flexShrink: 0,\r\n    color: color || 'currentColor', //  currentColor \r\n    ...style,\r\n  };\r\n\r\n  //  1:  children (Custom SVG  Local Icons)\r\n  if (children) {\r\n    return (\r\n      <span className={className} style={containerStyle} {...rest}>\r\n        {React.isValidElement(children) \r\n          ? React.cloneElement(children as React.ReactElement<any>, { \r\n              width: size, \r\n              height: size,\r\n              //  Error  children  style props\r\n              style: { display: 'block', ...(children.props?.style || {}) } \r\n            }) \r\n          : children}\r\n      </span>\r\n    );\r\n  }\r\n\r\n  //  2:  icon string \r\n  if (!icon) return null;\r\n\r\n  //  3:  Iconify\r\n  return (\r\n    <span className={className} style={containerStyle} {...rest}>\r\n      <IconifyRender \r\n        icon={icon} \r\n        width=\"100%\" \r\n        height=\"100%\"\r\n        style={{ display: 'block' }}\r\n      />\r\n    </span>\r\n  );\r\n}","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport { Link } from '../../navigation/link/link';\r\nimport { Icon } from '../../../icon/icon';\r\nimport './icon-button.scss'; //   .module.scss\r\nimport type { IconButtonProps } from './icon-button.type';\r\n\r\nexport function IconButton({\r\n  icon,\r\n  href,\r\n  onClick,\r\n  disabled,\r\n  size = 'md',\r\n  shape = 'circle',\r\n  variant = 'ghost',\r\n  className,\r\n  style,\r\n  external,\r\n  target,\r\n  rel,\r\n  type = 'button',\r\n}: IconButtonProps) {\r\n  \r\n  // \r\n  const iconSizeMap = {\r\n    xs: 14,\r\n    sm: 16,\r\n    md: 20,\r\n    lg: 24,\r\n    xl: 28,\r\n  };\r\n\r\n  //   Class String  Prefix  styles object\r\n  const classes = classNames(\r\n    'lm-icon-btn',\r\n    `is-${size}`,\r\n    `is-${shape}`,\r\n    `is-${variant}`,\r\n    { 'is-disabled': disabled },\r\n    className\r\n  );\r\n\r\n  const content = (\r\n    <span className=\"lm-icon-btn-inner\">\r\n      {typeof icon === 'string' ? (\r\n        <Icon icon={icon} size={iconSizeMap[size]} />\r\n      ) : (\r\n        icon\r\n      )}\r\n    </span>\r\n  );\r\n\r\n  if (href && !disabled) {\r\n    return (\r\n      <Link\r\n        href={href}\r\n        className={classes}\r\n        style={style}\r\n        onClick={onClick}\r\n        external={external}\r\n        target={target}\r\n        rel={rel}\r\n        noStyles\r\n        aria-disabled={disabled}\r\n      >\r\n        {content}\r\n      </Link>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <button\r\n      type={type}\r\n      className={classes}\r\n      style={style}\r\n      onClick={onClick as React.MouseEventHandler<HTMLButtonElement>}\r\n      disabled={disabled}\r\n    >\r\n      {content}\r\n    </button>\r\n  );\r\n}","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport type { SegmentedControlOption } from './segmented-control-option-type';\r\nimport './segmented-control.scss'; //   .scss \r\n\r\nexport type SegmentedControlProps = {\r\n  options?: SegmentedControlOption[];\r\n  value?: string;\r\n  onChange?: (value: string) => void;\r\n  className?: string;\r\n};\r\n\r\nconst defaultOptions: SegmentedControlOption[] = [\r\n  { label: 'Workwear', value: 'workwear' },\r\n  { label: 'Casual', value: 'casual' },\r\n  { label: 'Formal', value: 'formal' },\r\n  { label: 'Gym', value: 'gym' },\r\n];\r\n\r\nexport function SegmentedControl({\r\n  options = defaultOptions,\r\n  value = 'workwear',\r\n  onChange,\r\n  className,\r\n}: SegmentedControlProps) {\r\n  const handleOptionClick = (optionValue: string, isDisabled?: boolean) => {\r\n    if (isDisabled) return;\r\n    if (onChange) {\r\n      onChange(optionValue);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={classNames('lm-segmented-control', className)}>\r\n      {options.map((option) => {\r\n        const isSelected = option.value === value;\r\n        return (\r\n          <button\r\n            key={option.value}\r\n            type=\"button\"\r\n            className={classNames('lm-segmented-option', {\r\n              'is-active': isSelected,\r\n              'is-disabled': option.disabled,\r\n            })}\r\n            onClick={() => handleOptionClick(option.value, option.disabled)}\r\n            disabled={option.disabled}\r\n            aria-pressed={isSelected}\r\n          >\r\n            {option.label}\r\n          </button>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}","import React, { useState } from 'react';\r\nimport classNames from 'classnames';\r\nimport type { TextInputProps } from './text-input.type';\r\nimport { Icon } from '../../../icon/icon';\r\nimport './text-input.scss';\r\n\r\nexport function TextInput({\r\n  id,\r\n  value,\r\n  onChange,\r\n  disabled,\r\n  error,\r\n  placeholder,\r\n  label,\r\n  type = 'text',\r\n  radius = 'sm',\r\n  leadingIcon,\r\n  trailingIcon,\r\n  className,\r\n  style,\r\n  ...rest\r\n}: TextInputProps) {\r\n  \r\n  //  \r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const isPasswordType = type === 'password';\r\n  const inputType = isPasswordType && showPassword ? 'text' : type;\r\n\r\n  const togglePassword = () => setShowPassword(!showPassword);\r\n\r\n  const containerClasses = classNames('lm-input-container', `is-radius-${radius}`, {\r\n    'is-error': !!error,\r\n    'is-disabled': disabled,\r\n  });\r\n\r\n  return (\r\n    <div className={classNames('lm-input-root', className)} style={style}>\r\n      {label && <label htmlFor={id} className=\"lm-input-label\">{label}</label>}\r\n      \r\n      <div className={containerClasses}>\r\n        {leadingIcon && (\r\n          <div className=\"lm-input-leading-icon\">{leadingIcon}</div>\r\n        )}\r\n        \r\n        <input\r\n          {...rest}\r\n          id={id}\r\n          type={inputType}\r\n          value={value}\r\n          onChange={onChange}\r\n          disabled={disabled}\r\n          placeholder={placeholder}\r\n          className=\"lm-input-field\"\r\n        />\r\n        \r\n        {isPasswordType ? (\r\n          <button \r\n            type=\"button\"\r\n            className=\"lm-input-password-toggle\"\r\n            onClick={togglePassword}\r\n            tabIndex={-1}\r\n            aria-label={showPassword ? \"Hide password\" : \"Show password\"}\r\n          >\r\n            <Icon icon={showPassword ? 'mingcute:eye-close-line' : 'mingcute:eye-line'} size={18} />\r\n          </button>\r\n        ) : trailingIcon && (\r\n          <div className=\"lm-input-trailing-icon\">{trailingIcon}</div>\r\n        )}\r\n      </div>\r\n\r\n      {error && <span className=\"lm-input-error-message\">{error}</span>}\r\n    </div>\r\n  );\r\n}","/**\n * Time zone name format.\n */\n\n/**\n * The function returns the time zone name for the given date in the specified\n * time zone.\n *\n * It uses the `Intl.DateTimeFormat` API and by default outputs the time zone\n * name in a long format, e.g. \"Pacific Standard Time\" or\n * \"Singapore Standard Time\".\n *\n * It is possible to specify the format as the third argument using one of the following options\n *\n * - \"short\": e.g. \"EDT\" or \"GMT+8\".\n * - \"long\": e.g. \"Eastern Daylight Time\".\n * - \"shortGeneric\": e.g. \"ET\" or \"Singapore Time\".\n * - \"longGeneric\": e.g. \"Eastern Time\" or \"Singapore Standard Time\".\n *\n * These options correspond to TR35 tokens `z..zzz`, `zzzz`, `v`, and `vvvv` respectively: https://www.unicode.org/reports/tr35/tr35-dates.html#dfst-zone\n *\n * @param timeZone - Time zone name (IANA or UTC offset)\n * @param date - Date object to get the time zone name for\n * @param format - Optional format of the time zone name. Defaults to \"long\". Can be \"short\", \"long\", \"shortGeneric\", or \"longGeneric\".\n *\n * @returns Time zone name (e.g. \"Singapore Standard Time\")\n */\nexport function tzName(timeZone, date, format = \"long\") {\n  return new Intl.DateTimeFormat(\"en-US\", {\n    // Enforces engine to render the time. Without the option JavaScriptCore omits it.\n    hour: \"numeric\",\n    timeZone: timeZone,\n    timeZoneName: format\n  }).format(date).split(/\\s/g) // Format.JS uses non-breaking spaces\n  .slice(2) // Skip the hour and AM/PM parts\n  .join(\" \");\n}","const offsetFormatCache = {};\nconst offsetCache = {};\n\n/**\n * The function extracts UTC offset in minutes from the given date in specified\n * time zone.\n *\n * Unlike `Date.prototype.getTimezoneOffset`, this function returns the value\n * mirrored to the sign of the offset in the time zone. For Asia/Singapore\n * (UTC+8), `tzOffset` returns 480, while `getTimezoneOffset` returns -480.\n *\n * @param timeZone - Time zone name (IANA or UTC offset)\n * @param date - Date to check the offset for\n *\n * @returns UTC offset in minutes\n */\nexport function tzOffset(timeZone, date) {\n  try {\n    const format = offsetFormatCache[timeZone] ||= new Intl.DateTimeFormat(\"en-US\", {\n      timeZone,\n      timeZoneName: \"longOffset\"\n    }).format;\n    const offsetStr = format(date).split(\"GMT\")[1];\n    if (offsetStr in offsetCache) return offsetCache[offsetStr];\n    return calcOffset(offsetStr, offsetStr.split(\":\"));\n  } catch {\n    // Fallback to manual parsing if the runtime doesn't support HH:MM/HHMM/HH\n    // See: https://github.com/nodejs/node/issues/53419\n    if (timeZone in offsetCache) return offsetCache[timeZone];\n    const captures = timeZone?.match(offsetRe);\n    if (captures) return calcOffset(timeZone, captures.slice(1));\n    return NaN;\n  }\n}\nconst offsetRe = /([+-]\\d\\d):?(\\d\\d)?/;\nfunction calcOffset(cacheStr, values) {\n  const hours = +(values[0] || 0);\n  const minutes = +(values[1] || 0);\n  // Convert seconds to minutes by dividing by 60 to keep the function return in minutes.\n  const seconds = +(values[2] || 0) / 60;\n  return offsetCache[cacheStr] = hours * 60 + minutes > 0 ? hours * 60 + minutes + seconds : hours * 60 - minutes - seconds;\n}","import { tzOffset } from \"../tzOffset/index.js\";\nexport class TZDateMini extends Date {\n  //#region static\n\n  constructor(...args) {\n    super();\n    if (args.length > 1 && typeof args[args.length - 1] === \"string\") {\n      this.timeZone = args.pop();\n    }\n    this.internal = new Date();\n    if (isNaN(tzOffset(this.timeZone, this))) {\n      this.setTime(NaN);\n    } else {\n      if (!args.length) {\n        this.setTime(Date.now());\n      } else if (typeof args[0] === \"number\" && (args.length === 1 || args.length === 2 && typeof args[1] !== \"number\")) {\n        this.setTime(args[0]);\n      } else if (typeof args[0] === \"string\") {\n        this.setTime(+new Date(args[0]));\n      } else if (args[0] instanceof Date) {\n        this.setTime(+args[0]);\n      } else {\n        this.setTime(+new Date(...args));\n        adjustToSystemTZ(this, NaN);\n        syncToInternal(this);\n      }\n    }\n  }\n  static tz(tz, ...args) {\n    return args.length ? new TZDateMini(...args, tz) : new TZDateMini(Date.now(), tz);\n  }\n\n  //#endregion\n\n  //#region time zone\n\n  withTimeZone(timeZone) {\n    return new TZDateMini(+this, timeZone);\n  }\n  getTimezoneOffset() {\n    const offset = -tzOffset(this.timeZone, this);\n    // Remove the seconds offset\n    // use Math.floor for negative GMT timezones and Math.ceil for positive GMT timezones.\n    return offset > 0 ? Math.floor(offset) : Math.ceil(offset);\n  }\n\n  //#endregion\n\n  //#region time\n\n  setTime(time) {\n    Date.prototype.setTime.apply(this, arguments);\n    syncToInternal(this);\n    return +this;\n  }\n\n  //#endregion\n\n  //#region date-fns integration\n\n  [Symbol.for(\"constructDateFrom\")](date) {\n    return new TZDateMini(+new Date(date), this.timeZone);\n  }\n\n  //#endregion\n}\n\n// Assign getters and setters\nconst re = /^(get|set)(?!UTC)/;\nObject.getOwnPropertyNames(Date.prototype).forEach(method => {\n  if (!re.test(method)) return;\n  const utcMethod = method.replace(re, \"$1UTC\");\n  // Filter out methods without UTC counterparts\n  if (!TZDateMini.prototype[utcMethod]) return;\n  if (method.startsWith(\"get\")) {\n    // Delegate to internal date's UTC method\n    TZDateMini.prototype[method] = function () {\n      return this.internal[utcMethod]();\n    };\n  } else {\n    // Assign regular setter\n    TZDateMini.prototype[method] = function () {\n      Date.prototype[utcMethod].apply(this.internal, arguments);\n      syncFromInternal(this);\n      return +this;\n    };\n\n    // Assign UTC setter\n    TZDateMini.prototype[utcMethod] = function () {\n      Date.prototype[utcMethod].apply(this, arguments);\n      syncToInternal(this);\n      return +this;\n    };\n  }\n});\n\n/**\n * Function syncs time to internal date, applying the time zone offset.\n *\n * @param {Date} date - Date to sync\n */\nfunction syncToInternal(date) {\n  date.internal.setTime(+date);\n  date.internal.setUTCSeconds(date.internal.getUTCSeconds() - Math.round(-tzOffset(date.timeZone, date) * 60));\n}\n\n/**\n * Function syncs the internal date UTC values to the date. It allows to get\n * accurate timestamp value.\n *\n * @param {Date} date - The date to sync\n */\nfunction syncFromInternal(date) {\n  // First we transpose the internal values\n  Date.prototype.setFullYear.call(date, date.internal.getUTCFullYear(), date.internal.getUTCMonth(), date.internal.getUTCDate());\n  Date.prototype.setHours.call(date, date.internal.getUTCHours(), date.internal.getUTCMinutes(), date.internal.getUTCSeconds(), date.internal.getUTCMilliseconds());\n\n  // Now we have to adjust the date to the system time zone\n  adjustToSystemTZ(date);\n}\n\n/**\n * Function adjusts the date to the system time zone. It uses the time zone\n * differences to calculate the offset and adjust the date.\n *\n * @param {Date} date - Date to adjust\n */\nfunction adjustToSystemTZ(date) {\n  // Save the time zone offset before all the adjustments\n  const baseOffset = tzOffset(date.timeZone, date);\n  // Remove the seconds offset\n  // use Math.floor for negative GMT timezones and Math.ceil for positive GMT timezones.\n  const offset = baseOffset > 0 ? Math.floor(baseOffset) : Math.ceil(baseOffset);\n  //#region System DST adjustment\n\n  // The biggest problem with using the system time zone is that when we create\n  // a date from internal values stored in UTC, the system time zone might end\n  // up on the DST hour:\n  //\n  //   $ TZ=America/New_York node\n  //   > new Date(2020, 2, 8, 1).toString()\n  //   'Sun Mar 08 2020 01:00:00 GMT-0500 (Eastern Standard Time)'\n  //   > new Date(2020, 2, 8, 2).toString()\n  //   'Sun Mar 08 2020 03:00:00 GMT-0400 (Eastern Daylight Time)'\n  //   > new Date(2020, 2, 8, 3).toString()\n  //   'Sun Mar 08 2020 03:00:00 GMT-0400 (Eastern Daylight Time)'\n  //   > new Date(2020, 2, 8, 4).toString()\n  //   'Sun Mar 08 2020 04:00:00 GMT-0400 (Eastern Daylight Time)'\n  //\n  // Here we get the same hour for both 2 and 3, because the system time zone\n  // has DST beginning at 8 March 2020, 2 a.m. and jumps to 3 a.m. So we have\n  // to adjust the internal date to reflect that.\n  //\n  // However we want to adjust only if that's the DST hour the change happenes,\n  // not the hour where DST moves to.\n\n  // We calculate the previous hour to see if the time zone offset has changed\n  // and we have landed on the DST hour.\n  const prevHour = new Date(+date);\n  // We use UTC methods here as we don't want to land on the same hour again\n  // in case of DST.\n  prevHour.setUTCHours(prevHour.getUTCHours() - 1);\n\n  // Calculate if we are on the system DST hour.\n  const systemOffset = -new Date(+date).getTimezoneOffset();\n  const prevHourSystemOffset = -new Date(+prevHour).getTimezoneOffset();\n  const systemDSTChange = systemOffset - prevHourSystemOffset;\n  // Detect the DST shift. System DST change will occur both on\n  const dstShift = Date.prototype.getHours.apply(date) !== date.internal.getUTCHours();\n\n  // Move the internal date when we are on the system DST hour.\n  if (systemDSTChange && dstShift) date.internal.setUTCMinutes(date.internal.getUTCMinutes() + systemDSTChange);\n\n  //#endregion\n\n  //#region System diff adjustment\n\n  // Now we need to adjust the date, since we just applied internal values.\n  // We need to calculate the difference between the system and date time zones\n  // and apply it to the date.\n\n  const offsetDiff = systemOffset - offset;\n  if (offsetDiff) Date.prototype.setUTCMinutes.call(date, Date.prototype.getUTCMinutes.call(date) + offsetDiff);\n\n  //#endregion\n\n  //#region Seconds System diff adjustment\n\n  const systemDate = new Date(+date);\n  // Set the UTC seconds to 0 to isolate the timezone offset in seconds.\n  systemDate.setUTCSeconds(0);\n  // For negative systemOffset, invert the seconds.\n  const systemSecondsOffset = systemOffset > 0 ? systemDate.getSeconds() : (systemDate.getSeconds() - 60) % 60;\n\n  // Calculate the seconds offset based on the timezone offset.\n  const secondsOffset = Math.round(-(tzOffset(date.timeZone, date) * 60)) % 60;\n  if (secondsOffset || systemSecondsOffset) {\n    date.internal.setUTCSeconds(date.internal.getUTCSeconds() + secondsOffset);\n    Date.prototype.setUTCSeconds.call(date, Date.prototype.getUTCSeconds.call(date) + secondsOffset + systemSecondsOffset);\n  }\n\n  //#endregion\n\n  //#region Post-adjustment DST fix\n\n  const postBaseOffset = tzOffset(date.timeZone, date);\n  // Remove the seconds offset\n  // use Math.floor for negative GMT timezones and Math.ceil for positive GMT timezones.\n  const postOffset = postBaseOffset > 0 ? Math.floor(postBaseOffset) : Math.ceil(postBaseOffset);\n  const postSystemOffset = -new Date(+date).getTimezoneOffset();\n  const postOffsetDiff = postSystemOffset - postOffset;\n  const offsetChanged = postOffset !== offset;\n  const postDiff = postOffsetDiff - offsetDiff;\n  if (offsetChanged && postDiff) {\n    Date.prototype.setUTCMinutes.call(date, Date.prototype.getUTCMinutes.call(date) + postDiff);\n\n    // Now we need to check if got offset change during the post-adjustment.\n    // If so, we also need both dates to reflect that.\n\n    const newBaseOffset = tzOffset(date.timeZone, date);\n    // Remove the seconds offset\n    // use Math.floor for negative GMT timezones and Math.ceil for positive GMT timezones.\n    const newOffset = newBaseOffset > 0 ? Math.floor(newBaseOffset) : Math.ceil(newBaseOffset);\n    const offsetChange = postOffset - newOffset;\n    if (offsetChange) {\n      date.internal.setUTCMinutes(date.internal.getUTCMinutes() + offsetChange);\n      Date.prototype.setUTCMinutes.call(date, Date.prototype.getUTCMinutes.call(date) + offsetChange);\n    }\n  }\n\n  //#endregion\n}","import { tzName } from \"../tzName/index.js\";\nimport { TZDateMini } from \"./mini.js\";\nexport class TZDate extends TZDateMini {\n  //#region static\n\n  static tz(tz, ...args) {\n    return args.length ? new TZDate(...args, tz) : new TZDate(Date.now(), tz);\n  }\n\n  //#endregion\n\n  //#region representation\n\n  toISOString() {\n    const [sign, hours, minutes] = this.tzComponents();\n    const tz = `${sign}${hours}:${minutes}`;\n    return this.internal.toISOString().slice(0, -1) + tz;\n  }\n  toString() {\n    // \"Tue Aug 13 2024 07:50:19 GMT+0800 (Singapore Standard Time)\";\n    return `${this.toDateString()} ${this.toTimeString()}`;\n  }\n  toDateString() {\n    // toUTCString returns RFC 7231 (\"Mon, 12 Aug 2024 23:36:08 GMT\")\n    const [day, date, month, year] = this.internal.toUTCString().split(\" \");\n    // \"Tue Aug 13 2024\"\n    return `${day?.slice(0, -1) /* Remove \",\" */} ${month} ${date} ${year}`;\n  }\n  toTimeString() {\n    // toUTCString returns RFC 7231 (\"Mon, 12 Aug 2024 23:36:08 GMT\")\n    const time = this.internal.toUTCString().split(\" \")[4];\n    const [sign, hours, minutes] = this.tzComponents();\n    // \"07:42:23 GMT+0800 (Singapore Standard Time)\"\n    return `${time} GMT${sign}${hours}${minutes} (${tzName(this.timeZone, this)})`;\n  }\n  toLocaleString(locales, options) {\n    return Date.prototype.toLocaleString.call(this, locales, {\n      ...options,\n      timeZone: options?.timeZone || this.timeZone\n    });\n  }\n  toLocaleDateString(locales, options) {\n    return Date.prototype.toLocaleDateString.call(this, locales, {\n      ...options,\n      timeZone: options?.timeZone || this.timeZone\n    });\n  }\n  toLocaleTimeString(locales, options) {\n    return Date.prototype.toLocaleTimeString.call(this, locales, {\n      ...options,\n      timeZone: options?.timeZone || this.timeZone\n    });\n  }\n\n  //#endregion\n\n  //#region private\n\n  tzComponents() {\n    const offset = this.getTimezoneOffset();\n    const sign = offset > 0 ? \"-\" : \"+\";\n    const hours = String(Math.floor(Math.abs(offset) / 60)).padStart(2, \"0\");\n    const minutes = String(Math.abs(offset) % 60).padStart(2, \"0\");\n    return [sign, hours, minutes];\n  }\n\n  //#endregion\n\n  withTimeZone(timeZone) {\n    return new TZDate(+this, timeZone);\n  }\n\n  //#region date-fns integration\n\n  [Symbol.for(\"constructDateFrom\")](date) {\n    return new TZDate(+new Date(date), this.timeZone);\n  }\n\n  //#endregion\n}","/**\n * @module constants\n * @summary Useful constants\n * @description\n * Collection of useful date constants.\n *\n * The constants could be imported from `date-fns/constants`:\n *\n * ```ts\n * import { maxTime, minTime } from \"./constants/date-fns/constants\";\n *\n * function isAllowedTime(time) {\n *   return time <= maxTime && time >= minTime;\n * }\n * ```\n */\n\n/**\n * @constant\n * @name daysInWeek\n * @summary Days in 1 week.\n */\nexport const daysInWeek = 7;\n\n/**\n * @constant\n * @name daysInYear\n * @summary Days in 1 year.\n *\n * @description\n * How many days in a year.\n *\n * One years equals 365.2425 days according to the formula:\n *\n * > Leap year occurs every 4 years, except for years that are divisible by 100 and not divisible by 400.\n * > 1 mean year = (365+1/4-1/100+1/400) days = 365.2425 days\n */\nexport const daysInYear = 365.2425;\n\n/**\n * @constant\n * @name maxTime\n * @summary Maximum allowed time.\n *\n * @example\n * import { maxTime } from \"./constants/date-fns/constants\";\n *\n * const isValid = 8640000000000001 <= maxTime;\n * //=> false\n *\n * new Date(8640000000000001);\n * //=> Invalid Date\n */\nexport const maxTime = Math.pow(10, 8) * 24 * 60 * 60 * 1000;\n\n/**\n * @constant\n * @name minTime\n * @summary Minimum allowed time.\n *\n * @example\n * import { minTime } from \"./constants/date-fns/constants\";\n *\n * const isValid = -8640000000000001 >= minTime;\n * //=> false\n *\n * new Date(-8640000000000001)\n * //=> Invalid Date\n */\nexport const minTime = -maxTime;\n\n/**\n * @constant\n * @name millisecondsInWeek\n * @summary Milliseconds in 1 week.\n */\nexport const millisecondsInWeek = 604800000;\n\n/**\n * @constant\n * @name millisecondsInDay\n * @summary Milliseconds in 1 day.\n */\nexport const millisecondsInDay = 86400000;\n\n/**\n * @constant\n * @name millisecondsInMinute\n * @summary Milliseconds in 1 minute\n */\nexport const millisecondsInMinute = 60000;\n\n/**\n * @constant\n * @name millisecondsInHour\n * @summary Milliseconds in 1 hour\n */\nexport const millisecondsInHour = 3600000;\n\n/**\n * @constant\n * @name millisecondsInSecond\n * @summary Milliseconds in 1 second\n */\nexport const millisecondsInSecond = 1000;\n\n/**\n * @constant\n * @name minutesInYear\n * @summary Minutes in 1 year.\n */\nexport const minutesInYear = 525600;\n\n/**\n * @constant\n * @name minutesInMonth\n * @summary Minutes in 1 month.\n */\nexport const minutesInMonth = 43200;\n\n/**\n * @constant\n * @name minutesInDay\n * @summary Minutes in 1 day.\n */\nexport const minutesInDay = 1440;\n\n/**\n * @constant\n * @name minutesInHour\n * @summary Minutes in 1 hour.\n */\nexport const minutesInHour = 60;\n\n/**\n * @constant\n * @name monthsInQuarter\n * @summary Months in 1 quarter.\n */\nexport const monthsInQuarter = 3;\n\n/**\n * @constant\n * @name monthsInYear\n * @summary Months in 1 year.\n */\nexport const monthsInYear = 12;\n\n/**\n * @constant\n * @name quartersInYear\n * @summary Quarters in 1 year\n */\nexport const quartersInYear = 4;\n\n/**\n * @constant\n * @name secondsInHour\n * @summary Seconds in 1 hour.\n */\nexport const secondsInHour = 3600;\n\n/**\n * @constant\n * @name secondsInMinute\n * @summary Seconds in 1 minute.\n */\nexport const secondsInMinute = 60;\n\n/**\n * @constant\n * @name secondsInDay\n * @summary Seconds in 1 day.\n */\nexport const secondsInDay = secondsInHour * 24;\n\n/**\n * @constant\n * @name secondsInWeek\n * @summary Seconds in 1 week.\n */\nexport const secondsInWeek = secondsInDay * 7;\n\n/**\n * @constant\n * @name secondsInYear\n * @summary Seconds in 1 year.\n */\nexport const secondsInYear = secondsInDay * daysInYear;\n\n/**\n * @constant\n * @name secondsInMonth\n * @summary Seconds in 1 month\n */\nexport const secondsInMonth = secondsInYear / 12;\n\n/**\n * @constant\n * @name secondsInQuarter\n * @summary Seconds in 1 quarter.\n */\nexport const secondsInQuarter = secondsInMonth * 3;\n\n/**\n * @constant\n * @name constructFromSymbol\n * @summary Symbol enabling Date extensions to inherit properties from the reference date.\n *\n * The symbol is used to enable the `constructFrom` function to construct a date\n * using a reference date and a value. It allows to transfer extra properties\n * from the reference date to the new date. It's useful for extensions like\n * [`TZDate`](https://github.com/date-fns/tz) that accept a time zone as\n * a constructor argument.\n */\nexport const constructFromSymbol = Symbol.for(\"constructDateFrom\");\n","import { constructFromSymbol } from \"./constants.js\";\n\n/**\n * @name constructFrom\n * @category Generic Helpers\n * @summary Constructs a date using the reference date and the value\n *\n * @description\n * The function constructs a new date using the constructor from the reference\n * date and the given value. It helps to build generic functions that accept\n * date extensions.\n *\n * It defaults to `Date` if the passed reference date is a number or a string.\n *\n * Starting from v3.7.0, it allows to construct a date using `[Symbol.for(\"constructDateFrom\")]`\n * enabling to transfer extra properties from the reference date to the new date.\n * It's useful for extensions like [`TZDate`](https://github.com/date-fns/tz)\n * that accept a time zone as a constructor argument.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The reference date to take constructor from\n * @param value - The value to create the date\n *\n * @returns Date initialized using the given date and value\n *\n * @example\n * import { constructFrom } from \"./constructFrom/date-fns\";\n *\n * // A function that clones a date preserving the original type\n * function cloneDate<DateType extends Date>(date: DateType): DateType {\n *   return constructFrom(\n *     date, // Use constructor from the given date\n *     date.getTime() // Use the date value to create a new date\n *   );\n * }\n */\nexport function constructFrom(date, value) {\n  if (typeof date === \"function\") return date(value);\n\n  if (date && typeof date === \"object\" && constructFromSymbol in date)\n    return date[constructFromSymbol](value);\n\n  if (date instanceof Date) return new date.constructor(value);\n\n  return new Date(value);\n}\n\n// Fallback for modularized imports:\nexport default constructFrom;\n","import { constructFrom } from \"./constructFrom.js\";\n\n/**\n * @name toDate\n * @category Common Helpers\n * @summary Convert the given argument to an instance of Date.\n *\n * @description\n * Convert the given argument to an instance of Date.\n *\n * If the argument is an instance of Date, the function returns its clone.\n *\n * If the argument is a number, it is treated as a timestamp.\n *\n * If the argument is none of the above, the function returns Invalid Date.\n *\n * Starting from v3.7.0, it clones a date using `[Symbol.for(\"constructDateFrom\")]`\n * enabling to transfer extra properties from the reference date to the new date.\n * It's useful for extensions like [`TZDate`](https://github.com/date-fns/tz)\n * that accept a time zone as a constructor argument.\n *\n * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param argument - The value to convert\n *\n * @returns The parsed date in the local time zone\n *\n * @example\n * // Clone the date:\n * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Convert the timestamp to date:\n * const result = toDate(1392098430000)\n * //=> Tue Feb 11 2014 11:30:30\n */\nexport function toDate(argument, context) {\n  // [TODO] Get rid of `toDate` or `constructFrom`?\n  return constructFrom(context || argument, argument);\n}\n\n// Fallback for modularized imports:\nexport default toDate;\n","import { constructFrom } from \"./constructFrom.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link addDays} function options.\n */\n\n/**\n * @name addDays\n * @category Day Helpers\n * @summary Add the specified number of days to the given date.\n *\n * @description\n * Add the specified number of days to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of days to be added.\n * @param options - An object with options\n *\n * @returns The new date with the days added\n *\n * @example\n * // Add 10 days to 1 September 2014:\n * const result = addDays(new Date(2014, 8, 1), 10)\n * //=> Thu Sep 11 2014 00:00:00\n */\nexport function addDays(date, amount, options) {\n  const _date = toDate(date, options?.in);\n  if (isNaN(amount)) return constructFrom(options?.in || date, NaN);\n\n  // If 0 days, no-op to avoid changing times in the hour before end of DST\n  if (!amount) return _date;\n\n  _date.setDate(_date.getDate() + amount);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default addDays;\n","import { constructFrom } from \"./constructFrom.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link addMonths} function options.\n */\n\n/**\n * @name addMonths\n * @category Month Helpers\n * @summary Add the specified number of months to the given date.\n *\n * @description\n * Add the specified number of months to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of months to be added.\n * @param options - The options object\n *\n * @returns The new date with the months added\n *\n * @example\n * // Add 5 months to 1 September 2014:\n * const result = addMonths(new Date(2014, 8, 1), 5)\n * //=> Sun Feb 01 2015 00:00:00\n *\n * // Add one month to 30 January 2023:\n * const result = addMonths(new Date(2023, 0, 30), 1)\n * //=> Tue Feb 28 2023 00:00:00\n */\nexport function addMonths(date, amount, options) {\n  const _date = toDate(date, options?.in);\n  if (isNaN(amount)) return constructFrom(options?.in || date, NaN);\n  if (!amount) {\n    // If 0 months, no-op to avoid changing times in the hour before end of DST\n    return _date;\n  }\n  const dayOfMonth = _date.getDate();\n\n  // The JS Date object supports date math by accepting out-of-bounds values for\n  // month, day, etc. For example, new Date(2020, 0, 0) returns 31 Dec 2019 and\n  // new Date(2020, 13, 1) returns 1 Feb 2021.  This is *almost* the behavior we\n  // want except that dates will wrap around the end of a month, meaning that\n  // new Date(2020, 13, 31) will return 3 Mar 2021 not 28 Feb 2021 as desired. So\n  // we'll default to the end of the desired month by adding 1 to the desired\n  // month and using a date of 0 to back up one day to the end of the desired\n  // month.\n  const endOfDesiredMonth = constructFrom(options?.in || date, _date.getTime());\n  endOfDesiredMonth.setMonth(_date.getMonth() + amount + 1, 0);\n  const daysInMonth = endOfDesiredMonth.getDate();\n  if (dayOfMonth >= daysInMonth) {\n    // If we're already at the end of the month, then this is the correct date\n    // and we're done.\n    return endOfDesiredMonth;\n  } else {\n    // Otherwise, we now know that setting the original day-of-month value won't\n    // cause an overflow, so set the desired day-of-month. Note that we can't\n    // just set the date of `endOfDesiredMonth` because that object may have had\n    // its time changed in the unusual case where where a DST transition was on\n    // the last day of the month and its local time was in the hour skipped or\n    // repeated next to a DST transition.  So we use `date` instead which is\n    // guaranteed to still have the original time.\n    _date.setFullYear(\n      endOfDesiredMonth.getFullYear(),\n      endOfDesiredMonth.getMonth(),\n      dayOfMonth,\n    );\n    return _date;\n  }\n}\n\n// Fallback for modularized imports:\nexport default addMonths;\n","let defaultOptions = {};\n\nexport function getDefaultOptions() {\n  return defaultOptions;\n}\n\nexport function setDefaultOptions(newOptions) {\n  defaultOptions = newOptions;\n}\n","import { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link startOfWeek} function options.\n */\n\n/**\n * @name startOfWeek\n * @category Week Helpers\n * @summary Return the start of a week for the given date.\n *\n * @description\n * Return the start of a week for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of a week\n *\n * @example\n * // The start of a week for 2 September 2014 11:55:00:\n * const result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Sun Aug 31 2014 00:00:00\n *\n * @example\n * // If the week starts on Monday, the start of the week for 2 September 2014 11:55:00:\n * const result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0), { weekStartsOn: 1 })\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function startOfWeek(date, options) {\n  const defaultOptions = getDefaultOptions();\n  const weekStartsOn =\n    options?.weekStartsOn ??\n    options?.locale?.options?.weekStartsOn ??\n    defaultOptions.weekStartsOn ??\n    defaultOptions.locale?.options?.weekStartsOn ??\n    0;\n\n  const _date = toDate(date, options?.in);\n  const day = _date.getDay();\n  const diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;\n\n  _date.setDate(_date.getDate() - diff);\n  _date.setHours(0, 0, 0, 0);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfWeek;\n","import { startOfWeek } from \"./startOfWeek.js\";\n\n/**\n * The {@link startOfISOWeek} function options.\n */\n\n/**\n * @name startOfISOWeek\n * @category ISO Week Helpers\n * @summary Return the start of an ISO week for the given date.\n *\n * @description\n * Return the start of an ISO week for the given date.\n * The result will be in the local timezone.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of an ISO week\n *\n * @example\n * // The start of an ISO week for 2 September 2014 11:55:00:\n * const result = startOfISOWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function startOfISOWeek(date, options) {\n  return startOfWeek(date, { ...options, weekStartsOn: 1 });\n}\n\n// Fallback for modularized imports:\nexport default startOfISOWeek;\n","import { constructFrom } from \"./constructFrom.js\";\nimport { startOfISOWeek } from \"./startOfISOWeek.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getISOWeekYear} function options.\n */\n\n/**\n * @name getISOWeekYear\n * @category ISO Week-Numbering Year Helpers\n * @summary Get the ISO week-numbering year of the given date.\n *\n * @description\n * Get the ISO week-numbering year of the given date,\n * which always starts 3 days before the year's first Thursday.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @param date - The given date\n *\n * @returns The ISO week-numbering year\n *\n * @example\n * // Which ISO-week numbering year is 2 January 2005?\n * const result = getISOWeekYear(new Date(2005, 0, 2))\n * //=> 2004\n */\nexport function getISOWeekYear(date, options) {\n  const _date = toDate(date, options?.in);\n  const year = _date.getFullYear();\n\n  const fourthOfJanuaryOfNextYear = constructFrom(_date, 0);\n  fourthOfJanuaryOfNextYear.setFullYear(year + 1, 0, 4);\n  fourthOfJanuaryOfNextYear.setHours(0, 0, 0, 0);\n  const startOfNextYear = startOfISOWeek(fourthOfJanuaryOfNextYear);\n\n  const fourthOfJanuaryOfThisYear = constructFrom(_date, 0);\n  fourthOfJanuaryOfThisYear.setFullYear(year, 0, 4);\n  fourthOfJanuaryOfThisYear.setHours(0, 0, 0, 0);\n  const startOfThisYear = startOfISOWeek(fourthOfJanuaryOfThisYear);\n\n  if (_date.getTime() >= startOfNextYear.getTime()) {\n    return year + 1;\n  } else if (_date.getTime() >= startOfThisYear.getTime()) {\n    return year;\n  } else {\n    return year - 1;\n  }\n}\n\n// Fallback for modularized imports:\nexport default getISOWeekYear;\n","import { toDate } from \"../toDate.js\";\n\n/**\n * Google Chrome as of 67.0.3396.87 introduced timezones with offset that includes seconds.\n * They usually appear for dates that denote time before the timezones were introduced\n * (e.g. for 'Europe/Prague' timezone the offset is GMT+00:57:44 before 1 October 1891\n * and GMT+01:00:00 after that date)\n *\n * Date#getTimezoneOffset returns the offset in minutes and would return 57 for the example above,\n * which would lead to incorrect calculations.\n *\n * This function returns the timezone offset in milliseconds that takes seconds in account.\n */\nexport function getTimezoneOffsetInMilliseconds(date) {\n  const _date = toDate(date);\n  const utcDate = new Date(\n    Date.UTC(\n      _date.getFullYear(),\n      _date.getMonth(),\n      _date.getDate(),\n      _date.getHours(),\n      _date.getMinutes(),\n      _date.getSeconds(),\n      _date.getMilliseconds(),\n    ),\n  );\n  utcDate.setUTCFullYear(_date.getFullYear());\n  return +date - +utcDate;\n}\n","import { constructFrom } from \"../constructFrom.js\";\n\nexport function normalizeDates(context, ...dates) {\n  const normalize = constructFrom.bind(\n    null,\n    context || dates.find((date) => typeof date === \"object\"),\n  );\n  return dates.map(normalize);\n}\n","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link startOfDay} function options.\n */\n\n/**\n * @name startOfDay\n * @category Day Helpers\n * @summary Return the start of a day for the given date.\n *\n * @description\n * Return the start of a day for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - The options\n *\n * @returns The start of a day\n *\n * @example\n * // The start of a day for 2 September 2014 11:55:00:\n * const result = startOfDay(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Sep 02 2014 00:00:00\n */\nexport function startOfDay(date, options) {\n  const _date = toDate(date, options?.in);\n  _date.setHours(0, 0, 0, 0);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfDay;\n","import { getTimezoneOffsetInMilliseconds } from \"./_lib/getTimezoneOffsetInMilliseconds.js\";\nimport { normalizeDates } from \"./_lib/normalizeDates.js\";\nimport { millisecondsInDay } from \"./constants.js\";\nimport { startOfDay } from \"./startOfDay.js\";\n\n/**\n * The {@link differenceInCalendarDays} function options.\n */\n\n/**\n * @name differenceInCalendarDays\n * @category Day Helpers\n * @summary Get the number of calendar days between the given dates.\n *\n * @description\n * Get the number of calendar days between the given dates. This means that the times are removed\n * from the dates and then the difference in days is calculated.\n *\n * @param laterDate - The later date\n * @param earlierDate - The earlier date\n * @param options - The options object\n *\n * @returns The number of calendar days\n *\n * @example\n * // How many calendar days are between\n * // 2 July 2011 23:00:00 and 2 July 2012 00:00:00?\n * const result = differenceInCalendarDays(\n *   new Date(2012, 6, 2, 0, 0),\n *   new Date(2011, 6, 2, 23, 0)\n * )\n * //=> 366\n * // How many calendar days are between\n * // 2 July 2011 23:59:00 and 3 July 2011 00:01:00?\n * const result = differenceInCalendarDays(\n *   new Date(2011, 6, 3, 0, 1),\n *   new Date(2011, 6, 2, 23, 59)\n * )\n * //=> 1\n */\nexport function differenceInCalendarDays(laterDate, earlierDate, options) {\n  const [laterDate_, earlierDate_] = normalizeDates(\n    options?.in,\n    laterDate,\n    earlierDate,\n  );\n\n  const laterStartOfDay = startOfDay(laterDate_);\n  const earlierStartOfDay = startOfDay(earlierDate_);\n\n  const laterTimestamp =\n    +laterStartOfDay - getTimezoneOffsetInMilliseconds(laterStartOfDay);\n  const earlierTimestamp =\n    +earlierStartOfDay - getTimezoneOffsetInMilliseconds(earlierStartOfDay);\n\n  // Round the number of days to the nearest integer because the number of\n  // milliseconds in a day is not constant (e.g. it's different in the week of\n  // the daylight saving time clock shift).\n  return Math.round((laterTimestamp - earlierTimestamp) / millisecondsInDay);\n}\n\n// Fallback for modularized imports:\nexport default differenceInCalendarDays;\n","import { constructFrom } from \"./constructFrom.js\";\nimport { getISOWeekYear } from \"./getISOWeekYear.js\";\nimport { startOfISOWeek } from \"./startOfISOWeek.js\";\n\n/**\n * The {@link startOfISOWeekYear} function options.\n */\n\n/**\n * @name startOfISOWeekYear\n * @category ISO Week-Numbering Year Helpers\n * @summary Return the start of an ISO week-numbering year for the given date.\n *\n * @description\n * Return the start of an ISO week-numbering year,\n * which always starts 3 days before the year's first Thursday.\n * The result will be in the local timezone.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of an ISO week-numbering year\n *\n * @example\n * // The start of an ISO week-numbering year for 2 July 2005:\n * const result = startOfISOWeekYear(new Date(2005, 6, 2))\n * //=> Mon Jan 03 2005 00:00:00\n */\nexport function startOfISOWeekYear(date, options) {\n  const year = getISOWeekYear(date, options);\n  const fourthOfJanuary = constructFrom(options?.in || date, 0);\n  fourthOfJanuary.setFullYear(year, 0, 4);\n  fourthOfJanuary.setHours(0, 0, 0, 0);\n  return startOfISOWeek(fourthOfJanuary);\n}\n\n// Fallback for modularized imports:\nexport default startOfISOWeekYear;\n","import { addDays } from \"./addDays.js\";\n\n/**\n * The {@link addWeeks} function options.\n */\n\n/**\n * @name addWeeks\n * @category Week Helpers\n * @summary Add the specified number of weeks to the given date.\n *\n * @description\n * Add the specified number of weeks to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of weeks to be added.\n * @param options - An object with options\n *\n * @returns The new date with the weeks added\n *\n * @example\n * // Add 4 weeks to 1 September 2014:\n * const result = addWeeks(new Date(2014, 8, 1), 4)\n * //=> Mon Sep 29 2014 00:00:00\n */\nexport function addWeeks(date, amount, options) {\n  return addDays(date, amount * 7, options);\n}\n\n// Fallback for modularized imports:\nexport default addWeeks;\n","import { addMonths } from \"./addMonths.js\";\n\n/**\n * The {@link addYears} function options.\n */\n\n/**\n * @name addYears\n * @category Year Helpers\n * @summary Add the specified number of years to the given date.\n *\n * @description\n * Add the specified number of years to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type.\n *\n * @param date - The date to be changed\n * @param amount - The amount of years to be added.\n * @param options - The options\n *\n * @returns The new date with the years added\n *\n * @example\n * // Add 5 years to 1 September 2014:\n * const result = addYears(new Date(2014, 8, 1), 5)\n * //=> Sun Sep 01 2019 00:00:00\n */\nexport function addYears(date, amount, options) {\n  return addMonths(date, amount * 12, options);\n}\n\n// Fallback for modularized imports:\nexport default addYears;\n","import { constructFrom } from \"./constructFrom.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link max} function options.\n */\n\n/**\n * @name max\n * @category Common Helpers\n * @summary Return the latest of the given dates.\n *\n * @description\n * Return the latest of the given dates.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param dates - The dates to compare\n *\n * @returns The latest of the dates\n *\n * @example\n * // Which of these dates is the latest?\n * const result = max([\n *   new Date(1989, 6, 10),\n *   new Date(1987, 1, 11),\n *   new Date(1995, 6, 2),\n *   new Date(1990, 0, 1)\n * ])\n * //=> Sun Jul 02 1995 00:00:00\n */\nexport function max(dates, options) {\n  let result;\n  let context = options?.in;\n\n  dates.forEach((date) => {\n    // Use the first date object as the context function\n    if (!context && typeof date === \"object\")\n      context = constructFrom.bind(null, date);\n\n    const date_ = toDate(date, context);\n    if (!result || result < date_ || isNaN(+date_)) result = date_;\n  });\n\n  return constructFrom(context, result || NaN);\n}\n\n// Fallback for modularized imports:\nexport default max;\n","import { constructFrom } from \"./constructFrom.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link min} function options.\n */\n\n/**\n * @name min\n * @category Common Helpers\n * @summary Returns the earliest of the given dates.\n *\n * @description\n * Returns the earliest of the given dates.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param dates - The dates to compare\n *\n * @returns The earliest of the dates\n *\n * @example\n * // Which of these dates is the earliest?\n * const result = min([\n *   new Date(1989, 6, 10),\n *   new Date(1987, 1, 11),\n *   new Date(1995, 6, 2),\n *   new Date(1990, 0, 1)\n * ])\n * //=> Wed Feb 11 1987 00:00:00\n */\nexport function min(dates, options) {\n  let result;\n  let context = options?.in;\n\n  dates.forEach((date) => {\n    // Use the first date object as the context function\n    if (!context && typeof date === \"object\")\n      context = constructFrom.bind(null, date);\n\n    const date_ = toDate(date, context);\n    if (!result || result > date_ || isNaN(+date_)) result = date_;\n  });\n\n  return constructFrom(context, result || NaN);\n}\n\n// Fallback for modularized imports:\nexport default min;\n","import { normalizeDates } from \"./_lib/normalizeDates.js\";\nimport { startOfDay } from \"./startOfDay.js\";\n\n/**\n * The {@link isSameDay} function options.\n */\n\n/**\n * @name isSameDay\n * @category Day Helpers\n * @summary Are the given dates in the same day (and year and month)?\n *\n * @description\n * Are the given dates in the same day (and year and month)?\n *\n * @param laterDate - The first date to check\n * @param earlierDate - The second date to check\n * @param options - An object with options\n *\n * @returns The dates are in the same day (and year and month)\n *\n * @example\n * // Are 4 September 06:00:00 and 4 September 18:00:00 in the same day?\n * const result = isSameDay(new Date(2014, 8, 4, 6, 0), new Date(2014, 8, 4, 18, 0))\n * //=> true\n *\n * @example\n * // Are 4 September and 4 October in the same day?\n * const result = isSameDay(new Date(2014, 8, 4), new Date(2014, 9, 4))\n * //=> false\n *\n * @example\n * // Are 4 September, 2014 and 4 September, 2015 in the same day?\n * const result = isSameDay(new Date(2014, 8, 4), new Date(2015, 8, 4))\n * //=> false\n */\nexport function isSameDay(laterDate, earlierDate, options) {\n  const [dateLeft_, dateRight_] = normalizeDates(\n    options?.in,\n    laterDate,\n    earlierDate,\n  );\n  return +startOfDay(dateLeft_) === +startOfDay(dateRight_);\n}\n\n// Fallback for modularized imports:\nexport default isSameDay;\n","/**\n * @name isDate\n * @category Common Helpers\n * @summary Is the given value a date?\n *\n * @description\n * Returns true if the given value is an instance of Date. The function works for dates transferred across iframes.\n *\n * @param value - The value to check\n *\n * @returns True if the given value is a date\n *\n * @example\n * // For a valid date:\n * const result = isDate(new Date())\n * //=> true\n *\n * @example\n * // For an invalid date:\n * const result = isDate(new Date(NaN))\n * //=> true\n *\n * @example\n * // For some value:\n * const result = isDate('2014-02-31')\n * //=> false\n *\n * @example\n * // For an object:\n * const result = isDate({})\n * //=> false\n */\nexport function isDate(value) {\n  return (\n    value instanceof Date ||\n    (typeof value === \"object\" &&\n      Object.prototype.toString.call(value) === \"[object Date]\")\n  );\n}\n\n// Fallback for modularized imports:\nexport default isDate;\n","import { isDate } from \"./isDate.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * @name isValid\n * @category Common Helpers\n * @summary Is the given date valid?\n *\n * @description\n * Returns false if argument is Invalid Date and true otherwise.\n * Argument is converted to Date using `toDate`. See [toDate](https://date-fns.org/docs/toDate)\n * Invalid Date is a Date, whose time value is NaN.\n *\n * Time value of Date: http://es5.github.io/#x15.9.1.1\n *\n * @param date - The date to check\n *\n * @returns The date is valid\n *\n * @example\n * // For the valid date:\n * const result = isValid(new Date(2014, 1, 31))\n * //=> true\n *\n * @example\n * // For the value, convertible into a date:\n * const result = isValid(1393804800000)\n * //=> true\n *\n * @example\n * // For the invalid date:\n * const result = isValid(new Date(''))\n * //=> false\n */\nexport function isValid(date) {\n  return !((!isDate(date) && typeof date !== \"number\") || isNaN(+toDate(date)));\n}\n\n// Fallback for modularized imports:\nexport default isValid;\n","import { normalizeDates } from \"./_lib/normalizeDates.js\";\n\n/**\n * The {@link differenceInCalendarMonths} function options.\n */\n\n/**\n * @name differenceInCalendarMonths\n * @category Month Helpers\n * @summary Get the number of calendar months between the given dates.\n *\n * @description\n * Get the number of calendar months between the given dates.\n *\n * @param laterDate - The later date\n * @param earlierDate - The earlier date\n * @param options - An object with options\n *\n * @returns The number of calendar months\n *\n * @example\n * // How many calendar months are between 31 January 2014 and 1 September 2014?\n * const result = differenceInCalendarMonths(\n *   new Date(2014, 8, 1),\n *   new Date(2014, 0, 31)\n * )\n * //=> 8\n */\nexport function differenceInCalendarMonths(laterDate, earlierDate, options) {\n  const [laterDate_, earlierDate_] = normalizeDates(\n    options?.in,\n    laterDate,\n    earlierDate,\n  );\n\n  const yearsDiff = laterDate_.getFullYear() - earlierDate_.getFullYear();\n  const monthsDiff = laterDate_.getMonth() - earlierDate_.getMonth();\n\n  return yearsDiff * 12 + monthsDiff;\n}\n\n// Fallback for modularized imports:\nexport default differenceInCalendarMonths;\n","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link endOfMonth} function options.\n */\n\n/**\n * @name endOfMonth\n * @category Month Helpers\n * @summary Return the end of a month for the given date.\n *\n * @description\n * Return the end of a month for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The end of a month\n *\n * @example\n * // The end of a month for 2 September 2014 11:55:00:\n * const result = endOfMonth(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Sep 30 2014 23:59:59.999\n */\nexport function endOfMonth(date, options) {\n  const _date = toDate(date, options?.in);\n  const month = _date.getMonth();\n  _date.setFullYear(_date.getFullYear(), month + 1, 0);\n  _date.setHours(23, 59, 59, 999);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default endOfMonth;\n","import { normalizeDates } from \"./normalizeDates.js\";\n\nexport function normalizeInterval(context, interval) {\n  const [start, end] = normalizeDates(context, interval.start, interval.end);\n  return { start, end };\n}\n","import { normalizeInterval } from \"./_lib/normalizeInterval.js\";\nimport { constructFrom } from \"./constructFrom.js\";\n\n/**\n * The {@link eachMonthOfInterval} function options.\n */\n\n/**\n * The {@link eachMonthOfInterval} function result type. It resolves the proper data type.\n */\n\n/**\n * @name eachMonthOfInterval\n * @category Interval Helpers\n * @summary Return the array of months within the specified time interval.\n *\n * @description\n * Return the array of months within the specified time interval.\n *\n * @typeParam IntervalType - Interval type.\n * @typeParam Options - Options type.\n *\n * @param interval - The interval.\n * @param options - An object with options.\n *\n * @returns The array with starts of months from the month of the interval start to the month of the interval end\n *\n * @example\n * // Each month between 6 February 2014 and 10 August 2014:\n * const result = eachMonthOfInterval({\n *   start: new Date(2014, 1, 6),\n *   end: new Date(2014, 7, 10)\n * })\n * //=> [\n * //   Sat Feb 01 2014 00:00:00,\n * //   Sat Mar 01 2014 00:00:00,\n * //   Tue Apr 01 2014 00:00:00,\n * //   Thu May 01 2014 00:00:00,\n * //   Sun Jun 01 2014 00:00:00,\n * //   Tue Jul 01 2014 00:00:00,\n * //   Fri Aug 01 2014 00:00:00\n * // ]\n */\nexport function eachMonthOfInterval(interval, options) {\n  const { start, end } = normalizeInterval(options?.in, interval);\n\n  let reversed = +start > +end;\n  const endTime = reversed ? +start : +end;\n  const date = reversed ? end : start;\n  date.setHours(0, 0, 0, 0);\n  date.setDate(1);\n\n  let step = options?.step ?? 1;\n  if (!step) return [];\n  if (step < 0) {\n    step = -step;\n    reversed = !reversed;\n  }\n\n  const dates = [];\n\n  while (+date <= endTime) {\n    dates.push(constructFrom(start, date));\n    date.setMonth(date.getMonth() + step);\n  }\n\n  return reversed ? dates.reverse() : dates;\n}\n\n// Fallback for modularized imports:\nexport default eachMonthOfInterval;\n","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link startOfMonth} function options.\n */\n\n/**\n * @name startOfMonth\n * @category Month Helpers\n * @summary Return the start of a month for the given date.\n *\n * @description\n * Return the start of a month for the given date. The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments.\n * Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed,\n * or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of a month\n *\n * @example\n * // The start of a month for 2 September 2014 11:55:00:\n * const result = startOfMonth(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function startOfMonth(date, options) {\n  const _date = toDate(date, options?.in);\n  _date.setDate(1);\n  _date.setHours(0, 0, 0, 0);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfMonth;\n","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link endOfYear} function options.\n */\n\n/**\n * @name endOfYear\n * @category Year Helpers\n * @summary Return the end of a year for the given date.\n *\n * @description\n * Return the end of a year for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - The options\n *\n * @returns The end of a year\n *\n * @example\n * // The end of a year for 2 September 2014 11:55:00:\n * const result = endOfYear(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Wed Dec 31 2014 23:59:59.999\n */\nexport function endOfYear(date, options) {\n  const _date = toDate(date, options?.in);\n  const year = _date.getFullYear();\n  _date.setFullYear(year + 1, 0, 0);\n  _date.setHours(23, 59, 59, 999);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default endOfYear;\n","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link startOfYear} function options.\n */\n\n/**\n * @name startOfYear\n * @category Year Helpers\n * @summary Return the start of a year for the given date.\n *\n * @description\n * Return the start of a year for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - The options\n *\n * @returns The start of a year\n *\n * @example\n * // The start of a year for 2 September 2014 11:55:00:\n * const result = startOfYear(new Date(2014, 8, 2, 11, 55, 00))\n * //=> Wed Jan 01 2014 00:00:00\n */\nexport function startOfYear(date, options) {\n  const date_ = toDate(date, options?.in);\n  date_.setFullYear(date_.getFullYear(), 0, 1);\n  date_.setHours(0, 0, 0, 0);\n  return date_;\n}\n\n// Fallback for modularized imports:\nexport default startOfYear;\n","import { normalizeInterval } from \"./_lib/normalizeInterval.js\";\nimport { constructFrom } from \"./constructFrom.js\";\n\n/**\n * The {@link eachYearOfInterval} function options.\n */\n\n/**\n * The {@link eachYearOfInterval} function result type. It resolves the proper data type.\n * It uses the first argument date object type, starting from the date argument,\n * then the start interval date, and finally the end interval date. If\n * a context function is passed, it uses the context function return type.\n */\n\n/**\n * @name eachYearOfInterval\n * @category Interval Helpers\n * @summary Return the array of yearly timestamps within the specified time interval.\n *\n * @description\n * Return the array of yearly timestamps within the specified time interval.\n *\n * @typeParam IntervalType - Interval type.\n * @typeParam Options - Options type.\n *\n * @param interval - The interval.\n * @param options - An object with options.\n *\n * @returns The array with starts of yearly timestamps from the month of the interval start to the month of the interval end\n *\n * @example\n * // Each year between 6 February 2014 and 10 August 2017:\n * const result = eachYearOfInterval({\n *   start: new Date(2014, 1, 6),\n *   end: new Date(2017, 7, 10)\n * })\n * //=> [\n * //   Wed Jan 01 2014 00:00:00,\n * //   Thu Jan 01 2015 00:00:00,\n * //   Fri Jan 01 2016 00:00:00,\n * //   Sun Jan 01 2017 00:00:00\n * // ]\n */\nexport function eachYearOfInterval(interval, options) {\n  const { start, end } = normalizeInterval(options?.in, interval);\n\n  let reversed = +start > +end;\n  const endTime = reversed ? +start : +end;\n  const date = reversed ? end : start;\n  date.setHours(0, 0, 0, 0);\n  date.setMonth(0, 1);\n\n  let step = options?.step ?? 1;\n  if (!step) return [];\n  if (step < 0) {\n    step = -step;\n    reversed = !reversed;\n  }\n\n  const dates = [];\n\n  while (+date <= endTime) {\n    dates.push(constructFrom(start, date));\n    date.setFullYear(date.getFullYear() + step);\n  }\n\n  return reversed ? dates.reverse() : dates;\n}\n\n// Fallback for modularized imports:\nexport default eachYearOfInterval;\n","import { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link endOfWeek} function options.\n */\n\n/**\n * @name endOfWeek\n * @category Week Helpers\n * @summary Return the end of a week for the given date.\n *\n * @description\n * Return the end of a week for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The end of a week\n *\n * @example\n * // The end of a week for 2 September 2014 11:55:00:\n * const result = endOfWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Sat Sep 06 2014 23:59:59.999\n *\n * @example\n * // If the week starts on Monday, the end of the week for 2 September 2014 11:55:00:\n * const result = endOfWeek(new Date(2014, 8, 2, 11, 55, 0), { weekStartsOn: 1 })\n * //=> Sun Sep 07 2014 23:59:59.999\n */\nexport function endOfWeek(date, options) {\n  const defaultOptions = getDefaultOptions();\n  const weekStartsOn =\n    options?.weekStartsOn ??\n    options?.locale?.options?.weekStartsOn ??\n    defaultOptions.weekStartsOn ??\n    defaultOptions.locale?.options?.weekStartsOn ??\n    0;\n\n  const _date = toDate(date, options?.in);\n  const day = _date.getDay();\n  const diff = (day < weekStartsOn ? -7 : 0) + 6 - (day - weekStartsOn);\n\n  _date.setDate(_date.getDate() + diff);\n  _date.setHours(23, 59, 59, 999);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default endOfWeek;\n","import { endOfWeek } from \"./endOfWeek.js\";\n\n/**\n * The {@link endOfISOWeek} function options.\n */\n\n/**\n * @name endOfISOWeek\n * @category ISO Week Helpers\n * @summary Return the end of an ISO week for the given date.\n *\n * @description\n * Return the end of an ISO week for the given date.\n * The result will be in the local timezone.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The end of an ISO week\n *\n * @example\n * // The end of an ISO week for 2 September 2014 11:55:00:\n * const result = endOfISOWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Sun Sep 07 2014 23:59:59.999\n */\nexport function endOfISOWeek(date, options) {\n  return endOfWeek(date, { ...options, weekStartsOn: 1 });\n}\n\n// Fallback for modularized imports:\nexport default endOfISOWeek;\n","const formatDistanceLocale = {\n  lessThanXSeconds: {\n    one: \"less than a second\",\n    other: \"less than {{count}} seconds\",\n  },\n\n  xSeconds: {\n    one: \"1 second\",\n    other: \"{{count}} seconds\",\n  },\n\n  halfAMinute: \"half a minute\",\n\n  lessThanXMinutes: {\n    one: \"less than a minute\",\n    other: \"less than {{count}} minutes\",\n  },\n\n  xMinutes: {\n    one: \"1 minute\",\n    other: \"{{count}} minutes\",\n  },\n\n  aboutXHours: {\n    one: \"about 1 hour\",\n    other: \"about {{count}} hours\",\n  },\n\n  xHours: {\n    one: \"1 hour\",\n    other: \"{{count}} hours\",\n  },\n\n  xDays: {\n    one: \"1 day\",\n    other: \"{{count}} days\",\n  },\n\n  aboutXWeeks: {\n    one: \"about 1 week\",\n    other: \"about {{count}} weeks\",\n  },\n\n  xWeeks: {\n    one: \"1 week\",\n    other: \"{{count}} weeks\",\n  },\n\n  aboutXMonths: {\n    one: \"about 1 month\",\n    other: \"about {{count}} months\",\n  },\n\n  xMonths: {\n    one: \"1 month\",\n    other: \"{{count}} months\",\n  },\n\n  aboutXYears: {\n    one: \"about 1 year\",\n    other: \"about {{count}} years\",\n  },\n\n  xYears: {\n    one: \"1 year\",\n    other: \"{{count}} years\",\n  },\n\n  overXYears: {\n    one: \"over 1 year\",\n    other: \"over {{count}} years\",\n  },\n\n  almostXYears: {\n    one: \"almost 1 year\",\n    other: \"almost {{count}} years\",\n  },\n};\n\nexport const formatDistance = (token, count, options) => {\n  let result;\n\n  const tokenValue = formatDistanceLocale[token];\n  if (typeof tokenValue === \"string\") {\n    result = tokenValue;\n  } else if (count === 1) {\n    result = tokenValue.one;\n  } else {\n    result = tokenValue.other.replace(\"{{count}}\", count.toString());\n  }\n\n  if (options?.addSuffix) {\n    if (options.comparison && options.comparison > 0) {\n      return \"in \" + result;\n    } else {\n      return result + \" ago\";\n    }\n  }\n\n  return result;\n};\n","export function buildFormatLongFn(args) {\n  return (options = {}) => {\n    // TODO: Remove String()\n    const width = options.width ? String(options.width) : args.defaultWidth;\n    const format = args.formats[width] || args.formats[args.defaultWidth];\n    return format;\n  };\n}\n","import { buildFormatLongFn } from \"../../_lib/buildFormatLongFn.js\";\n\nconst dateFormats = {\n  full: \"EEEE, MMMM do, y\",\n  long: \"MMMM do, y\",\n  medium: \"MMM d, y\",\n  short: \"MM/dd/yyyy\",\n};\n\nconst timeFormats = {\n  full: \"h:mm:ss a zzzz\",\n  long: \"h:mm:ss a z\",\n  medium: \"h:mm:ss a\",\n  short: \"h:mm a\",\n};\n\nconst dateTimeFormats = {\n  full: \"{{date}} 'at' {{time}}\",\n  long: \"{{date}} 'at' {{time}}\",\n  medium: \"{{date}}, {{time}}\",\n  short: \"{{date}}, {{time}}\",\n};\n\nexport const formatLong = {\n  date: buildFormatLongFn({\n    formats: dateFormats,\n    defaultWidth: \"full\",\n  }),\n\n  time: buildFormatLongFn({\n    formats: timeFormats,\n    defaultWidth: \"full\",\n  }),\n\n  dateTime: buildFormatLongFn({\n    formats: dateTimeFormats,\n    defaultWidth: \"full\",\n  }),\n};\n","const formatRelativeLocale = {\n  lastWeek: \"'last' eeee 'at' p\",\n  yesterday: \"'yesterday at' p\",\n  today: \"'today at' p\",\n  tomorrow: \"'tomorrow at' p\",\n  nextWeek: \"eeee 'at' p\",\n  other: \"P\",\n};\n\nexport const formatRelative = (token, _date, _baseDate, _options) =>\n  formatRelativeLocale[token];\n","/**\n * The localize function argument callback which allows to convert raw value to\n * the actual type.\n *\n * @param value - The value to convert\n *\n * @returns The converted value\n */\n\n/**\n * The map of localized values for each width.\n */\n\n/**\n * The index type of the locale unit value. It types conversion of units of\n * values that don't start at 0 (i.e. quarters).\n */\n\n/**\n * Converts the unit value to the tuple of values.\n */\n\n/**\n * The tuple of localized era values. The first element represents BC,\n * the second element represents AD.\n */\n\n/**\n * The tuple of localized quarter values. The first element represents Q1.\n */\n\n/**\n * The tuple of localized day values. The first element represents Sunday.\n */\n\n/**\n * The tuple of localized month values. The first element represents January.\n */\n\nexport function buildLocalizeFn(args) {\n  return (value, options) => {\n    const context = options?.context ? String(options.context) : \"standalone\";\n\n    let valuesArray;\n    if (context === \"formatting\" && args.formattingValues) {\n      const defaultWidth = args.defaultFormattingWidth || args.defaultWidth;\n      const width = options?.width ? String(options.width) : defaultWidth;\n\n      valuesArray =\n        args.formattingValues[width] || args.formattingValues[defaultWidth];\n    } else {\n      const defaultWidth = args.defaultWidth;\n      const width = options?.width ? String(options.width) : args.defaultWidth;\n\n      valuesArray = args.values[width] || args.values[defaultWidth];\n    }\n    const index = args.argumentCallback ? args.argumentCallback(value) : value;\n\n    // @ts-expect-error - For some reason TypeScript just don't want to match it, no matter how hard we try. I challenge you to try to remove it!\n    return valuesArray[index];\n  };\n}\n","import { buildLocalizeFn } from \"../../_lib/buildLocalizeFn.js\";\n\nconst eraValues = {\n  narrow: [\"B\", \"A\"],\n  abbreviated: [\"BC\", \"AD\"],\n  wide: [\"Before Christ\", \"Anno Domini\"],\n};\n\nconst quarterValues = {\n  narrow: [\"1\", \"2\", \"3\", \"4\"],\n  abbreviated: [\"Q1\", \"Q2\", \"Q3\", \"Q4\"],\n  wide: [\"1st quarter\", \"2nd quarter\", \"3rd quarter\", \"4th quarter\"],\n};\n\n// Note: in English, the names of days of the week and months are capitalized.\n// If you are making a new locale based on this one, check if the same is true for the language you're working on.\n// Generally, formatted dates should look like they are in the middle of a sentence,\n// e.g. in Spanish language the weekdays and months should be in the lowercase.\nconst monthValues = {\n  narrow: [\"J\", \"F\", \"M\", \"A\", \"M\", \"J\", \"J\", \"A\", \"S\", \"O\", \"N\", \"D\"],\n  abbreviated: [\n    \"Jan\",\n    \"Feb\",\n    \"Mar\",\n    \"Apr\",\n    \"May\",\n    \"Jun\",\n    \"Jul\",\n    \"Aug\",\n    \"Sep\",\n    \"Oct\",\n    \"Nov\",\n    \"Dec\",\n  ],\n\n  wide: [\n    \"January\",\n    \"February\",\n    \"March\",\n    \"April\",\n    \"May\",\n    \"June\",\n    \"July\",\n    \"August\",\n    \"September\",\n    \"October\",\n    \"November\",\n    \"December\",\n  ],\n};\n\nconst dayValues = {\n  narrow: [\"S\", \"M\", \"T\", \"W\", \"T\", \"F\", \"S\"],\n  short: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"],\n  abbreviated: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  wide: [\n    \"Sunday\",\n    \"Monday\",\n    \"Tuesday\",\n    \"Wednesday\",\n    \"Thursday\",\n    \"Friday\",\n    \"Saturday\",\n  ],\n};\n\nconst dayPeriodValues = {\n  narrow: {\n    am: \"a\",\n    pm: \"p\",\n    midnight: \"mi\",\n    noon: \"n\",\n    morning: \"morning\",\n    afternoon: \"afternoon\",\n    evening: \"evening\",\n    night: \"night\",\n  },\n  abbreviated: {\n    am: \"AM\",\n    pm: \"PM\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"morning\",\n    afternoon: \"afternoon\",\n    evening: \"evening\",\n    night: \"night\",\n  },\n  wide: {\n    am: \"a.m.\",\n    pm: \"p.m.\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"morning\",\n    afternoon: \"afternoon\",\n    evening: \"evening\",\n    night: \"night\",\n  },\n};\n\nconst formattingDayPeriodValues = {\n  narrow: {\n    am: \"a\",\n    pm: \"p\",\n    midnight: \"mi\",\n    noon: \"n\",\n    morning: \"in the morning\",\n    afternoon: \"in the afternoon\",\n    evening: \"in the evening\",\n    night: \"at night\",\n  },\n  abbreviated: {\n    am: \"AM\",\n    pm: \"PM\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"in the morning\",\n    afternoon: \"in the afternoon\",\n    evening: \"in the evening\",\n    night: \"at night\",\n  },\n  wide: {\n    am: \"a.m.\",\n    pm: \"p.m.\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"in the morning\",\n    afternoon: \"in the afternoon\",\n    evening: \"in the evening\",\n    night: \"at night\",\n  },\n};\n\nconst ordinalNumber = (dirtyNumber, _options) => {\n  const number = Number(dirtyNumber);\n\n  // If ordinal numbers depend on context, for example,\n  // if they are different for different grammatical genders,\n  // use `options.unit`.\n  //\n  // `unit` can be 'year', 'quarter', 'month', 'week', 'date', 'dayOfYear',\n  // 'day', 'hour', 'minute', 'second'.\n\n  const rem100 = number % 100;\n  if (rem100 > 20 || rem100 < 10) {\n    switch (rem100 % 10) {\n      case 1:\n        return number + \"st\";\n      case 2:\n        return number + \"nd\";\n      case 3:\n        return number + \"rd\";\n    }\n  }\n  return number + \"th\";\n};\n\nexport const localize = {\n  ordinalNumber,\n\n  era: buildLocalizeFn({\n    values: eraValues,\n    defaultWidth: \"wide\",\n  }),\n\n  quarter: buildLocalizeFn({\n    values: quarterValues,\n    defaultWidth: \"wide\",\n    argumentCallback: (quarter) => quarter - 1,\n  }),\n\n  month: buildLocalizeFn({\n    values: monthValues,\n    defaultWidth: \"wide\",\n  }),\n\n  day: buildLocalizeFn({\n    values: dayValues,\n    defaultWidth: \"wide\",\n  }),\n\n  dayPeriod: buildLocalizeFn({\n    values: dayPeriodValues,\n    defaultWidth: \"wide\",\n    formattingValues: formattingDayPeriodValues,\n    defaultFormattingWidth: \"wide\",\n  }),\n};\n","export function buildMatchFn(args) {\n  return (string, options = {}) => {\n    const width = options.width;\n\n    const matchPattern =\n      (width && args.matchPatterns[width]) ||\n      args.matchPatterns[args.defaultMatchWidth];\n    const matchResult = string.match(matchPattern);\n\n    if (!matchResult) {\n      return null;\n    }\n    const matchedString = matchResult[0];\n\n    const parsePatterns =\n      (width && args.parsePatterns[width]) ||\n      args.parsePatterns[args.defaultParseWidth];\n\n    const key = Array.isArray(parsePatterns)\n      ? findIndex(parsePatterns, (pattern) => pattern.test(matchedString))\n      : // [TODO] -- I challenge you to fix the type\n        findKey(parsePatterns, (pattern) => pattern.test(matchedString));\n\n    let value;\n\n    value = args.valueCallback ? args.valueCallback(key) : key;\n    value = options.valueCallback\n      ? // [TODO] -- I challenge you to fix the type\n        options.valueCallback(value)\n      : value;\n\n    const rest = string.slice(matchedString.length);\n\n    return { value, rest };\n  };\n}\n\nfunction findKey(object, predicate) {\n  for (const key in object) {\n    if (\n      Object.prototype.hasOwnProperty.call(object, key) &&\n      predicate(object[key])\n    ) {\n      return key;\n    }\n  }\n  return undefined;\n}\n\nfunction findIndex(array, predicate) {\n  for (let key = 0; key < array.length; key++) {\n    if (predicate(array[key])) {\n      return key;\n    }\n  }\n  return undefined;\n}\n","export function buildMatchPatternFn(args) {\n  return (string, options = {}) => {\n    const matchResult = string.match(args.matchPattern);\n    if (!matchResult) return null;\n    const matchedString = matchResult[0];\n\n    const parseResult = string.match(args.parsePattern);\n    if (!parseResult) return null;\n    let value = args.valueCallback\n      ? args.valueCallback(parseResult[0])\n      : parseResult[0];\n\n    // [TODO] I challenge you to fix the type\n    value = options.valueCallback ? options.valueCallback(value) : value;\n\n    const rest = string.slice(matchedString.length);\n\n    return { value, rest };\n  };\n}\n","import { buildMatchFn } from \"../../_lib/buildMatchFn.js\";\nimport { buildMatchPatternFn } from \"../../_lib/buildMatchPatternFn.js\";\n\nconst matchOrdinalNumberPattern = /^(\\d+)(th|st|nd|rd)?/i;\nconst parseOrdinalNumberPattern = /\\d+/i;\n\nconst matchEraPatterns = {\n  narrow: /^(b|a)/i,\n  abbreviated: /^(b\\.?\\s?c\\.?|b\\.?\\s?c\\.?\\s?e\\.?|a\\.?\\s?d\\.?|c\\.?\\s?e\\.?)/i,\n  wide: /^(before christ|before common era|anno domini|common era)/i,\n};\nconst parseEraPatterns = {\n  any: [/^b/i, /^(a|c)/i],\n};\n\nconst matchQuarterPatterns = {\n  narrow: /^[1234]/i,\n  abbreviated: /^q[1234]/i,\n  wide: /^[1234](th|st|nd|rd)? quarter/i,\n};\nconst parseQuarterPatterns = {\n  any: [/1/i, /2/i, /3/i, /4/i],\n};\n\nconst matchMonthPatterns = {\n  narrow: /^[jfmasond]/i,\n  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,\n  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i,\n};\nconst parseMonthPatterns = {\n  narrow: [\n    /^j/i,\n    /^f/i,\n    /^m/i,\n    /^a/i,\n    /^m/i,\n    /^j/i,\n    /^j/i,\n    /^a/i,\n    /^s/i,\n    /^o/i,\n    /^n/i,\n    /^d/i,\n  ],\n\n  any: [\n    /^ja/i,\n    /^f/i,\n    /^mar/i,\n    /^ap/i,\n    /^may/i,\n    /^jun/i,\n    /^jul/i,\n    /^au/i,\n    /^s/i,\n    /^o/i,\n    /^n/i,\n    /^d/i,\n  ],\n};\n\nconst matchDayPatterns = {\n  narrow: /^[smtwf]/i,\n  short: /^(su|mo|tu|we|th|fr|sa)/i,\n  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,\n  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i,\n};\nconst parseDayPatterns = {\n  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],\n  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i],\n};\n\nconst matchDayPeriodPatterns = {\n  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,\n  any: /^([ap]\\.?\\s?m\\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i,\n};\nconst parseDayPeriodPatterns = {\n  any: {\n    am: /^a/i,\n    pm: /^p/i,\n    midnight: /^mi/i,\n    noon: /^no/i,\n    morning: /morning/i,\n    afternoon: /afternoon/i,\n    evening: /evening/i,\n    night: /night/i,\n  },\n};\n\nexport const match = {\n  ordinalNumber: buildMatchPatternFn({\n    matchPattern: matchOrdinalNumberPattern,\n    parsePattern: parseOrdinalNumberPattern,\n    valueCallback: (value) => parseInt(value, 10),\n  }),\n\n  era: buildMatchFn({\n    matchPatterns: matchEraPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseEraPatterns,\n    defaultParseWidth: \"any\",\n  }),\n\n  quarter: buildMatchFn({\n    matchPatterns: matchQuarterPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseQuarterPatterns,\n    defaultParseWidth: \"any\",\n    valueCallback: (index) => index + 1,\n  }),\n\n  month: buildMatchFn({\n    matchPatterns: matchMonthPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseMonthPatterns,\n    defaultParseWidth: \"any\",\n  }),\n\n  day: buildMatchFn({\n    matchPatterns: matchDayPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseDayPatterns,\n    defaultParseWidth: \"any\",\n  }),\n\n  dayPeriod: buildMatchFn({\n    matchPatterns: matchDayPeriodPatterns,\n    defaultMatchWidth: \"any\",\n    parsePatterns: parseDayPeriodPatterns,\n    defaultParseWidth: \"any\",\n  }),\n};\n","import { formatDistance } from \"./en-US/_lib/formatDistance.js\";\nimport { formatLong } from \"./en-US/_lib/formatLong.js\";\nimport { formatRelative } from \"./en-US/_lib/formatRelative.js\";\nimport { localize } from \"./en-US/_lib/localize.js\";\nimport { match } from \"./en-US/_lib/match.js\";\n\n/**\n * @category Locales\n * @summary English locale (United States).\n * @language English\n * @iso-639-2 eng\n * @author Sasha Koss [@kossnocorp](https://github.com/kossnocorp)\n * @author Lesha Koss [@leshakoss](https://github.com/leshakoss)\n */\nexport const enUS = {\n  code: \"en-US\",\n  formatDistance: formatDistance,\n  formatLong: formatLong,\n  formatRelative: formatRelative,\n  localize: localize,\n  match: match,\n  options: {\n    weekStartsOn: 0 /* Sunday */,\n    firstWeekContainsDate: 1,\n  },\n};\n\n// Fallback for modularized imports:\nexport default enUS;\n","import { differenceInCalendarDays } from \"./differenceInCalendarDays.js\";\nimport { startOfYear } from \"./startOfYear.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getDayOfYear} function options.\n */\n\n/**\n * @name getDayOfYear\n * @category Day Helpers\n * @summary Get the day of the year of the given date.\n *\n * @description\n * Get the day of the year of the given date.\n *\n * @param date - The given date\n * @param options - The options\n *\n * @returns The day of year\n *\n * @example\n * // Which day of the year is 2 July 2014?\n * const result = getDayOfYear(new Date(2014, 6, 2))\n * //=> 183\n */\nexport function getDayOfYear(date, options) {\n  const _date = toDate(date, options?.in);\n  const diff = differenceInCalendarDays(_date, startOfYear(_date));\n  const dayOfYear = diff + 1;\n  return dayOfYear;\n}\n\n// Fallback for modularized imports:\nexport default getDayOfYear;\n","import { millisecondsInWeek } from \"./constants.js\";\nimport { startOfISOWeek } from \"./startOfISOWeek.js\";\nimport { startOfISOWeekYear } from \"./startOfISOWeekYear.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getISOWeek} function options.\n */\n\n/**\n * @name getISOWeek\n * @category ISO Week Helpers\n * @summary Get the ISO week of the given date.\n *\n * @description\n * Get the ISO week of the given date.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @param date - The given date\n * @param options - The options\n *\n * @returns The ISO week\n *\n * @example\n * // Which week of the ISO-week numbering year is 2 January 2005?\n * const result = getISOWeek(new Date(2005, 0, 2))\n * //=> 53\n */\nexport function getISOWeek(date, options) {\n  const _date = toDate(date, options?.in);\n  const diff = +startOfISOWeek(_date) - +startOfISOWeekYear(_date);\n\n  // Round the number of weeks to the nearest integer because the number of\n  // milliseconds in a week is not constant (e.g. it's different in the week of\n  // the daylight saving time clock shift).\n  return Math.round(diff / millisecondsInWeek) + 1;\n}\n\n// Fallback for modularized imports:\nexport default getISOWeek;\n","import { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { constructFrom } from \"./constructFrom.js\";\nimport { startOfWeek } from \"./startOfWeek.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getWeekYear} function options.\n */\n\n/**\n * @name getWeekYear\n * @category Week-Numbering Year Helpers\n * @summary Get the local week-numbering year of the given date.\n *\n * @description\n * Get the local week-numbering year of the given date.\n * The exact calculation depends on the values of\n * `options.weekStartsOn` (which is the index of the first day of the week)\n * and `options.firstWeekContainsDate` (which is the day of January, which is always in\n * the first week of the week-numbering year)\n *\n * Week numbering: https://en.wikipedia.org/wiki/Week#The_ISO_week_date_system\n *\n * @param date - The given date\n * @param options - An object with options.\n *\n * @returns The local week-numbering year\n *\n * @example\n * // Which week numbering year is 26 December 2004 with the default settings?\n * const result = getWeekYear(new Date(2004, 11, 26))\n * //=> 2005\n *\n * @example\n * // Which week numbering year is 26 December 2004 if week starts on Saturday?\n * const result = getWeekYear(new Date(2004, 11, 26), { weekStartsOn: 6 })\n * //=> 2004\n *\n * @example\n * // Which week numbering year is 26 December 2004 if the first week contains 4 January?\n * const result = getWeekYear(new Date(2004, 11, 26), { firstWeekContainsDate: 4 })\n * //=> 2004\n */\nexport function getWeekYear(date, options) {\n  const _date = toDate(date, options?.in);\n  const year = _date.getFullYear();\n\n  const defaultOptions = getDefaultOptions();\n  const firstWeekContainsDate =\n    options?.firstWeekContainsDate ??\n    options?.locale?.options?.firstWeekContainsDate ??\n    defaultOptions.firstWeekContainsDate ??\n    defaultOptions.locale?.options?.firstWeekContainsDate ??\n    1;\n\n  const firstWeekOfNextYear = constructFrom(options?.in || date, 0);\n  firstWeekOfNextYear.setFullYear(year + 1, 0, firstWeekContainsDate);\n  firstWeekOfNextYear.setHours(0, 0, 0, 0);\n  const startOfNextYear = startOfWeek(firstWeekOfNextYear, options);\n\n  const firstWeekOfThisYear = constructFrom(options?.in || date, 0);\n  firstWeekOfThisYear.setFullYear(year, 0, firstWeekContainsDate);\n  firstWeekOfThisYear.setHours(0, 0, 0, 0);\n  const startOfThisYear = startOfWeek(firstWeekOfThisYear, options);\n\n  if (+_date >= +startOfNextYear) {\n    return year + 1;\n  } else if (+_date >= +startOfThisYear) {\n    return year;\n  } else {\n    return year - 1;\n  }\n}\n\n// Fallback for modularized imports:\nexport default getWeekYear;\n","import { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { constructFrom } from \"./constructFrom.js\";\nimport { getWeekYear } from \"./getWeekYear.js\";\nimport { startOfWeek } from \"./startOfWeek.js\";\n\n/**\n * The {@link startOfWeekYear} function options.\n */\n\n/**\n * @name startOfWeekYear\n * @category Week-Numbering Year Helpers\n * @summary Return the start of a local week-numbering year for the given date.\n *\n * @description\n * Return the start of a local week-numbering year.\n * The exact calculation depends on the values of\n * `options.weekStartsOn` (which is the index of the first day of the week)\n * and `options.firstWeekContainsDate` (which is the day of January, which is always in\n * the first week of the week-numbering year)\n *\n * Week numbering: https://en.wikipedia.org/wiki/Week#The_ISO_week_date_system\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of a week-numbering year\n *\n * @example\n * // The start of an a week-numbering year for 2 July 2005 with default settings:\n * const result = startOfWeekYear(new Date(2005, 6, 2))\n * //=> Sun Dec 26 2004 00:00:00\n *\n * @example\n * // The start of a week-numbering year for 2 July 2005\n * // if Monday is the first day of week\n * // and 4 January is always in the first week of the year:\n * const result = startOfWeekYear(new Date(2005, 6, 2), {\n *   weekStartsOn: 1,\n *   firstWeekContainsDate: 4\n * })\n * //=> Mon Jan 03 2005 00:00:00\n */\nexport function startOfWeekYear(date, options) {\n  const defaultOptions = getDefaultOptions();\n  const firstWeekContainsDate =\n    options?.firstWeekContainsDate ??\n    options?.locale?.options?.firstWeekContainsDate ??\n    defaultOptions.firstWeekContainsDate ??\n    defaultOptions.locale?.options?.firstWeekContainsDate ??\n    1;\n\n  const year = getWeekYear(date, options);\n  const firstWeek = constructFrom(options?.in || date, 0);\n  firstWeek.setFullYear(year, 0, firstWeekContainsDate);\n  firstWeek.setHours(0, 0, 0, 0);\n  const _date = startOfWeek(firstWeek, options);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfWeekYear;\n","import { millisecondsInWeek } from \"./constants.js\";\nimport { startOfWeek } from \"./startOfWeek.js\";\nimport { startOfWeekYear } from \"./startOfWeekYear.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getWeek} function options.\n */\n\n/**\n * @name getWeek\n * @category Week Helpers\n * @summary Get the local week index of the given date.\n *\n * @description\n * Get the local week index of the given date.\n * The exact calculation depends on the values of\n * `options.weekStartsOn` (which is the index of the first day of the week)\n * and `options.firstWeekContainsDate` (which is the day of January, which is always in\n * the first week of the week-numbering year)\n *\n * Week numbering: https://en.wikipedia.org/wiki/Week#The_ISO_week_date_system\n *\n * @param date - The given date\n * @param options - An object with options\n *\n * @returns The week\n *\n * @example\n * // Which week of the local week numbering year is 2 January 2005 with default options?\n * const result = getWeek(new Date(2005, 0, 2))\n * //=> 2\n *\n * @example\n * // Which week of the local week numbering year is 2 January 2005,\n * // if Monday is the first day of the week,\n * // and the first week of the year always contains 4 January?\n * const result = getWeek(new Date(2005, 0, 2), {\n *   weekStartsOn: 1,\n *   firstWeekContainsDate: 4\n * })\n * //=> 53\n */\nexport function getWeek(date, options) {\n  const _date = toDate(date, options?.in);\n  const diff = +startOfWeek(_date, options) - +startOfWeekYear(_date, options);\n\n  // Round the number of weeks to the nearest integer because the number of\n  // milliseconds in a week is not constant (e.g. it's different in the week of\n  // the daylight saving time clock shift).\n  return Math.round(diff / millisecondsInWeek) + 1;\n}\n\n// Fallback for modularized imports:\nexport default getWeek;\n","export function addLeadingZeros(number, targetLength) {\n  const sign = number < 0 ? \"-\" : \"\";\n  const output = Math.abs(number).toString().padStart(targetLength, \"0\");\n  return sign + output;\n}\n","import { addLeadingZeros } from \"../addLeadingZeros.js\";\n\n/*\n * |     | Unit                           |     | Unit                           |\n * |-----|--------------------------------|-----|--------------------------------|\n * |  a  | AM, PM                         |  A* |                                |\n * |  d  | Day of month                   |  D  |                                |\n * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |\n * |  m  | Minute                         |  M  | Month                          |\n * |  s  | Second                         |  S  | Fraction of second             |\n * |  y  | Year (abs)                     |  Y  |                                |\n *\n * Letters marked by * are not implemented but reserved by Unicode standard.\n */\n\nexport const lightFormatters = {\n  // Year\n  y(date, token) {\n    // From http://www.unicode.org/reports/tr35/tr35-31/tr35-dates.html#Date_Format_tokens\n    // | Year     |     y | yy |   yyy |  yyyy | yyyyy |\n    // |----------|-------|----|-------|-------|-------|\n    // | AD 1     |     1 | 01 |   001 |  0001 | 00001 |\n    // | AD 12    |    12 | 12 |   012 |  0012 | 00012 |\n    // | AD 123   |   123 | 23 |   123 |  0123 | 00123 |\n    // | AD 1234  |  1234 | 34 |  1234 |  1234 | 01234 |\n    // | AD 12345 | 12345 | 45 | 12345 | 12345 | 12345 |\n\n    const signedYear = date.getFullYear();\n    // Returns 1 for 1 BC (which is year 0 in JavaScript)\n    const year = signedYear > 0 ? signedYear : 1 - signedYear;\n    return addLeadingZeros(token === \"yy\" ? year % 100 : year, token.length);\n  },\n\n  // Month\n  M(date, token) {\n    const month = date.getMonth();\n    return token === \"M\" ? String(month + 1) : addLeadingZeros(month + 1, 2);\n  },\n\n  // Day of the month\n  d(date, token) {\n    return addLeadingZeros(date.getDate(), token.length);\n  },\n\n  // AM or PM\n  a(date, token) {\n    const dayPeriodEnumValue = date.getHours() / 12 >= 1 ? \"pm\" : \"am\";\n\n    switch (token) {\n      case \"a\":\n      case \"aa\":\n        return dayPeriodEnumValue.toUpperCase();\n      case \"aaa\":\n        return dayPeriodEnumValue;\n      case \"aaaaa\":\n        return dayPeriodEnumValue[0];\n      case \"aaaa\":\n      default:\n        return dayPeriodEnumValue === \"am\" ? \"a.m.\" : \"p.m.\";\n    }\n  },\n\n  // Hour [1-12]\n  h(date, token) {\n    return addLeadingZeros(date.getHours() % 12 || 12, token.length);\n  },\n\n  // Hour [0-23]\n  H(date, token) {\n    return addLeadingZeros(date.getHours(), token.length);\n  },\n\n  // Minute\n  m(date, token) {\n    return addLeadingZeros(date.getMinutes(), token.length);\n  },\n\n  // Second\n  s(date, token) {\n    return addLeadingZeros(date.getSeconds(), token.length);\n  },\n\n  // Fraction of second\n  S(date, token) {\n    const numberOfDigits = token.length;\n    const milliseconds = date.getMilliseconds();\n    const fractionalSeconds = Math.trunc(\n      milliseconds * Math.pow(10, numberOfDigits - 3),\n    );\n    return addLeadingZeros(fractionalSeconds, token.length);\n  },\n};\n","import { getDayOfYear } from \"../../getDayOfYear.js\";\nimport { getISOWeek } from \"../../getISOWeek.js\";\nimport { getISOWeekYear } from \"../../getISOWeekYear.js\";\nimport { getWeek } from \"../../getWeek.js\";\nimport { getWeekYear } from \"../../getWeekYear.js\";\n\nimport { addLeadingZeros } from \"../addLeadingZeros.js\";\nimport { lightFormatters } from \"./lightFormatters.js\";\n\nconst dayPeriodEnum = {\n  am: \"am\",\n  pm: \"pm\",\n  midnight: \"midnight\",\n  noon: \"noon\",\n  morning: \"morning\",\n  afternoon: \"afternoon\",\n  evening: \"evening\",\n  night: \"night\",\n};\n\n/*\n * |     | Unit                           |     | Unit                           |\n * |-----|--------------------------------|-----|--------------------------------|\n * |  a  | AM, PM                         |  A* | Milliseconds in day            |\n * |  b  | AM, PM, noon, midnight         |  B  | Flexible day period            |\n * |  c  | Stand-alone local day of week  |  C* | Localized hour w/ day period   |\n * |  d  | Day of month                   |  D  | Day of year                    |\n * |  e  | Local day of week              |  E  | Day of week                    |\n * |  f  |                                |  F* | Day of week in month           |\n * |  g* | Modified Julian day            |  G  | Era                            |\n * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |\n * |  i! | ISO day of week                |  I! | ISO week of year               |\n * |  j* | Localized hour w/ day period   |  J* | Localized hour w/o day period  |\n * |  k  | Hour [1-24]                    |  K  | Hour [0-11]                    |\n * |  l* | (deprecated)                   |  L  | Stand-alone month              |\n * |  m  | Minute                         |  M  | Month                          |\n * |  n  |                                |  N  |                                |\n * |  o! | Ordinal number modifier        |  O  | Timezone (GMT)                 |\n * |  p! | Long localized time            |  P! | Long localized date            |\n * |  q  | Stand-alone quarter            |  Q  | Quarter                        |\n * |  r* | Related Gregorian year         |  R! | ISO week-numbering year        |\n * |  s  | Second                         |  S  | Fraction of second             |\n * |  t! | Seconds timestamp              |  T! | Milliseconds timestamp         |\n * |  u  | Extended year                  |  U* | Cyclic year                    |\n * |  v* | Timezone (generic non-locat.)  |  V* | Timezone (location)            |\n * |  w  | Local week of year             |  W* | Week of month                  |\n * |  x  | Timezone (ISO-8601 w/o Z)      |  X  | Timezone (ISO-8601)            |\n * |  y  | Year (abs)                     |  Y  | Local week-numbering year      |\n * |  z  | Timezone (specific non-locat.) |  Z* | Timezone (aliases)             |\n *\n * Letters marked by * are not implemented but reserved by Unicode standard.\n *\n * Letters marked by ! are non-standard, but implemented by date-fns:\n * - `o` modifies the previous token to turn it into an ordinal (see `format` docs)\n * - `i` is ISO day of week. For `i` and `ii` is returns numeric ISO week days,\n *   i.e. 7 for Sunday, 1 for Monday, etc.\n * - `I` is ISO week of year, as opposed to `w` which is local week of year.\n * - `R` is ISO week-numbering year, as opposed to `Y` which is local week-numbering year.\n *   `R` is supposed to be used in conjunction with `I` and `i`\n *   for universal ISO week-numbering date, whereas\n *   `Y` is supposed to be used in conjunction with `w` and `e`\n *   for week-numbering date specific to the locale.\n * - `P` is long localized date format\n * - `p` is long localized time format\n */\n\nexport const formatters = {\n  // Era\n  G: function (date, token, localize) {\n    const era = date.getFullYear() > 0 ? 1 : 0;\n    switch (token) {\n      // AD, BC\n      case \"G\":\n      case \"GG\":\n      case \"GGG\":\n        return localize.era(era, { width: \"abbreviated\" });\n      // A, B\n      case \"GGGGG\":\n        return localize.era(era, { width: \"narrow\" });\n      // Anno Domini, Before Christ\n      case \"GGGG\":\n      default:\n        return localize.era(era, { width: \"wide\" });\n    }\n  },\n\n  // Year\n  y: function (date, token, localize) {\n    // Ordinal number\n    if (token === \"yo\") {\n      const signedYear = date.getFullYear();\n      // Returns 1 for 1 BC (which is year 0 in JavaScript)\n      const year = signedYear > 0 ? signedYear : 1 - signedYear;\n      return localize.ordinalNumber(year, { unit: \"year\" });\n    }\n\n    return lightFormatters.y(date, token);\n  },\n\n  // Local week-numbering year\n  Y: function (date, token, localize, options) {\n    const signedWeekYear = getWeekYear(date, options);\n    // Returns 1 for 1 BC (which is year 0 in JavaScript)\n    const weekYear = signedWeekYear > 0 ? signedWeekYear : 1 - signedWeekYear;\n\n    // Two digit year\n    if (token === \"YY\") {\n      const twoDigitYear = weekYear % 100;\n      return addLeadingZeros(twoDigitYear, 2);\n    }\n\n    // Ordinal number\n    if (token === \"Yo\") {\n      return localize.ordinalNumber(weekYear, { unit: \"year\" });\n    }\n\n    // Padding\n    return addLeadingZeros(weekYear, token.length);\n  },\n\n  // ISO week-numbering year\n  R: function (date, token) {\n    const isoWeekYear = getISOWeekYear(date);\n\n    // Padding\n    return addLeadingZeros(isoWeekYear, token.length);\n  },\n\n  // Extended year. This is a single number designating the year of this calendar system.\n  // The main difference between `y` and `u` localizers are B.C. years:\n  // | Year | `y` | `u` |\n  // |------|-----|-----|\n  // | AC 1 |   1 |   1 |\n  // | BC 1 |   1 |   0 |\n  // | BC 2 |   2 |  -1 |\n  // Also `yy` always returns the last two digits of a year,\n  // while `uu` pads single digit years to 2 characters and returns other years unchanged.\n  u: function (date, token) {\n    const year = date.getFullYear();\n    return addLeadingZeros(year, token.length);\n  },\n\n  // Quarter\n  Q: function (date, token, localize) {\n    const quarter = Math.ceil((date.getMonth() + 1) / 3);\n    switch (token) {\n      // 1, 2, 3, 4\n      case \"Q\":\n        return String(quarter);\n      // 01, 02, 03, 04\n      case \"QQ\":\n        return addLeadingZeros(quarter, 2);\n      // 1st, 2nd, 3rd, 4th\n      case \"Qo\":\n        return localize.ordinalNumber(quarter, { unit: \"quarter\" });\n      // Q1, Q2, Q3, Q4\n      case \"QQQ\":\n        return localize.quarter(quarter, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      // 1, 2, 3, 4 (narrow quarter; could be not numerical)\n      case \"QQQQQ\":\n        return localize.quarter(quarter, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      // 1st quarter, 2nd quarter, ...\n      case \"QQQQ\":\n      default:\n        return localize.quarter(quarter, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // Stand-alone quarter\n  q: function (date, token, localize) {\n    const quarter = Math.ceil((date.getMonth() + 1) / 3);\n    switch (token) {\n      // 1, 2, 3, 4\n      case \"q\":\n        return String(quarter);\n      // 01, 02, 03, 04\n      case \"qq\":\n        return addLeadingZeros(quarter, 2);\n      // 1st, 2nd, 3rd, 4th\n      case \"qo\":\n        return localize.ordinalNumber(quarter, { unit: \"quarter\" });\n      // Q1, Q2, Q3, Q4\n      case \"qqq\":\n        return localize.quarter(quarter, {\n          width: \"abbreviated\",\n          context: \"standalone\",\n        });\n      // 1, 2, 3, 4 (narrow quarter; could be not numerical)\n      case \"qqqqq\":\n        return localize.quarter(quarter, {\n          width: \"narrow\",\n          context: \"standalone\",\n        });\n      // 1st quarter, 2nd quarter, ...\n      case \"qqqq\":\n      default:\n        return localize.quarter(quarter, {\n          width: \"wide\",\n          context: \"standalone\",\n        });\n    }\n  },\n\n  // Month\n  M: function (date, token, localize) {\n    const month = date.getMonth();\n    switch (token) {\n      case \"M\":\n      case \"MM\":\n        return lightFormatters.M(date, token);\n      // 1st, 2nd, ..., 12th\n      case \"Mo\":\n        return localize.ordinalNumber(month + 1, { unit: \"month\" });\n      // Jan, Feb, ..., Dec\n      case \"MMM\":\n        return localize.month(month, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      // J, F, ..., D\n      case \"MMMMM\":\n        return localize.month(month, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      // January, February, ..., December\n      case \"MMMM\":\n      default:\n        return localize.month(month, { width: \"wide\", context: \"formatting\" });\n    }\n  },\n\n  // Stand-alone month\n  L: function (date, token, localize) {\n    const month = date.getMonth();\n    switch (token) {\n      // 1, 2, ..., 12\n      case \"L\":\n        return String(month + 1);\n      // 01, 02, ..., 12\n      case \"LL\":\n        return addLeadingZeros(month + 1, 2);\n      // 1st, 2nd, ..., 12th\n      case \"Lo\":\n        return localize.ordinalNumber(month + 1, { unit: \"month\" });\n      // Jan, Feb, ..., Dec\n      case \"LLL\":\n        return localize.month(month, {\n          width: \"abbreviated\",\n          context: \"standalone\",\n        });\n      // J, F, ..., D\n      case \"LLLLL\":\n        return localize.month(month, {\n          width: \"narrow\",\n          context: \"standalone\",\n        });\n      // January, February, ..., December\n      case \"LLLL\":\n      default:\n        return localize.month(month, { width: \"wide\", context: \"standalone\" });\n    }\n  },\n\n  // Local week of year\n  w: function (date, token, localize, options) {\n    const week = getWeek(date, options);\n\n    if (token === \"wo\") {\n      return localize.ordinalNumber(week, { unit: \"week\" });\n    }\n\n    return addLeadingZeros(week, token.length);\n  },\n\n  // ISO week of year\n  I: function (date, token, localize) {\n    const isoWeek = getISOWeek(date);\n\n    if (token === \"Io\") {\n      return localize.ordinalNumber(isoWeek, { unit: \"week\" });\n    }\n\n    return addLeadingZeros(isoWeek, token.length);\n  },\n\n  // Day of the month\n  d: function (date, token, localize) {\n    if (token === \"do\") {\n      return localize.ordinalNumber(date.getDate(), { unit: \"date\" });\n    }\n\n    return lightFormatters.d(date, token);\n  },\n\n  // Day of year\n  D: function (date, token, localize) {\n    const dayOfYear = getDayOfYear(date);\n\n    if (token === \"Do\") {\n      return localize.ordinalNumber(dayOfYear, { unit: \"dayOfYear\" });\n    }\n\n    return addLeadingZeros(dayOfYear, token.length);\n  },\n\n  // Day of week\n  E: function (date, token, localize) {\n    const dayOfWeek = date.getDay();\n    switch (token) {\n      // Tue\n      case \"E\":\n      case \"EE\":\n      case \"EEE\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      // T\n      case \"EEEEE\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      // Tu\n      case \"EEEEEE\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\",\n        });\n      // Tuesday\n      case \"EEEE\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // Local day of week\n  e: function (date, token, localize, options) {\n    const dayOfWeek = date.getDay();\n    const localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;\n    switch (token) {\n      // Numerical value (Nth day of week with current locale or weekStartsOn)\n      case \"e\":\n        return String(localDayOfWeek);\n      // Padded numerical value\n      case \"ee\":\n        return addLeadingZeros(localDayOfWeek, 2);\n      // 1st, 2nd, ..., 7th\n      case \"eo\":\n        return localize.ordinalNumber(localDayOfWeek, { unit: \"day\" });\n      case \"eee\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      // T\n      case \"eeeee\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      // Tu\n      case \"eeeeee\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\",\n        });\n      // Tuesday\n      case \"eeee\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // Stand-alone local day of week\n  c: function (date, token, localize, options) {\n    const dayOfWeek = date.getDay();\n    const localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;\n    switch (token) {\n      // Numerical value (same as in `e`)\n      case \"c\":\n        return String(localDayOfWeek);\n      // Padded numerical value\n      case \"cc\":\n        return addLeadingZeros(localDayOfWeek, token.length);\n      // 1st, 2nd, ..., 7th\n      case \"co\":\n        return localize.ordinalNumber(localDayOfWeek, { unit: \"day\" });\n      case \"ccc\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"standalone\",\n        });\n      // T\n      case \"ccccc\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"standalone\",\n        });\n      // Tu\n      case \"cccccc\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"standalone\",\n        });\n      // Tuesday\n      case \"cccc\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"standalone\",\n        });\n    }\n  },\n\n  // ISO day of week\n  i: function (date, token, localize) {\n    const dayOfWeek = date.getDay();\n    const isoDayOfWeek = dayOfWeek === 0 ? 7 : dayOfWeek;\n    switch (token) {\n      // 2\n      case \"i\":\n        return String(isoDayOfWeek);\n      // 02\n      case \"ii\":\n        return addLeadingZeros(isoDayOfWeek, token.length);\n      // 2nd\n      case \"io\":\n        return localize.ordinalNumber(isoDayOfWeek, { unit: \"day\" });\n      // Tue\n      case \"iii\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      // T\n      case \"iiiii\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      // Tu\n      case \"iiiiii\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\",\n        });\n      // Tuesday\n      case \"iiii\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // AM or PM\n  a: function (date, token, localize) {\n    const hours = date.getHours();\n    const dayPeriodEnumValue = hours / 12 >= 1 ? \"pm\" : \"am\";\n\n    switch (token) {\n      case \"a\":\n      case \"aa\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      case \"aaa\":\n        return localize\n          .dayPeriod(dayPeriodEnumValue, {\n            width: \"abbreviated\",\n            context: \"formatting\",\n          })\n          .toLowerCase();\n      case \"aaaaa\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      case \"aaaa\":\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // AM, PM, midnight, noon\n  b: function (date, token, localize) {\n    const hours = date.getHours();\n    let dayPeriodEnumValue;\n    if (hours === 12) {\n      dayPeriodEnumValue = dayPeriodEnum.noon;\n    } else if (hours === 0) {\n      dayPeriodEnumValue = dayPeriodEnum.midnight;\n    } else {\n      dayPeriodEnumValue = hours / 12 >= 1 ? \"pm\" : \"am\";\n    }\n\n    switch (token) {\n      case \"b\":\n      case \"bb\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      case \"bbb\":\n        return localize\n          .dayPeriod(dayPeriodEnumValue, {\n            width: \"abbreviated\",\n            context: \"formatting\",\n          })\n          .toLowerCase();\n      case \"bbbbb\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      case \"bbbb\":\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // in the morning, in the afternoon, in the evening, at night\n  B: function (date, token, localize) {\n    const hours = date.getHours();\n    let dayPeriodEnumValue;\n    if (hours >= 17) {\n      dayPeriodEnumValue = dayPeriodEnum.evening;\n    } else if (hours >= 12) {\n      dayPeriodEnumValue = dayPeriodEnum.afternoon;\n    } else if (hours >= 4) {\n      dayPeriodEnumValue = dayPeriodEnum.morning;\n    } else {\n      dayPeriodEnumValue = dayPeriodEnum.night;\n    }\n\n    switch (token) {\n      case \"B\":\n      case \"BB\":\n      case \"BBB\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      case \"BBBBB\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      case \"BBBB\":\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // Hour [1-12]\n  h: function (date, token, localize) {\n    if (token === \"ho\") {\n      let hours = date.getHours() % 12;\n      if (hours === 0) hours = 12;\n      return localize.ordinalNumber(hours, { unit: \"hour\" });\n    }\n\n    return lightFormatters.h(date, token);\n  },\n\n  // Hour [0-23]\n  H: function (date, token, localize) {\n    if (token === \"Ho\") {\n      return localize.ordinalNumber(date.getHours(), { unit: \"hour\" });\n    }\n\n    return lightFormatters.H(date, token);\n  },\n\n  // Hour [0-11]\n  K: function (date, token, localize) {\n    const hours = date.getHours() % 12;\n\n    if (token === \"Ko\") {\n      return localize.ordinalNumber(hours, { unit: \"hour\" });\n    }\n\n    return addLeadingZeros(hours, token.length);\n  },\n\n  // Hour [1-24]\n  k: function (date, token, localize) {\n    let hours = date.getHours();\n    if (hours === 0) hours = 24;\n\n    if (token === \"ko\") {\n      return localize.ordinalNumber(hours, { unit: \"hour\" });\n    }\n\n    return addLeadingZeros(hours, token.length);\n  },\n\n  // Minute\n  m: function (date, token, localize) {\n    if (token === \"mo\") {\n      return localize.ordinalNumber(date.getMinutes(), { unit: \"minute\" });\n    }\n\n    return lightFormatters.m(date, token);\n  },\n\n  // Second\n  s: function (date, token, localize) {\n    if (token === \"so\") {\n      return localize.ordinalNumber(date.getSeconds(), { unit: \"second\" });\n    }\n\n    return lightFormatters.s(date, token);\n  },\n\n  // Fraction of second\n  S: function (date, token) {\n    return lightFormatters.S(date, token);\n  },\n\n  // Timezone (ISO-8601. If offset is 0, output is always `'Z'`)\n  X: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n\n    if (timezoneOffset === 0) {\n      return \"Z\";\n    }\n\n    switch (token) {\n      // Hours and optional minutes\n      case \"X\":\n        return formatTimezoneWithOptionalMinutes(timezoneOffset);\n\n      // Hours, minutes and optional seconds without `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `XX`\n      case \"XXXX\":\n      case \"XX\": // Hours and minutes without `:` delimiter\n        return formatTimezone(timezoneOffset);\n\n      // Hours, minutes and optional seconds with `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `XXX`\n      case \"XXXXX\":\n      case \"XXX\": // Hours and minutes with `:` delimiter\n      default:\n        return formatTimezone(timezoneOffset, \":\");\n    }\n  },\n\n  // Timezone (ISO-8601. If offset is 0, output is `'+00:00'` or equivalent)\n  x: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n\n    switch (token) {\n      // Hours and optional minutes\n      case \"x\":\n        return formatTimezoneWithOptionalMinutes(timezoneOffset);\n\n      // Hours, minutes and optional seconds without `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `xx`\n      case \"xxxx\":\n      case \"xx\": // Hours and minutes without `:` delimiter\n        return formatTimezone(timezoneOffset);\n\n      // Hours, minutes and optional seconds with `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `xxx`\n      case \"xxxxx\":\n      case \"xxx\": // Hours and minutes with `:` delimiter\n      default:\n        return formatTimezone(timezoneOffset, \":\");\n    }\n  },\n\n  // Timezone (GMT)\n  O: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n\n    switch (token) {\n      // Short\n      case \"O\":\n      case \"OO\":\n      case \"OOO\":\n        return \"GMT\" + formatTimezoneShort(timezoneOffset, \":\");\n      // Long\n      case \"OOOO\":\n      default:\n        return \"GMT\" + formatTimezone(timezoneOffset, \":\");\n    }\n  },\n\n  // Timezone (specific non-location)\n  z: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n\n    switch (token) {\n      // Short\n      case \"z\":\n      case \"zz\":\n      case \"zzz\":\n        return \"GMT\" + formatTimezoneShort(timezoneOffset, \":\");\n      // Long\n      case \"zzzz\":\n      default:\n        return \"GMT\" + formatTimezone(timezoneOffset, \":\");\n    }\n  },\n\n  // Seconds timestamp\n  t: function (date, token, _localize) {\n    const timestamp = Math.trunc(+date / 1000);\n    return addLeadingZeros(timestamp, token.length);\n  },\n\n  // Milliseconds timestamp\n  T: function (date, token, _localize) {\n    return addLeadingZeros(+date, token.length);\n  },\n};\n\nfunction formatTimezoneShort(offset, delimiter = \"\") {\n  const sign = offset > 0 ? \"-\" : \"+\";\n  const absOffset = Math.abs(offset);\n  const hours = Math.trunc(absOffset / 60);\n  const minutes = absOffset % 60;\n  if (minutes === 0) {\n    return sign + String(hours);\n  }\n  return sign + String(hours) + delimiter + addLeadingZeros(minutes, 2);\n}\n\nfunction formatTimezoneWithOptionalMinutes(offset, delimiter) {\n  if (offset % 60 === 0) {\n    const sign = offset > 0 ? \"-\" : \"+\";\n    return sign + addLeadingZeros(Math.abs(offset) / 60, 2);\n  }\n  return formatTimezone(offset, delimiter);\n}\n\nfunction formatTimezone(offset, delimiter = \"\") {\n  const sign = offset > 0 ? \"-\" : \"+\";\n  const absOffset = Math.abs(offset);\n  const hours = addLeadingZeros(Math.trunc(absOffset / 60), 2);\n  const minutes = addLeadingZeros(absOffset % 60, 2);\n  return sign + hours + delimiter + minutes;\n}\n","const dateLongFormatter = (pattern, formatLong) => {\n  switch (pattern) {\n    case \"P\":\n      return formatLong.date({ width: \"short\" });\n    case \"PP\":\n      return formatLong.date({ width: \"medium\" });\n    case \"PPP\":\n      return formatLong.date({ width: \"long\" });\n    case \"PPPP\":\n    default:\n      return formatLong.date({ width: \"full\" });\n  }\n};\n\nconst timeLongFormatter = (pattern, formatLong) => {\n  switch (pattern) {\n    case \"p\":\n      return formatLong.time({ width: \"short\" });\n    case \"pp\":\n      return formatLong.time({ width: \"medium\" });\n    case \"ppp\":\n      return formatLong.time({ width: \"long\" });\n    case \"pppp\":\n    default:\n      return formatLong.time({ width: \"full\" });\n  }\n};\n\nconst dateTimeLongFormatter = (pattern, formatLong) => {\n  const matchResult = pattern.match(/(P+)(p+)?/) || [];\n  const datePattern = matchResult[1];\n  const timePattern = matchResult[2];\n\n  if (!timePattern) {\n    return dateLongFormatter(pattern, formatLong);\n  }\n\n  let dateTimeFormat;\n\n  switch (datePattern) {\n    case \"P\":\n      dateTimeFormat = formatLong.dateTime({ width: \"short\" });\n      break;\n    case \"PP\":\n      dateTimeFormat = formatLong.dateTime({ width: \"medium\" });\n      break;\n    case \"PPP\":\n      dateTimeFormat = formatLong.dateTime({ width: \"long\" });\n      break;\n    case \"PPPP\":\n    default:\n      dateTimeFormat = formatLong.dateTime({ width: \"full\" });\n      break;\n  }\n\n  return dateTimeFormat\n    .replace(\"{{date}}\", dateLongFormatter(datePattern, formatLong))\n    .replace(\"{{time}}\", timeLongFormatter(timePattern, formatLong));\n};\n\nexport const longFormatters = {\n  p: timeLongFormatter,\n  P: dateTimeLongFormatter,\n};\n","const dayOfYearTokenRE = /^D+$/;\nconst weekYearTokenRE = /^Y+$/;\n\nconst throwTokens = [\"D\", \"DD\", \"YY\", \"YYYY\"];\n\nexport function isProtectedDayOfYearToken(token) {\n  return dayOfYearTokenRE.test(token);\n}\n\nexport function isProtectedWeekYearToken(token) {\n  return weekYearTokenRE.test(token);\n}\n\nexport function warnOrThrowProtectedError(token, format, input) {\n  const _message = message(token, format, input);\n  console.warn(_message);\n  if (throwTokens.includes(token)) throw new RangeError(_message);\n}\n\nfunction message(token, format, input) {\n  const subject = token[0] === \"Y\" ? \"years\" : \"days of the month\";\n  return `Use \\`${token.toLowerCase()}\\` instead of \\`${token}\\` (in \\`${format}\\`) for formatting ${subject} to the input \\`${input}\\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`;\n}\n","import { defaultLocale } from \"./_lib/defaultLocale.js\";\nimport { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { formatters } from \"./_lib/format/formatters.js\";\nimport { longFormatters } from \"./_lib/format/longFormatters.js\";\nimport {\n  isProtectedDayOfYearToken,\n  isProtectedWeekYearToken,\n  warnOrThrowProtectedError,\n} from \"./_lib/protectedTokens.js\";\nimport { isValid } from \"./isValid.js\";\nimport { toDate } from \"./toDate.js\";\n\n// Rexports of internal for libraries to use.\n// See: https://github.com/date-fns/date-fns/issues/3638#issuecomment-1877082874\nexport { formatters, longFormatters };\n\n// This RegExp consists of three parts separated by `|`:\n// - [yYQqMLwIdDecihHKkms]o matches any available ordinal number token\n//   (one of the certain letters followed by `o`)\n// - (\\w)\\1* matches any sequences of the same letter\n// - '' matches two quote characters in a row\n// - '(''|[^'])+('|$) matches anything surrounded by two quote characters ('),\n//   except a single quote symbol, which ends the sequence.\n//   Two quote characters do not end the sequence.\n//   If there is no matching single quote\n//   then the sequence will continue until the end of the string.\n// - . matches any single character unmatched by previous parts of the RegExps\nconst formattingTokensRegExp =\n  /[yYQqMLwIdDecihHKkms]o|(\\w)\\1*|''|'(''|[^'])+('|$)|./g;\n\n// This RegExp catches symbols escaped by quotes, and also\n// sequences of symbols P, p, and the combinations like `PPPPPPPppppp`\nconst longFormattingTokensRegExp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;\n\nconst escapedStringRegExp = /^'([^]*?)'?$/;\nconst doubleQuoteRegExp = /''/g;\nconst unescapedLatinCharacterRegExp = /[a-zA-Z]/;\n\nexport { format as formatDate };\n\n/**\n * The {@link format} function options.\n */\n\n/**\n * @name format\n * @alias formatDate\n * @category Common Helpers\n * @summary Format the date.\n *\n * @description\n * Return the formatted date string in the given format. The result may vary by locale.\n *\n * >  Please note that the `format` tokens differ from Moment.js and other libraries.\n * > See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * The characters wrapped between two single quotes characters (') are escaped.\n * Two single quotes in a row, whether inside or outside a quoted sequence, represent a 'real' single quote.\n * (see the last example)\n *\n * Format of the string is based on Unicode Technical Standard #35:\n * https://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table\n * with a few additions (see note 7 below the table).\n *\n * Accepted patterns:\n * | Unit                            | Pattern | Result examples                   | Notes |\n * |---------------------------------|---------|-----------------------------------|-------|\n * | Era                             | G..GGG  | AD, BC                            |       |\n * |                                 | GGGG    | Anno Domini, Before Christ        | 2     |\n * |                                 | GGGGG   | A, B                              |       |\n * | Calendar year                   | y       | 44, 1, 1900, 2017                 | 5     |\n * |                                 | yo      | 44th, 1st, 0th, 17th              | 5,7   |\n * |                                 | yy      | 44, 01, 00, 17                    | 5     |\n * |                                 | yyy     | 044, 001, 1900, 2017              | 5     |\n * |                                 | yyyy    | 0044, 0001, 1900, 2017            | 5     |\n * |                                 | yyyyy   | ...                               | 3,5   |\n * | Local week-numbering year       | Y       | 44, 1, 1900, 2017                 | 5     |\n * |                                 | Yo      | 44th, 1st, 1900th, 2017th         | 5,7   |\n * |                                 | YY      | 44, 01, 00, 17                    | 5,8   |\n * |                                 | YYY     | 044, 001, 1900, 2017              | 5     |\n * |                                 | YYYY    | 0044, 0001, 1900, 2017            | 5,8   |\n * |                                 | YYYYY   | ...                               | 3,5   |\n * | ISO week-numbering year         | R       | -43, 0, 1, 1900, 2017             | 5,7   |\n * |                                 | RR      | -43, 00, 01, 1900, 2017           | 5,7   |\n * |                                 | RRR     | -043, 000, 001, 1900, 2017        | 5,7   |\n * |                                 | RRRR    | -0043, 0000, 0001, 1900, 2017     | 5,7   |\n * |                                 | RRRRR   | ...                               | 3,5,7 |\n * | Extended year                   | u       | -43, 0, 1, 1900, 2017             | 5     |\n * |                                 | uu      | -43, 01, 1900, 2017               | 5     |\n * |                                 | uuu     | -043, 001, 1900, 2017             | 5     |\n * |                                 | uuuu    | -0043, 0001, 1900, 2017           | 5     |\n * |                                 | uuuuu   | ...                               | 3,5   |\n * | Quarter (formatting)            | Q       | 1, 2, 3, 4                        |       |\n * |                                 | Qo      | 1st, 2nd, 3rd, 4th                | 7     |\n * |                                 | QQ      | 01, 02, 03, 04                    |       |\n * |                                 | QQQ     | Q1, Q2, Q3, Q4                    |       |\n * |                                 | QQQQ    | 1st quarter, 2nd quarter, ...     | 2     |\n * |                                 | QQQQQ   | 1, 2, 3, 4                        | 4     |\n * | Quarter (stand-alone)           | q       | 1, 2, 3, 4                        |       |\n * |                                 | qo      | 1st, 2nd, 3rd, 4th                | 7     |\n * |                                 | qq      | 01, 02, 03, 04                    |       |\n * |                                 | qqq     | Q1, Q2, Q3, Q4                    |       |\n * |                                 | qqqq    | 1st quarter, 2nd quarter, ...     | 2     |\n * |                                 | qqqqq   | 1, 2, 3, 4                        | 4     |\n * | Month (formatting)              | M       | 1, 2, ..., 12                     |       |\n * |                                 | Mo      | 1st, 2nd, ..., 12th               | 7     |\n * |                                 | MM      | 01, 02, ..., 12                   |       |\n * |                                 | MMM     | Jan, Feb, ..., Dec                |       |\n * |                                 | MMMM    | January, February, ..., December  | 2     |\n * |                                 | MMMMM   | J, F, ..., D                      |       |\n * | Month (stand-alone)             | L       | 1, 2, ..., 12                     |       |\n * |                                 | Lo      | 1st, 2nd, ..., 12th               | 7     |\n * |                                 | LL      | 01, 02, ..., 12                   |       |\n * |                                 | LLL     | Jan, Feb, ..., Dec                |       |\n * |                                 | LLLL    | January, February, ..., December  | 2     |\n * |                                 | LLLLL   | J, F, ..., D                      |       |\n * | Local week of year              | w       | 1, 2, ..., 53                     |       |\n * |                                 | wo      | 1st, 2nd, ..., 53th               | 7     |\n * |                                 | ww      | 01, 02, ..., 53                   |       |\n * | ISO week of year                | I       | 1, 2, ..., 53                     | 7     |\n * |                                 | Io      | 1st, 2nd, ..., 53th               | 7     |\n * |                                 | II      | 01, 02, ..., 53                   | 7     |\n * | Day of month                    | d       | 1, 2, ..., 31                     |       |\n * |                                 | do      | 1st, 2nd, ..., 31st               | 7     |\n * |                                 | dd      | 01, 02, ..., 31                   |       |\n * | Day of year                     | D       | 1, 2, ..., 365, 366               | 9     |\n * |                                 | Do      | 1st, 2nd, ..., 365th, 366th       | 7     |\n * |                                 | DD      | 01, 02, ..., 365, 366             | 9     |\n * |                                 | DDD     | 001, 002, ..., 365, 366           |       |\n * |                                 | DDDD    | ...                               | 3     |\n * | Day of week (formatting)        | E..EEE  | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | EEEE    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | EEEEE   | M, T, W, T, F, S, S               |       |\n * |                                 | EEEEEE  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | ISO day of week (formatting)    | i       | 1, 2, 3, ..., 7                   | 7     |\n * |                                 | io      | 1st, 2nd, ..., 7th                | 7     |\n * |                                 | ii      | 01, 02, ..., 07                   | 7     |\n * |                                 | iii     | Mon, Tue, Wed, ..., Sun           | 7     |\n * |                                 | iiii    | Monday, Tuesday, ..., Sunday      | 2,7   |\n * |                                 | iiiii   | M, T, W, T, F, S, S               | 7     |\n * |                                 | iiiiii  | Mo, Tu, We, Th, Fr, Sa, Su        | 7     |\n * | Local day of week (formatting)  | e       | 2, 3, 4, ..., 1                   |       |\n * |                                 | eo      | 2nd, 3rd, ..., 1st                | 7     |\n * |                                 | ee      | 02, 03, ..., 01                   |       |\n * |                                 | eee     | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | eeee    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | eeeee   | M, T, W, T, F, S, S               |       |\n * |                                 | eeeeee  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | Local day of week (stand-alone) | c       | 2, 3, 4, ..., 1                   |       |\n * |                                 | co      | 2nd, 3rd, ..., 1st                | 7     |\n * |                                 | cc      | 02, 03, ..., 01                   |       |\n * |                                 | ccc     | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | cccc    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | ccccc   | M, T, W, T, F, S, S               |       |\n * |                                 | cccccc  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | AM, PM                          | a..aa   | AM, PM                            |       |\n * |                                 | aaa     | am, pm                            |       |\n * |                                 | aaaa    | a.m., p.m.                        | 2     |\n * |                                 | aaaaa   | a, p                              |       |\n * | AM, PM, noon, midnight          | b..bb   | AM, PM, noon, midnight            |       |\n * |                                 | bbb     | am, pm, noon, midnight            |       |\n * |                                 | bbbb    | a.m., p.m., noon, midnight        | 2     |\n * |                                 | bbbbb   | a, p, n, mi                       |       |\n * | Flexible day period             | B..BBB  | at night, in the morning, ...     |       |\n * |                                 | BBBB    | at night, in the morning, ...     | 2     |\n * |                                 | BBBBB   | at night, in the morning, ...     |       |\n * | Hour [1-12]                     | h       | 1, 2, ..., 11, 12                 |       |\n * |                                 | ho      | 1st, 2nd, ..., 11th, 12th         | 7     |\n * |                                 | hh      | 01, 02, ..., 11, 12               |       |\n * | Hour [0-23]                     | H       | 0, 1, 2, ..., 23                  |       |\n * |                                 | Ho      | 0th, 1st, 2nd, ..., 23rd          | 7     |\n * |                                 | HH      | 00, 01, 02, ..., 23               |       |\n * | Hour [0-11]                     | K       | 1, 2, ..., 11, 0                  |       |\n * |                                 | Ko      | 1st, 2nd, ..., 11th, 0th          | 7     |\n * |                                 | KK      | 01, 02, ..., 11, 00               |       |\n * | Hour [1-24]                     | k       | 24, 1, 2, ..., 23                 |       |\n * |                                 | ko      | 24th, 1st, 2nd, ..., 23rd         | 7     |\n * |                                 | kk      | 24, 01, 02, ..., 23               |       |\n * | Minute                          | m       | 0, 1, ..., 59                     |       |\n * |                                 | mo      | 0th, 1st, ..., 59th               | 7     |\n * |                                 | mm      | 00, 01, ..., 59                   |       |\n * | Second                          | s       | 0, 1, ..., 59                     |       |\n * |                                 | so      | 0th, 1st, ..., 59th               | 7     |\n * |                                 | ss      | 00, 01, ..., 59                   |       |\n * | Fraction of second              | S       | 0, 1, ..., 9                      |       |\n * |                                 | SS      | 00, 01, ..., 99                   |       |\n * |                                 | SSS     | 000, 001, ..., 999                |       |\n * |                                 | SSSS    | ...                               | 3     |\n * | Timezone (ISO-8601 w/ Z)        | X       | -08, +0530, Z                     |       |\n * |                                 | XX      | -0800, +0530, Z                   |       |\n * |                                 | XXX     | -08:00, +05:30, Z                 |       |\n * |                                 | XXXX    | -0800, +0530, Z, +123456          | 2     |\n * |                                 | XXXXX   | -08:00, +05:30, Z, +12:34:56      |       |\n * | Timezone (ISO-8601 w/o Z)       | x       | -08, +0530, +00                   |       |\n * |                                 | xx      | -0800, +0530, +0000               |       |\n * |                                 | xxx     | -08:00, +05:30, +00:00            | 2     |\n * |                                 | xxxx    | -0800, +0530, +0000, +123456      |       |\n * |                                 | xxxxx   | -08:00, +05:30, +00:00, +12:34:56 |       |\n * | Timezone (GMT)                  | O...OOO | GMT-8, GMT+5:30, GMT+0            |       |\n * |                                 | OOOO    | GMT-08:00, GMT+05:30, GMT+00:00   | 2     |\n * | Timezone (specific non-locat.)  | z...zzz | GMT-8, GMT+5:30, GMT+0            | 6     |\n * |                                 | zzzz    | GMT-08:00, GMT+05:30, GMT+00:00   | 2,6   |\n * | Seconds timestamp               | t       | 512969520                         | 7     |\n * |                                 | tt      | ...                               | 3,7   |\n * | Milliseconds timestamp          | T       | 512969520900                      | 7     |\n * |                                 | TT      | ...                               | 3,7   |\n * | Long localized date             | P       | 04/29/1453                        | 7     |\n * |                                 | PP      | Apr 29, 1453                      | 7     |\n * |                                 | PPP     | April 29th, 1453                  | 7     |\n * |                                 | PPPP    | Friday, April 29th, 1453          | 2,7   |\n * | Long localized time             | p       | 12:00 AM                          | 7     |\n * |                                 | pp      | 12:00:00 AM                       | 7     |\n * |                                 | ppp     | 12:00:00 AM GMT+2                 | 7     |\n * |                                 | pppp    | 12:00:00 AM GMT+02:00             | 2,7   |\n * | Combination of date and time    | Pp      | 04/29/1453, 12:00 AM              | 7     |\n * |                                 | PPpp    | Apr 29, 1453, 12:00:00 AM         | 7     |\n * |                                 | PPPppp  | April 29th, 1453 at ...           | 7     |\n * |                                 | PPPPpppp| Friday, April 29th, 1453 at ...   | 2,7   |\n * Notes:\n * 1. \"Formatting\" units (e.g. formatting quarter) in the default en-US locale\n *    are the same as \"stand-alone\" units, but are different in some languages.\n *    \"Formatting\" units are declined according to the rules of the language\n *    in the context of a date. \"Stand-alone\" units are always nominative singular:\n *\n *    `format(new Date(2017, 10, 6), 'do LLLL', {locale: cs}) //=> '6. listopad'`\n *\n *    `format(new Date(2017, 10, 6), 'do MMMM', {locale: cs}) //=> '6. listopadu'`\n *\n * 2. Any sequence of the identical letters is a pattern, unless it is escaped by\n *    the single quote characters (see below).\n *    If the sequence is longer than listed in table (e.g. `EEEEEEEEEEE`)\n *    the output will be the same as default pattern for this unit, usually\n *    the longest one (in case of ISO weekdays, `EEEE`). Default patterns for units\n *    are marked with \"2\" in the last column of the table.\n *\n *    `format(new Date(2017, 10, 6), 'MMM') //=> 'Nov'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMM') //=> 'November'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMM') //=> 'N'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMMM') //=> 'November'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMMMM') //=> 'November'`\n *\n * 3. Some patterns could be unlimited length (such as `yyyyyyyy`).\n *    The output will be padded with zeros to match the length of the pattern.\n *\n *    `format(new Date(2017, 10, 6), 'yyyyyyyy') //=> '00002017'`\n *\n * 4. `QQQQQ` and `qqqqq` could be not strictly numerical in some locales.\n *    These tokens represent the shortest form of the quarter.\n *\n * 5. The main difference between `y` and `u` patterns are B.C. years:\n *\n *    | Year | `y` | `u` |\n *    |------|-----|-----|\n *    | AC 1 |   1 |   1 |\n *    | BC 1 |   1 |   0 |\n *    | BC 2 |   2 |  -1 |\n *\n *    Also `yy` always returns the last two digits of a year,\n *    while `uu` pads single digit years to 2 characters and returns other years unchanged:\n *\n *    | Year | `yy` | `uu` |\n *    |------|------|------|\n *    | 1    |   01 |   01 |\n *    | 14   |   14 |   14 |\n *    | 376  |   76 |  376 |\n *    | 1453 |   53 | 1453 |\n *\n *    The same difference is true for local and ISO week-numbering years (`Y` and `R`),\n *    except local week-numbering years are dependent on `options.weekStartsOn`\n *    and `options.firstWeekContainsDate` (compare [getISOWeekYear](https://date-fns.org/docs/getISOWeekYear)\n *    and [getWeekYear](https://date-fns.org/docs/getWeekYear)).\n *\n * 6. Specific non-location timezones are currently unavailable in `date-fns`,\n *    so right now these tokens fall back to GMT timezones.\n *\n * 7. These patterns are not in the Unicode Technical Standard #35:\n *    - `i`: ISO day of week\n *    - `I`: ISO week of year\n *    - `R`: ISO week-numbering year\n *    - `t`: seconds timestamp\n *    - `T`: milliseconds timestamp\n *    - `o`: ordinal number modifier\n *    - `P`: long localized date\n *    - `p`: long localized time\n *\n * 8. `YY` and `YYYY` tokens represent week-numbering years but they are often confused with years.\n *    You should enable `options.useAdditionalWeekYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * 9. `D` and `DD` tokens represent days of the year but they are often confused with days of the month.\n *    You should enable `options.useAdditionalDayOfYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * @param date - The original date\n * @param format - The string of tokens\n * @param options - An object with options\n *\n * @returns The formatted date string\n *\n * @throws `date` must not be Invalid Date\n * @throws `options.locale` must contain `localize` property\n * @throws `options.locale` must contain `formatLong` property\n * @throws use `yyyy` instead of `YYYY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws use `yy` instead of `YY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws use `d` instead of `D` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws use `dd` instead of `DD` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws format string contains an unescaped latin alphabet character\n *\n * @example\n * // Represent 11 February 2014 in middle-endian format:\n * const result = format(new Date(2014, 1, 11), 'MM/dd/yyyy')\n * //=> '02/11/2014'\n *\n * @example\n * // Represent 2 July 2014 in Esperanto:\n * import { eoLocale } from 'date-fns/locale/eo'\n * const result = format(new Date(2014, 6, 2), \"do 'de' MMMM yyyy\", {\n *   locale: eoLocale\n * })\n * //=> '2-a de julio 2014'\n *\n * @example\n * // Escape string by single quote characters:\n * const result = format(new Date(2014, 6, 2, 15), \"h 'o''clock'\")\n * //=> \"3 o'clock\"\n */\nexport function format(date, formatStr, options) {\n  const defaultOptions = getDefaultOptions();\n  const locale = options?.locale ?? defaultOptions.locale ?? defaultLocale;\n\n  const firstWeekContainsDate =\n    options?.firstWeekContainsDate ??\n    options?.locale?.options?.firstWeekContainsDate ??\n    defaultOptions.firstWeekContainsDate ??\n    defaultOptions.locale?.options?.firstWeekContainsDate ??\n    1;\n\n  const weekStartsOn =\n    options?.weekStartsOn ??\n    options?.locale?.options?.weekStartsOn ??\n    defaultOptions.weekStartsOn ??\n    defaultOptions.locale?.options?.weekStartsOn ??\n    0;\n\n  const originalDate = toDate(date, options?.in);\n\n  if (!isValid(originalDate)) {\n    throw new RangeError(\"Invalid time value\");\n  }\n\n  let parts = formatStr\n    .match(longFormattingTokensRegExp)\n    .map((substring) => {\n      const firstCharacter = substring[0];\n      if (firstCharacter === \"p\" || firstCharacter === \"P\") {\n        const longFormatter = longFormatters[firstCharacter];\n        return longFormatter(substring, locale.formatLong);\n      }\n      return substring;\n    })\n    .join(\"\")\n    .match(formattingTokensRegExp)\n    .map((substring) => {\n      // Replace two single quote characters with one single quote character\n      if (substring === \"''\") {\n        return { isToken: false, value: \"'\" };\n      }\n\n      const firstCharacter = substring[0];\n      if (firstCharacter === \"'\") {\n        return { isToken: false, value: cleanEscapedString(substring) };\n      }\n\n      if (formatters[firstCharacter]) {\n        return { isToken: true, value: substring };\n      }\n\n      if (firstCharacter.match(unescapedLatinCharacterRegExp)) {\n        throw new RangeError(\n          \"Format string contains an unescaped latin alphabet character `\" +\n            firstCharacter +\n            \"`\",\n        );\n      }\n\n      return { isToken: false, value: substring };\n    });\n\n  // invoke localize preprocessor (only for french locales at the moment)\n  if (locale.localize.preprocessor) {\n    parts = locale.localize.preprocessor(originalDate, parts);\n  }\n\n  const formatterOptions = {\n    firstWeekContainsDate,\n    weekStartsOn,\n    locale,\n  };\n\n  return parts\n    .map((part) => {\n      if (!part.isToken) return part.value;\n\n      const token = part.value;\n\n      if (\n        (!options?.useAdditionalWeekYearTokens &&\n          isProtectedWeekYearToken(token)) ||\n        (!options?.useAdditionalDayOfYearTokens &&\n          isProtectedDayOfYearToken(token))\n      ) {\n        warnOrThrowProtectedError(token, formatStr, String(date));\n      }\n\n      const formatter = formatters[token[0]];\n      return formatter(originalDate, token, locale.localize, formatterOptions);\n    })\n    .join(\"\");\n}\n\nfunction cleanEscapedString(input) {\n  const matched = input.match(escapedStringRegExp);\n\n  if (!matched) {\n    return input;\n  }\n\n  return matched[1].replace(doubleQuoteRegExp, \"'\");\n}\n\n// Fallback for modularized imports:\nexport default format;\n","import { constructFrom } from \"./constructFrom.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getDaysInMonth} function options.\n */\n\n/**\n * @name getDaysInMonth\n * @category Month Helpers\n * @summary Get the number of days in a month of the given date.\n *\n * @description\n * Get the number of days in a month of the given date, considering the context if provided.\n *\n * @param date - The given date\n * @param options - An object with options\n *\n * @returns The number of days in a month\n *\n * @example\n * // How many days are in February 2000?\n * const result = getDaysInMonth(new Date(2000, 1))\n * //=> 29\n */\nexport function getDaysInMonth(date, options) {\n  const _date = toDate(date, options?.in);\n  const year = _date.getFullYear();\n  const monthIndex = _date.getMonth();\n  const lastDayOfMonth = constructFrom(_date, 0);\n  lastDayOfMonth.setFullYear(year, monthIndex + 1, 0);\n  lastDayOfMonth.setHours(0, 0, 0, 0);\n  return lastDayOfMonth.getDate();\n}\n\n// Fallback for modularized imports:\nexport default getDaysInMonth;\n","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getMonth} function options.\n */\n\n/**\n * @name getMonth\n * @category Month Helpers\n * @summary Get the month of the given date.\n *\n * @description\n * Get the month of the given date.\n *\n * @param date - The given date\n * @param options - An object with options\n *\n * @returns The month index (0-11)\n *\n * @example\n * // Which month is 29 February 2012?\n * const result = getMonth(new Date(2012, 1, 29))\n * //=> 1\n */\nexport function getMonth(date, options) {\n  return toDate(date, options?.in).getMonth();\n}\n\n// Fallback for modularized imports:\nexport default getMonth;\n","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getYear} function options.\n */\n\n/**\n * @name getYear\n * @category Year Helpers\n * @summary Get the year of the given date.\n *\n * @description\n * Get the year of the given date.\n *\n * @param date - The given date\n * @param options - An object with options\n *\n * @returns The year\n *\n * @example\n * // Which year is 2 July 2014?\n * const result = getYear(new Date(2014, 6, 2))\n * //=> 2014\n */\nexport function getYear(date, options) {\n  return toDate(date, options?.in).getFullYear();\n}\n\n// Fallback for modularized imports:\nexport default getYear;\n","import { toDate } from \"./toDate.js\";\n\n/**\n * @name isAfter\n * @category Common Helpers\n * @summary Is the first date after the second one?\n *\n * @description\n * Is the first date after the second one?\n *\n * @param date - The date that should be after the other one to return true\n * @param dateToCompare - The date to compare with\n *\n * @returns The first date is after the second date\n *\n * @example\n * // Is 10 July 1989 after 11 February 1987?\n * const result = isAfter(new Date(1989, 6, 10), new Date(1987, 1, 11))\n * //=> true\n */\nexport function isAfter(date, dateToCompare) {\n  return +toDate(date) > +toDate(dateToCompare);\n}\n\n// Fallback for modularized imports:\nexport default isAfter;\n","import { toDate } from \"./toDate.js\";\n\n/**\n * @name isBefore\n * @category Common Helpers\n * @summary Is the first date before the second one?\n *\n * @description\n * Is the first date before the second one?\n *\n * @param date - The date that should be before the other one to return true\n * @param dateToCompare - The date to compare with\n *\n * @returns The first date is before the second date\n *\n * @example\n * // Is 10 July 1989 before 11 February 1987?\n * const result = isBefore(new Date(1989, 6, 10), new Date(1987, 1, 11))\n * //=> false\n */\nexport function isBefore(date, dateToCompare) {\n  return +toDate(date) < +toDate(dateToCompare);\n}\n\n// Fallback for modularized imports:\nexport default isBefore;\n","import { normalizeDates } from \"./_lib/normalizeDates.js\";\n\n/**\n * The {@link isSameMonth} function options.\n */\n\n/**\n * @name isSameMonth\n * @category Month Helpers\n * @summary Are the given dates in the same month (and year)?\n *\n * @description\n * Are the given dates in the same month (and year)?\n *\n * @param laterDate - The first date to check\n * @param earlierDate - The second date to check\n * @param options - An object with options\n *\n * @returns The dates are in the same month (and year)\n *\n * @example\n * // Are 2 September 2014 and 25 September 2014 in the same month?\n * const result = isSameMonth(new Date(2014, 8, 2), new Date(2014, 8, 25))\n * //=> true\n *\n * @example\n * // Are 2 September 2014 and 25 September 2015 in the same month?\n * const result = isSameMonth(new Date(2014, 8, 2), new Date(2015, 8, 25))\n * //=> false\n */\nexport function isSameMonth(laterDate, earlierDate, options) {\n  const [laterDate_, earlierDate_] = normalizeDates(\n    options?.in,\n    laterDate,\n    earlierDate,\n  );\n  return (\n    laterDate_.getFullYear() === earlierDate_.getFullYear() &&\n    laterDate_.getMonth() === earlierDate_.getMonth()\n  );\n}\n\n// Fallback for modularized imports:\nexport default isSameMonth;\n","import { normalizeDates } from \"./_lib/normalizeDates.js\";\n\n/**\n * The {@link isSameYear} function options.\n */\n\n/**\n * @name isSameYear\n * @category Year Helpers\n * @summary Are the given dates in the same year?\n *\n * @description\n * Are the given dates in the same year?\n *\n * @param laterDate - The first date to check\n * @param earlierDate - The second date to check\n * @param options - An object with options\n *\n * @returns The dates are in the same year\n *\n * @example\n * // Are 2 September 2014 and 25 September 2014 in the same year?\n * const result = isSameYear(new Date(2014, 8, 2), new Date(2014, 8, 25))\n * //=> true\n */\nexport function isSameYear(laterDate, earlierDate, options) {\n  const [laterDate_, earlierDate_] = normalizeDates(\n    options?.in,\n    laterDate,\n    earlierDate,\n  );\n  return laterDate_.getFullYear() === earlierDate_.getFullYear();\n}\n\n// Fallback for modularized imports:\nexport default isSameYear;\n","import { constructFrom } from \"./constructFrom.js\";\nimport { getDaysInMonth } from \"./getDaysInMonth.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link setMonth} function options.\n */\n\n/**\n * @name setMonth\n * @category Month Helpers\n * @summary Set the month to the given date.\n *\n * @description\n * Set the month to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param month - The month index to set (0-11)\n * @param options - The options\n *\n * @returns The new date with the month set\n *\n * @example\n * // Set February to 1 September 2014:\n * const result = setMonth(new Date(2014, 8, 1), 1)\n * //=> Sat Feb 01 2014 00:00:00\n */\nexport function setMonth(date, month, options) {\n  const _date = toDate(date, options?.in);\n  const year = _date.getFullYear();\n  const day = _date.getDate();\n\n  const midMonth = constructFrom(options?.in || date, 0);\n  midMonth.setFullYear(year, month, 15);\n  midMonth.setHours(0, 0, 0, 0);\n  const daysInMonth = getDaysInMonth(midMonth);\n\n  // Set the earlier date, allows to wrap Jan 31 to Feb 28\n  _date.setMonth(month, Math.min(day, daysInMonth));\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default setMonth;\n","import { constructFrom } from \"./constructFrom.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link setYear} function options.\n */\n\n/**\n * @name setYear\n * @category Year Helpers\n * @summary Set the year to the given date.\n *\n * @description\n * Set the year to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param year - The year of the new date\n * @param options - An object with options.\n *\n * @returns The new date with the year set\n *\n * @example\n * // Set year 2013 to 1 September 2014:\n * const result = setYear(new Date(2014, 8, 1), 2013)\n * //=> Sun Sep 01 2013 00:00:00\n */\nexport function setYear(date, year, options) {\n  const date_ = toDate(date, options?.in);\n\n  // Check if date is Invalid Date because Date.prototype.setFullYear ignores the value of Invalid Date\n  if (isNaN(+date_)) return constructFrom(options?.in || date, NaN);\n\n  date_.setFullYear(year);\n  return date_;\n}\n\n// Fallback for modularized imports:\nexport default setYear;\n","const FIVE_WEEKS = 5;\nconst FOUR_WEEKS = 4;\n/**\n * Returns the number of weeks to display in the broadcast calendar for a given\n * month.\n *\n * The broadcast calendar may have either 4 or 5 weeks in a month, depending on\n * the start and end dates of the broadcast weeks.\n *\n * @since 9.4.0\n * @param month The month for which to calculate the number of weeks.\n * @param dateLib The date library to use for date manipulation.\n * @returns The number of weeks in the broadcast calendar (4 or 5).\n */\nexport function getBroadcastWeeksInMonth(month, dateLib) {\n    // Get the first day of the month\n    const firstDayOfMonth = dateLib.startOfMonth(month);\n    // Get the day of the week for the first day of the month (1-7, where 1 is Monday)\n    const firstDayOfWeek = firstDayOfMonth.getDay() > 0 ? firstDayOfMonth.getDay() : 7;\n    const broadcastStartDate = dateLib.addDays(month, -firstDayOfWeek + 1);\n    const lastDateOfLastWeek = dateLib.addDays(broadcastStartDate, FIVE_WEEKS * 7 - 1);\n    const numberOfWeeks = dateLib.getMonth(month) === dateLib.getMonth(lastDateOfLastWeek)\n        ? FIVE_WEEKS\n        : FOUR_WEEKS;\n    return numberOfWeeks;\n}\n","/**\n * Returns the start date of the week in the broadcast calendar.\n *\n * The broadcast week starts on Monday. If the first day of the month is not a\n * Monday, this function calculates the previous Monday as the start of the\n * broadcast week.\n *\n * @since 9.4.0\n * @param date The date for which to calculate the start of the broadcast week.\n * @param dateLib The date library to use for date manipulation.\n * @returns The start date of the broadcast week.\n */\nexport function startOfBroadcastWeek(date, dateLib) {\n    const firstOfMonth = dateLib.startOfMonth(date);\n    const dayOfWeek = firstOfMonth.getDay();\n    if (dayOfWeek === 1) {\n        return firstOfMonth;\n    }\n    else if (dayOfWeek === 0) {\n        return dateLib.addDays(firstOfMonth, -1 * 6);\n    }\n    else {\n        return dateLib.addDays(firstOfMonth, -1 * (dayOfWeek - 1));\n    }\n}\n","import { getBroadcastWeeksInMonth } from \"./getBroadcastWeeksInMonth.js\";\nimport { startOfBroadcastWeek } from \"./startOfBroadcastWeek.js\";\n/**\n * Returns the end date of the week in the broadcast calendar.\n *\n * The broadcast week ends on the last day of the last broadcast week for the\n * given date.\n *\n * @since 9.4.0\n * @param date The date for which to calculate the end of the broadcast week.\n * @param dateLib The date library to use for date manipulation.\n * @returns The end date of the broadcast week.\n */\nexport function endOfBroadcastWeek(date, dateLib) {\n    const startDate = startOfBroadcastWeek(date, dateLib);\n    const numberOfWeeks = getBroadcastWeeksInMonth(date, dateLib);\n    const endDate = dateLib.addDays(startDate, numberOfWeeks * 7 - 1);\n    return endDate;\n}\n","import { format } from \"date-fns\";\nimport { enUS as dateFnsEnUS } from \"date-fns/locale\";\n/** English (United States) locale extended with DayPicker-specific translations. */\nexport const enUS = {\n    ...dateFnsEnUS,\n    labels: {\n        labelDayButton: (date, modifiers, options, dateLib) => {\n            let formatDate;\n            if (dateLib && typeof dateLib.format === \"function\") {\n                formatDate = dateLib.format.bind(dateLib);\n            }\n            else {\n                formatDate = (d, pattern) => format(d, pattern, { locale: dateFnsEnUS, ...options });\n            }\n            let label = formatDate(date, \"PPPP\");\n            if (modifiers.today)\n                label = `Today, ${label}`;\n            if (modifiers.selected)\n                label = `${label}, selected`;\n            return label;\n        },\n        labelMonthDropdown: \"Choose the Month\",\n        labelNext: \"Go to the Next Month\",\n        labelPrevious: \"Go to the Previous Month\",\n        labelWeekNumber: (weekNumber) => `Week ${weekNumber}`,\n        labelYearDropdown: \"Choose the Year\",\n        labelGrid: (date, options, dateLib) => {\n            let formatDate;\n            if (dateLib && typeof dateLib.format === \"function\") {\n                formatDate = dateLib.format.bind(dateLib);\n            }\n            else {\n                formatDate = (d, pattern) => format(d, pattern, { locale: dateFnsEnUS, ...options });\n            }\n            return formatDate(date, \"LLLL yyyy\");\n        },\n        labelGridcell: (date, modifiers, options, dateLib) => {\n            let formatDate;\n            if (dateLib && typeof dateLib.format === \"function\") {\n                formatDate = dateLib.format.bind(dateLib);\n            }\n            else {\n                formatDate = (d, pattern) => format(d, pattern, { locale: dateFnsEnUS, ...options });\n            }\n            let label = formatDate(date, \"PPPP\");\n            if (modifiers?.today) {\n                label = `Today, ${label}`;\n            }\n            return label;\n        },\n        labelNav: \"Navigation bar\",\n        labelWeekNumberHeader: \"Week Number\",\n        labelWeekday: (date, options, dateLib) => {\n            let formatDate;\n            if (dateLib && typeof dateLib.format === \"function\") {\n                formatDate = dateLib.format.bind(dateLib);\n            }\n            else {\n                formatDate = (d, pattern) => format(d, pattern, { locale: dateFnsEnUS, ...options });\n            }\n            return formatDate(date, \"cccc\");\n        },\n    },\n};\n","import { TZDate } from \"@date-fns/tz\";\nimport { addDays, addMonths, addWeeks, addYears, differenceInCalendarDays, differenceInCalendarMonths, eachMonthOfInterval, eachYearOfInterval, endOfISOWeek, endOfMonth, endOfWeek, endOfYear, format, getISOWeek, getMonth, getWeek, getYear, isAfter, isBefore, isDate, isSameDay, isSameMonth, isSameYear, max, min, setMonth, setYear, startOfDay, startOfISOWeek, startOfMonth, startOfWeek, startOfYear, } from \"date-fns\";\nimport { endOfBroadcastWeek } from \"../helpers/endOfBroadcastWeek.js\";\nimport { startOfBroadcastWeek } from \"../helpers/startOfBroadcastWeek.js\";\nimport { enUS } from \"../locale/en-US.js\";\n/**\n * A wrapper class around [date-fns](http://date-fns.org) that provides utility\n * methods for date manipulation and formatting.\n *\n * @since 9.2.0\n * @example\n *   const dateLib = new DateLib({ locale: es });\n *   const newDate = dateLib.addDays(new Date(), 5);\n */\nexport class DateLib {\n    /**\n     * Creates an instance of `DateLib`.\n     *\n     * @param options Configuration options for the date library.\n     * @param overrides Custom overrides for the date library functions.\n     */\n    constructor(options, overrides) {\n        /**\n         * Reference to the built-in Date constructor.\n         *\n         * @deprecated Use `newDate()` or `today()`.\n         */\n        this.Date = Date;\n        /**\n         * Creates a new `Date` object representing today's date.\n         *\n         * @since 9.5.0\n         * @returns A `Date` object for today's date.\n         */\n        this.today = () => {\n            if (this.overrides?.today) {\n                return this.overrides.today();\n            }\n            if (this.options.timeZone) {\n                return TZDate.tz(this.options.timeZone);\n            }\n            return new this.Date();\n        };\n        /**\n         * Creates a new `Date` object with the specified year, month, and day.\n         *\n         * @since 9.5.0\n         * @param year The year.\n         * @param monthIndex The month (0-11).\n         * @param date The day of the month.\n         * @returns A new `Date` object.\n         */\n        this.newDate = (year, monthIndex, date) => {\n            if (this.overrides?.newDate) {\n                return this.overrides.newDate(year, monthIndex, date);\n            }\n            if (this.options.timeZone) {\n                return new TZDate(year, monthIndex, date, this.options.timeZone);\n            }\n            return new Date(year, monthIndex, date);\n        };\n        /**\n         * Adds the specified number of days to the given date.\n         *\n         * @param date The date to add days to.\n         * @param amount The number of days to add.\n         * @returns The new date with the days added.\n         */\n        this.addDays = (date, amount) => {\n            return this.overrides?.addDays\n                ? this.overrides.addDays(date, amount)\n                : addDays(date, amount);\n        };\n        /**\n         * Adds the specified number of months to the given date.\n         *\n         * @param date The date to add months to.\n         * @param amount The number of months to add.\n         * @returns The new date with the months added.\n         */\n        this.addMonths = (date, amount) => {\n            return this.overrides?.addMonths\n                ? this.overrides.addMonths(date, amount)\n                : addMonths(date, amount);\n        };\n        /**\n         * Adds the specified number of weeks to the given date.\n         *\n         * @param date The date to add weeks to.\n         * @param amount The number of weeks to add.\n         * @returns The new date with the weeks added.\n         */\n        this.addWeeks = (date, amount) => {\n            return this.overrides?.addWeeks\n                ? this.overrides.addWeeks(date, amount)\n                : addWeeks(date, amount);\n        };\n        /**\n         * Adds the specified number of years to the given date.\n         *\n         * @param date The date to add years to.\n         * @param amount The number of years to add.\n         * @returns The new date with the years added.\n         */\n        this.addYears = (date, amount) => {\n            return this.overrides?.addYears\n                ? this.overrides.addYears(date, amount)\n                : addYears(date, amount);\n        };\n        /**\n         * Returns the number of calendar days between the given dates.\n         *\n         * @param dateLeft The later date.\n         * @param dateRight The earlier date.\n         * @returns The number of calendar days between the dates.\n         */\n        this.differenceInCalendarDays = (dateLeft, dateRight) => {\n            return this.overrides?.differenceInCalendarDays\n                ? this.overrides.differenceInCalendarDays(dateLeft, dateRight)\n                : differenceInCalendarDays(dateLeft, dateRight);\n        };\n        /**\n         * Returns the number of calendar months between the given dates.\n         *\n         * @param dateLeft The later date.\n         * @param dateRight The earlier date.\n         * @returns The number of calendar months between the dates.\n         */\n        this.differenceInCalendarMonths = (dateLeft, dateRight) => {\n            return this.overrides?.differenceInCalendarMonths\n                ? this.overrides.differenceInCalendarMonths(dateLeft, dateRight)\n                : differenceInCalendarMonths(dateLeft, dateRight);\n        };\n        /**\n         * Returns the months between the given dates.\n         *\n         * @param interval The interval to get the months for.\n         */\n        this.eachMonthOfInterval = (interval) => {\n            return this.overrides?.eachMonthOfInterval\n                ? this.overrides.eachMonthOfInterval(interval)\n                : eachMonthOfInterval(interval);\n        };\n        /**\n         * Returns the years between the given dates.\n         *\n         * @since 9.11.1\n         * @param interval The interval to get the years for.\n         * @returns The array of years in the interval.\n         */\n        this.eachYearOfInterval = (interval) => {\n            const years = this.overrides?.eachYearOfInterval\n                ? this.overrides.eachYearOfInterval(interval)\n                : eachYearOfInterval(interval);\n            // Remove duplicates that may happen across DST transitions (e.g., \"America/Sao_Paulo\")\n            // See https://github.com/date-fns/tz/issues/72\n            const uniqueYears = new Set(years.map((d) => this.getYear(d)));\n            if (uniqueYears.size === years.length) {\n                // No duplicates, return as is\n                return years;\n            }\n            // Rebuild the array to ensure one date per year\n            const yearsArray = [];\n            uniqueYears.forEach((y) => {\n                yearsArray.push(new Date(y, 0, 1));\n            });\n            return yearsArray;\n        };\n        /**\n         * Returns the end of the broadcast week for the given date.\n         *\n         * @param date The original date.\n         * @returns The end of the broadcast week.\n         */\n        this.endOfBroadcastWeek = (date) => {\n            return this.overrides?.endOfBroadcastWeek\n                ? this.overrides.endOfBroadcastWeek(date)\n                : endOfBroadcastWeek(date, this);\n        };\n        /**\n         * Returns the end of the ISO week for the given date.\n         *\n         * @param date The original date.\n         * @returns The end of the ISO week.\n         */\n        this.endOfISOWeek = (date) => {\n            return this.overrides?.endOfISOWeek\n                ? this.overrides.endOfISOWeek(date)\n                : endOfISOWeek(date);\n        };\n        /**\n         * Returns the end of the month for the given date.\n         *\n         * @param date The original date.\n         * @returns The end of the month.\n         */\n        this.endOfMonth = (date) => {\n            return this.overrides?.endOfMonth\n                ? this.overrides.endOfMonth(date)\n                : endOfMonth(date);\n        };\n        /**\n         * Returns the end of the week for the given date.\n         *\n         * @param date The original date.\n         * @returns The end of the week.\n         */\n        this.endOfWeek = (date, options) => {\n            return this.overrides?.endOfWeek\n                ? this.overrides.endOfWeek(date, options)\n                : endOfWeek(date, this.options);\n        };\n        /**\n         * Returns the end of the year for the given date.\n         *\n         * @param date The original date.\n         * @returns The end of the year.\n         */\n        this.endOfYear = (date) => {\n            return this.overrides?.endOfYear\n                ? this.overrides.endOfYear(date)\n                : endOfYear(date);\n        };\n        /**\n         * Formats the given date using the specified format string.\n         *\n         * @param date The date to format.\n         * @param formatStr The format string.\n         * @returns The formatted date string.\n         */\n        this.format = (date, formatStr, _options) => {\n            const formatted = this.overrides?.format\n                ? this.overrides.format(date, formatStr, this.options)\n                : format(date, formatStr, this.options);\n            if (this.options.numerals && this.options.numerals !== \"latn\") {\n                return this.replaceDigits(formatted);\n            }\n            return formatted;\n        };\n        /**\n         * Returns the ISO week number for the given date.\n         *\n         * @param date The date to get the ISO week number for.\n         * @returns The ISO week number.\n         */\n        this.getISOWeek = (date) => {\n            return this.overrides?.getISOWeek\n                ? this.overrides.getISOWeek(date)\n                : getISOWeek(date);\n        };\n        /**\n         * Returns the month of the given date.\n         *\n         * @param date The date to get the month for.\n         * @returns The month.\n         */\n        this.getMonth = (date, _options) => {\n            return this.overrides?.getMonth\n                ? this.overrides.getMonth(date, this.options)\n                : getMonth(date, this.options);\n        };\n        /**\n         * Returns the year of the given date.\n         *\n         * @param date The date to get the year for.\n         * @returns The year.\n         */\n        this.getYear = (date, _options) => {\n            return this.overrides?.getYear\n                ? this.overrides.getYear(date, this.options)\n                : getYear(date, this.options);\n        };\n        /**\n         * Returns the local week number for the given date.\n         *\n         * @param date The date to get the week number for.\n         * @returns The week number.\n         */\n        this.getWeek = (date, _options) => {\n            return this.overrides?.getWeek\n                ? this.overrides.getWeek(date, this.options)\n                : getWeek(date, this.options);\n        };\n        /**\n         * Checks if the first date is after the second date.\n         *\n         * @param date The date to compare.\n         * @param dateToCompare The date to compare with.\n         * @returns True if the first date is after the second date.\n         */\n        this.isAfter = (date, dateToCompare) => {\n            return this.overrides?.isAfter\n                ? this.overrides.isAfter(date, dateToCompare)\n                : isAfter(date, dateToCompare);\n        };\n        /**\n         * Checks if the first date is before the second date.\n         *\n         * @param date The date to compare.\n         * @param dateToCompare The date to compare with.\n         * @returns True if the first date is before the second date.\n         */\n        this.isBefore = (date, dateToCompare) => {\n            return this.overrides?.isBefore\n                ? this.overrides.isBefore(date, dateToCompare)\n                : isBefore(date, dateToCompare);\n        };\n        /**\n         * Checks if the given value is a Date object.\n         *\n         * @param value The value to check.\n         * @returns True if the value is a Date object.\n         */\n        this.isDate = (value) => {\n            return this.overrides?.isDate\n                ? this.overrides.isDate(value)\n                : isDate(value);\n        };\n        /**\n         * Checks if the given dates are on the same day.\n         *\n         * @param dateLeft The first date to compare.\n         * @param dateRight The second date to compare.\n         * @returns True if the dates are on the same day.\n         */\n        this.isSameDay = (dateLeft, dateRight) => {\n            return this.overrides?.isSameDay\n                ? this.overrides.isSameDay(dateLeft, dateRight)\n                : isSameDay(dateLeft, dateRight);\n        };\n        /**\n         * Checks if the given dates are in the same month.\n         *\n         * @param dateLeft The first date to compare.\n         * @param dateRight The second date to compare.\n         * @returns True if the dates are in the same month.\n         */\n        this.isSameMonth = (dateLeft, dateRight) => {\n            return this.overrides?.isSameMonth\n                ? this.overrides.isSameMonth(dateLeft, dateRight)\n                : isSameMonth(dateLeft, dateRight);\n        };\n        /**\n         * Checks if the given dates are in the same year.\n         *\n         * @param dateLeft The first date to compare.\n         * @param dateRight The second date to compare.\n         * @returns True if the dates are in the same year.\n         */\n        this.isSameYear = (dateLeft, dateRight) => {\n            return this.overrides?.isSameYear\n                ? this.overrides.isSameYear(dateLeft, dateRight)\n                : isSameYear(dateLeft, dateRight);\n        };\n        /**\n         * Returns the latest date in the given array of dates.\n         *\n         * @param dates The array of dates to compare.\n         * @returns The latest date.\n         */\n        this.max = (dates) => {\n            return this.overrides?.max ? this.overrides.max(dates) : max(dates);\n        };\n        /**\n         * Returns the earliest date in the given array of dates.\n         *\n         * @param dates The array of dates to compare.\n         * @returns The earliest date.\n         */\n        this.min = (dates) => {\n            return this.overrides?.min ? this.overrides.min(dates) : min(dates);\n        };\n        /**\n         * Sets the month of the given date.\n         *\n         * @param date The date to set the month on.\n         * @param month The month to set (0-11).\n         * @returns The new date with the month set.\n         */\n        this.setMonth = (date, month) => {\n            return this.overrides?.setMonth\n                ? this.overrides.setMonth(date, month)\n                : setMonth(date, month);\n        };\n        /**\n         * Sets the year of the given date.\n         *\n         * @param date The date to set the year on.\n         * @param year The year to set.\n         * @returns The new date with the year set.\n         */\n        this.setYear = (date, year) => {\n            return this.overrides?.setYear\n                ? this.overrides.setYear(date, year)\n                : setYear(date, year);\n        };\n        /**\n         * Returns the start of the broadcast week for the given date.\n         *\n         * @param date The original date.\n         * @returns The start of the broadcast week.\n         */\n        this.startOfBroadcastWeek = (date, _dateLib) => {\n            return this.overrides?.startOfBroadcastWeek\n                ? this.overrides.startOfBroadcastWeek(date, this)\n                : startOfBroadcastWeek(date, this);\n        };\n        /**\n         * Returns the start of the day for the given date.\n         *\n         * @param date The original date.\n         * @returns The start of the day.\n         */\n        this.startOfDay = (date) => {\n            return this.overrides?.startOfDay\n                ? this.overrides.startOfDay(date)\n                : startOfDay(date);\n        };\n        /**\n         * Returns the start of the ISO week for the given date.\n         *\n         * @param date The original date.\n         * @returns The start of the ISO week.\n         */\n        this.startOfISOWeek = (date) => {\n            return this.overrides?.startOfISOWeek\n                ? this.overrides.startOfISOWeek(date)\n                : startOfISOWeek(date);\n        };\n        /**\n         * Returns the start of the month for the given date.\n         *\n         * @param date The original date.\n         * @returns The start of the month.\n         */\n        this.startOfMonth = (date) => {\n            return this.overrides?.startOfMonth\n                ? this.overrides.startOfMonth(date)\n                : startOfMonth(date);\n        };\n        /**\n         * Returns the start of the week for the given date.\n         *\n         * @param date The original date.\n         * @returns The start of the week.\n         */\n        this.startOfWeek = (date, _options) => {\n            return this.overrides?.startOfWeek\n                ? this.overrides.startOfWeek(date, this.options)\n                : startOfWeek(date, this.options);\n        };\n        /**\n         * Returns the start of the year for the given date.\n         *\n         * @param date The original date.\n         * @returns The start of the year.\n         */\n        this.startOfYear = (date) => {\n            return this.overrides?.startOfYear\n                ? this.overrides.startOfYear(date)\n                : startOfYear(date);\n        };\n        this.options = { locale: enUS, ...options };\n        this.overrides = overrides;\n    }\n    /**\n     * Generates a mapping of Arabic digits (0-9) to the target numbering system\n     * digits.\n     *\n     * @since 9.5.0\n     * @returns A record mapping Arabic digits to the target numerals.\n     */\n    getDigitMap() {\n        const { numerals = \"latn\" } = this.options;\n        // Use Intl.NumberFormat to create a formatter with the specified numbering system\n        const formatter = new Intl.NumberFormat(\"en-US\", {\n            numberingSystem: numerals,\n        });\n        // Map Arabic digits (0-9) to the target numerals\n        const digitMap = {};\n        for (let i = 0; i < 10; i++) {\n            digitMap[i.toString()] = formatter.format(i);\n        }\n        return digitMap;\n    }\n    /**\n     * Replaces Arabic digits in a string with the target numbering system digits.\n     *\n     * @since 9.5.0\n     * @param input The string containing Arabic digits.\n     * @returns The string with digits replaced.\n     */\n    replaceDigits(input) {\n        const digitMap = this.getDigitMap();\n        return input.replace(/\\d/g, (digit) => digitMap[digit] || digit);\n    }\n    /**\n     * Formats a number using the configured numbering system.\n     *\n     * @since 9.5.0\n     * @param value The number to format.\n     * @returns The formatted number as a string.\n     */\n    formatNumber(value) {\n        return this.replaceDigits(value.toString());\n    }\n    /**\n     * Returns the preferred ordering for month and year labels for the current\n     * locale.\n     */\n    getMonthYearOrder() {\n        const code = this.options.locale?.code;\n        if (!code) {\n            return \"month-first\";\n        }\n        return DateLib.yearFirstLocales.has(code) ? \"year-first\" : \"month-first\";\n    }\n    /**\n     * Formats the month/year pair respecting locale conventions.\n     *\n     * @since 9.11.0\n     */\n    formatMonthYear(date) {\n        const { locale, timeZone, numerals } = this.options;\n        const localeCode = locale?.code;\n        if (localeCode && DateLib.yearFirstLocales.has(localeCode)) {\n            try {\n                const intl = new Intl.DateTimeFormat(localeCode, {\n                    month: \"long\",\n                    year: \"numeric\",\n                    timeZone,\n                    numberingSystem: numerals,\n                });\n                const formatted = intl.format(date);\n                return formatted;\n            }\n            catch {\n                // Fallback to date-fns formatting below.\n            }\n        }\n        const pattern = this.getMonthYearOrder() === \"year-first\" ? \"y LLLL\" : \"LLLL y\";\n        return this.format(date, pattern);\n    }\n}\nDateLib.yearFirstLocales = new Set([\n    \"eu\",\n    \"hu\",\n    \"ja\",\n    \"ja-Hira\",\n    \"ja-JP\",\n    \"ko\",\n    \"ko-KR\",\n    \"lt\",\n    \"lt-LT\",\n    \"lv\",\n    \"lv-LV\",\n    \"mn\",\n    \"mn-MN\",\n    \"zh\",\n    \"zh-CN\",\n    \"zh-HK\",\n    \"zh-TW\",\n]);\n/** The default locale (English). */\nexport { enUS as defaultLocale } from \"../locale/en-US.js\";\n/**\n * The default date library with English locale.\n *\n * @since 9.2.0\n */\nexport const defaultDateLib = new DateLib();\n/**\n * @ignore\n * @deprecated Use `defaultDateLib`.\n */\nexport const dateLib = defaultDateLib;\n","import { defaultDateLib } from \"./DateLib.js\";\n/**\n * Represents a day displayed in the calendar.\n *\n * In DayPicker, a `CalendarDay` is a wrapper around a `Date` object that\n * provides additional information about the day, such as whether it belongs to\n * the displayed month.\n */\nexport class CalendarDay {\n    constructor(date, displayMonth, dateLib = defaultDateLib) {\n        this.date = date;\n        this.displayMonth = displayMonth;\n        this.outside = Boolean(displayMonth && !dateLib.isSameMonth(date, displayMonth));\n        this.dateLib = dateLib;\n        this.isoDate = dateLib.format(date, \"yyyy-MM-dd\");\n        this.displayMonthId = dateLib.format(displayMonth, \"yyyy-MM\");\n        this.dateMonthId = dateLib.format(date, \"yyyy-MM\");\n    }\n    /**\n     * Checks if this day is equal to another `CalendarDay`, considering both the\n     * date and the displayed month.\n     *\n     * @param day The `CalendarDay` to compare with.\n     * @returns `true` if the days are equal, otherwise `false`.\n     */\n    isEqualTo(day) {\n        return (this.dateLib.isSameDay(day.date, this.date) &&\n            this.dateLib.isSameMonth(day.displayMonth, this.displayMonth));\n    }\n}\n","/**\n * Represents a month in a calendar year.\n *\n * A `CalendarMonth` contains the weeks within the month and the date of the\n * month.\n */\nexport class CalendarMonth {\n    constructor(month, weeks) {\n        this.date = month;\n        this.weeks = weeks;\n    }\n}\n","/**\n * Represents a week in a calendar month.\n *\n * A `CalendarWeek` contains the days within the week and the week number.\n */\nexport class CalendarWeek {\n    constructor(weekNumber, days) {\n        this.days = days;\n        this.weekNumber = weekNumber;\n    }\n}\n","import React from \"react\";\n/**\n * Render the button elements in the calendar.\n *\n * @private\n * @deprecated Use `PreviousMonthButton` or `@link NextMonthButton` instead.\n */\nexport function Button(props) {\n    return React.createElement(\"button\", { ...props });\n}\n","import React from \"react\";\n/**\n * Render the label in the month caption.\n *\n * @group Components\n * @see https://daypicker.dev/guides/custom-components\n */\nexport function CaptionLabel(props) {\n    return React.createElement(\"span\", { ...props });\n}\n","import React from \"react\";\n/**\n * Render the chevron icon used in the navigation buttons and dropdowns.\n *\n * @group Components\n * @see https://daypicker.dev/guides/custom-components\n */\nexport function Chevron(props) {\n    const { size = 24, orientation = \"left\", className } = props;\n    return (\n    // biome-ignore lint/a11y/noSvgWithoutTitle: handled by the parent component\n    React.createElement(\"svg\", { className: className, width: size, height: size, viewBox: \"0 0 24 24\" },\n        orientation === \"up\" && (React.createElement(\"polygon\", { points: \"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28\" })),\n        orientation === \"down\" && (React.createElement(\"polygon\", { points: \"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72\" })),\n        orientation === \"left\" && (React.createElement(\"polygon\", { points: \"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20\" })),\n        orientation === \"right\" && (React.createElement(\"polygon\", { points: \"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20\" }))));\n}\n","import React from \"react\";\n/**\n * Render a grid cell for a specific day in the calendar.\n *\n * Handles interaction and focus for the day. If you only need to change the\n * content of the day cell, consider swapping the `DayButton` component\n * instead.\n *\n * @group Components\n * @see https://daypicker.dev/guides/custom-components\n */\nexport function Day(props) {\n    const { day, modifiers, ...tdProps } = props;\n    return React.createElement(\"td\", { ...tdProps });\n}\n","import React from \"react\";\n/**\n * Render a button for a specific day in the calendar.\n *\n * @group Components\n * @see https://daypicker.dev/guides/custom-components\n */\nexport function DayButton(props) {\n    const { day, modifiers, ...buttonProps } = props;\n    const ref = React.useRef(null);\n    React.useEffect(() => {\n        if (modifiers.focused)\n            ref.current?.focus();\n    }, [modifiers.focused]);\n    return React.createElement(\"button\", { ref: ref, ...buttonProps });\n}\n","/**\n * Enum representing the UI elements composing DayPicker. These elements are\n * mapped to {@link CustomComponents}, {@link ClassNames}, and {@link Styles}.\n *\n * Some elements are extended by flags and modifiers.\n */\nexport var UI;\n(function (UI) {\n    /** The root component displaying the months and the navigation bar. */\n    UI[\"Root\"] = \"root\";\n    /** The Chevron SVG element used by navigation buttons and dropdowns. */\n    UI[\"Chevron\"] = \"chevron\";\n    /**\n     * The grid cell with the day's date. Extended by {@link DayFlag} and\n     * {@link SelectionState}.\n     */\n    UI[\"Day\"] = \"day\";\n    /** The button containing the formatted day's date, inside the grid cell. */\n    UI[\"DayButton\"] = \"day_button\";\n    /** The caption label of the month (when not showing the dropdown navigation). */\n    UI[\"CaptionLabel\"] = \"caption_label\";\n    /** The container of the dropdown navigation (when enabled). */\n    UI[\"Dropdowns\"] = \"dropdowns\";\n    /** The dropdown element to select for years and months. */\n    UI[\"Dropdown\"] = \"dropdown\";\n    /** The container element of the dropdown. */\n    UI[\"DropdownRoot\"] = \"dropdown_root\";\n    /** The root element of the footer. */\n    UI[\"Footer\"] = \"footer\";\n    /** The month grid. */\n    UI[\"MonthGrid\"] = \"month_grid\";\n    /** Contains the dropdown navigation or the caption label. */\n    UI[\"MonthCaption\"] = \"month_caption\";\n    /** The dropdown with the months. */\n    UI[\"MonthsDropdown\"] = \"months_dropdown\";\n    /** Wrapper of the month grid. */\n    UI[\"Month\"] = \"month\";\n    /** The container of the displayed months. */\n    UI[\"Months\"] = \"months\";\n    /** The navigation bar with the previous and next buttons. */\n    UI[\"Nav\"] = \"nav\";\n    /**\n     * The next month button in the navigation. *\n     *\n     * @since 9.1.0\n     */\n    UI[\"NextMonthButton\"] = \"button_next\";\n    /**\n     * The previous month button in the navigation.\n     *\n     * @since 9.1.0\n     */\n    UI[\"PreviousMonthButton\"] = \"button_previous\";\n    /** The row containing the week. */\n    UI[\"Week\"] = \"week\";\n    /** The group of row weeks in a month (`tbody`). */\n    UI[\"Weeks\"] = \"weeks\";\n    /** The column header with the weekday. */\n    UI[\"Weekday\"] = \"weekday\";\n    /** The row grouping the weekdays in the column headers. */\n    UI[\"Weekdays\"] = \"weekdays\";\n    /** The cell containing the week number. */\n    UI[\"WeekNumber\"] = \"week_number\";\n    /** The cell header of the week numbers column. */\n    UI[\"WeekNumberHeader\"] = \"week_number_header\";\n    /** The dropdown with the years. */\n    UI[\"YearsDropdown\"] = \"years_dropdown\";\n})(UI || (UI = {}));\n/** Enum representing flags for the {@link UI.Day} element. */\nexport var DayFlag;\n(function (DayFlag) {\n    /** The day is disabled. */\n    DayFlag[\"disabled\"] = \"disabled\";\n    /** The day is hidden. */\n    DayFlag[\"hidden\"] = \"hidden\";\n    /** The day is outside the current month. */\n    DayFlag[\"outside\"] = \"outside\";\n    /** The day is focused. */\n    DayFlag[\"focused\"] = \"focused\";\n    /** The day is today. */\n    DayFlag[\"today\"] = \"today\";\n})(DayFlag || (DayFlag = {}));\n/**\n * Enum representing selection states that can be applied to the {@link UI.Day}\n * element in selection mode.\n */\nexport var SelectionState;\n(function (SelectionState) {\n    /** The day is at the end of a selected range. */\n    SelectionState[\"range_end\"] = \"range_end\";\n    /** The day is at the middle of a selected range. */\n    SelectionState[\"range_middle\"] = \"range_middle\";\n    /** The day is at the start of a selected range. */\n    SelectionState[\"range_start\"] = \"range_start\";\n    /** The day is selected. */\n    SelectionState[\"selected\"] = \"selected\";\n})(SelectionState || (SelectionState = {}));\n/**\n * Enum representing different animation states for transitioning between\n * months.\n */\nexport var Animation;\n(function (Animation) {\n    /** The entering weeks when they appear before the exiting month. */\n    Animation[\"weeks_before_enter\"] = \"weeks_before_enter\";\n    /** The exiting weeks when they disappear before the entering month. */\n    Animation[\"weeks_before_exit\"] = \"weeks_before_exit\";\n    /** The entering weeks when they appear after the exiting month. */\n    Animation[\"weeks_after_enter\"] = \"weeks_after_enter\";\n    /** The exiting weeks when they disappear after the entering month. */\n    Animation[\"weeks_after_exit\"] = \"weeks_after_exit\";\n    /** The entering caption when it appears after the exiting month. */\n    Animation[\"caption_after_enter\"] = \"caption_after_enter\";\n    /** The exiting caption when it disappears after the entering month. */\n    Animation[\"caption_after_exit\"] = \"caption_after_exit\";\n    /** The entering caption when it appears before the exiting month. */\n    Animation[\"caption_before_enter\"] = \"caption_before_enter\";\n    /** The exiting caption when it disappears before the entering month. */\n    Animation[\"caption_before_exit\"] = \"caption_before_exit\";\n})(Animation || (Animation = {}));\n","import React from \"react\";\nimport { UI } from \"../UI.js\";\n/**\n * Render a dropdown component for navigation in the calendar.\n *\n * @group Components\n * @see https://daypicker.dev/guides/custom-components\n */\nexport function Dropdown(props) {\n    const { options, className, components, classNames, ...selectProps } = props;\n    const cssClassSelect = [classNames[UI.Dropdown], className].join(\" \");\n    const selectedOption = options?.find(({ value }) => value === selectProps.value);\n    return (React.createElement(\"span\", { \"data-disabled\": selectProps.disabled, className: classNames[UI.DropdownRoot] },\n        React.createElement(components.Select, { className: cssClassSelect, ...selectProps }, options?.map(({ value, label, disabled }) => (React.createElement(components.Option, { key: value, value: value, disabled: disabled }, label)))),\n        React.createElement(\"span\", { className: classNames[UI.CaptionLabel], \"aria-hidden\": true },\n            selectedOption?.label,\n            React.createElement(components.Chevron, { orientation: \"down\", size: 18, className: classNames[UI.Chevron] }))));\n}\n","import React from \"react\";\n/**\n * Render the navigation dropdowns for the calendar.\n *\n * @group Components\n * @see https://daypicker.dev/guides/custom-components\n */\nexport function DropdownNav(props) {\n    return React.createElement(\"div\", { ...props });\n}\n","import React from \"react\";\n/**\n * Render the footer of the calendar.\n *\n * @group Components\n * @see https://daypicker.dev/guides/custom-components\n */\nexport function Footer(props) {\n    return React.createElement(\"div\", { ...props });\n}\n","import React from \"react\";\n/**\n * Render the grid with the weekday header row and the weeks for a specific\n * month.\n *\n * @group Components\n * @see https://daypicker.dev/guides/custom-components\n */\nexport function Month(props) {\n    const { calendarMonth, displayIndex, ...divProps } = props;\n    return React.createElement(\"div\", { ...divProps }, props.children);\n}\n","import React from \"react\";\n/**\n * Render the caption for a month in the calendar.\n *\n * @group Components\n * @see https://daypicker.dev/guides/custom-components\n */\nexport function MonthCaption(props) {\n    const { calendarMonth, displayIndex, ...divProps } = props;\n    return React.createElement(\"div\", { ...divProps });\n}\n","import React from \"react\";\n/**\n * Render the grid of days for a specific month.\n *\n * @group Components\n * @see https://daypicker.dev/guides/custom-components\n */\nexport function MonthGrid(props) {\n    return React.createElement(\"table\", { ...props });\n}\n","import React from \"react\";\n/**\n * Render a container wrapping the month grids.\n *\n * @group Components\n * @see https://daypicker.dev/guides/custom-components\n */\nexport function Months(props) {\n    return React.createElement(\"div\", { ...props });\n}\n","import { createContext, useContext } from \"react\";\n/** @ignore */\nexport const dayPickerContext = createContext(undefined);\n/**\n * Provides access to the DayPicker context, which includes properties and\n * methods to interact with the DayPicker component. This hook must be used\n * within a custom component.\n *\n * @template T - Use this type to refine the returned context type with a\n *   specific selection mode.\n * @returns The context to work with DayPicker.\n * @throws {Error} If the hook is used outside of a DayPicker provider.\n * @group Hooks\n * @see https://daypicker.dev/guides/custom-components\n */\nexport function useDayPicker() {\n    const context = useContext(dayPickerContext);\n    if (context === undefined) {\n        throw new Error(\"useDayPicker() must be used within a custom component.\");\n    }\n    return context;\n}\n","import React from \"react\";\nimport { useDayPicker } from \"../useDayPicker.js\";\n/**\n * Render a dropdown to navigate between months in the calendar.\n *\n * @group Components\n * @see https://daypicker.dev/guides/custom-components\n */\nexport function MonthsDropdown(props) {\n    const { components } = useDayPicker();\n    return React.createElement(components.Dropdown, { ...props });\n}\n","import React, { useCallback, } from \"react\";\nimport { UI } from \"../UI.js\";\nimport { useDayPicker } from \"../useDayPicker.js\";\n/**\n * Render the navigation toolbar with buttons to navigate between months.\n *\n * @group Components\n * @see https://daypicker.dev/guides/custom-components\n */\nexport function Nav(props) {\n    const { onPreviousClick, onNextClick, previousMonth, nextMonth, ...navProps } = props;\n    const { components, classNames, labels: { labelPrevious, labelNext }, } = useDayPicker();\n    const handleNextClick = useCallback((e) => {\n        if (nextMonth) {\n            onNextClick?.(e);\n        }\n    }, [nextMonth, onNextClick]);\n    const handlePreviousClick = useCallback((e) => {\n        if (previousMonth) {\n            onPreviousClick?.(e);\n        }\n    }, [previousMonth, onPreviousClick]);\n    return (React.createElement(\"nav\", { ...navProps },\n        React.createElement(components.PreviousMonthButton, { type: \"button\", className: classNames[UI.PreviousMonthButton], tabIndex: previousMonth ? undefined : -1, \"aria-disabled\": previousMonth ? undefined : true, \"aria-label\": labelPrevious(previousMonth), onClick: handlePreviousClick },\n            React.createElement(components.Chevron, { disabled: previousMonth ? undefined : true, className: classNames[UI.Chevron], orientation: \"left\" })),\n        React.createElement(components.NextMonthButton, { type: \"button\", className: classNames[UI.NextMonthButton], tabIndex: nextMonth ? undefined : -1, \"aria-disabled\": nextMonth ? undefined : true, \"aria-label\": labelNext(nextMonth), onClick: handleNextClick },\n            React.createElement(components.Chevron, { disabled: nextMonth ? undefined : true, orientation: \"right\", className: classNames[UI.Chevron] }))));\n}\n","import React from \"react\";\nimport { useDayPicker } from \"../useDayPicker.js\";\n/**\n * Render the button to navigate to the next month in the calendar.\n *\n * @group Components\n * @see https://daypicker.dev/guides/custom-components\n */\nexport function NextMonthButton(props) {\n    const { components } = useDayPicker();\n    return React.createElement(components.Button, { ...props });\n}\n","import React from \"react\";\n/**\n * Render an `option` element.\n *\n * @group Components\n * @see https://daypicker.dev/guides/custom-components\n */\nexport function Option(props) {\n    return React.createElement(\"option\", { ...props });\n}\n","import React from \"react\";\nimport { useDayPicker } from \"../useDayPicker.js\";\n/**\n * Render the button to navigate to the previous month in the calendar.\n *\n * @group Components\n * @see https://daypicker.dev/guides/custom-components\n */\nexport function PreviousMonthButton(props) {\n    const { components } = useDayPicker();\n    return React.createElement(components.Button, { ...props });\n}\n","import React from \"react\";\n/**\n * Render the root element of the calendar.\n *\n * @group Components\n * @see https://daypicker.dev/guides/custom-components\n */\nexport function Root(props) {\n    const { rootRef, ...rest } = props;\n    return React.createElement(\"div\", { ...rest, ref: rootRef });\n}\n","import React from \"react\";\n/**\n * Render a `select` element.\n *\n * @group Components\n * @see https://daypicker.dev/guides/custom-components\n */\nexport function Select(props) {\n    return React.createElement(\"select\", { ...props });\n}\n","import React from \"react\";\n/**\n * Render a table row representing a week in the calendar.\n *\n * @group Components\n * @see https://daypicker.dev/guides/custom-components\n */\nexport function Week(props) {\n    const { week, ...trProps } = props;\n    return React.createElement(\"tr\", { ...trProps });\n}\n","import React from \"react\";\n/**\n * Render a table header cell with the name of a weekday (e.g., \"Mo\", \"Tu\").\n *\n * @group Components\n * @see https://daypicker.dev/guides/custom-components\n */\nexport function Weekday(props) {\n    return React.createElement(\"th\", { ...props });\n}\n","import React from \"react\";\n/**\n * Render the table row containing the weekday names.\n *\n * @group Components\n * @see https://daypicker.dev/guides/custom-components\n */\nexport function Weekdays(props) {\n    return (React.createElement(\"thead\", { \"aria-hidden\": true },\n        React.createElement(\"tr\", { ...props })));\n}\n","import React from \"react\";\n/**\n * Render a table cell displaying the number of the week.\n *\n * @group Components\n * @see https://daypicker.dev/guides/custom-components\n */\nexport function WeekNumber(props) {\n    const { week, ...thProps } = props;\n    return React.createElement(\"th\", { ...thProps });\n}\n","import React from \"react\";\n/**\n * Render the header cell for the week numbers column.\n *\n * @group Components\n * @see https://daypicker.dev/guides/custom-components\n */\nexport function WeekNumberHeader(props) {\n    return React.createElement(\"th\", { ...props });\n}\n","import React from \"react\";\n/**\n * Render the container for the weeks in the month grid.\n *\n * @group Components\n * @see https://daypicker.dev/guides/custom-components\n */\nexport function Weeks(props) {\n    return React.createElement(\"tbody\", { ...props });\n}\n","import React from \"react\";\nimport { useDayPicker } from \"../useDayPicker.js\";\n/**\n * Render a dropdown to navigate between years in the calendar.\n *\n * @group Components\n * @see https://daypicker.dev/guides/custom-components\n */\nexport function YearsDropdown(props) {\n    const { components } = useDayPicker();\n    return React.createElement(components.Dropdown, { ...props });\n}\n","import { defaultDateLib } from \"../classes/index.js\";\n/**\n * Checks if a given date is within a specified date range.\n *\n * @since 9.0.0\n * @param range - The date range to check against.\n * @param date - The date to check.\n * @param excludeEnds - If `true`, the range's start and end dates are excluded.\n * @param dateLib - The date utility library instance.\n * @returns `true` if the date is within the range, otherwise `false`.\n * @group Utilities\n */\nexport function rangeIncludesDate(range, date, excludeEnds = false, dateLib = defaultDateLib) {\n    let { from, to } = range;\n    const { differenceInCalendarDays, isSameDay } = dateLib;\n    if (from && to) {\n        const isRangeInverted = differenceInCalendarDays(to, from) < 0;\n        if (isRangeInverted) {\n            [from, to] = [to, from];\n        }\n        const isInRange = differenceInCalendarDays(date, from) >= (excludeEnds ? 1 : 0) &&\n            differenceInCalendarDays(to, date) >= (excludeEnds ? 1 : 0);\n        return isInRange;\n    }\n    if (!excludeEnds && to) {\n        return isSameDay(to, date);\n    }\n    if (!excludeEnds && from) {\n        return isSameDay(from, date);\n    }\n    return false;\n}\n/**\n * @private\n * @deprecated Use {@link rangeIncludesDate} instead.\n */\nexport const isDateInRange = (range, date) => rangeIncludesDate(range, date, false, defaultDateLib);\n","/**\n * Checks if the given value is of type {@link DateInterval}.\n *\n * @param matcher - The value to check.\n * @returns `true` if the value is a {@link DateInterval}, otherwise `false`.\n * @group Utilities\n */\nexport function isDateInterval(matcher) {\n    return Boolean(matcher &&\n        typeof matcher === \"object\" &&\n        \"before\" in matcher &&\n        \"after\" in matcher);\n}\n/**\n * Checks if the given value is of type {@link DateRange}.\n *\n * @param value - The value to check.\n * @returns `true` if the value is a {@link DateRange}, otherwise `false`.\n * @group Utilities\n */\nexport function isDateRange(value) {\n    return Boolean(value && typeof value === \"object\" && \"from\" in value);\n}\n/**\n * Checks if the given value is of type {@link DateAfter}.\n *\n * @param value - The value to check.\n * @returns `true` if the value is a {@link DateAfter}, otherwise `false`.\n * @group Utilities\n */\nexport function isDateAfterType(value) {\n    return Boolean(value && typeof value === \"object\" && \"after\" in value);\n}\n/**\n * Checks if the given value is of type {@link DateBefore}.\n *\n * @param value - The value to check.\n * @returns `true` if the value is a {@link DateBefore}, otherwise `false`.\n * @group Utilities\n */\nexport function isDateBeforeType(value) {\n    return Boolean(value && typeof value === \"object\" && \"before\" in value);\n}\n/**\n * Checks if the given value is of type {@link DayOfWeek}.\n *\n * @param value - The value to check.\n * @returns `true` if the value is a {@link DayOfWeek}, otherwise `false`.\n * @group Utilities\n */\nexport function isDayOfWeekType(value) {\n    return Boolean(value && typeof value === \"object\" && \"dayOfWeek\" in value);\n}\n/**\n * Checks if the given value is an array of valid dates.\n *\n * @private\n * @param value - The value to check.\n * @param dateLib - The date utility library instance.\n * @returns `true` if the value is an array of valid dates, otherwise `false`.\n */\nexport function isDatesArray(value, dateLib) {\n    return Array.isArray(value) && value.every(dateLib.isDate);\n}\n","import { defaultDateLib } from \"../classes/DateLib.js\";\nimport { rangeIncludesDate } from \"./rangeIncludesDate.js\";\nimport { isDateAfterType, isDateBeforeType, isDateInterval, isDateRange, isDatesArray, isDayOfWeekType, } from \"./typeguards.js\";\n/**\n * Checks if a given date matches at least one of the specified {@link Matcher}.\n *\n * @param date - The date to check.\n * @param matchers - The matchers to check against.\n * @param dateLib - The date utility library instance.\n * @returns `true` if the date matches any of the matchers, otherwise `false`.\n * @group Utilities\n */\nexport function dateMatchModifiers(date, matchers, dateLib = defaultDateLib) {\n    const matchersArr = !Array.isArray(matchers) ? [matchers] : matchers;\n    const { isSameDay, differenceInCalendarDays, isAfter } = dateLib;\n    return matchersArr.some((matcher) => {\n        if (typeof matcher === \"boolean\") {\n            return matcher;\n        }\n        if (dateLib.isDate(matcher)) {\n            return isSameDay(date, matcher);\n        }\n        if (isDatesArray(matcher, dateLib)) {\n            return matcher.some((matcherDate) => isSameDay(date, matcherDate));\n        }\n        if (isDateRange(matcher)) {\n            return rangeIncludesDate(matcher, date, false, dateLib);\n        }\n        if (isDayOfWeekType(matcher)) {\n            if (!Array.isArray(matcher.dayOfWeek)) {\n                return matcher.dayOfWeek === date.getDay();\n            }\n            return matcher.dayOfWeek.includes(date.getDay());\n        }\n        if (isDateInterval(matcher)) {\n            const diffBefore = differenceInCalendarDays(matcher.before, date);\n            const diffAfter = differenceInCalendarDays(matcher.after, date);\n            const isDayBefore = diffBefore > 0;\n            const isDayAfter = diffAfter < 0;\n            const isClosedInterval = isAfter(matcher.before, matcher.after);\n            if (isClosedInterval) {\n                return isDayAfter && isDayBefore;\n            }\n            else {\n                return isDayBefore || isDayAfter;\n            }\n        }\n        if (isDateAfterType(matcher)) {\n            return differenceInCalendarDays(date, matcher.after) > 0;\n        }\n        if (isDateBeforeType(matcher)) {\n            return differenceInCalendarDays(matcher.before, date) > 0;\n        }\n        if (typeof matcher === \"function\") {\n            return matcher(date);\n        }\n        return false;\n    });\n}\n/**\n * @private\n * @deprecated Use {@link dateMatchModifiers} instead.\n */\nexport const isMatch = dateMatchModifiers;\n","import { DayFlag } from \"../UI.js\";\nimport { dateMatchModifiers } from \"../utils/dateMatchModifiers.js\";\n/**\n * Creates a function to retrieve the modifiers for a given day.\n *\n * This function calculates both internal and custom modifiers for each day\n * based on the provided calendar days and DayPicker props.\n *\n * @private\n * @param days The array of `CalendarDay` objects to process.\n * @param props The DayPicker props, including modifiers and configuration\n *   options.\n * @param dateLib The date library to use for date manipulation.\n * @returns A function that retrieves the modifiers for a given `CalendarDay`.\n */\nexport function createGetModifiers(days, props, navStart, navEnd, dateLib) {\n    const { disabled, hidden, modifiers, showOutsideDays, broadcastCalendar, today = dateLib.today(), } = props;\n    const { isSameDay, isSameMonth, startOfMonth, isBefore, endOfMonth, isAfter, } = dateLib;\n    const computedNavStart = navStart && startOfMonth(navStart);\n    const computedNavEnd = navEnd && endOfMonth(navEnd);\n    const internalModifiersMap = {\n        [DayFlag.focused]: [],\n        [DayFlag.outside]: [],\n        [DayFlag.disabled]: [],\n        [DayFlag.hidden]: [],\n        [DayFlag.today]: [],\n    };\n    const customModifiersMap = {};\n    for (const day of days) {\n        const { date, displayMonth } = day;\n        const isOutside = Boolean(displayMonth && !isSameMonth(date, displayMonth));\n        const isBeforeNavStart = Boolean(computedNavStart && isBefore(date, computedNavStart));\n        const isAfterNavEnd = Boolean(computedNavEnd && isAfter(date, computedNavEnd));\n        const isDisabled = Boolean(disabled && dateMatchModifiers(date, disabled, dateLib));\n        const isHidden = Boolean(hidden && dateMatchModifiers(date, hidden, dateLib)) ||\n            isBeforeNavStart ||\n            isAfterNavEnd ||\n            // Broadcast calendar will show outside days as default\n            (!broadcastCalendar && !showOutsideDays && isOutside) ||\n            (broadcastCalendar && showOutsideDays === false && isOutside);\n        const isToday = isSameDay(date, today);\n        if (isOutside)\n            internalModifiersMap.outside.push(day);\n        if (isDisabled)\n            internalModifiersMap.disabled.push(day);\n        if (isHidden)\n            internalModifiersMap.hidden.push(day);\n        if (isToday)\n            internalModifiersMap.today.push(day);\n        // Add custom modifiers\n        if (modifiers) {\n            Object.keys(modifiers).forEach((name) => {\n                const modifierValue = modifiers?.[name];\n                const isMatch = modifierValue\n                    ? dateMatchModifiers(date, modifierValue, dateLib)\n                    : false;\n                if (!isMatch)\n                    return;\n                if (customModifiersMap[name]) {\n                    customModifiersMap[name].push(day);\n                }\n                else {\n                    customModifiersMap[name] = [day];\n                }\n            });\n        }\n    }\n    return (day) => {\n        // Initialize all the modifiers to false\n        const dayFlags = {\n            [DayFlag.focused]: false,\n            [DayFlag.disabled]: false,\n            [DayFlag.hidden]: false,\n            [DayFlag.outside]: false,\n            [DayFlag.today]: false,\n        };\n        const customModifiers = {};\n        // Find the modifiers for the given day\n        for (const name in internalModifiersMap) {\n            const days = internalModifiersMap[name];\n            dayFlags[name] = days.some((d) => d === day);\n        }\n        for (const name in customModifiersMap) {\n            customModifiers[name] = customModifiersMap[name].some((d) => d === day);\n        }\n        return {\n            ...dayFlags,\n            // custom modifiers should override all the previous ones\n            ...customModifiers,\n        };\n    };\n}\n","import { DayFlag, SelectionState, UI } from \"../UI.js\";\n/**\n * Returns the class names for a day based on its modifiers.\n *\n * This function combines the base class name for the day with any class names\n * associated with active modifiers.\n *\n * @param modifiers The modifiers applied to the day.\n * @param classNames The base class names for the calendar elements.\n * @param modifiersClassNames The class names associated with specific\n *   modifiers.\n * @returns An array of class names for the day.\n */\nexport function getClassNamesForModifiers(modifiers, classNames, modifiersClassNames = {}) {\n    const modifierClassNames = Object.entries(modifiers)\n        .filter(([, active]) => active === true)\n        .reduce((previousValue, [key]) => {\n        if (modifiersClassNames[key]) {\n            previousValue.push(modifiersClassNames[key]);\n        }\n        else if (classNames[DayFlag[key]]) {\n            previousValue.push(classNames[DayFlag[key]]);\n        }\n        else if (classNames[SelectionState[key]]) {\n            previousValue.push(classNames[SelectionState[key]]);\n        }\n        return previousValue;\n    }, [classNames[UI.Day]]);\n    return modifierClassNames;\n}\n","import * as components from \"../components/custom-components.js\";\n/**\n * Merges custom components from the props with the default components.\n *\n * This function ensures that any custom components provided in the props\n * override the default components.\n *\n * @param customComponents The custom components provided in the DayPicker\n *   props.\n * @returns An object containing the merged components.\n */\nexport function getComponents(customComponents) {\n    return {\n        ...components,\n        ...customComponents,\n    };\n}\n","/**\n * Extracts `data-` attributes from the DayPicker props.\n *\n * This function collects all `data-` attributes from the props and adds\n * additional attributes based on the DayPicker configuration.\n *\n * @param props The DayPicker props.\n * @returns An object containing the `data-` attributes.\n */\nexport function getDataAttributes(props) {\n    const dataAttributes = {\n        \"data-mode\": props.mode ?? undefined,\n        \"data-required\": \"required\" in props ? props.required : undefined,\n        \"data-multiple-months\": (props.numberOfMonths && props.numberOfMonths > 1) || undefined,\n        \"data-week-numbers\": props.showWeekNumber || undefined,\n        \"data-broadcast-calendar\": props.broadcastCalendar || undefined,\n        \"data-nav-layout\": props.navLayout || undefined,\n    };\n    Object.entries(props).forEach(([key, val]) => {\n        if (key.startsWith(\"data-\")) {\n            dataAttributes[key] = val;\n        }\n    });\n    return dataAttributes;\n}\n","import { Animation, DayFlag, SelectionState, UI } from \"../UI.js\";\n/**\n * Returns the default class names for the UI elements.\n *\n * This function generates a mapping of default class names for various UI\n * elements, day flags, selection states, and animations.\n *\n * @returns An object containing the default class names.\n * @group Utilities\n */\nexport function getDefaultClassNames() {\n    const classNames = {};\n    for (const key in UI) {\n        classNames[UI[key]] =\n            `rdp-${UI[key]}`;\n    }\n    for (const key in DayFlag) {\n        classNames[DayFlag[key]] =\n            `rdp-${DayFlag[key]}`;\n    }\n    for (const key in SelectionState) {\n        classNames[SelectionState[key]] =\n            `rdp-${SelectionState[key]}`;\n    }\n    for (const key in Animation) {\n        classNames[Animation[key]] =\n            `rdp-${Animation[key]}`;\n    }\n    return classNames;\n}\n","import { DateLib } from \"../classes/DateLib.js\";\n/**\n * Formats the caption of the month.\n *\n * @defaultValue Locale-specific month/year order (e.g., \"November 2022\").\n * @param month The date representing the month.\n * @param options Configuration options for the date library.\n * @param dateLib The date library to use for formatting. If not provided, a new\n *   instance is created.\n * @returns The formatted caption as a string.\n * @group Formatters\n * @see https://daypicker.dev/docs/translation#custom-formatters\n */\nexport function formatCaption(month, options, dateLib) {\n    const lib = dateLib ?? new DateLib(options);\n    return lib.formatMonthYear(month);\n}\n/**\n * @private\n * @deprecated Use {@link formatCaption} instead.\n * @group Formatters\n */\nexport const formatMonthCaption = formatCaption;\n","import { DateLib } from \"../classes/DateLib.js\";\n/**\n * Formats the day date shown in the day cell.\n *\n * @defaultValue `d` (e.g., \"1\").\n * @param date The date to format.\n * @param options Configuration options for the date library.\n * @param dateLib The date library to use for formatting. If not provided, a new\n *   instance is created.\n * @returns The formatted day as a string.\n * @group Formatters\n * @see https://daypicker.dev/docs/translation#custom-formatters\n */\nexport function formatDay(date, options, dateLib) {\n    return (dateLib ?? new DateLib(options)).format(date, \"d\");\n}\n","import { defaultDateLib } from \"../classes/DateLib.js\";\n/**\n * Formats the month for the dropdown option label.\n *\n * @defaultValue The localized full month name.\n * @param month The date representing the month.\n * @param dateLib The date library to use for formatting. Defaults to\n *   `defaultDateLib`.\n * @returns The formatted month name as a string.\n * @group Formatters\n * @see https://daypicker.dev/docs/translation#custom-formatters\n */\nexport function formatMonthDropdown(month, dateLib = defaultDateLib) {\n    return dateLib.format(month, \"LLLL\");\n}\n","import { DateLib } from \"../classes/DateLib.js\";\n/**\n * Formats the name of a weekday to be displayed in the weekdays header.\n *\n * @defaultValue `cccccc` (e.g., \"Mo\" for Monday).\n * @param weekday The date representing the weekday.\n * @param options Configuration options for the date library.\n * @param dateLib The date library to use for formatting. If not provided, a new\n *   instance is created.\n * @returns The formatted weekday name as a string.\n * @group Formatters\n * @see https://daypicker.dev/docs/translation#custom-formatters\n */\nexport function formatWeekdayName(weekday, options, dateLib) {\n    return (dateLib ?? new DateLib(options)).format(weekday, \"cccccc\");\n}\n","import { defaultDateLib } from \"../classes/DateLib.js\";\n/**\n * Formats the week number.\n *\n * @defaultValue The week number as a string, with a leading zero for single-digit numbers.\n * @param weekNumber The week number to format.\n * @param dateLib The date library to use for formatting. Defaults to\n *   `defaultDateLib`.\n * @returns The formatted week number as a string.\n * @group Formatters\n * @see https://daypicker.dev/docs/translation#custom-formatters\n */\nexport function formatWeekNumber(weekNumber, dateLib = defaultDateLib) {\n    if (weekNumber < 10) {\n        return dateLib.formatNumber(`0${weekNumber.toLocaleString()}`);\n    }\n    return dateLib.formatNumber(`${weekNumber.toLocaleString()}`);\n}\n","/**\n * Formats the header for the week number column.\n *\n * @defaultValue An empty string `\"\"`.\n * @returns The formatted week number header as a string.\n * @group Formatters\n * @see https://daypicker.dev/docs/translation#custom-formatters\n */\nexport function formatWeekNumberHeader() {\n    return ``;\n}\n","import { defaultDateLib } from \"../classes/DateLib.js\";\n/**\n * Formats the year for the dropdown option label.\n *\n * @param year The year to format.\n * @param dateLib The date library to use for formatting. Defaults to\n *   `defaultDateLib`.\n * @returns The formatted year as a string.\n * @group Formatters\n * @see https://daypicker.dev/docs/translation#custom-formatters\n */\nexport function formatYearDropdown(year, dateLib = defaultDateLib) {\n    return dateLib.format(year, \"yyyy\");\n}\n/**\n * @private\n * @deprecated Use `formatYearDropdown` instead.\n * @group Formatters\n */\nexport const formatYearCaption = formatYearDropdown;\n","import * as defaultFormatters from \"../formatters/index.js\";\n/**\n * Merges custom formatters from the props with the default formatters.\n *\n * @param customFormatters The custom formatters provided in the DayPicker\n *   props.\n * @returns The merged formatters object.\n */\nexport function getFormatters(customFormatters) {\n    if (customFormatters?.formatMonthCaption && !customFormatters.formatCaption) {\n        customFormatters.formatCaption = customFormatters.formatMonthCaption;\n    }\n    if (customFormatters?.formatYearCaption &&\n        !customFormatters.formatYearDropdown) {\n        customFormatters.formatYearDropdown = customFormatters.formatYearCaption;\n    }\n    return {\n        ...defaultFormatters,\n        ...customFormatters,\n    };\n}\n","import { DateLib } from \"../classes/DateLib.js\";\n/**\n * Generates the ARIA label for a day button.\n *\n * Use the `modifiers` argument to provide additional context for the label,\n * such as indicating if the day is \"today\" or \"selected.\"\n *\n * @defaultValue The formatted date.\n * @param date - The date to format.\n * @param modifiers - The modifiers providing context for the day.\n * @param options - Optional configuration for the date formatting library.\n * @param dateLib - An optional instance of the date formatting library.\n * @returns The ARIA label for the day button.\n * @group Labels\n * @see https://daypicker.dev/docs/translation#aria-labels\n */\nexport function labelDayButton(date, modifiers, options, dateLib) {\n    let label = (dateLib ?? new DateLib(options)).format(date, \"PPPP\");\n    if (modifiers.today)\n        label = `Today, ${label}`;\n    if (modifiers.selected)\n        label = `${label}, selected`;\n    return label;\n}\n/**\n * @ignore\n * @deprecated Use `labelDayButton` instead.\n */\nexport const labelDay = labelDayButton;\n","import { DateLib } from \"../classes/DateLib.js\";\n/**\n * Generates the ARIA label for the month grid, which is announced when entering\n * the grid.\n *\n * @defaultValue Locale-specific month/year order (e.g., \"November 2022\").\n * @param date - The date representing the month.\n * @param options - Optional configuration for the date formatting library.\n * @param dateLib - An optional instance of the date formatting library.\n * @returns The ARIA label for the month grid.\n * @group Labels\n * @see https://daypicker.dev/docs/translation#aria-labels\n */\nexport function labelGrid(date, options, dateLib) {\n    const lib = dateLib ?? new DateLib(options);\n    return lib.formatMonthYear(date);\n}\n/**\n * @ignore\n * @deprecated Use {@link labelGrid} instead.\n */\nexport const labelCaption = labelGrid;\n","import { DateLib } from \"../classes/DateLib.js\";\n/**\n * Generates the label for a day grid cell when the calendar is not interactive.\n *\n * @param date - The date to format.\n * @param modifiers - Optional modifiers providing context for the day.\n * @param options - Optional configuration for the date formatting library.\n * @param dateLib - An optional instance of the date formatting library.\n * @returns The label for the day grid cell.\n * @group Labels\n * @see https://daypicker.dev/docs/translation#aria-labels\n */\nexport function labelGridcell(date, modifiers, options, dateLib) {\n    let label = (dateLib ?? new DateLib(options)).format(date, \"PPPP\");\n    if (modifiers?.today) {\n        label = `Today, ${label}`;\n    }\n    return label;\n}\n","/**\n * Generates the ARIA label for the months dropdown.\n *\n * @defaultValue `\"Choose the Month\"`\n * @param options - Optional configuration for the date formatting library.\n * @returns The ARIA label for the months dropdown.\n * @group Labels\n * @see https://daypicker.dev/docs/translation#aria-labels\n */\nexport function labelMonthDropdown(_options) {\n    return \"Choose the Month\";\n}\n","/**\n * Generates the ARIA label for the navigation toolbar.\n *\n * @defaultValue `\"\"`\n * @returns The ARIA label for the navigation toolbar.\n * @group Labels\n * @see https://daypicker.dev/docs/translation#aria-labels\n */\nexport function labelNav() {\n    return \"\";\n}\n","const defaultLabel = \"Go to the Next Month\";\n/**\n * Generates the ARIA label for the \"next month\" button.\n *\n * @defaultValue `\"Go to the Next Month\"`\n * @param month - The date representing the next month, or `undefined` if there\n *   is no next month.\n * @returns The ARIA label for the \"next month\" button.\n * @group Labels\n * @see https://daypicker.dev/docs/translation#aria-labels\n */\nexport function labelNext(_month, _options) {\n    return defaultLabel;\n}\n","/**\n * Generates the ARIA label for the \"previous month\" button.\n *\n * @defaultValue `\"Go to the Previous Month\"`\n * @param month - The date representing the previous month, or `undefined` if\n *   there is no previous month.\n * @returns The ARIA label for the \"previous month\" button.\n * @group Labels\n * @see https://daypicker.dev/docs/translation#aria-labels\n */\nexport function labelPrevious(_month) {\n    return \"Go to the Previous Month\";\n}\n","import { DateLib } from \"../classes/DateLib.js\";\n/**\n * Generates the ARIA label for a weekday column header.\n *\n * @defaultValue `\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"`\n * @param date - The date representing the weekday.\n * @param options - Optional configuration for the date formatting library.\n * @param dateLib - An optional instance of the date formatting library.\n * @returns The ARIA label for the weekday column header.\n * @group Labels\n * @see https://daypicker.dev/docs/translation#aria-labels\n */\nexport function labelWeekday(date, options, dateLib) {\n    return (dateLib ?? new DateLib(options)).format(date, \"cccc\");\n}\n","/**\n * Generates the ARIA label for the week number cell (the first cell in a row).\n *\n * @defaultValue `Week ${weekNumber}`\n * @param weekNumber - The number of the week.\n * @param options - Optional configuration for the date formatting library.\n * @returns The ARIA label for the week number cell.\n * @group Labels\n * @see https://daypicker.dev/docs/translation#aria-labels\n */\nexport function labelWeekNumber(weekNumber, _options) {\n    return `Week ${weekNumber}`;\n}\n","/**\n * Generates the ARIA label for the week number header element.\n *\n * @defaultValue `\"Week Number\"`\n * @param options - Optional configuration for the date formatting library.\n * @returns The ARIA label for the week number header.\n * @group Labels\n * @see https://daypicker.dev/docs/translation#aria-labels\n */\nexport function labelWeekNumberHeader(_options) {\n    return \"Week Number\";\n}\n","/**\n * Generates the ARIA label for the years dropdown.\n *\n * @defaultValue `\"Choose the Year\"`\n * @param options - Optional configuration for the date formatting library.\n * @returns The ARIA label for the years dropdown.\n * @group Labels\n * @see https://daypicker.dev/docs/translation#aria-labels\n */\nexport function labelYearDropdown(_options) {\n    return \"Choose the Year\";\n}\n","import * as defaultLabels from \"../labels/index.js\";\nconst resolveLabel = (defaultLabel, customLabel, localeLabel) => {\n    if (customLabel)\n        return customLabel;\n    if (localeLabel) {\n        return (typeof localeLabel === \"function\"\n            ? localeLabel\n            : (..._args) => localeLabel);\n    }\n    return defaultLabel;\n};\n/**\n * Merges custom labels from the props with the default labels.\n *\n * When available, uses the locale-provided translation for `labelNext`.\n *\n * @param customLabels The custom labels provided in the DayPicker props.\n * @param options Options from the date library, used to resolve locale\n *   translations.\n * @returns The merged labels object with locale-aware defaults.\n */\nexport function getLabels(customLabels, options) {\n    const localeLabels = options.locale?.labels ?? {};\n    return {\n        ...defaultLabels,\n        ...(customLabels ?? {}),\n        labelDayButton: resolveLabel(defaultLabels.labelDayButton, customLabels?.labelDayButton, localeLabels.labelDayButton),\n        labelMonthDropdown: resolveLabel(defaultLabels.labelMonthDropdown, customLabels?.labelMonthDropdown, localeLabels.labelMonthDropdown),\n        labelNext: resolveLabel(defaultLabels.labelNext, customLabels?.labelNext, localeLabels.labelNext),\n        labelPrevious: resolveLabel(defaultLabels.labelPrevious, customLabels?.labelPrevious, localeLabels.labelPrevious),\n        labelWeekNumber: resolveLabel(defaultLabels.labelWeekNumber, customLabels?.labelWeekNumber, localeLabels.labelWeekNumber),\n        labelYearDropdown: resolveLabel(defaultLabels.labelYearDropdown, customLabels?.labelYearDropdown, localeLabels.labelYearDropdown),\n        labelGrid: resolveLabel(defaultLabels.labelGrid, customLabels?.labelGrid, localeLabels.labelGrid),\n        labelGridcell: resolveLabel(defaultLabels.labelGridcell, customLabels?.labelGridcell, localeLabels.labelGridcell),\n        labelNav: resolveLabel(defaultLabels.labelNav, customLabels?.labelNav, localeLabels.labelNav),\n        labelWeekNumberHeader: resolveLabel(defaultLabels.labelWeekNumberHeader, customLabels?.labelWeekNumberHeader, localeLabels.labelWeekNumberHeader),\n        labelWeekday: resolveLabel(defaultLabels.labelWeekday, customLabels?.labelWeekday, localeLabels.labelWeekday),\n    };\n}\n","/**\n * Returns the months to show in the dropdown.\n *\n * This function generates a list of months for the current year, formatted\n * using the provided formatter, and determines whether each month should be\n * disabled based on the navigation range.\n *\n * @param displayMonth The currently displayed month.\n * @param navStart The start date for navigation.\n * @param navEnd The end date for navigation.\n * @param formatters The formatters to use for formatting the month labels.\n * @param dateLib The date library to use for date manipulation.\n * @returns An array of dropdown options representing the months, or `undefined`\n *   if no months are available.\n */\nexport function getMonthOptions(displayMonth, navStart, navEnd, formatters, dateLib) {\n    const { startOfMonth, startOfYear, endOfYear, eachMonthOfInterval, getMonth, } = dateLib;\n    const months = eachMonthOfInterval({\n        start: startOfYear(displayMonth),\n        end: endOfYear(displayMonth),\n    });\n    const options = months.map((month) => {\n        const label = formatters.formatMonthDropdown(month, dateLib);\n        const value = getMonth(month);\n        const disabled = (navStart && month < startOfMonth(navStart)) ||\n            (navEnd && month > startOfMonth(navEnd)) ||\n            false;\n        return { value, label, disabled };\n    });\n    return options;\n}\n","import { UI } from \"../UI.js\";\n/**\n * Returns the computed style for a day based on its modifiers.\n *\n * This function merges the base styles for the day with any styles associated\n * with active modifiers.\n *\n * @param dayModifiers The modifiers applied to the day.\n * @param styles The base styles for the calendar elements.\n * @param modifiersStyles The styles associated with specific modifiers.\n * @returns The computed style for the day.\n */\nexport function getStyleForModifiers(dayModifiers, styles = {}, modifiersStyles = {}) {\n    let style = { ...styles?.[UI.Day] };\n    Object.entries(dayModifiers)\n        .filter(([, active]) => active === true)\n        .forEach(([modifier]) => {\n        style = {\n            ...style,\n            ...modifiersStyles?.[modifier],\n        };\n    });\n    return style;\n}\n","/**\n * Generates a series of 7 days, starting from the beginning of the week, to use\n * for formatting weekday names (e.g., Monday, Tuesday, etc.).\n *\n * @param dateLib The date library to use for date manipulation.\n * @param ISOWeek Whether to use ISO week numbering (weeks start on Monday).\n * @param broadcastCalendar Whether to use the broadcast calendar (weeks start\n *   on Monday, but may include adjustments for broadcast-specific rules).\n * @returns An array of 7 dates representing the weekdays.\n */\nexport function getWeekdays(dateLib, ISOWeek, broadcastCalendar, today) {\n    const referenceToday = today ?? dateLib.today();\n    const start = broadcastCalendar\n        ? dateLib.startOfBroadcastWeek(referenceToday, dateLib)\n        : ISOWeek\n            ? dateLib.startOfISOWeek(referenceToday)\n            : dateLib.startOfWeek(referenceToday);\n    const days = [];\n    for (let i = 0; i < 7; i++) {\n        const day = dateLib.addDays(start, i);\n        days.push(day);\n    }\n    return days;\n}\n","/**\n * Returns the years to display in the dropdown.\n *\n * This function generates a list of years between the navigation start and end\n * dates, formatted using the provided formatter.\n *\n * @param navStart The start date for navigation.\n * @param navEnd The end date for navigation.\n * @param formatters The formatters to use for formatting the year labels.\n * @param dateLib The date library to use for date manipulation.\n * @param reverse If true, reverses the order of the years (descending).\n * @returns An array of dropdown options representing the years, or `undefined`\n *   if `navStart` or `navEnd` is not provided.\n */\nexport function getYearOptions(navStart, navEnd, formatters, dateLib, reverse = false) {\n    if (!navStart)\n        return undefined;\n    if (!navEnd)\n        return undefined;\n    const { startOfYear, endOfYear, eachYearOfInterval, getYear } = dateLib;\n    const firstNavYear = startOfYear(navStart);\n    const lastNavYear = endOfYear(navEnd);\n    const years = eachYearOfInterval({ start: firstNavYear, end: lastNavYear });\n    if (reverse)\n        years.reverse();\n    return years.map((year) => {\n        const label = formatters.formatYearDropdown(year, dateLib);\n        return {\n            value: getYear(year),\n            label,\n            disabled: false,\n        };\n    });\n}\n","import { TZDate } from \"@date-fns/tz\";\nimport { differenceInCalendarDays as differenceInCalendarDaysFn, differenceInCalendarMonths as differenceInCalendarMonthsFn, getISOWeek as getISOWeekFn, getWeek as getWeekFn, } from \"date-fns\";\n/**\n * Creates `dateLib` overrides that keep all calendar math at noon in the target\n * time zone. This avoids second-level offset changes (e.g., historical zones\n * with +03:41:12) from pushing dates backward across midnight.\n */\nexport function createNoonOverrides(timeZone, options = {}) {\n    const { weekStartsOn, locale } = options;\n    const fallbackWeekStartsOn = (weekStartsOn ??\n        locale?.options?.weekStartsOn ??\n        0);\n    // Keep all internal math anchored at noon in the target zone to avoid\n    // historical second-level offsets from crossing midnight.\n    const toNoonTZDate = (date) => {\n        const normalizedDate = typeof date === \"number\" || typeof date === \"string\"\n            ? new Date(date)\n            : date;\n        return new TZDate(normalizedDate.getFullYear(), normalizedDate.getMonth(), normalizedDate.getDate(), 12, 0, 0, timeZone);\n    };\n    // Convert a value into a host `Date` that represents the same calendar day\n    // as the target-zone noon. This is useful for helpers (e.g., date-fns week\n    // utilities) that expect local `Date` instances rather than `TZDate`s.\n    const toCalendarDate = (date) => {\n        const zoned = toNoonTZDate(date);\n        return new Date(zoned.getFullYear(), zoned.getMonth(), zoned.getDate(), 0, 0, 0, 0);\n    };\n    return {\n        today: () => {\n            return toNoonTZDate(TZDate.tz(timeZone));\n        },\n        newDate: (year, monthIndex, date) => {\n            return new TZDate(year, monthIndex, date, 12, 0, 0, timeZone);\n        },\n        startOfDay: (date) => {\n            return toNoonTZDate(date);\n        },\n        startOfWeek: (date, options) => {\n            const base = toNoonTZDate(date);\n            const weekStartsOnValue = (options?.weekStartsOn ??\n                fallbackWeekStartsOn);\n            const diff = (base.getDay() - weekStartsOnValue + 7) % 7;\n            base.setDate(base.getDate() - diff);\n            return base;\n        },\n        startOfISOWeek: (date) => {\n            const base = toNoonTZDate(date);\n            const diff = (base.getDay() - 1 + 7) % 7;\n            base.setDate(base.getDate() - diff);\n            return base;\n        },\n        startOfMonth: (date) => {\n            const base = toNoonTZDate(date);\n            base.setDate(1);\n            return base;\n        },\n        startOfYear: (date) => {\n            const base = toNoonTZDate(date);\n            base.setMonth(0, 1);\n            return base;\n        },\n        endOfWeek: (date, options) => {\n            const base = toNoonTZDate(date);\n            const weekStartsOnValue = (options?.weekStartsOn ??\n                fallbackWeekStartsOn);\n            const endDow = (weekStartsOnValue + 6) % 7;\n            const diff = (endDow - base.getDay() + 7) % 7;\n            base.setDate(base.getDate() + diff);\n            return base;\n        },\n        endOfISOWeek: (date) => {\n            const base = toNoonTZDate(date);\n            const diff = (7 - base.getDay()) % 7;\n            base.setDate(base.getDate() + diff);\n            return base;\n        },\n        endOfMonth: (date) => {\n            const base = toNoonTZDate(date);\n            base.setMonth(base.getMonth() + 1, 0);\n            return base;\n        },\n        endOfYear: (date) => {\n            const base = toNoonTZDate(date);\n            base.setMonth(11, 31);\n            return base;\n        },\n        eachMonthOfInterval: (interval) => {\n            const start = toNoonTZDate(interval.start);\n            const end = toNoonTZDate(interval.end);\n            const result = [];\n            const cursor = new TZDate(start.getFullYear(), start.getMonth(), 1, 12, 0, 0, timeZone);\n            const endKey = end.getFullYear() * 12 + end.getMonth();\n            while (cursor.getFullYear() * 12 + cursor.getMonth() <= endKey) {\n                result.push(new TZDate(cursor, timeZone));\n                cursor.setMonth(cursor.getMonth() + 1, 1);\n            }\n            return result;\n        },\n        // Normalize to noon once before arithmetic (avoid DST/midnight edge cases),\n        // mutate the same TZDate, and return it.\n        addDays: (date, amount) => {\n            const base = toNoonTZDate(date);\n            base.setDate(base.getDate() + amount);\n            return base;\n        },\n        addWeeks: (date, amount) => {\n            const base = toNoonTZDate(date);\n            base.setDate(base.getDate() + amount * 7);\n            return base;\n        },\n        addMonths: (date, amount) => {\n            const base = toNoonTZDate(date);\n            base.setMonth(base.getMonth() + amount);\n            return base;\n        },\n        addYears: (date, amount) => {\n            const base = toNoonTZDate(date);\n            base.setFullYear(base.getFullYear() + amount);\n            return base;\n        },\n        eachYearOfInterval: (interval) => {\n            const start = toNoonTZDate(interval.start);\n            const end = toNoonTZDate(interval.end);\n            const years = [];\n            const cursor = new TZDate(start.getFullYear(), 0, 1, 12, 0, 0, timeZone);\n            while (cursor.getFullYear() <= end.getFullYear()) {\n                years.push(new TZDate(cursor, timeZone));\n                cursor.setFullYear(cursor.getFullYear() + 1, 0, 1);\n            }\n            return years;\n        },\n        getWeek: (date, options) => {\n            const base = toCalendarDate(date);\n            return getWeekFn(base, {\n                weekStartsOn: options?.weekStartsOn ?? fallbackWeekStartsOn,\n                firstWeekContainsDate: options?.firstWeekContainsDate ??\n                    locale?.options?.firstWeekContainsDate ??\n                    1,\n            });\n        },\n        getISOWeek: (date) => {\n            const base = toCalendarDate(date);\n            return getISOWeekFn(base);\n        },\n        differenceInCalendarDays: (dateLeft, dateRight) => {\n            const left = toCalendarDate(dateLeft);\n            const right = toCalendarDate(dateRight);\n            return differenceInCalendarDaysFn(left, right);\n        },\n        differenceInCalendarMonths: (dateLeft, dateRight) => {\n            const left = toCalendarDate(dateLeft);\n            const right = toCalendarDate(dateRight);\n            return differenceInCalendarMonthsFn(left, right);\n        },\n    };\n}\n","import { useLayoutEffect, useRef } from \"react\";\nimport { Animation } from \"./UI.js\";\nconst asHtmlElement = (element) => {\n    if (element instanceof HTMLElement)\n        return element;\n    return null;\n};\nconst queryMonthEls = (element) => [\n    ...(element.querySelectorAll(\"[data-animated-month]\") ?? []),\n];\nconst queryMonthEl = (element) => asHtmlElement(element.querySelector(\"[data-animated-month]\"));\nconst queryCaptionEl = (element) => asHtmlElement(element.querySelector(\"[data-animated-caption]\"));\nconst queryWeeksEl = (element) => asHtmlElement(element.querySelector(\"[data-animated-weeks]\"));\nconst queryNavEl = (element) => asHtmlElement(element.querySelector(\"[data-animated-nav]\"));\nconst queryWeekdaysEl = (element) => asHtmlElement(element.querySelector(\"[data-animated-weekdays]\"));\n/**\n * Handles animations for transitioning between months in the DayPicker\n * component.\n *\n * @private\n * @param rootElRef - A reference to the root element of the DayPicker\n *   component.\n * @param enabled - Whether animations are enabled.\n * @param options - Configuration options for the animation, including class\n *   names, months, focused day, and the date utility library.\n */\nexport function useAnimation(rootElRef, enabled, { classNames, months, focused, dateLib, }) {\n    const previousRootElSnapshotRef = useRef(null);\n    const previousMonthsRef = useRef(months);\n    const animatingRef = useRef(false);\n    useLayoutEffect(() => {\n        // get previous months before updating the previous months ref\n        const previousMonths = previousMonthsRef.current;\n        // update previous months ref for next effect trigger\n        previousMonthsRef.current = months;\n        if (!enabled ||\n            !rootElRef.current ||\n            // safety check because the ref can be set to anything by consumers\n            !(rootElRef.current instanceof HTMLElement) ||\n            // validation required for the animation to work as expected\n            months.length === 0 ||\n            previousMonths.length === 0 ||\n            months.length !== previousMonths.length) {\n            return;\n        }\n        const isSameMonth = dateLib.isSameMonth(months[0].date, previousMonths[0].date);\n        const isAfterPreviousMonth = dateLib.isAfter(months[0].date, previousMonths[0].date);\n        const captionAnimationClass = isAfterPreviousMonth\n            ? classNames[Animation.caption_after_enter]\n            : classNames[Animation.caption_before_enter];\n        const weeksAnimationClass = isAfterPreviousMonth\n            ? classNames[Animation.weeks_after_enter]\n            : classNames[Animation.weeks_before_enter];\n        // get previous root element snapshot before updating the snapshot ref\n        const previousRootElSnapshot = previousRootElSnapshotRef.current;\n        // update snapshot for next effect trigger\n        const rootElSnapshot = rootElRef.current.cloneNode(true);\n        if (rootElSnapshot instanceof HTMLElement) {\n            // if this effect is triggered while animating, we need to clean up the new root snapshot\n            // to put it in the same state as when not animating, to correctly animate the next month change\n            const currentMonthElsSnapshot = queryMonthEls(rootElSnapshot);\n            currentMonthElsSnapshot.forEach((currentMonthElSnapshot) => {\n                if (!(currentMonthElSnapshot instanceof HTMLElement))\n                    return;\n                // remove the old month snapshots from the new root snapshot\n                const previousMonthElSnapshot = queryMonthEl(currentMonthElSnapshot);\n                if (previousMonthElSnapshot &&\n                    currentMonthElSnapshot.contains(previousMonthElSnapshot)) {\n                    currentMonthElSnapshot.removeChild(previousMonthElSnapshot);\n                }\n                // remove animation classes from the new month snapshots\n                const captionEl = queryCaptionEl(currentMonthElSnapshot);\n                if (captionEl) {\n                    captionEl.classList.remove(captionAnimationClass);\n                }\n                const weeksEl = queryWeeksEl(currentMonthElSnapshot);\n                if (weeksEl) {\n                    weeksEl.classList.remove(weeksAnimationClass);\n                }\n            });\n            previousRootElSnapshotRef.current = rootElSnapshot;\n        }\n        else {\n            previousRootElSnapshotRef.current = null;\n        }\n        if (animatingRef.current ||\n            isSameMonth ||\n            // skip animation if a day is focused because it can cause issues to the animation and is better for a11y\n            focused) {\n            return;\n        }\n        const previousMonthEls = previousRootElSnapshot instanceof HTMLElement\n            ? queryMonthEls(previousRootElSnapshot)\n            : [];\n        const currentMonthEls = queryMonthEls(rootElRef.current);\n        if (currentMonthEls?.every((el) => el instanceof HTMLElement) &&\n            previousMonthEls &&\n            previousMonthEls.every((el) => el instanceof HTMLElement)) {\n            animatingRef.current = true;\n            const cleanUpFunctions = [];\n            // set isolation to isolate to isolate the stacking context during animation\n            rootElRef.current.style.isolation = \"isolate\";\n            // set z-index to 1 to ensure the nav is clickable over the other elements being animated\n            const navEl = queryNavEl(rootElRef.current);\n            if (navEl) {\n                navEl.style.zIndex = \"1\";\n            }\n            currentMonthEls.forEach((currentMonthEl, index) => {\n                const previousMonthEl = previousMonthEls[index];\n                if (!previousMonthEl) {\n                    return;\n                }\n                // animate new displayed month\n                currentMonthEl.style.position = \"relative\";\n                currentMonthEl.style.overflow = \"hidden\";\n                const captionEl = queryCaptionEl(currentMonthEl);\n                if (captionEl) {\n                    captionEl.classList.add(captionAnimationClass);\n                }\n                const weeksEl = queryWeeksEl(currentMonthEl);\n                if (weeksEl) {\n                    weeksEl.classList.add(weeksAnimationClass);\n                }\n                // animate new displayed month end\n                const cleanUp = () => {\n                    animatingRef.current = false;\n                    if (rootElRef.current) {\n                        rootElRef.current.style.isolation = \"\";\n                    }\n                    if (navEl) {\n                        navEl.style.zIndex = \"\";\n                    }\n                    if (captionEl) {\n                        captionEl.classList.remove(captionAnimationClass);\n                    }\n                    if (weeksEl) {\n                        weeksEl.classList.remove(weeksAnimationClass);\n                    }\n                    currentMonthEl.style.position = \"\";\n                    currentMonthEl.style.overflow = \"\";\n                    if (currentMonthEl.contains(previousMonthEl)) {\n                        currentMonthEl.removeChild(previousMonthEl);\n                    }\n                };\n                cleanUpFunctions.push(cleanUp);\n                // animate old displayed month\n                previousMonthEl.style.pointerEvents = \"none\";\n                previousMonthEl.style.position = \"absolute\";\n                previousMonthEl.style.overflow = \"hidden\";\n                previousMonthEl.setAttribute(\"aria-hidden\", \"true\");\n                // hide the weekdays container of the old month and only the new one\n                const previousWeekdaysEl = queryWeekdaysEl(previousMonthEl);\n                if (previousWeekdaysEl) {\n                    previousWeekdaysEl.style.opacity = \"0\";\n                }\n                const previousCaptionEl = queryCaptionEl(previousMonthEl);\n                if (previousCaptionEl) {\n                    previousCaptionEl.classList.add(isAfterPreviousMonth\n                        ? classNames[Animation.caption_before_exit]\n                        : classNames[Animation.caption_after_exit]);\n                    previousCaptionEl.addEventListener(\"animationend\", cleanUp);\n                }\n                const previousWeeksEl = queryWeeksEl(previousMonthEl);\n                if (previousWeeksEl) {\n                    previousWeeksEl.classList.add(isAfterPreviousMonth\n                        ? classNames[Animation.weeks_before_exit]\n                        : classNames[Animation.weeks_after_exit]);\n                }\n                currentMonthEl.insertBefore(previousMonthEl, currentMonthEl.firstChild);\n            });\n        }\n    });\n}\n","/**\n * Returns all the dates to display in the calendar.\n *\n * This function calculates the range of dates to display based on the provided\n * display months, constraints, and calendar configuration.\n *\n * @param displayMonths The months to display in the calendar.\n * @param maxDate The maximum date to include in the range.\n * @param props The DayPicker props, including calendar configuration options.\n * @param dateLib The date library to use for date manipulation.\n * @returns An array of dates to display in the calendar.\n */\nexport function getDates(displayMonths, maxDate, props, dateLib) {\n    const firstMonth = displayMonths[0];\n    const lastMonth = displayMonths[displayMonths.length - 1];\n    const { ISOWeek, fixedWeeks, broadcastCalendar } = props ?? {};\n    const { addDays, differenceInCalendarDays, differenceInCalendarMonths, endOfBroadcastWeek, endOfISOWeek, endOfMonth, endOfWeek, isAfter, startOfBroadcastWeek, startOfISOWeek, startOfWeek, } = dateLib;\n    const startWeekFirstDate = broadcastCalendar\n        ? startOfBroadcastWeek(firstMonth, dateLib)\n        : ISOWeek\n            ? startOfISOWeek(firstMonth)\n            : startOfWeek(firstMonth);\n    const displayMonthsWeekEnd = broadcastCalendar\n        ? endOfBroadcastWeek(lastMonth)\n        : ISOWeek\n            ? endOfISOWeek(endOfMonth(lastMonth))\n            : endOfWeek(endOfMonth(lastMonth));\n    // If maxDate is set, clamp the grid to the end of that week.\n    const constraintWeekEnd = maxDate &&\n        (broadcastCalendar\n            ? endOfBroadcastWeek(maxDate)\n            : ISOWeek\n                ? endOfISOWeek(maxDate)\n                : endOfWeek(maxDate));\n    // Pick the earliest week end between the displayed months and the constraint.\n    const gridEndDate = constraintWeekEnd && isAfter(displayMonthsWeekEnd, constraintWeekEnd)\n        ? constraintWeekEnd\n        : displayMonthsWeekEnd;\n    const nOfDays = differenceInCalendarDays(gridEndDate, startWeekFirstDate);\n    const nOfMonths = differenceInCalendarMonths(lastMonth, firstMonth) + 1;\n    const dates = [];\n    for (let i = 0; i <= nOfDays; i++) {\n        const date = addDays(startWeekFirstDate, i);\n        dates.push(date);\n    }\n    // If fixed weeks is enabled, add the extra dates to the array\n    const nrOfDaysWithFixedWeeks = broadcastCalendar ? 35 : 42;\n    const extraDates = nrOfDaysWithFixedWeeks * nOfMonths;\n    if (fixedWeeks && dates.length < extraDates) {\n        const daysToAdd = extraDates - dates.length;\n        for (let i = 0; i < daysToAdd; i++) {\n            const date = addDays(dates[dates.length - 1], 1);\n            dates.push(date);\n        }\n    }\n    return dates;\n}\n","/**\n * Returns all the days belonging to the calendar by merging the days in the\n * weeks for each month.\n *\n * @param calendarMonths The array of calendar months.\n * @returns An array of `CalendarDay` objects representing all the days in the\n *   calendar.\n */\nexport function getDays(calendarMonths) {\n    const initialDays = [];\n    return calendarMonths.reduce((days, month) => {\n        const weekDays = month.weeks.reduce((weekDays, week) => {\n            return weekDays.concat(week.days.slice());\n        }, initialDays.slice());\n        return days.concat(weekDays.slice());\n    }, initialDays.slice());\n}\n","/**\n * Returns the months to display in the calendar.\n *\n * @param firstDisplayedMonth The first month currently displayed in the\n *   calendar.\n * @param calendarEndMonth The latest month the user can navigate to.\n * @param props The DayPicker props, including `numberOfMonths`.\n * @param dateLib The date library to use for date manipulation.\n * @returns An array of dates representing the months to display.\n */\nexport function getDisplayMonths(firstDisplayedMonth, calendarEndMonth, props, dateLib) {\n    const { numberOfMonths = 1 } = props;\n    const months = [];\n    for (let i = 0; i < numberOfMonths; i++) {\n        const month = dateLib.addMonths(firstDisplayedMonth, i);\n        if (calendarEndMonth && month > calendarEndMonth) {\n            break;\n        }\n        months.push(month);\n    }\n    return months;\n}\n","/**\n * Determines the initial month to display in the calendar based on the provided\n * props.\n *\n * This function calculates the starting month, considering constraints such as\n * `startMonth`, `endMonth`, and the number of months to display.\n *\n * @param props The DayPicker props, including navigation and date constraints.\n * @param dateLib The date library to use for date manipulation.\n * @returns The initial month to display.\n */\nexport function getInitialMonth(props, navStart, navEnd, dateLib) {\n    const { month, defaultMonth, today = dateLib.today(), numberOfMonths = 1, } = props;\n    let initialMonth = month || defaultMonth || today;\n    const { differenceInCalendarMonths, addMonths, startOfMonth } = dateLib;\n    if (navEnd &&\n        differenceInCalendarMonths(navEnd, initialMonth) < numberOfMonths - 1) {\n        const offset = -1 * (numberOfMonths - 1);\n        initialMonth = addMonths(navEnd, offset);\n    }\n    if (navStart && differenceInCalendarMonths(initialMonth, navStart) < 0) {\n        initialMonth = navStart;\n    }\n    return startOfMonth(initialMonth);\n}\n","import { CalendarDay, CalendarMonth, CalendarWeek } from \"../classes/index.js\";\n/**\n * Returns the months to display in the calendar.\n *\n * This function generates `CalendarMonth` objects for each month to be\n * displayed, including their weeks and days, based on the provided display\n * months and dates.\n *\n * @param displayMonths The months (as dates) to display in the calendar.\n * @param dates The dates to display in the calendar.\n * @param props Options from the DayPicker props context.\n * @param dateLib The date library to use for date manipulation.\n * @returns An array of `CalendarMonth` objects representing the months to\n *   display.\n */\nexport function getMonths(displayMonths, dates, props, dateLib) {\n    const { addDays, endOfBroadcastWeek, endOfISOWeek, endOfMonth, endOfWeek, getISOWeek, getWeek, startOfBroadcastWeek, startOfISOWeek, startOfWeek, } = dateLib;\n    const dayPickerMonths = displayMonths.reduce((months, month) => {\n        const firstDateOfFirstWeek = props.broadcastCalendar\n            ? startOfBroadcastWeek(month, dateLib)\n            : props.ISOWeek\n                ? startOfISOWeek(month)\n                : startOfWeek(month);\n        const lastDateOfLastWeek = props.broadcastCalendar\n            ? endOfBroadcastWeek(month)\n            : props.ISOWeek\n                ? endOfISOWeek(endOfMonth(month))\n                : endOfWeek(endOfMonth(month));\n        /** The dates to display in the month. */\n        const monthDates = dates.filter((date) => {\n            return date >= firstDateOfFirstWeek && date <= lastDateOfLastWeek;\n        });\n        const nrOfDaysWithFixedWeeks = props.broadcastCalendar ? 35 : 42;\n        if (props.fixedWeeks && monthDates.length < nrOfDaysWithFixedWeeks) {\n            const extraDates = dates.filter((date) => {\n                const daysToAdd = nrOfDaysWithFixedWeeks - monthDates.length;\n                return (date > lastDateOfLastWeek &&\n                    date <= addDays(lastDateOfLastWeek, daysToAdd));\n            });\n            monthDates.push(...extraDates);\n        }\n        const weeks = monthDates.reduce((weeks, date) => {\n            const weekNumber = props.ISOWeek ? getISOWeek(date) : getWeek(date);\n            const week = weeks.find((week) => week.weekNumber === weekNumber);\n            const day = new CalendarDay(date, month, dateLib);\n            if (!week) {\n                weeks.push(new CalendarWeek(weekNumber, [day]));\n            }\n            else {\n                week.days.push(day);\n            }\n            return weeks;\n        }, []);\n        const dayPickerMonth = new CalendarMonth(month, weeks);\n        months.push(dayPickerMonth);\n        return months;\n    }, []);\n    if (!props.reverseMonths) {\n        return dayPickerMonths;\n    }\n    else {\n        return dayPickerMonths.reverse();\n    }\n}\n","/**\n * Returns the start and end months for calendar navigation.\n *\n * @param props The DayPicker props, including navigation and layout options.\n * @param dateLib The date library to use for date manipulation.\n * @returns A tuple containing the start and end months for navigation.\n */\nexport function getNavMonths(props, dateLib) {\n    let { startMonth, endMonth } = props;\n    const { startOfYear, startOfDay, startOfMonth, endOfMonth, addYears, endOfYear, newDate, today, } = dateLib;\n    // Handle deprecated code\n    const { fromYear, toYear, fromMonth, toMonth } = props;\n    if (!startMonth && fromMonth) {\n        startMonth = fromMonth;\n    }\n    if (!startMonth && fromYear) {\n        startMonth = dateLib.newDate(fromYear, 0, 1);\n    }\n    if (!endMonth && toMonth) {\n        endMonth = toMonth;\n    }\n    if (!endMonth && toYear) {\n        endMonth = newDate(toYear, 11, 31);\n    }\n    const hasYearDropdown = props.captionLayout === \"dropdown\" ||\n        props.captionLayout === \"dropdown-years\";\n    if (startMonth) {\n        startMonth = startOfMonth(startMonth);\n    }\n    else if (fromYear) {\n        startMonth = newDate(fromYear, 0, 1);\n    }\n    else if (!startMonth && hasYearDropdown) {\n        startMonth = startOfYear(addYears(props.today ?? today(), -100));\n    }\n    if (endMonth) {\n        endMonth = endOfMonth(endMonth);\n    }\n    else if (toYear) {\n        endMonth = newDate(toYear, 11, 31);\n    }\n    else if (!endMonth && hasYearDropdown) {\n        endMonth = endOfYear(props.today ?? today());\n    }\n    return [\n        startMonth ? startOfDay(startMonth) : startMonth,\n        endMonth ? startOfDay(endMonth) : endMonth,\n    ];\n}\n","/**\n * Returns the next month the user can navigate to, based on the given options.\n *\n * The next month is not always the next calendar month:\n *\n * - If it is after the `calendarEndMonth`, it returns `undefined`.\n * - If paged navigation is enabled, it skips forward by the number of displayed\n *   months.\n *\n * @param firstDisplayedMonth The first month currently displayed in the\n *   calendar.\n * @param calendarEndMonth The latest month the user can navigate to.\n * @param options Navigation options, including `numberOfMonths` and\n *   `pagedNavigation`.\n * @param dateLib The date library to use for date manipulation.\n * @returns The next month, or `undefined` if navigation is not possible.\n */\nexport function getNextMonth(firstDisplayedMonth, calendarEndMonth, options, dateLib) {\n    if (options.disableNavigation) {\n        return undefined;\n    }\n    const { pagedNavigation, numberOfMonths = 1 } = options;\n    const { startOfMonth, addMonths, differenceInCalendarMonths } = dateLib;\n    const offset = pagedNavigation ? numberOfMonths : 1;\n    const month = startOfMonth(firstDisplayedMonth);\n    if (!calendarEndMonth) {\n        return addMonths(month, offset);\n    }\n    const monthsDiff = differenceInCalendarMonths(calendarEndMonth, firstDisplayedMonth);\n    if (monthsDiff < numberOfMonths) {\n        return undefined;\n    }\n    return addMonths(month, offset);\n}\n","/**\n * Returns the previous month the user can navigate to, based on the given\n * options.\n *\n * The previous month is not always the previous calendar month:\n *\n * - If it is before the `calendarStartMonth`, it returns `undefined`.\n * - If paged navigation is enabled, it skips back by the number of displayed\n *   months.\n *\n * @param firstDisplayedMonth The first month currently displayed in the\n *   calendar.\n * @param calendarStartMonth The earliest month the user can navigate to.\n * @param options Navigation options, including `numberOfMonths` and\n *   `pagedNavigation`.\n * @param dateLib The date library to use for date manipulation.\n * @returns The previous month, or `undefined` if navigation is not possible.\n */\nexport function getPreviousMonth(firstDisplayedMonth, calendarStartMonth, options, dateLib) {\n    if (options.disableNavigation) {\n        return undefined;\n    }\n    const { pagedNavigation, numberOfMonths } = options;\n    const { startOfMonth, addMonths, differenceInCalendarMonths } = dateLib;\n    const offset = pagedNavigation ? (numberOfMonths ?? 1) : 1;\n    const month = startOfMonth(firstDisplayedMonth);\n    if (!calendarStartMonth) {\n        return addMonths(month, -offset);\n    }\n    const monthsDiff = differenceInCalendarMonths(month, calendarStartMonth);\n    if (monthsDiff <= 0) {\n        return undefined;\n    }\n    return addMonths(month, -offset);\n}\n","/**\n * Returns an array of calendar weeks from an array of calendar months.\n *\n * @param months The array of calendar months.\n * @returns An array of calendar weeks.\n */\nexport function getWeeks(months) {\n    const initialWeeks = [];\n    return months.reduce((weeks, month) => {\n        return weeks.concat(month.weeks.slice());\n    }, initialWeeks.slice());\n}\n","import { useState } from \"react\";\n/**\n * A custom hook for managing both controlled and uncontrolled component states.\n *\n * This hook allows a component to support both controlled and uncontrolled\n * states by determining whether the `controlledValue` is provided. If it is\n * undefined, the hook falls back to using the internal state.\n *\n * @example\n *   // Uncontrolled usage\n *   const [value, setValue] = useControlledValue(0, undefined);\n *\n *   // Controlled usage\n *   const [value, setValue] = useControlledValue(0, props.value);\n *\n * @template T - The type of the value.\n * @param defaultValue The initial value for the uncontrolled state.\n * @param controlledValue The value for the controlled state. If undefined, the\n *   component will use the uncontrolled state.\n * @returns A tuple where the first element is the current value (either\n *   controlled or uncontrolled) and the second element is a setter function to\n *   update the value.\n */\nexport function useControlledValue(defaultValue, controlledValue) {\n    const [uncontrolledValue, setValue] = useState(defaultValue);\n    const value = controlledValue === undefined ? uncontrolledValue : controlledValue;\n    return [value, setValue];\n}\n","import { useEffect, useMemo } from \"react\";\nimport { getDates } from \"./helpers/getDates.js\";\nimport { getDays } from \"./helpers/getDays.js\";\nimport { getDisplayMonths } from \"./helpers/getDisplayMonths.js\";\nimport { getInitialMonth } from \"./helpers/getInitialMonth.js\";\nimport { getMonths } from \"./helpers/getMonths.js\";\nimport { getNavMonths } from \"./helpers/getNavMonth.js\";\nimport { getNextMonth } from \"./helpers/getNextMonth.js\";\nimport { getPreviousMonth } from \"./helpers/getPreviousMonth.js\";\nimport { getWeeks } from \"./helpers/getWeeks.js\";\nimport { useControlledValue } from \"./helpers/useControlledValue.js\";\n/**\n * Provides the calendar object to work with the calendar in custom components.\n *\n * @private\n * @param props - The DayPicker props related to calendar configuration.\n * @param dateLib - The date utility library instance.\n * @returns The calendar object containing displayed days, weeks, months, and\n *   navigation methods.\n */\nexport function useCalendar(props, dateLib) {\n    const [navStart, navEnd] = getNavMonths(props, dateLib);\n    const { startOfMonth, endOfMonth } = dateLib;\n    const initialMonth = getInitialMonth(props, navStart, navEnd, dateLib);\n    const [firstMonth, setFirstMonth] = useControlledValue(initialMonth, \n    // initialMonth is always computed from props.month if provided\n    props.month ? initialMonth : undefined);\n    // biome-ignore lint/correctness/useExhaustiveDependencies: change the initial month when the time zone changes.\n    useEffect(() => {\n        const newInitialMonth = getInitialMonth(props, navStart, navEnd, dateLib);\n        setFirstMonth(newInitialMonth);\n    }, [props.timeZone]);\n    /** The months displayed in the calendar. */\n    // biome-ignore lint/correctness/useExhaustiveDependencies: We want to recompute only when specific props change.\n    const { months, weeks, days, previousMonth, nextMonth } = useMemo(() => {\n        const displayMonths = getDisplayMonths(firstMonth, navEnd, { numberOfMonths: props.numberOfMonths }, dateLib);\n        const dates = getDates(displayMonths, props.endMonth ? endOfMonth(props.endMonth) : undefined, {\n            ISOWeek: props.ISOWeek,\n            fixedWeeks: props.fixedWeeks,\n            broadcastCalendar: props.broadcastCalendar,\n        }, dateLib);\n        const months = getMonths(displayMonths, dates, {\n            broadcastCalendar: props.broadcastCalendar,\n            fixedWeeks: props.fixedWeeks,\n            ISOWeek: props.ISOWeek,\n            reverseMonths: props.reverseMonths,\n        }, dateLib);\n        const weeks = getWeeks(months);\n        const days = getDays(months);\n        const previousMonth = getPreviousMonth(firstMonth, navStart, props, dateLib);\n        const nextMonth = getNextMonth(firstMonth, navEnd, props, dateLib);\n        return {\n            months,\n            weeks,\n            days,\n            previousMonth,\n            nextMonth,\n        };\n    }, [\n        dateLib,\n        firstMonth.getTime(),\n        navEnd?.getTime(),\n        navStart?.getTime(),\n        props.disableNavigation,\n        props.broadcastCalendar,\n        props.endMonth?.getTime(),\n        props.fixedWeeks,\n        props.ISOWeek,\n        props.numberOfMonths,\n        props.pagedNavigation,\n        props.reverseMonths,\n    ]);\n    const { disableNavigation, onMonthChange } = props;\n    const isDayInCalendar = (day) => weeks.some((week) => week.days.some((d) => d.isEqualTo(day)));\n    const goToMonth = (date) => {\n        if (disableNavigation) {\n            return;\n        }\n        let newMonth = startOfMonth(date);\n        // if month is before start, use the first month instead\n        if (navStart && newMonth < startOfMonth(navStart)) {\n            newMonth = startOfMonth(navStart);\n        }\n        // if month is after endMonth, use the last month instead\n        if (navEnd && newMonth > startOfMonth(navEnd)) {\n            newMonth = startOfMonth(navEnd);\n        }\n        setFirstMonth(newMonth);\n        onMonthChange?.(newMonth);\n    };\n    const goToDay = (day) => {\n        // is this check necessary?\n        if (isDayInCalendar(day)) {\n            return;\n        }\n        goToMonth(day.date);\n    };\n    const calendar = {\n        months,\n        weeks,\n        days,\n        navStart,\n        navEnd,\n        previousMonth,\n        nextMonth,\n        goToMonth,\n        goToDay,\n    };\n    return calendar;\n}\n","import { DayFlag } from \"../UI.js\";\nvar FocusTargetPriority;\n(function (FocusTargetPriority) {\n    FocusTargetPriority[FocusTargetPriority[\"Today\"] = 0] = \"Today\";\n    FocusTargetPriority[FocusTargetPriority[\"Selected\"] = 1] = \"Selected\";\n    FocusTargetPriority[FocusTargetPriority[\"LastFocused\"] = 2] = \"LastFocused\";\n    FocusTargetPriority[FocusTargetPriority[\"FocusedModifier\"] = 3] = \"FocusedModifier\";\n})(FocusTargetPriority || (FocusTargetPriority = {}));\n/**\n * Determines if a day is focusable based on its modifiers.\n *\n * A day is considered focusable if it is not disabled, hidden, or outside the\n * displayed month.\n *\n * @param modifiers The modifiers applied to the day.\n * @returns `true` if the day is focusable, otherwise `false`.\n */\nfunction isFocusableDay(modifiers) {\n    return (!modifiers[DayFlag.disabled] &&\n        !modifiers[DayFlag.hidden] &&\n        !modifiers[DayFlag.outside]);\n}\n/**\n * Calculates the focus target day based on priority.\n *\n * This function determines the day that should receive focus in the calendar,\n * prioritizing days with specific modifiers (e.g., \"focused\", \"today\") or\n * selection states.\n *\n * @param days The array of `CalendarDay` objects to evaluate.\n * @param getModifiers A function to retrieve the modifiers for a given day.\n * @param isSelected A function to determine if a day is selected.\n * @param lastFocused The last focused day, if any.\n * @returns The `CalendarDay` that should receive focus, or `undefined` if no\n *   focusable day is found.\n */\nexport function calculateFocusTarget(days, getModifiers, isSelected, lastFocused) {\n    let focusTarget;\n    let foundFocusTargetPriority = -1;\n    for (const day of days) {\n        const modifiers = getModifiers(day);\n        if (isFocusableDay(modifiers)) {\n            if (modifiers[DayFlag.focused] &&\n                foundFocusTargetPriority < FocusTargetPriority.FocusedModifier) {\n                focusTarget = day;\n                foundFocusTargetPriority = FocusTargetPriority.FocusedModifier;\n            }\n            else if (lastFocused?.isEqualTo(day) &&\n                foundFocusTargetPriority < FocusTargetPriority.LastFocused) {\n                focusTarget = day;\n                foundFocusTargetPriority = FocusTargetPriority.LastFocused;\n            }\n            else if (isSelected(day.date) &&\n                foundFocusTargetPriority < FocusTargetPriority.Selected) {\n                focusTarget = day;\n                foundFocusTargetPriority = FocusTargetPriority.Selected;\n            }\n            else if (modifiers[DayFlag.today] &&\n                foundFocusTargetPriority < FocusTargetPriority.Today) {\n                focusTarget = day;\n                foundFocusTargetPriority = FocusTargetPriority.Today;\n            }\n        }\n    }\n    if (!focusTarget) {\n        // Return the first day that is focusable\n        focusTarget = days.find((day) => isFocusableDay(getModifiers(day)));\n    }\n    return focusTarget;\n}\n","/**\n * Calculates the next date that should be focused in the calendar.\n *\n * This function determines the next focusable date based on the movement\n * direction, constraints, and calendar configuration.\n *\n * @param moveBy The unit of movement (e.g., \"day\", \"week\").\n * @param moveDir The direction of movement (\"before\" or \"after\").\n * @param refDate The reference date from which to calculate the next focusable\n *   date.\n * @param navStart The earliest date the user can navigate to.\n * @param navEnd The latest date the user can navigate to.\n * @param props The DayPicker props, including calendar configuration options.\n * @param dateLib The date library to use for date manipulation.\n * @returns The next focusable date.\n */\nexport function getFocusableDate(moveBy, moveDir, refDate, navStart, navEnd, props, dateLib) {\n    const { ISOWeek, broadcastCalendar } = props;\n    const { addDays, addMonths, addWeeks, addYears, endOfBroadcastWeek, endOfISOWeek, endOfWeek, max, min, startOfBroadcastWeek, startOfISOWeek, startOfWeek, } = dateLib;\n    const moveFns = {\n        day: addDays,\n        week: addWeeks,\n        month: addMonths,\n        year: addYears,\n        startOfWeek: (date) => broadcastCalendar\n            ? startOfBroadcastWeek(date, dateLib)\n            : ISOWeek\n                ? startOfISOWeek(date)\n                : startOfWeek(date),\n        endOfWeek: (date) => broadcastCalendar\n            ? endOfBroadcastWeek(date)\n            : ISOWeek\n                ? endOfISOWeek(date)\n                : endOfWeek(date),\n    };\n    let focusableDate = moveFns[moveBy](refDate, moveDir === \"after\" ? 1 : -1);\n    if (moveDir === \"before\" && navStart) {\n        focusableDate = max([navStart, focusableDate]);\n    }\n    else if (moveDir === \"after\" && navEnd) {\n        focusableDate = min([navEnd, focusableDate]);\n    }\n    return focusableDate;\n}\n","import { CalendarDay } from \"../classes/index.js\";\nimport { dateMatchModifiers } from \"../utils/dateMatchModifiers.js\";\nimport { getFocusableDate } from \"./getFocusableDate.js\";\n/**\n * Determines the next focusable day in the calendar.\n *\n * This function recursively calculates the next focusable day based on the\n * movement direction and modifiers applied to the days.\n *\n * @param moveBy The unit of movement (e.g., \"day\", \"week\").\n * @param moveDir The direction of movement (\"before\" or \"after\").\n * @param refDay The currently focused day.\n * @param calendarStartMonth The earliest month the user can navigate to.\n * @param calendarEndMonth The latest month the user can navigate to.\n * @param props The DayPicker props, including modifiers and configuration\n *   options.\n * @param dateLib The date library to use for date manipulation.\n * @param attempt The current recursion attempt (used to limit recursion depth).\n * @returns The next focusable day, or `undefined` if no focusable day is found.\n */\nexport function getNextFocus(moveBy, moveDir, refDay, calendarStartMonth, calendarEndMonth, props, dateLib, attempt = 0) {\n    if (attempt > 365) {\n        // Limit the recursion to 365 attempts\n        return undefined;\n    }\n    const focusableDate = getFocusableDate(moveBy, moveDir, refDay.date, calendarStartMonth, calendarEndMonth, props, dateLib);\n    const isDisabled = Boolean(props.disabled &&\n        dateMatchModifiers(focusableDate, props.disabled, dateLib));\n    const isHidden = Boolean(props.hidden && dateMatchModifiers(focusableDate, props.hidden, dateLib));\n    const targetMonth = focusableDate;\n    const focusDay = new CalendarDay(focusableDate, targetMonth, dateLib);\n    if (!isDisabled && !isHidden) {\n        return focusDay;\n    }\n    // Recursively attempt to find the next focusable date\n    return getNextFocus(moveBy, moveDir, focusDay, calendarStartMonth, calendarEndMonth, props, dateLib, attempt + 1);\n}\n","import { useState } from \"react\";\nimport { calculateFocusTarget } from \"./helpers/calculateFocusTarget.js\";\nimport { getNextFocus } from \"./helpers/getNextFocus.js\";\n/**\n * Manages focus behavior for the DayPicker component, including setting,\n * moving, and blurring focus on calendar days.\n *\n * @template T - The type of DayPicker props.\n * @param props - The DayPicker props.\n * @param calendar - The calendar object containing the displayed days and\n *   months.\n * @param getModifiers - A function to retrieve modifiers for a given day.\n * @param isSelected - A function to check if a date is selected.\n * @param dateLib - The date utility library instance.\n * @returns An object containing focus-related methods and the currently focused\n *   day.\n */\nexport function useFocus(props, calendar, getModifiers, isSelected, dateLib) {\n    const { autoFocus } = props;\n    const [lastFocused, setLastFocused] = useState();\n    const focusTarget = calculateFocusTarget(calendar.days, getModifiers, isSelected || (() => false), lastFocused);\n    const [focusedDay, setFocused] = useState(autoFocus ? focusTarget : undefined);\n    const blur = () => {\n        setLastFocused(focusedDay);\n        setFocused(undefined);\n    };\n    const moveFocus = (moveBy, moveDir) => {\n        if (!focusedDay)\n            return;\n        const nextFocus = getNextFocus(moveBy, moveDir, focusedDay, calendar.navStart, calendar.navEnd, props, dateLib);\n        if (!nextFocus)\n            return;\n        if (props.disableNavigation) {\n            const isNextInCalendar = calendar.days.some((day) => day.isEqualTo(nextFocus));\n            if (!isNextInCalendar) {\n                return;\n            }\n        }\n        calendar.goToDay(nextFocus);\n        setFocused(nextFocus);\n    };\n    const isFocusTarget = (day) => {\n        return Boolean(focusTarget?.isEqualTo(day));\n    };\n    const useFocus = {\n        isFocusTarget,\n        setFocused,\n        focused: focusedDay,\n        blur,\n        moveFocus,\n    };\n    return useFocus;\n}\n","import { useControlledValue } from \"../helpers/useControlledValue.js\";\n/**\n * Hook to manage multiple-date selection in the DayPicker component.\n *\n * @template T - The type of DayPicker props.\n * @param props - The DayPicker props.\n * @param dateLib - The date utility library instance.\n * @returns An object containing the selected dates, a function to select dates,\n *   and a function to check if a date is selected.\n */\nexport function useMulti(props, dateLib) {\n    const { selected: initiallySelected, required, onSelect, } = props;\n    const [internallySelected, setSelected] = useControlledValue(initiallySelected, onSelect ? initiallySelected : undefined);\n    const selected = !onSelect ? internallySelected : initiallySelected;\n    const { isSameDay } = dateLib;\n    const isSelected = (date) => {\n        return selected?.some((d) => isSameDay(d, date)) ?? false;\n    };\n    const { min, max } = props;\n    const select = (triggerDate, modifiers, e) => {\n        let newDates = [...(selected ?? [])];\n        if (isSelected(triggerDate)) {\n            if (selected?.length === min) {\n                // Min value reached, do nothing\n                return;\n            }\n            if (required && selected?.length === 1) {\n                // Required value already selected do nothing\n                return;\n            }\n            newDates = selected?.filter((d) => !isSameDay(d, triggerDate));\n        }\n        else {\n            if (selected?.length === max) {\n                // Max value reached, reset the selection to date\n                newDates = [triggerDate];\n            }\n            else {\n                // Add the date to the selection\n                newDates = [...newDates, triggerDate];\n            }\n        }\n        if (!onSelect) {\n            setSelected(newDates);\n        }\n        onSelect?.(newDates, triggerDate, modifiers, e);\n        return newDates;\n    };\n    return {\n        selected,\n        select,\n        isSelected,\n    };\n}\n","import { defaultDateLib } from \"../classes/DateLib.js\";\n/**\n * Adds a date to an existing range, considering constraints like minimum and\n * maximum range size.\n *\n * @param date - The date to add to the range.\n * @param initialRange - The initial range to which the date will be added.\n * @param min - The minimum number of days in the range.\n * @param max - The maximum number of days in the range.\n * @param required - Whether the range must always include at least one date.\n * @param dateLib - The date utility library instance.\n * @returns The updated date range, or `undefined` if the range is cleared.\n * @group Utilities\n */\nexport function addToRange(date, initialRange, min = 0, max = 0, required = false, dateLib = defaultDateLib) {\n    const { from, to } = initialRange || {};\n    const { isSameDay, isAfter, isBefore } = dateLib;\n    let range;\n    if (!from && !to) {\n        // the range is empty, add the date\n        range = { from: date, to: min > 0 ? undefined : date };\n    }\n    else if (from && !to) {\n        // adding date to an incomplete range\n        if (isSameDay(from, date)) {\n            // adding a date equal to the start of the range\n            if (min === 0) {\n                range = { from, to: date };\n            }\n            else if (required) {\n                range = { from, to: undefined };\n            }\n            else {\n                range = undefined;\n            }\n        }\n        else if (isBefore(date, from)) {\n            // adding a date before the start of the range\n            range = { from: date, to: from };\n        }\n        else {\n            // adding a date after the start of the range\n            range = { from, to: date };\n        }\n    }\n    else if (from && to) {\n        // adding date to a complete range\n        if (isSameDay(from, date) && isSameDay(to, date)) {\n            // adding a date that is equal to both start and end of the range\n            if (required) {\n                range = { from, to };\n            }\n            else {\n                range = undefined;\n            }\n        }\n        else if (isSameDay(from, date)) {\n            // adding a date equal to the the start of the range\n            range = { from, to: min > 0 ? undefined : date };\n        }\n        else if (isSameDay(to, date)) {\n            // adding a dare equal to the end of the range\n            range = { from: date, to: min > 0 ? undefined : date };\n        }\n        else if (isBefore(date, from)) {\n            // adding a date before the start of the range\n            range = { from: date, to: to };\n        }\n        else if (isAfter(date, from)) {\n            // adding a date after the start of the range\n            range = { from, to: date };\n        }\n        else if (isAfter(date, to)) {\n            // adding a date after the end of the range\n            range = { from, to: date };\n        }\n        else {\n            throw new Error(\"Invalid range\");\n        }\n    }\n    // check for min / max\n    if (range?.from && range?.to) {\n        const diff = dateLib.differenceInCalendarDays(range.to, range.from);\n        if (max > 0 && diff > max) {\n            range = { from: date, to: undefined };\n        }\n        else if (min > 1 && diff < min) {\n            range = { from: date, to: undefined };\n        }\n    }\n    return range;\n}\n","import { defaultDateLib } from \"../classes/DateLib.js\";\n/**\n * Checks if a date range contains one or more specified days of the week.\n *\n * @since 9.2.2\n * @param range - The date range to check.\n * @param dayOfWeek - The day(s) of the week to check for (`0-6`, where `0` is\n *   Sunday).\n * @param dateLib - The date utility library instance.\n * @returns `true` if the range contains the specified day(s) of the week,\n *   otherwise `false`.\n * @group Utilities\n */\nexport function rangeContainsDayOfWeek(range, dayOfWeek, dateLib = defaultDateLib) {\n    const dayOfWeekArr = !Array.isArray(dayOfWeek) ? [dayOfWeek] : dayOfWeek;\n    let date = range.from;\n    const totalDays = dateLib.differenceInCalendarDays(range.to, range.from);\n    // iterate at maximum one week or the total days if the range is shorter than one week\n    const totalDaysLimit = Math.min(totalDays, 6);\n    for (let i = 0; i <= totalDaysLimit; i++) {\n        if (dayOfWeekArr.includes(date.getDay())) {\n            return true;\n        }\n        date = dateLib.addDays(date, 1);\n    }\n    return false;\n}\n","import { defaultDateLib } from \"../classes/index.js\";\nimport { rangeIncludesDate } from \"./rangeIncludesDate.js\";\n/**\n * Determines if two date ranges overlap.\n *\n * @since 9.2.2\n * @param rangeLeft - The first date range.\n * @param rangeRight - The second date range.\n * @param dateLib - The date utility library instance.\n * @returns `true` if the ranges overlap, otherwise `false`.\n * @group Utilities\n */\nexport function rangeOverlaps(rangeLeft, rangeRight, dateLib = defaultDateLib) {\n    return (rangeIncludesDate(rangeLeft, rangeRight.from, false, dateLib) ||\n        rangeIncludesDate(rangeLeft, rangeRight.to, false, dateLib) ||\n        rangeIncludesDate(rangeRight, rangeLeft.from, false, dateLib) ||\n        rangeIncludesDate(rangeRight, rangeLeft.to, false, dateLib));\n}\n","import { defaultDateLib } from \"../classes/DateLib.js\";\nimport { dateMatchModifiers } from \"./dateMatchModifiers.js\";\nimport { rangeContainsDayOfWeek } from \"./rangeContainsDayOfWeek.js\";\nimport { rangeIncludesDate } from \"./rangeIncludesDate.js\";\nimport { rangeOverlaps } from \"./rangeOverlaps.js\";\nimport { isDateAfterType, isDateBeforeType, isDateInterval, isDateRange, isDatesArray, isDayOfWeekType, } from \"./typeguards.js\";\n/**\n * Checks if a date range contains dates that match the given modifiers.\n *\n * @since 9.2.2\n * @param range - The date range to check.\n * @param modifiers - The modifiers to match against.\n * @param dateLib - The date utility library instance.\n * @returns `true` if the range contains matching dates, otherwise `false`.\n * @group Utilities\n */\nexport function rangeContainsModifiers(range, modifiers, dateLib = defaultDateLib) {\n    const matchers = Array.isArray(modifiers) ? modifiers : [modifiers];\n    // Defer function matchers evaluation as they are the least performant.\n    const nonFunctionMatchers = matchers.filter((matcher) => typeof matcher !== \"function\");\n    const nonFunctionMatchersResult = nonFunctionMatchers.some((matcher) => {\n        if (typeof matcher === \"boolean\")\n            return matcher;\n        if (dateLib.isDate(matcher)) {\n            return rangeIncludesDate(range, matcher, false, dateLib);\n        }\n        if (isDatesArray(matcher, dateLib)) {\n            return matcher.some((date) => rangeIncludesDate(range, date, false, dateLib));\n        }\n        if (isDateRange(matcher)) {\n            if (matcher.from && matcher.to) {\n                return rangeOverlaps(range, { from: matcher.from, to: matcher.to }, dateLib);\n            }\n            return false;\n        }\n        if (isDayOfWeekType(matcher)) {\n            return rangeContainsDayOfWeek(range, matcher.dayOfWeek, dateLib);\n        }\n        if (isDateInterval(matcher)) {\n            const isClosedInterval = dateLib.isAfter(matcher.before, matcher.after);\n            if (isClosedInterval) {\n                return rangeOverlaps(range, {\n                    from: dateLib.addDays(matcher.after, 1),\n                    to: dateLib.addDays(matcher.before, -1),\n                }, dateLib);\n            }\n            return (dateMatchModifiers(range.from, matcher, dateLib) ||\n                dateMatchModifiers(range.to, matcher, dateLib));\n        }\n        if (isDateAfterType(matcher) || isDateBeforeType(matcher)) {\n            return (dateMatchModifiers(range.from, matcher, dateLib) ||\n                dateMatchModifiers(range.to, matcher, dateLib));\n        }\n        return false;\n    });\n    if (nonFunctionMatchersResult) {\n        return true;\n    }\n    const functionMatchers = matchers.filter((matcher) => typeof matcher === \"function\");\n    if (functionMatchers.length) {\n        let date = range.from;\n        const totalDays = dateLib.differenceInCalendarDays(range.to, range.from);\n        for (let i = 0; i <= totalDays; i++) {\n            if (functionMatchers.some((matcher) => matcher(date))) {\n                return true;\n            }\n            date = dateLib.addDays(date, 1);\n        }\n    }\n    return false;\n}\n","import { useControlledValue } from \"../helpers/useControlledValue.js\";\nimport { addToRange, rangeContainsModifiers } from \"../utils/index.js\";\nimport { rangeIncludesDate } from \"../utils/rangeIncludesDate.js\";\n/**\n * Hook to manage range selection in the DayPicker component.\n *\n * @template T - The type of DayPicker props.\n * @param props - The DayPicker props.\n * @param dateLib - The date utility library instance.\n * @returns An object containing the selected range, a function to select a\n *   range, and a function to check if a date is within the range.\n */\nexport function useRange(props, dateLib) {\n    const { disabled, excludeDisabled, selected: initiallySelected, required, onSelect, } = props;\n    const [internallySelected, setSelected] = useControlledValue(initiallySelected, onSelect ? initiallySelected : undefined);\n    const selected = !onSelect ? internallySelected : initiallySelected;\n    const isSelected = (date) => selected && rangeIncludesDate(selected, date, false, dateLib);\n    const select = (triggerDate, modifiers, e) => {\n        const { min, max } = props;\n        const newRange = triggerDate\n            ? addToRange(triggerDate, selected, min, max, required, dateLib)\n            : undefined;\n        if (excludeDisabled && disabled && newRange?.from && newRange.to) {\n            if (rangeContainsModifiers({ from: newRange.from, to: newRange.to }, disabled, dateLib)) {\n                // if a disabled days is found, the range is reset\n                newRange.from = triggerDate;\n                newRange.to = undefined;\n            }\n        }\n        if (!onSelect) {\n            setSelected(newRange);\n        }\n        onSelect?.(newRange, triggerDate, modifiers, e);\n        return newRange;\n    };\n    return {\n        selected,\n        select,\n        isSelected,\n    };\n}\n","import { useControlledValue } from \"../helpers/useControlledValue.js\";\n/**\n * Hook to manage single-date selection in the DayPicker component.\n *\n * @template T - The type of DayPicker props.\n * @param props - The DayPicker props.\n * @param dateLib - The date utility library instance.\n * @returns An object containing the selected date, a function to select a date,\n *   and a function to check if a date is selected.\n */\nexport function useSingle(props, dateLib) {\n    const { selected: initiallySelected, required, onSelect, } = props;\n    const [internallySelected, setSelected] = useControlledValue(initiallySelected, onSelect ? initiallySelected : undefined);\n    const selected = !onSelect ? internallySelected : initiallySelected;\n    const { isSameDay } = dateLib;\n    const isSelected = (compareDate) => {\n        return selected ? isSameDay(selected, compareDate) : false;\n    };\n    const select = (triggerDate, modifiers, e) => {\n        let newDate = triggerDate;\n        if (!required && selected && selected && isSameDay(triggerDate, selected)) {\n            // If the date is the same, clear the selection.\n            newDate = undefined;\n        }\n        if (!onSelect) {\n            setSelected(newDate);\n        }\n        if (required) {\n            onSelect?.(newDate, triggerDate, modifiers, e);\n        }\n        else {\n            onSelect?.(newDate, triggerDate, modifiers, e);\n        }\n        return newDate;\n    };\n    return {\n        selected,\n        select,\n        isSelected,\n    };\n}\n","import { useMulti } from \"./selection/useMulti.js\";\nimport { useRange } from \"./selection/useRange.js\";\nimport { useSingle } from \"./selection/useSingle.js\";\n/**\n * Determines the appropriate selection hook to use based on the selection mode\n * and returns the corresponding selection object.\n *\n * @template T - The type of DayPicker props.\n * @param props - The DayPicker props.\n * @param dateLib - The date utility library instance.\n * @returns The selection object for the specified mode, or `undefined` if no\n *   mode is set.\n */\nexport function useSelection(props, dateLib) {\n    const single = useSingle(props, dateLib);\n    const multi = useMulti(props, dateLib);\n    const range = useRange(props, dateLib);\n    switch (props.mode) {\n        case \"single\":\n            return single;\n        case \"multiple\":\n            return multi;\n        case \"range\":\n            return range;\n        default:\n            return undefined;\n    }\n}\n","import { TZDate } from \"@date-fns/tz\";\n/**\n * Convert a {@link Date} or {@link TZDate} instance to the given time zone.\n * Reuses the same instance when it is already a {@link TZDate} using the target\n * time zone to avoid extra allocations.\n */\nexport function toTimeZone(date, timeZone) {\n    if (date instanceof TZDate && date.timeZone === timeZone) {\n        return date;\n    }\n    return new TZDate(date, timeZone);\n}\n","import { TZDate } from \"@date-fns/tz\";\nimport { toTimeZone } from \"./toTimeZone.js\";\nimport { isDateAfterType, isDateBeforeType, isDateInterval, isDateRange, } from \"./typeguards.js\";\nfunction toZoneNoon(date, timeZone, noonSafe) {\n    if (!noonSafe)\n        return toTimeZone(date, timeZone);\n    const zoned = toTimeZone(date, timeZone);\n    const noonZoned = new TZDate(zoned.getFullYear(), zoned.getMonth(), zoned.getDate(), 12, 0, 0, timeZone);\n    return new Date(noonZoned.getTime());\n}\nfunction convertMatcher(matcher, timeZone, noonSafe) {\n    if (typeof matcher === \"boolean\" || typeof matcher === \"function\") {\n        return matcher;\n    }\n    if (matcher instanceof Date) {\n        return toZoneNoon(matcher, timeZone, noonSafe);\n    }\n    if (Array.isArray(matcher)) {\n        return matcher.map((value) => value instanceof Date ? toZoneNoon(value, timeZone, noonSafe) : value);\n    }\n    if (isDateRange(matcher)) {\n        return {\n            ...matcher,\n            from: matcher.from ? toTimeZone(matcher.from, timeZone) : matcher.from,\n            to: matcher.to ? toTimeZone(matcher.to, timeZone) : matcher.to,\n        };\n    }\n    if (isDateInterval(matcher)) {\n        return {\n            before: toZoneNoon(matcher.before, timeZone, noonSafe),\n            after: toZoneNoon(matcher.after, timeZone, noonSafe),\n        };\n    }\n    if (isDateAfterType(matcher)) {\n        return {\n            after: toZoneNoon(matcher.after, timeZone, noonSafe),\n        };\n    }\n    if (isDateBeforeType(matcher)) {\n        return {\n            before: toZoneNoon(matcher.before, timeZone, noonSafe),\n        };\n    }\n    return matcher;\n}\n/**\n * Convert any {@link Matcher} or array of matchers to the specified time zone.\n *\n * @param matchers - The matcher or matchers to convert.\n * @param timeZone - The target IANA time zone.\n * @returns The converted matcher(s).\n * @group Utilities\n */\nexport function convertMatchersToTimeZone(matchers, timeZone, noonSafe) {\n    if (!matchers) {\n        return matchers;\n    }\n    if (Array.isArray(matchers)) {\n        return matchers.map((matcher) => convertMatcher(matcher, timeZone, noonSafe));\n    }\n    return convertMatcher(matchers, timeZone, noonSafe);\n}\n","import React, { useCallback, useMemo, useRef } from \"react\";\nimport { DateLib, defaultLocale } from \"./classes/DateLib.js\";\nimport { createGetModifiers } from \"./helpers/createGetModifiers.js\";\nimport { getClassNamesForModifiers } from \"./helpers/getClassNamesForModifiers.js\";\nimport { getComponents } from \"./helpers/getComponents.js\";\nimport { getDataAttributes } from \"./helpers/getDataAttributes.js\";\nimport { getDefaultClassNames } from \"./helpers/getDefaultClassNames.js\";\nimport { getFormatters } from \"./helpers/getFormatters.js\";\nimport { getLabels } from \"./helpers/getLabels.js\";\nimport { getMonthOptions } from \"./helpers/getMonthOptions.js\";\nimport { getStyleForModifiers } from \"./helpers/getStyleForModifiers.js\";\nimport { getWeekdays } from \"./helpers/getWeekdays.js\";\nimport { getYearOptions } from \"./helpers/getYearOptions.js\";\nimport { createNoonOverrides } from \"./noonDateLib.js\";\nimport { DayFlag, SelectionState, UI } from \"./UI.js\";\nimport { useAnimation } from \"./useAnimation.js\";\nimport { useCalendar } from \"./useCalendar.js\";\nimport { dayPickerContext } from \"./useDayPicker.js\";\nimport { useFocus } from \"./useFocus.js\";\nimport { useSelection } from \"./useSelection.js\";\nimport { convertMatchersToTimeZone } from \"./utils/convertMatchersToTimeZone.js\";\nimport { rangeIncludesDate } from \"./utils/rangeIncludesDate.js\";\nimport { toTimeZone } from \"./utils/toTimeZone.js\";\nimport { isDateRange } from \"./utils/typeguards.js\";\n/**\n * Renders the DayPicker calendar component.\n *\n * @param initialProps - The props for the DayPicker component.\n * @returns The rendered DayPicker component.\n * @group DayPicker\n * @see https://daypicker.dev\n */\nexport function DayPicker(initialProps) {\n    let props = initialProps;\n    const timeZone = props.timeZone;\n    if (timeZone) {\n        props = {\n            ...initialProps,\n            timeZone,\n        };\n        if (props.today) {\n            props.today = toTimeZone(props.today, timeZone);\n        }\n        if (props.month) {\n            props.month = toTimeZone(props.month, timeZone);\n        }\n        if (props.defaultMonth) {\n            props.defaultMonth = toTimeZone(props.defaultMonth, timeZone);\n        }\n        if (props.startMonth) {\n            props.startMonth = toTimeZone(props.startMonth, timeZone);\n        }\n        if (props.endMonth) {\n            props.endMonth = toTimeZone(props.endMonth, timeZone);\n        }\n        if (props.mode === \"single\" && props.selected) {\n            props.selected = toTimeZone(props.selected, timeZone);\n        }\n        else if (props.mode === \"multiple\" && props.selected) {\n            props.selected = props.selected?.map((date) => toTimeZone(date, timeZone));\n        }\n        else if (props.mode === \"range\" && props.selected) {\n            props.selected = {\n                from: props.selected.from\n                    ? toTimeZone(props.selected.from, timeZone)\n                    : props.selected.from,\n                to: props.selected.to\n                    ? toTimeZone(props.selected.to, timeZone)\n                    : props.selected.to,\n            };\n        }\n        if (props.disabled !== undefined) {\n            props.disabled = convertMatchersToTimeZone(props.disabled, timeZone);\n        }\n        if (props.hidden !== undefined) {\n            props.hidden = convertMatchersToTimeZone(props.hidden, timeZone);\n        }\n        if (props.modifiers) {\n            const nextModifiers = {};\n            Object.keys(props.modifiers).forEach((key) => {\n                nextModifiers[key] = convertMatchersToTimeZone(props.modifiers?.[key], timeZone);\n            });\n            props.modifiers = nextModifiers;\n        }\n    }\n    const { components, formatters, labels, dateLib, locale, classNames } = useMemo(() => {\n        const locale = { ...defaultLocale, ...props.locale };\n        const weekStartsOn = props.broadcastCalendar ? 1 : props.weekStartsOn;\n        const noonOverrides = props.noonSafe && props.timeZone\n            ? createNoonOverrides(props.timeZone, {\n                weekStartsOn,\n                locale,\n            })\n            : undefined;\n        const overrides = props.dateLib && noonOverrides\n            ? { ...noonOverrides, ...props.dateLib }\n            : (props.dateLib ?? noonOverrides);\n        const dateLib = new DateLib({\n            locale,\n            weekStartsOn,\n            firstWeekContainsDate: props.firstWeekContainsDate,\n            useAdditionalWeekYearTokens: props.useAdditionalWeekYearTokens,\n            useAdditionalDayOfYearTokens: props.useAdditionalDayOfYearTokens,\n            timeZone: props.timeZone,\n            numerals: props.numerals,\n        }, overrides);\n        return {\n            dateLib,\n            components: getComponents(props.components),\n            formatters: getFormatters(props.formatters),\n            labels: getLabels(props.labels, dateLib.options),\n            locale,\n            classNames: { ...getDefaultClassNames(), ...props.classNames },\n        };\n    }, [\n        props.locale,\n        props.broadcastCalendar,\n        props.weekStartsOn,\n        props.firstWeekContainsDate,\n        props.useAdditionalWeekYearTokens,\n        props.useAdditionalDayOfYearTokens,\n        props.timeZone,\n        props.numerals,\n        props.dateLib,\n        props.noonSafe,\n        props.components,\n        props.formatters,\n        props.labels,\n        props.classNames,\n    ]);\n    if (!props.today) {\n        props = { ...props, today: dateLib.today() };\n    }\n    const { captionLayout, mode, navLayout, numberOfMonths = 1, onDayBlur, onDayClick, onDayFocus, onDayKeyDown, onDayMouseEnter, onDayMouseLeave, onNextClick, onPrevClick, showWeekNumber, styles, } = props;\n    const { formatCaption, formatDay, formatMonthDropdown, formatWeekNumber, formatWeekNumberHeader, formatWeekdayName, formatYearDropdown, } = formatters;\n    const calendar = useCalendar(props, dateLib);\n    const { days, months, navStart, navEnd, previousMonth, nextMonth, goToMonth, } = calendar;\n    const getModifiers = createGetModifiers(days, props, navStart, navEnd, dateLib);\n    const { isSelected, select, selected: selectedValue, } = useSelection(props, dateLib) ?? {};\n    const { blur, focused, isFocusTarget, moveFocus, setFocused } = useFocus(props, calendar, getModifiers, isSelected ?? (() => false), dateLib);\n    const { labelDayButton, labelGridcell, labelGrid, labelMonthDropdown, labelNav, labelPrevious, labelNext, labelWeekday, labelWeekNumber, labelWeekNumberHeader, labelYearDropdown, } = labels;\n    const weekdays = useMemo(() => getWeekdays(dateLib, props.ISOWeek, props.broadcastCalendar, props.today), [dateLib, props.ISOWeek, props.broadcastCalendar, props.today]);\n    const isInteractive = mode !== undefined || onDayClick !== undefined;\n    const handlePreviousClick = useCallback(() => {\n        if (!previousMonth)\n            return;\n        goToMonth(previousMonth);\n        onPrevClick?.(previousMonth);\n    }, [previousMonth, goToMonth, onPrevClick]);\n    const handleNextClick = useCallback(() => {\n        if (!nextMonth)\n            return;\n        goToMonth(nextMonth);\n        onNextClick?.(nextMonth);\n    }, [goToMonth, nextMonth, onNextClick]);\n    const handleDayClick = useCallback((day, m) => (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        setFocused(day);\n        if (m.disabled) {\n            return;\n        }\n        select?.(day.date, m, e);\n        onDayClick?.(day.date, m, e);\n    }, [select, onDayClick, setFocused]);\n    const handleDayFocus = useCallback((day, m) => (e) => {\n        setFocused(day);\n        onDayFocus?.(day.date, m, e);\n    }, [onDayFocus, setFocused]);\n    const handleDayBlur = useCallback((day, m) => (e) => {\n        blur();\n        onDayBlur?.(day.date, m, e);\n    }, [blur, onDayBlur]);\n    const handleDayKeyDown = useCallback((day, modifiers) => (e) => {\n        const keyMap = {\n            ArrowLeft: [\n                e.shiftKey ? \"month\" : \"day\",\n                props.dir === \"rtl\" ? \"after\" : \"before\",\n            ],\n            ArrowRight: [\n                e.shiftKey ? \"month\" : \"day\",\n                props.dir === \"rtl\" ? \"before\" : \"after\",\n            ],\n            ArrowDown: [e.shiftKey ? \"year\" : \"week\", \"after\"],\n            ArrowUp: [e.shiftKey ? \"year\" : \"week\", \"before\"],\n            PageUp: [e.shiftKey ? \"year\" : \"month\", \"before\"],\n            PageDown: [e.shiftKey ? \"year\" : \"month\", \"after\"],\n            Home: [\"startOfWeek\", \"before\"],\n            End: [\"endOfWeek\", \"after\"],\n        };\n        if (keyMap[e.key]) {\n            e.preventDefault();\n            e.stopPropagation();\n            const [moveBy, moveDir] = keyMap[e.key];\n            moveFocus(moveBy, moveDir);\n        }\n        onDayKeyDown?.(day.date, modifiers, e);\n    }, [moveFocus, onDayKeyDown, props.dir]);\n    const handleDayMouseEnter = useCallback((day, modifiers) => (e) => {\n        onDayMouseEnter?.(day.date, modifiers, e);\n    }, [onDayMouseEnter]);\n    const handleDayMouseLeave = useCallback((day, modifiers) => (e) => {\n        onDayMouseLeave?.(day.date, modifiers, e);\n    }, [onDayMouseLeave]);\n    const handleMonthChange = useCallback((date) => (e) => {\n        const selectedMonth = Number(e.target.value);\n        const month = dateLib.setMonth(dateLib.startOfMonth(date), selectedMonth);\n        goToMonth(month);\n    }, [dateLib, goToMonth]);\n    const handleYearChange = useCallback((date) => (e) => {\n        const selectedYear = Number(e.target.value);\n        const month = dateLib.setYear(dateLib.startOfMonth(date), selectedYear);\n        goToMonth(month);\n    }, [dateLib, goToMonth]);\n    const { className, style } = useMemo(() => ({\n        className: [classNames[UI.Root], props.className]\n            .filter(Boolean)\n            .join(\" \"),\n        style: { ...styles?.[UI.Root], ...props.style },\n    }), [classNames, props.className, props.style, styles]);\n    const dataAttributes = getDataAttributes(props);\n    const rootElRef = useRef(null);\n    useAnimation(rootElRef, Boolean(props.animate), {\n        classNames,\n        months,\n        focused,\n        dateLib,\n    });\n    const contextValue = {\n        dayPickerProps: props,\n        selected: selectedValue,\n        select: select,\n        isSelected,\n        months,\n        nextMonth,\n        previousMonth,\n        goToMonth,\n        getModifiers,\n        components,\n        classNames,\n        styles,\n        labels,\n        formatters,\n    };\n    return (React.createElement(dayPickerContext.Provider, { value: contextValue },\n        React.createElement(components.Root, { rootRef: props.animate ? rootElRef : undefined, className: className, style: style, dir: props.dir, id: props.id, lang: props.lang, nonce: props.nonce, title: props.title, role: props.role, \"aria-label\": props[\"aria-label\"], \"aria-labelledby\": props[\"aria-labelledby\"], ...dataAttributes },\n            React.createElement(components.Months, { className: classNames[UI.Months], style: styles?.[UI.Months] },\n                !props.hideNavigation && !navLayout && (React.createElement(components.Nav, { \"data-animated-nav\": props.animate ? \"true\" : undefined, className: classNames[UI.Nav], style: styles?.[UI.Nav], \"aria-label\": labelNav(), onPreviousClick: handlePreviousClick, onNextClick: handleNextClick, previousMonth: previousMonth, nextMonth: nextMonth })),\n                months.map((calendarMonth, displayIndex) => {\n                    return (React.createElement(components.Month, { \"data-animated-month\": props.animate ? \"true\" : undefined, className: classNames[UI.Month], style: styles?.[UI.Month], \n                        // biome-ignore lint/suspicious/noArrayIndexKey: breaks animation\n                        key: displayIndex, displayIndex: displayIndex, calendarMonth: calendarMonth },\n                        navLayout === \"around\" &&\n                            !props.hideNavigation &&\n                            displayIndex === 0 && (React.createElement(components.PreviousMonthButton, { type: \"button\", className: classNames[UI.PreviousMonthButton], tabIndex: previousMonth ? undefined : -1, \"aria-disabled\": previousMonth ? undefined : true, \"aria-label\": labelPrevious(previousMonth), onClick: handlePreviousClick, \"data-animated-button\": props.animate ? \"true\" : undefined },\n                            React.createElement(components.Chevron, { disabled: previousMonth ? undefined : true, className: classNames[UI.Chevron], orientation: props.dir === \"rtl\" ? \"right\" : \"left\" }))),\n                        React.createElement(components.MonthCaption, { \"data-animated-caption\": props.animate ? \"true\" : undefined, className: classNames[UI.MonthCaption], style: styles?.[UI.MonthCaption], calendarMonth: calendarMonth, displayIndex: displayIndex }, captionLayout?.startsWith(\"dropdown\") ? (React.createElement(components.DropdownNav, { className: classNames[UI.Dropdowns], style: styles?.[UI.Dropdowns] },\n                            (() => {\n                                const monthControl = captionLayout === \"dropdown\" ||\n                                    captionLayout === \"dropdown-months\" ? (React.createElement(components.MonthsDropdown, { key: \"month\", className: classNames[UI.MonthsDropdown], \"aria-label\": labelMonthDropdown(), classNames: classNames, components: components, disabled: Boolean(props.disableNavigation), onChange: handleMonthChange(calendarMonth.date), options: getMonthOptions(calendarMonth.date, navStart, navEnd, formatters, dateLib), style: styles?.[UI.Dropdown], value: dateLib.getMonth(calendarMonth.date) })) : (React.createElement(\"span\", { key: \"month\" }, formatMonthDropdown(calendarMonth.date, dateLib)));\n                                const yearControl = captionLayout === \"dropdown\" ||\n                                    captionLayout === \"dropdown-years\" ? (React.createElement(components.YearsDropdown, { key: \"year\", className: classNames[UI.YearsDropdown], \"aria-label\": labelYearDropdown(dateLib.options), classNames: classNames, components: components, disabled: Boolean(props.disableNavigation), onChange: handleYearChange(calendarMonth.date), options: getYearOptions(navStart, navEnd, formatters, dateLib, Boolean(props.reverseYears)), style: styles?.[UI.Dropdown], value: dateLib.getYear(calendarMonth.date) })) : (React.createElement(\"span\", { key: \"year\" }, formatYearDropdown(calendarMonth.date, dateLib)));\n                                const controls = dateLib.getMonthYearOrder() === \"year-first\"\n                                    ? [yearControl, monthControl]\n                                    : [monthControl, yearControl];\n                                return controls;\n                            })(),\n                            React.createElement(\"span\", { role: \"status\", \"aria-live\": \"polite\", style: {\n                                    border: 0,\n                                    clip: \"rect(0 0 0 0)\",\n                                    height: \"1px\",\n                                    margin: \"-1px\",\n                                    overflow: \"hidden\",\n                                    padding: 0,\n                                    position: \"absolute\",\n                                    width: \"1px\",\n                                    whiteSpace: \"nowrap\",\n                                    wordWrap: \"normal\",\n                                } }, formatCaption(calendarMonth.date, dateLib.options, dateLib)))) : (React.createElement(components.CaptionLabel, { className: classNames[UI.CaptionLabel], role: \"status\", \"aria-live\": \"polite\" }, formatCaption(calendarMonth.date, dateLib.options, dateLib)))),\n                        navLayout === \"around\" &&\n                            !props.hideNavigation &&\n                            displayIndex === numberOfMonths - 1 && (React.createElement(components.NextMonthButton, { type: \"button\", className: classNames[UI.NextMonthButton], tabIndex: nextMonth ? undefined : -1, \"aria-disabled\": nextMonth ? undefined : true, \"aria-label\": labelNext(nextMonth), onClick: handleNextClick, \"data-animated-button\": props.animate ? \"true\" : undefined },\n                            React.createElement(components.Chevron, { disabled: nextMonth ? undefined : true, className: classNames[UI.Chevron], orientation: props.dir === \"rtl\" ? \"left\" : \"right\" }))),\n                        displayIndex === numberOfMonths - 1 &&\n                            navLayout === \"after\" &&\n                            !props.hideNavigation && (React.createElement(components.Nav, { \"data-animated-nav\": props.animate ? \"true\" : undefined, className: classNames[UI.Nav], style: styles?.[UI.Nav], \"aria-label\": labelNav(), onPreviousClick: handlePreviousClick, onNextClick: handleNextClick, previousMonth: previousMonth, nextMonth: nextMonth })),\n                        React.createElement(components.MonthGrid, { role: \"grid\", \"aria-multiselectable\": mode === \"multiple\" || mode === \"range\", \"aria-label\": labelGrid(calendarMonth.date, dateLib.options, dateLib) ||\n                                undefined, className: classNames[UI.MonthGrid], style: styles?.[UI.MonthGrid] },\n                            !props.hideWeekdays && (React.createElement(components.Weekdays, { \"data-animated-weekdays\": props.animate ? \"true\" : undefined, className: classNames[UI.Weekdays], style: styles?.[UI.Weekdays] },\n                                showWeekNumber && (React.createElement(components.WeekNumberHeader, { \"aria-label\": labelWeekNumberHeader(dateLib.options), className: classNames[UI.WeekNumberHeader], style: styles?.[UI.WeekNumberHeader], scope: \"col\" }, formatWeekNumberHeader())),\n                                weekdays.map((weekday) => (React.createElement(components.Weekday, { \"aria-label\": labelWeekday(weekday, dateLib.options, dateLib), className: classNames[UI.Weekday], key: String(weekday), style: styles?.[UI.Weekday], scope: \"col\" }, formatWeekdayName(weekday, dateLib.options, dateLib)))))),\n                            React.createElement(components.Weeks, { \"data-animated-weeks\": props.animate ? \"true\" : undefined, className: classNames[UI.Weeks], style: styles?.[UI.Weeks] }, calendarMonth.weeks.map((week) => {\n                                return (React.createElement(components.Week, { className: classNames[UI.Week], key: week.weekNumber, style: styles?.[UI.Week], week: week },\n                                    showWeekNumber && (React.createElement(components.WeekNumber, { week: week, style: styles?.[UI.WeekNumber], \"aria-label\": labelWeekNumber(week.weekNumber, {\n                                            locale,\n                                        }), className: classNames[UI.WeekNumber], scope: \"row\", role: \"rowheader\" }, formatWeekNumber(week.weekNumber, dateLib))),\n                                    week.days.map((day) => {\n                                        const { date } = day;\n                                        const modifiers = getModifiers(day);\n                                        modifiers[DayFlag.focused] =\n                                            !modifiers.hidden &&\n                                                Boolean(focused?.isEqualTo(day));\n                                        modifiers[SelectionState.selected] =\n                                            isSelected?.(date) || modifiers.selected;\n                                        if (isDateRange(selectedValue)) {\n                                            // add range modifiers\n                                            const { from, to } = selectedValue;\n                                            modifiers[SelectionState.range_start] = Boolean(from && to && dateLib.isSameDay(date, from));\n                                            modifiers[SelectionState.range_end] = Boolean(from && to && dateLib.isSameDay(date, to));\n                                            modifiers[SelectionState.range_middle] =\n                                                rangeIncludesDate(selectedValue, date, true, dateLib);\n                                        }\n                                        const style = getStyleForModifiers(modifiers, styles, props.modifiersStyles);\n                                        const className = getClassNamesForModifiers(modifiers, classNames, props.modifiersClassNames);\n                                        const ariaLabel = !isInteractive && !modifiers.hidden\n                                            ? labelGridcell(date, modifiers, dateLib.options, dateLib)\n                                            : undefined;\n                                        return (React.createElement(components.Day, { key: `${day.isoDate}_${day.displayMonthId}`, day: day, modifiers: modifiers, className: className.join(\" \"), style: style, role: \"gridcell\", \"aria-selected\": modifiers.selected || undefined, \"aria-label\": ariaLabel, \"data-day\": day.isoDate, \"data-month\": day.outside ? day.dateMonthId : undefined, \"data-selected\": modifiers.selected || undefined, \"data-disabled\": modifiers.disabled || undefined, \"data-hidden\": modifiers.hidden || undefined, \"data-outside\": day.outside || undefined, \"data-focused\": modifiers.focused || undefined, \"data-today\": modifiers.today || undefined }, !modifiers.hidden && isInteractive ? (React.createElement(components.DayButton, { className: classNames[UI.DayButton], style: styles?.[UI.DayButton], type: \"button\", day: day, modifiers: modifiers, disabled: (!modifiers.focused &&\n                                                modifiers.disabled) ||\n                                                undefined, \"aria-disabled\": (modifiers.focused &&\n                                                modifiers.disabled) ||\n                                                undefined, tabIndex: isFocusTarget(day) ? 0 : -1, \"aria-label\": labelDayButton(date, modifiers, dateLib.options, dateLib), onClick: handleDayClick(day, modifiers), onBlur: handleDayBlur(day, modifiers), onFocus: handleDayFocus(day, modifiers), onKeyDown: handleDayKeyDown(day, modifiers), onMouseEnter: handleDayMouseEnter(day, modifiers), onMouseLeave: handleDayMouseLeave(day, modifiers) }, formatDay(date, dateLib.options, dateLib))) : (!modifiers.hidden &&\n                                            formatDay(day.date, dateLib.options, dateLib))));\n                                    })));\n                            })))));\n                })),\n            props.footer && (React.createElement(components.Footer, { className: classNames[UI.Footer], style: styles?.[UI.Footer], role: \"status\", \"aria-live\": \"polite\" }, props.footer)))));\n}\n","import React from 'react';\r\nimport { DayPicker } from 'react-day-picker';\r\nimport 'react-day-picker/dist/style.css';\r\nimport './calendar.scss';\r\n\r\ntype CalendarProps = {\r\n  selected?: Date;\r\n  onSelect?: (date: Date | undefined) => void;\r\n};\r\n\r\nexport function Calendar({ selected, onSelect }: CalendarProps) {\r\n  return (\r\n    <div className=\"lm-calendar-container\">\r\n      <DayPicker\r\n        mode=\"single\"\r\n        selected={selected}\r\n        onSelect={onSelect}\r\n        captionLayout=\"dropdown\"\r\n        fromYear={1950}\r\n        toYear={new Date().getFullYear() + 10}\r\n        classNames={{\r\n          caption_label: 'lm-calendar-caption-label',\r\n          dropdown: 'lm-calendar-select-dropdown',\r\n          //  rdp  SCSS \r\n          root: 'rdp-root-custom',\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}","import React, { useState } from 'react';\r\nimport {\r\n  useFloating,\r\n  offset,\r\n  flip,\r\n  shift,\r\n  size,\r\n  autoUpdate,\r\n} from '@floating-ui/react';\r\nimport { TextInput } from '../text-input/text-input';\r\nimport { Calendar } from './calendar';\r\nimport { format } from 'date-fns';\r\nimport { Icon } from '../../../icon/icon';\r\nimport './date-input.scss';\r\n\r\nexport type DateInputProps = {\r\n  label?: string;\r\n  value?: string;\r\n  onChange?: (value: string) => void;\r\n  placeholder?: string;\r\n};\r\n\r\nexport function DateInput({\r\n  label,\r\n  value,\r\n  onChange,\r\n  placeholder = 'Select date',\r\n}: DateInputProps) {\r\n  const [open, setOpen] = useState(false);\r\n  const selectedDate = value ? new Date(value) : undefined;\r\n\r\n  const { refs, floatingStyles } = useFloating({\r\n    open,\r\n    onOpenChange: setOpen,\r\n    placement: 'bottom-start',\r\n    whileElementsMounted: autoUpdate,\r\n    middleware: [\r\n      offset(4),\r\n      flip(),\r\n      shift({ padding: 8 }),\r\n      size({\r\n        apply({ rects, elements }) {\r\n          Object.assign(elements.floating.style, {\r\n            width: `${Math.max(rects.reference.width, 280)}px`,\r\n            maxWidth: '320px',\r\n          });\r\n        },\r\n      }),\r\n    ],\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        ref={refs.setReference}\r\n        className=\"lm-date-input-container\"\r\n        onClick={() => setOpen(true)}\r\n      >\r\n        <TextInput\r\n          label={label}\r\n          type=\"text\"\r\n          readOnly\r\n          value={value ?? ''}\r\n          placeholder={placeholder}\r\n          className=\"lm-date-input-field\"\r\n          style={{ cursor: 'pointer' }}\r\n          trailingIcon={\r\n            <span className=\"lm-date-input-calendar-icon\" aria-hidden>\r\n              <Icon icon=\"mingcute:calendar-line\" size={20} />\r\n            </span>\r\n          }\r\n        />\r\n        {/* Click Overlay */}\r\n        <div className=\"lm-date-input-overlay\" aria-hidden />\r\n      </div>\r\n\r\n      {open && (\r\n        <div\r\n          ref={refs.setFloating}\r\n          style={{\r\n            ...(floatingStyles as React.CSSProperties),\r\n            zIndex: 1000,\r\n          }}\r\n          className=\"lm-date-input-calendar-wrapper\"\r\n          role=\"dialog\"\r\n        >\r\n          <div className=\"lm-date-input-inner-calendar\">\r\n            <Calendar\r\n              selected={selectedDate}\r\n              onSelect={(d) => {\r\n                if (d) {\r\n                  onChange?.(format(d, 'yyyy-MM-dd'));\r\n                }\r\n                setOpen(false);\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}","import React, { useId } from 'react';\r\nimport classNames from 'classnames';\r\nimport './checkbox.scss';\r\n\r\nexport interface CheckboxProps extends Omit<React.InputHTMLAttributes<HTMLInputElement>, 'size'> {\r\n  label?: string;\r\n  size?: 'sm' | 'md' | 'lg';\r\n  indeterminate?: boolean;\r\n}\r\n\r\nexport const Checkbox = React.forwardRef<HTMLInputElement, CheckboxProps>(\r\n  ({ label, size = 'md', indeterminate, className, disabled, ...props }, ref) => {\r\n    const defaultId = useId();\r\n    const id = props.id || defaultId;\r\n\r\n    //  Indeterminate  Ref\r\n    React.useEffect(() => {\r\n      if (ref && typeof ref !== 'function' && ref.current) {\r\n        ref.current.indeterminate = !!indeterminate;\r\n      }\r\n    }, [indeterminate, ref]);\r\n\r\n    return (\r\n      <div className={classNames('lm-checkbox-container', `is-${size}`, { 'is-disabled': disabled }, className)}>\r\n        <div className=\"lm-checkbox-input-wrapper\">\r\n          <input\r\n            type=\"checkbox\"\r\n            className=\"lm-checkbox-hidden-input\"\r\n            id={id}\r\n            ref={ref}\r\n            disabled={disabled}\r\n            {...props}\r\n          />\r\n          <div className=\"lm-checkbox-control\">\r\n            {/*  */}\r\n            <svg \r\n              className=\"lm-checkbox-check-icon\" \r\n              viewBox=\"0 0 12 10\" \r\n              fill=\"none\" \r\n              stroke=\"currentColor\" \r\n              strokeWidth=\"2.5\" \r\n              strokeLinecap=\"round\" \r\n              strokeLinejoin=\"round\"\r\n            >\r\n              <polyline points=\"1.5 5 4.5 8 10.5 2\" />\r\n            </svg>\r\n            {/*  */}\r\n            <div className=\"lm-checkbox-indeterminate-icon\" />\r\n          </div>\r\n        </div>\r\n        {label && (\r\n          <label htmlFor={id} className=\"lm-checkbox-label\">\r\n            {label}\r\n          </label>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\nCheckbox.displayName = 'Checkbox';","import React, { useState } from 'react';\r\nimport {\r\n  useFloating,\r\n  offset,\r\n  flip,\r\n  shift,\r\n  size,\r\n  autoUpdate,\r\n  useInteractions,\r\n  useClick,\r\n  useDismiss,\r\n  useRole,\r\n  FloatingPortal,\r\n  FloatingFocusManager,\r\n} from '@floating-ui/react';\r\nimport classNames from 'classnames';\r\nimport './select.scss'; //   .module.scss\r\n\r\nexport interface SelectOption {\r\n  label: string;\r\n  value: string | number;\r\n}\r\n\r\nexport interface SelectProps {\r\n  options: SelectOption[];\r\n  value?: string | number;\r\n  onChange: (value: string | number) => void;\r\n  placeholder?: string;\r\n  label?: string;\r\n  disabled?: boolean;\r\n  className?: string;\r\n}\r\n\r\nexport function Select({\r\n  options,\r\n  value,\r\n  onChange,\r\n  placeholder = '...',\r\n  label,\r\n  disabled,\r\n  className,\r\n}: SelectProps) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  const { refs, floatingStyles, context } = useFloating({\r\n    open: isOpen,\r\n    onOpenChange: setIsOpen,\r\n    middleware: [\r\n      offset(4),\r\n      flip(),\r\n      shift(),\r\n      size({\r\n        apply({ rects, elements }) {\r\n          Object.assign(elements.floating.style, {\r\n            width: `${rects.reference.width}px`,\r\n          });\r\n        },\r\n      }),\r\n    ],\r\n    whileElementsMounted: autoUpdate,\r\n  });\r\n\r\n  const click = useClick(context);\r\n  const dismiss = useDismiss(context);\r\n  const role = useRole(context, { role: 'listbox' });\r\n\r\n  const { getReferenceProps, getFloatingProps } = useInteractions([click, dismiss, role]);\r\n\r\n  const selectedOption = options.find((opt) => opt.value === value);\r\n\r\n  return (\r\n    <div className={classNames('lm-select-container', className)}>\r\n      {label && <label className=\"lm-select-label\">{label}</label>}\r\n      \r\n      <div\r\n        ref={refs.setReference}\r\n        className={classNames('lm-select-control', { \r\n          'is-open': isOpen, \r\n          'is-disabled': disabled \r\n        })}\r\n        {...getReferenceProps()}\r\n      >\r\n        <span className={classNames('lm-select-value', { 'is-placeholder': !selectedOption })}>\r\n          {selectedOption ? selectedOption.label : placeholder}\r\n        </span>\r\n        <svg className=\"lm-select-chevron\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n          <path fillRule=\"evenodd\" d=\"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z\" clipRule=\"evenodd\" />\r\n        </svg>\r\n      </div>\r\n\r\n      <FloatingPortal>\r\n        {isOpen && (\r\n          <FloatingFocusManager context={context} modal={false}>\r\n            <div\r\n              ref={refs.setFloating}\r\n              style={floatingStyles}\r\n              className=\"lm-select-menu\"\r\n              {...getFloatingProps()}\r\n            >\r\n              {options.map((option) => (\r\n                <div\r\n                  key={option.value}\r\n                  className={classNames('lm-select-option', {\r\n                    'is-selected': option.value === value,\r\n                  })}\r\n                  onClick={() => {\r\n                    onChange(option.value);\r\n                    setIsOpen(false);\r\n                  }}\r\n                >\r\n                  {option.label}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </FloatingFocusManager>\r\n        )}\r\n      </FloatingPortal>\r\n    </div>\r\n  );\r\n}","import {\r\n  createContext,\r\n  useContext,\r\n  useState,\r\n  useCallback,\r\n  useEffect,\r\n  type ReactNode,\r\n} from 'react';\r\n\r\nexport type ThemeMode = 'light' | 'dark';\r\n\r\nexport interface ThemeContextValue {\r\n  themeMode: ThemeMode; //   theme  themeMode  jpjoy-theme.tsx\r\n  toggleTheme: () => void;\r\n  setThemeMode: (mode: ThemeMode) => void; //  \r\n}\r\n\r\n//  Context\r\nexport const ThemeContext = createContext<ThemeContextValue | undefined>(undefined);\r\n\r\n/* =========================\r\n   ThemeProvider\r\n========================= */\r\nexport function ThemeProvider({\r\n  children,\r\n  initialTheme = 'light',\r\n}: {\r\n  children: ReactNode;\r\n  initialTheme?: ThemeMode;\r\n}) {\r\n  //  LocalStorage   initialTheme\r\n  const [themeMode, setThemeModeState] = useState<ThemeMode>(() => {\r\n    if (typeof window !== 'undefined') {\r\n      const saved = localStorage.getItem('jpjoy-theme-mode') as ThemeMode;\r\n      return saved || initialTheme;\r\n    }\r\n    return initialTheme;\r\n  });\r\n\r\n  //  Attribute  <html>  LocalStorage\r\n  const updateTheme = (mode: ThemeMode) => {\r\n    document.documentElement.dataset.theme = mode;\r\n    localStorage.setItem('jpjoy-theme-mode', mode);\r\n  };\r\n\r\n  const setThemeMode = useCallback((mode: ThemeMode) => {\r\n    setThemeModeState(mode);\r\n    updateTheme(mode);\r\n  }, []);\r\n\r\n  const toggleTheme = useCallback(() => {\r\n    setThemeModeState((prev) => {\r\n      const next = prev === 'light' ? 'dark' : 'light';\r\n      updateTheme(next);\r\n      return next;\r\n    });\r\n  }, []);\r\n\r\n  // Sync \r\n  useEffect(() => {\r\n    updateTheme(themeMode);\r\n  }, [themeMode]);\r\n\r\n  return (\r\n    <ThemeContext.Provider value={{ themeMode, toggleTheme, setThemeMode }}>\r\n      {children}\r\n    </ThemeContext.Provider>\r\n  );\r\n}\r\n\r\n/* =========================\r\n   Public hook\r\n========================= */\r\nexport function useTheme(): ThemeContextValue {\r\n  const context = useContext(ThemeContext);\r\n  if (!context) {\r\n    throw new Error('useTheme must be used within ThemeProvider');\r\n  }\r\n  return context;\r\n}","import React from 'react';\r\n\r\nexport function SunIcon(props: React.SVGProps<SVGSVGElement>) {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width=\"24\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      fill=\"none\"\r\n      stroke=\"currentColor\"\r\n      strokeWidth=\"2\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      {...props}\r\n    >\r\n      <circle cx=\"12\" cy=\"12\" r=\"5\" />\r\n      <line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"3\" />\r\n      <line x1=\"12\" y1=\"21\" x2=\"12\" y2=\"23\" />\r\n      <line x1=\"4.22\" y1=\"4.22\" x2=\"5.64\" y2=\"5.64\" />\r\n      <line x1=\"18.36\" y1=\"18.36\" x2=\"19.78\" y2=\"19.78\" />\r\n      <line x1=\"1\" y1=\"12\" x2=\"3\" y2=\"12\" />\r\n      <line x1=\"21\" y1=\"12\" x2=\"23\" y2=\"12\" />\r\n      <line x1=\"4.22\" y1=\"19.78\" x2=\"5.64\" y2=\"18.36\" />\r\n      <line x1=\"18.36\" y1=\"5.64\" x2=\"19.78\" y2=\"4.22\" />\r\n    </svg>\r\n  );\r\n}","import React from 'react';\r\n\r\nexport function MoonIcon(props: React.SVGProps<SVGSVGElement>) {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width=\"24\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      fill=\"none\"\r\n      stroke=\"currentColor\"\r\n      strokeWidth=\"2\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      {...props}\r\n    >\r\n      <path d=\"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z\" />\r\n    </svg>\r\n  );\r\n}","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport { useTheme } from '../../../theme/theme-controller';\r\nimport { SunIcon } from './sun-icon';\r\nimport { MoonIcon } from './moon-icon';\r\nimport './theme-toggler.scss'; //   .module.scss\r\n\r\nexport interface ThemeTogglerProps {\r\n  className?: string;\r\n}\r\n\r\nexport function ThemeToggler({ className }: ThemeTogglerProps) {\r\n  //   themeMode  Theme\r\n  const { themeMode, toggleTheme } = useTheme(); \r\n  \r\n  const isDark = themeMode === 'dark';\r\n\r\n  return (\r\n    <button\r\n      className={classNames('lm-theme-toggler', className)}\r\n      onClick={toggleTheme}\r\n      type=\"button\"\r\n      aria-label={isDark ? \"Switch to light mode\" : \"Switch to dark mode\"}\r\n    >\r\n      <div className=\"lm-theme-toggler-icon-wrapper\">\r\n        <SunIcon \r\n          className={classNames('lm-theme-toggler-icon', 'is-sun', { 'is-active': !isDark })} \r\n          aria-hidden=\"true\"\r\n        />\r\n        <MoonIcon \r\n          className={classNames('lm-theme-toggler-icon', 'is-moon', { 'is-active': isDark })} \r\n          aria-hidden=\"true\"\r\n        />\r\n      </div>\r\n    </button>\r\n  );\r\n}","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport { Button } from '../../forms/button';\r\nimport { Link } from '../../navigation/link';\r\nimport { Icon } from '../../../icon/icon';\r\nimport './footer.scss'; //   CSS Modules  Global SCSS\r\n\r\nexport type FooterProps = {\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n};\r\n\r\nexport function Footer({ className, style }: FooterProps) {\r\n  //   Class String  Prefix 'lm-footer'\r\n  return (\r\n    <footer className={classNames('lm-footer', className)} style={style}>\r\n      <div className=\"lm-footer-container\">\r\n        \r\n        {/* :  */}\r\n        <div className=\"lm-footer-top\">\r\n          <span className=\"lm-footer-label\">Download</span>\r\n          <div className=\"lm-footer-stores\">\r\n            <Button\r\n              appearance=\"outline\"\r\n              className=\"lm-footer-store-btn\"\r\n              href=\"https://www.apple.com/app-store/\"\r\n              external\r\n            >\r\n              <Icon icon=\"mingcute:apple-fill\" size={20} />\r\n              <span>App store</span> {/*   span  alignment */}\r\n            </Button>\r\n            \r\n            <Button\r\n              appearance=\"outline\"\r\n              className=\"lm-footer-store-btn\"\r\n              href=\"https://play.google.com/store\"\r\n              external\r\n            >\r\n              <Icon icon=\"mingcute:google-play-fill\" size={20} />\r\n              <span>Google play</span>\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"lm-footer-divider\" />\r\n\r\n        {/* : Copyright, Links  Social Media */}\r\n        <div className=\"lm-footer-bottom\">\r\n          <div className=\"lm-footer-left-group\">\r\n            <span className=\"lm-footer-copyright\">&copy; LY Corporation</span>\r\n            <div className=\"lm-footer-links\">\r\n              <Link href=\"/help\" className=\"lm-footer-link\">Help</Link>\r\n              <Link href=\"/terms\" className=\"lm-footer-link\">User Agreement</Link>\r\n              <Link href=\"/privacy\" className=\"lm-footer-link\">Privacy Policy</Link>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"lm-footer-socials\">\r\n            <Link href=\"https://facebook.com\" external noStyles>\r\n              <Icon icon=\"mingcute:facebook-fill\" size={24} className=\"lm-footer-social-icon\" />\r\n            </Link>\r\n            \r\n            <Link href=\"https://instagram.com\" external noStyles>\r\n              <Icon icon=\"mingcute:ins-line\" size={24} className=\"lm-footer-social-icon\" />\r\n            </Link>\r\n            \r\n            <Link href=\"https://youtube.com\" external noStyles>\r\n              <Icon icon=\"mingcute:youtube-fill\" size={24} className=\"lm-footer-social-icon\" />\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </footer>\r\n  );\r\n}","import React from 'react';\r\n\r\nexport function ArrowLeftIcon(props: React.SVGProps<SVGSVGElement>) {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width=\"24\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      fill=\"none\"\r\n      stroke=\"currentColor\"\r\n      strokeWidth=\"2\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      {...props}\r\n    >\r\n      <path d=\"M19 12H5\" />\r\n      <path d=\"M12 19l-7-7 7-7\" />\r\n    </svg>\r\n  );\r\n}","import React, { type ReactNode } from 'react';\r\nimport classNames from 'classnames';\r\nimport { Logo } from '../../data-display/logo';\r\nimport { Link } from '../../navigation/link';\r\nimport { IconButton } from '../../forms/icon-button/icon-button';\r\nimport { ArrowLeftIcon } from './arrow-left-icon';\r\nimport type { HeaderNavItem } from './header-nav-item-type';\r\nimport './header.scss'; //   Global SCSS\r\n\r\nexport type HeaderProps = {\r\n  variant?: 'website' | 'app';\r\n  title?: string;\r\n  navItems?: HeaderNavItem[];\r\n  action?: ReactNode;\r\n  onBack?: () => void;\r\n  rightContent?: ReactNode;\r\n  logoName?: string;\r\n  logoHref?: string;\r\n  customLogo?: ReactNode;\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n};\r\n\r\nexport function Header({\r\n  variant = 'website',\r\n  title,\r\n  navItems = [],\r\n  action,\r\n  onBack,\r\n  rightContent,\r\n  logoName = 'LOOKMIX',\r\n  logoHref = '/',\r\n  customLogo,\r\n  className,\r\n  style,\r\n}: HeaderProps) {\r\n  const isWebsite = variant === 'website';\r\n  const isApp = variant === 'app';\r\n\r\n  //   Class String  Prefix 'lm-header'\r\n  const headerClasses = classNames('lm-header', `is-${variant}`, className);\r\n\r\n  return (\r\n    <header className={headerClasses} style={style}>\r\n      <div className=\"lm-header-container\">\r\n        {isWebsite && (\r\n          <>\r\n            <div className=\"lm-header-left\">\r\n              {customLogo || <Logo name={logoName} href={logoHref} />}\r\n            </div>\r\n\r\n            <nav className=\"lm-header-nav\">\r\n              {navItems.map((item, index) => (\r\n                <Link key={index} href={item.href} className=\"lm-header-nav-link\">\r\n                  {item.label}\r\n                </Link>\r\n              ))}\r\n            </nav>\r\n\r\n            <div className=\"lm-header-actions\">\r\n              {action}\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n        {isApp && (\r\n          <>\r\n            <div className=\"lm-header-app-left\">\r\n              {onBack && (\r\n                <IconButton\r\n                  onClick={onBack}\r\n                  icon={<ArrowLeftIcon />}\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  shape=\"circle\"\r\n                  aria-label=\"Go back\"\r\n                />\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"lm-header-app-center\">\r\n              {title && <h1 className=\"lm-header-app-title\">{title}</h1>}\r\n            </div>\r\n\r\n            <div className=\"lm-header-app-right\">\r\n              {rightContent}\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </header>\r\n  );\r\n}","import React from 'react';\r\nimport { Link } from '../../navigation/link';\r\nimport classNames from 'classnames';\r\nimport './tab-bar.scss'; //   Global SCSS\r\nimport type { TabBarItem } from './tab-bar-item-type';\r\n\r\nexport type TabBarProps = {\r\n  items: TabBarItem[];\r\n  selectedValue?: string;\r\n  onTabChange?: (value: string) => void;\r\n  fullWidth?: boolean;\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n};\r\n\r\nexport function TabBar({\r\n  items,\r\n  selectedValue,\r\n  onTabChange,\r\n  fullWidth = false,\r\n  className,\r\n  style,\r\n}: TabBarProps) {\r\n  //   Class String  Prefix 'lm-tab-bar'\r\n  const containerClasses = classNames('lm-tab-bar', {\r\n    'is-full-width': fullWidth,\r\n  }, className);\r\n\r\n  return (\r\n    <nav\r\n      className={containerClasses}\r\n      style={style}\r\n      role=\"tablist\"\r\n    >\r\n      {items.map((item) => {\r\n        const isSelected = selectedValue === item.value;\r\n\r\n        const handleClick = () => {\r\n          onTabChange?.(item.value);\r\n        };\r\n\r\n        const content = (\r\n          <>\r\n            {item.icon && <span className=\"lm-tab-bar-icon\">{item.icon}</span>}\r\n            <span className=\"lm-tab-bar-label\">{item.label}</span>\r\n          </>\r\n        );\r\n\r\n        const tabClasses = classNames('lm-tab-bar-item', {\r\n          'is-active': isSelected,\r\n        });\r\n\r\n        if (item.href) {\r\n          return (\r\n            <Link\r\n              key={item.value}\r\n              href={item.href}\r\n              onClick={handleClick}\r\n              className={tabClasses}\r\n              role=\"tab\"\r\n              aria-selected={isSelected}\r\n              noStyles\r\n            >\r\n              {content}\r\n            </Link>\r\n          );\r\n        }\r\n\r\n        return (\r\n          <button\r\n            key={item.value}\r\n            type=\"button\"\r\n            onClick={handleClick}\r\n            className={tabClasses}\r\n            role=\"tab\"\r\n            aria-selected={isSelected}\r\n          >\r\n            {content}\r\n          </button>\r\n        );\r\n      })}\r\n    </nav>\r\n  );\r\n}","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport { Link } from '../../navigation/link/link';\r\nimport { Icon } from '../../../icon/icon';\r\nimport './breadcrumbs.scss';\r\n\r\nexport type BreadcrumbItem = {\r\n  label: string;\r\n  href?: string;\r\n};\r\n\r\nexport type BreadcrumbsProps = {\r\n  items: BreadcrumbItem[];\r\n  className?: string;\r\n};\r\n\r\nexport function Breadcrumbs({ items, className }: BreadcrumbsProps) {\r\n  return (\r\n    <nav \r\n      aria-label=\"Breadcrumb\" \r\n      className={classNames('lm-breadcrumbs', className)}\r\n    >\r\n      <ol className=\"lm-breadcrumbs-list\">\r\n        {items.map((item, index) => {\r\n          const isLast = index === items.length - 1;\r\n\r\n          return (\r\n            <li key={index} className=\"lm-breadcrumbs-item\">\r\n              {!isLast && item.href ? (\r\n                <Link href={item.href} className=\"lm-breadcrumbs-link\">\r\n                  {item.label}\r\n                </Link>\r\n              ) : (\r\n                <span className=\"lm-breadcrumbs-current\" aria-current=\"page\">\r\n                  {item.label}\r\n                </span>\r\n              )}\r\n              \r\n              {!isLast && (\r\n                <span className=\"lm-breadcrumbs-separator\" aria-hidden=\"true\">\r\n                  <Icon icon=\"mingcute:right-line\" size={14} />\r\n                </span>\r\n              )}\r\n            </li>\r\n          );\r\n        })}\r\n      </ol>\r\n    </nav>\r\n  );\r\n}","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport './label.scss'; //   CSS Modules  Global SCSS\r\n\r\nexport type LabelProps = {\r\n  children: React.ReactNode;\r\n  /**  Label */\r\n  variant?: 'default' | 'medium';\r\n  /**  */\r\n  color?: 'primary' | 'secondary';\r\n  /**  */\r\n  className?: string;\r\n  /** HTML Tag  (default: span) */\r\n  as?: 'span' | 'label' | 'p' | 'div';\r\n};\r\n\r\nexport function Label({\r\n  children,\r\n  variant = 'default',\r\n  color = 'primary',\r\n  className,\r\n  as: Component = 'span',\r\n}: LabelProps) {\r\n  \r\n  //   Class String  Prefix 'lm-label'\r\n  const labelClasses = classNames(\r\n    'lm-label-base',\r\n    `is-variant-${variant}`,\r\n    `is-color-${color}`,\r\n    className\r\n  );\r\n\r\n  return <Component className={labelClasses}>{children}</Component>;\r\n}","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport './product-card.scss';\r\nimport { Link } from '../../navigation/link';\r\n\r\nexport type ProductCardProps = {\r\n  id: string;\r\n  title: string;\r\n  price: number;\r\n  discountPrice?: number;\r\n  imageUrl: string;\r\n  brand?: string;\r\n  tag?: string;\r\n  isOutOfStock?: boolean;\r\n  href: string;\r\n  onClick?: () => void;\r\n  onAddToCart?: (id: string) => void;\r\n};\r\n\r\nexport function ProductCard({\r\n  id,\r\n  title,\r\n  price,\r\n  discountPrice,\r\n  imageUrl,\r\n  brand,\r\n  tag,\r\n  isOutOfStock,\r\n  href,\r\n  onClick,\r\n  onAddToCart\r\n}: ProductCardProps) {\r\n  const hasDiscount = discountPrice !== undefined && discountPrice < price;\r\n\r\n  const handleCartClick = (e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    onAddToCart?.(id);\r\n  };\r\n\r\n  return (\r\n    <div className={classNames('product-card', { 'is-out-of-stock': isOutOfStock })}>\r\n      <Link href={href} className=\"product-card-link-wrapper\" noStyles onClick={onClick}>\r\n        <div className=\"product-card-image-container\">\r\n          {tag && <span className=\"product-card-tag-badge\">{tag}</span>}\r\n          <img src={imageUrl} alt={title} className=\"product-card-image\" />\r\n          \r\n          {isOutOfStock && (\r\n            <div className=\"product-card-overlay\">\r\n              <span className=\"product-card-sold-out-text\">OUT OF STOCK</span>\r\n            </div>\r\n          )}\r\n\r\n          {!isOutOfStock && onAddToCart && (\r\n            <button \r\n              className=\"product-card-quick-add\" \r\n              onClick={handleCartClick}\r\n              aria-label=\"Add to cart\"\r\n            >\r\n              <span className=\"mingcute--shopping-cart-1-line\" />\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"product-card-content\">\r\n          {brand && <span className=\"product-card-brand\">{brand}</span>}\r\n          <h3 className=\"product-card-title\">{title}</h3>\r\n          \r\n          <div className=\"product-card-price-container\">\r\n            {hasDiscount ? (\r\n              <>\r\n                <span className=\"product-card-discount-price\">{discountPrice?.toLocaleString()}</span>\r\n                <span className=\"product-card-original-price\">{price.toLocaleString()}</span>\r\n              </>\r\n            ) : (\r\n              <span className=\"product-card-price\">{price.toLocaleString()}</span>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </Link>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport { Icon } from '@iconify/react';\r\nimport './quantity-stepper.scss';\r\n\r\nexport type QuantityStepperProps = {\r\n  value: number;\r\n  min?: number;\r\n  max?: number;\r\n  onChange: (newValue: number) => void;\r\n  disabled?: boolean;\r\n};\r\n\r\nexport function QuantityStepper({ \r\n  value, \r\n  min = 1, \r\n  max = 99, \r\n  onChange, \r\n  disabled  \r\n}: QuantityStepperProps) {\r\n\r\n  const handleDecrement = (e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    if (value > min && !disabled) {\r\n      onChange(value - 1);\r\n    }\r\n  };\r\n\r\n  const handleIncrement = (e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    if (value < max && !disabled) {\r\n      onChange(value + 1);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={classNames('qty-stepper', { 'is-disabled': disabled })}>\r\n      <button \r\n        type=\"button\" \r\n        onClick={handleDecrement} \r\n        disabled={disabled || value <= min}\r\n        className=\"qty-stepper-button\"\r\n        aria-label=\"Decrease quantity\"\r\n      >\r\n        <Icon icon=\"ic:round-minus\" width=\"20\" height=\"20\" />\r\n      </button>\r\n      \r\n      <span className=\"qty-stepper-value\">{value}</span>\r\n      \r\n      <button \r\n        type=\"button\" \r\n        onClick={handleIncrement} \r\n        disabled={disabled || value >= max}\r\n        className=\"qty-stepper-button\"\r\n        aria-label=\"Increase quantity\"\r\n      >\r\n        <Icon icon=\"ic:round-plus\" width=\"20\" height=\"20\" />\r\n      </button>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport './property-selector.scss';\r\n\r\nexport type PropertyOption = {\r\n  label: string;\r\n  value: string;\r\n  disabled?: boolean;\r\n  color?: string; // \r\n};\r\n\r\nexport type PropertySelectorProps = {\r\n  label: string;\r\n  options: PropertyOption[];\r\n  selectedValue?: string;\r\n  onChange: (value: string) => void;\r\n  type?: 'text' | 'color';\r\n};\r\n\r\nexport function PropertySelector({ \r\n  label, \r\n  options, \r\n  selectedValue, \r\n  onChange, \r\n  type = 'text' \r\n}: PropertySelectorProps) {\r\n  return (\r\n    <div className=\"prop-selector-container\">\r\n      <span className=\"prop-selector-label\">{label}</span>\r\n      <div className=\"prop-selector-options-grid\">\r\n        {options.map((option) => (\r\n          <button\r\n            key={option.value}\r\n            type=\"button\"\r\n            disabled={option.disabled}\r\n            onClick={() => onChange(option.value)}\r\n            className={classNames('prop-selector-option', {\r\n              'active': selectedValue === option.value,\r\n              'is-color-type': type === 'color', //  styles.colorType\r\n            })}\r\n            title={option.label}\r\n          >\r\n            {type === 'color' ? (\r\n              <span \r\n                className=\"prop-selector-color-circle\" \r\n                style={{ backgroundColor: option.color }} \r\n              />\r\n            ) : (\r\n              option.label\r\n            )}\r\n          </button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport './cart-item.scss';\r\nimport { QuantityStepper } from '../../quantity-stepper/quantity-stepper';\r\n\r\nexport type CartItemProps = {\r\n  id: string;\r\n  title: string;\r\n  image: string;\r\n  price: number;\r\n  properties?: { label: string; value: string }[];\r\n  quantity: number;\r\n  onQuantityChange: (id: string, quantity: number) => void;\r\n  onRemove: (id: string) => void;\r\n};\r\n\r\nexport function CartItem({\r\n  id,\r\n  title,\r\n  image,\r\n  price,\r\n  properties,\r\n  quantity,\r\n  onQuantityChange,\r\n  onRemove,\r\n}: CartItemProps) {\r\n  return (\r\n    <div className=\"cart-item\"> {/*   item */}\r\n      <div className=\"cart-item-image-container\"> {/*  kebab-case + prefix */}\r\n        <img src={image} alt={title} className=\"cart-item-image\" />\r\n      </div>\r\n\r\n      <div className=\"cart-item-details\">\r\n        <div className=\"cart-item-header\">\r\n          <h4 className=\"cart-item-title\">{title}</h4>\r\n          <button \r\n            className=\"cart-item-remove-btn\" \r\n            onClick={() => onRemove(id)}\r\n            aria-label=\"Remove item\"\r\n          >\r\n            <span className=\"mingcute--delete-2-line\" />\r\n          </button>\r\n        </div>\r\n\r\n        {properties && properties.length > 0 && (\r\n          <div className=\"cart-item-properties\">\r\n            {properties.map((p, i) => (\r\n              <span key={i} className=\"cart-item-prop-text\">\r\n                {p.label}: <strong>{p.value}</strong>\r\n              </span>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"cart-item-footer\">\r\n          <span className=\"cart-item-price\">{(price * quantity).toLocaleString()}</span>\r\n          <QuantityStepper \r\n            value={quantity} \r\n            onChange={(val) => onQuantityChange(id, val)} \r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport './price-summary.scss';\r\nimport { Button } from '../../../forms/button/button';\r\nimport classNames from 'classnames';\r\n\r\nexport type PriceSummaryProps = {\r\n  subtotal: number;\r\n  shippingFee: number;\r\n  discount?: number;\r\n  onCheckout: () => void;\r\n  isLoading?: boolean;\r\n};\r\n\r\nexport function PriceSummary({\r\n  subtotal,\r\n  shippingFee,\r\n  discount = 0,\r\n  onCheckout,\r\n  isLoading\r\n}: PriceSummaryProps) {\r\n  const total = subtotal + shippingFee - discount;\r\n\r\n  return (\r\n    <div className=\"price-summary\"> {/*   summaryCard */}\r\n      <h3 className=\"price-summary-title\">Order Summary</h3>\r\n      \r\n      <div className=\"price-summary-rows\">\r\n        <div className=\"price-summary-row\">\r\n          <span>Subtotal</span>\r\n          <span>{subtotal.toLocaleString()}</span>\r\n        </div>\r\n        \r\n        <div className=\"price-summary-row\">\r\n          <span>Shipping Fee</span>\r\n          <span>{shippingFee === 0 ? 'Free' : `${shippingFee.toLocaleString()}`}</span>\r\n        </div>\r\n\r\n        {discount > 0 && (\r\n          //   styles.row, styles.discount  String \r\n          <div className={classNames('price-summary-row', 'price-summary-discount')}>\r\n            <span>Discount</span>\r\n            <span>-{discount.toLocaleString()}</span>\r\n          </div>\r\n        )}\r\n\r\n        <hr className=\"price-summary-divider\" />\r\n        \r\n        {/*   styles.row, styles.totalRow  String  */}\r\n        <div className={classNames('price-summary-row', 'price-summary-total-row')}>\r\n          <span>Total</span>\r\n          <span>{total.toLocaleString()}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <Button \r\n        fullWidth \r\n        size=\"lg\" \r\n        onClick={onCheckout}\r\n        loading={isLoading}\r\n        className=\"price-summary-checkout-btn\"\r\n      >\r\n        PROCEED TO CHECKOUT\r\n      </Button>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport './checkout-stepper.scss';\r\n\r\nexport type Step = {\r\n  id: number;\r\n  label: string;\r\n};\r\n\r\nexport type CheckoutStepperProps = {\r\n  steps: Step[];\r\n  currentStep: number; // 1, 2, 3\r\n};\r\n\r\nexport function CheckoutStepper({ steps, currentStep }: CheckoutStepperProps) {\r\n  return (\r\n    <div className=\"stepper-container\"> {/*   container */}\r\n      {steps.map((step, index) => (\r\n        <React.Fragment key={step.id}>\r\n          <div className={classNames('stepper-step', { //   styles.step\r\n            'active': currentStep === step.id,         //   styles.active\r\n            'completed': currentStep > step.id         //   styles.completed\r\n          })}>\r\n            <div className=\"stepper-circle\"> {/*   prefix */}\r\n              {currentStep > step.id ? (\r\n                <span className=\"mingcute--check-line\" />\r\n              ) : (\r\n                step.id\r\n              )}\r\n            </div>\r\n            <span className=\"stepper-label\">{step.label}</span>\r\n          </div>\r\n          {index < steps.length - 1 && <div className=\"stepper-line\" />}\r\n        </React.Fragment>\r\n      ))}\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport './address-form.scss';\r\nimport { Button } from '../../../forms/button';\r\nimport classNames from 'classnames';\r\n\r\nexport function AddressForm({ onSubmit }: { onSubmit: (data: any) => void }) {\r\n  return (\r\n    <form className=\"address-form\" onSubmit={(e) => { e.preventDefault(); onSubmit({}); }}>\r\n      <h3 className=\"address-form-title\">Shipping Address</h3>\r\n      \r\n      <div className=\"address-form-grid\">\r\n        <div className=\"address-form-field\">\r\n          <label>First Name</label>\r\n          <input type=\"text\" placeholder=\"John\" required />\r\n        </div>\r\n        \r\n        <div className=\"address-form-field\">\r\n          <label>Last Name</label>\r\n          <input type=\"text\" placeholder=\"Doe\" required />\r\n        </div>\r\n        \r\n        {/*   styles.field, styles.full  String  */}\r\n        <div className={classNames('address-form-field', 'address-form-full')}>\r\n          <label>Address</label>\r\n          <textarea placeholder=\"House No, Street, District...\" rows={3} required />\r\n        </div>\r\n        \r\n        <div className=\"address-form-field\">\r\n          <label>Postal Code</label>\r\n          <input type=\"text\" placeholder=\"10110\" required />\r\n        </div>\r\n        \r\n        <div className=\"address-form-field\">\r\n          <label>Phone Number</label>\r\n          <input type=\"tel\" placeholder=\"08x-xxx-xxxx\" required />\r\n        </div>\r\n      </div>\r\n      \r\n      <Button \r\n        type=\"submit\" \r\n        fullWidth \r\n        appearance=\"primary\" \r\n        size=\"lg\" \r\n        className=\"address-form-submit-btn\"\r\n      >\r\n        CONTINUE TO PAYMENT\r\n      </Button>\r\n    </form>\r\n  );\r\n}","import React, { useState } from 'react';\r\nimport classNames from 'classnames';\r\nimport './payment-method.scss';\r\n\r\ntype PaymentType = 'credit' | 'transfer' | 'cod';\r\n\r\nexport function PaymentMethod() {\r\n  const [selected, setSelected] = useState<PaymentType>('credit');\r\n\r\n  return (\r\n    <div className=\"payment-container\"> {/*   container */}\r\n      <h3 className=\"payment-title\">Payment Method</h3>\r\n      \r\n      <div className=\"payment-list\"> {/*   prefix */}\r\n        <button \r\n          type=\"button\"\r\n          className={classNames('payment-method-item', { \r\n            'active': selected === 'credit' \r\n          })}\r\n          onClick={() => setSelected('credit')}\r\n        >\r\n          <span className=\"mingcute--bank-card-line\" />\r\n          <div className=\"payment-info\">\r\n            <span className=\"payment-name\">Credit / Debit Card</span>\r\n            <span className=\"payment-desc\">Visa, Mastercard, JCB</span>\r\n          </div>\r\n        </button>\r\n\r\n        <button \r\n          type=\"button\"\r\n          className={classNames('payment-method-item', { \r\n            'active': selected === 'transfer' \r\n          })}\r\n          onClick={() => setSelected('transfer')}\r\n        >\r\n          <span className=\"mingcute--transfer-line\" />\r\n          <div className=\"payment-info\">\r\n            <span className=\"payment-name\">Bank Transfer</span>\r\n            <span className=\"payment-desc\">QR PromptPay, Mobile Banking</span>\r\n          </div>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport './order-status-timeline.scss';\r\n\r\nexport type OrderEvent = {\r\n  id: string;\r\n  status: string;\r\n  description: string;\r\n  timestamp: string;\r\n  isCompleted: boolean;\r\n};\r\n\r\nexport type OrderStatusTimelineProps = {\r\n  events: OrderEvent[];\r\n};\r\n\r\nexport function OrderStatusTimeline({ events }: OrderStatusTimelineProps) {\r\n  return (\r\n    <div className=\"timeline-container\"> {/*   timeline */}\r\n      {events.map((event, index) => (\r\n        <div \r\n          key={event.id} \r\n          className={classNames('timeline-event-item', { //   styles.eventItem\r\n            'completed': event.isCompleted,             //   styles.completed\r\n            'active': event.isCompleted && (index === 0 || !events[index - 1]?.isCompleted)\r\n          })}\r\n        >\r\n          <div className=\"timeline-indicator\"> {/*   prefix */}\r\n            <div className=\"timeline-dot\">\r\n              {event.isCompleted && <span className=\"mingcute--check-line\" />}\r\n            </div>\r\n            {index !== events.length - 1 && <div className=\"timeline-line\" />}\r\n          </div>\r\n          \r\n          <div className=\"timeline-content\">\r\n            <div className=\"timeline-header\">\r\n              <span className=\"timeline-status-title\">{event.status}</span>\r\n              <span className=\"timeline-time\">{event.timestamp}</span>\r\n            </div>\r\n            <p className=\"timeline-description\">{event.description}</p>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}","import { useState, useCallback } from 'react';\r\n\r\n/**\r\n * Hook  / (Boolean state)\r\n * @param initialState  (Default: false)\r\n */\r\nexport function useDisclosure(initialState: boolean = false) {\r\n  const [isOpen, setIsOpen] = useState(initialState);\r\n\r\n  const open = useCallback(() => setIsOpen(true), []);\r\n  const close = useCallback(() => setIsOpen(false), []);\r\n  const toggle = useCallback(() => setIsOpen((prev) => !prev), []);\r\n\r\n  return {\r\n    isOpen,\r\n    open,\r\n    close,\r\n    toggle,\r\n    //  Modal  state \r\n    setIsOpen, \r\n  };\r\n}","import React, { createContext, useContext, ReactNode, useMemo } from 'react';\r\n\r\n// 1.  Merge  Object \r\nexport function mergeTokenSchema(base: any, overrides: any): any {\r\n  if (!overrides) return base;\r\n  const merged = { ...base };\r\n  for (const key in overrides) {\r\n    if (overrides[key] instanceof Object && key in base && !Array.isArray(overrides[key])) {\r\n      merged[key] = mergeTokenSchema(base[key], overrides[key]);\r\n    } else {\r\n      merged[key] = overrides[key];\r\n    }\r\n  }\r\n  return merged;\r\n}\r\n\r\n// 2.  Interface  ( children )\r\nexport interface ThemeProviderProps {\r\n  children?: ReactNode;\r\n  overrides?: any;\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n}\r\n\r\nexport function createTheme<T>(options: { tokens: () => T }) {\r\n  //  Context ( ThemeContext /  Root )\r\n  const ThemeContext = createContext<T>(options.tokens());\r\n\r\n  const ThemeProvider = ({ children, overrides, className, style }: ThemeProviderProps) => {\r\n    const baseTokens = options.tokens();\r\n    \r\n    const finalTokens = useMemo(() => \r\n      mergeTokenSchema(baseTokens, overrides), \r\n      [baseTokens, overrides]\r\n    ) as T;\r\n\r\n    // 3.  Type  Record ( cssVars /)\r\n    const cssVars = useMemo(() => {\r\n      const vars: Record<string, string> = {};\r\n      const convert = (obj: any, prefix = '--') => {\r\n        if (!obj) return;\r\n        Object.entries(obj).forEach(([key, value]) => {\r\n          const kebab = key.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase();\r\n          const currentKey = prefix === '--' ? `${prefix}${kebab}` : `${prefix}-${kebab}`;\r\n          \r\n          if (typeof value === 'object' && value !== null && !Array.isArray(value)) {\r\n            convert(value, currentKey);\r\n          } else {\r\n            vars[currentKey] = String(value);\r\n          }\r\n        });\r\n      };\r\n      convert(finalTokens);\r\n      return vars;\r\n    }, [finalTokens]);\r\n\r\n    return (\r\n      <ThemeContext.Provider value={finalTokens}>\r\n        <div \r\n          className={className} \r\n          style={{ ...(cssVars as React.CSSProperties), ...style }}\r\n        >\r\n          {children}\r\n        </div>\r\n      </ThemeContext.Provider>\r\n    );\r\n  };\r\n\r\n  return {\r\n    ThemeProvider,\r\n    useTheme: () => useContext(ThemeContext),\r\n  };\r\n}","import React, { HTMLAttributes, useMemo, createContext, useContext } from 'react';\r\nimport { JpjoyThemeSchema } from './tokens/jpjoy-tokens.js';\r\n\r\nconst ThemeContext = createContext<JpjoyThemeSchema | undefined>(undefined);\r\n\r\nexport const useTheme = () => {\r\n  const context = useContext(ThemeContext);\r\n  if (context === undefined) {\r\n    console.warn('useTheme must be used within a JpjoyTheme provider');\r\n  }\r\n  return context;\r\n};\r\n\r\ninterface JpjoyThemeProviderProps extends HTMLAttributes<HTMLDivElement> {\r\n  tokens: JpjoyThemeSchema;\r\n  children: React.ReactNode;\r\n}\r\n\r\nconst convertToVars = (obj: any, prefix = '--'): any => {\r\n  const vars: any = {};\r\n  if (!obj) return vars;\r\n\r\n  Object.entries(obj).forEach(([key, value]) => {\r\n    const kebabKey = key.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase();\r\n    const currentKey = prefix === '--' ? `${prefix}${kebabKey}` : `${prefix}-${kebabKey}`;\r\n\r\n    if (typeof value === 'object' && value !== null && !Array.isArray(value)) {\r\n      Object.assign(vars, convertToVars(value, currentKey));\r\n    } else {\r\n      vars[currentKey] = value;\r\n    }\r\n  });\r\n  return vars;\r\n};\r\n\r\nexport function JpjoyThemeProvider({ tokens, children, className, style, ...rest }: JpjoyThemeProviderProps) {\r\n  const cssVariables = useMemo(() => convertToVars(tokens), [tokens]);\r\n\r\n  return (\r\n    <ThemeContext.Provider value={tokens}>\r\n      <div \r\n        style={{ \r\n          ...cssVariables, \r\n          ...style,\r\n          // :  display: contents  (background-color) \r\n          minHeight: '100vh', \r\n          display: 'flex',\r\n          flexDirection: 'column'\r\n        }} \r\n        className={className} \r\n        {...rest}\r\n      >\r\n        {children}\r\n      </div>\r\n    </ThemeContext.Provider>\r\n  );\r\n}","/**\r\n * Jpjoy Design Tokens - Light Mode (Default)\r\n */\r\nexport function jpjoyTokens() {\r\n  return {\r\n    colors: {\r\n      primary: {\r\n        default: '#3B82F6',\r\n        hover: '#2563EB',\r\n        active: '#1D4ED8',\r\n        subtle: '#EBF5FF',\r\n      },\r\n      secondary: {\r\n        default: '#F3F4F6',\r\n        hover: '#E5E7EB',\r\n        active: '#D1D5DB',\r\n      },\r\n      surface: {\r\n        background: '#FFFFFF',\r\n        primary: '#FFFFFF',\r\n        secondary: '#FAFAFA',\r\n        tertiary: '#F3F4F6',\r\n      },\r\n      text: {\r\n        primary: '#111827',\r\n        default: '#111827',\r\n        secondary: '#6B7280',\r\n        tertiary: '#9CA3AF',\r\n        inverse: '#FFFFFF',\r\n      },\r\n      status: {\r\n        positive: { default: '#10B981', subtle: '#D1FAE5' },\r\n        negative: { default: '#EF4444', subtle: '#FEE2E2' },\r\n        warning: { default: '#F59E0B', subtle: '#FEF3C7' },\r\n        info: { default: '#3B82F6', subtle: '#DBEAFE' },\r\n      },\r\n      overlay: 'rgba(0, 0, 0, 0.4)',\r\n    },\r\n    borders: {\r\n      default: { color: '#E5E7EB', width: '1px', style: 'solid' },\r\n      focus: { color: '#3B82F6', width: '2px', style: 'solid', offset: '2px' },\r\n      radius: {\r\n        small: '8px',\r\n        medium: '16px',\r\n        large: '24px',\r\n        pill: '9999px',\r\n        circle: '50%',\r\n      },\r\n    },\r\n    typography: {\r\n      fontFamily: \"'Inter', sans-serif, system-ui\",\r\n      sizes: {\r\n        display: { large: '48px', medium: '40px', small: '32px' },\r\n        heading: { h1: '28px', h2: '24px', h3: '20px', h4: '18px', h5: '16px', h6: '14px' },\r\n        body: { large: '18px', medium: '16px', default: '16px', small: '14px' },\r\n        caption: { default: '12px', medium: '13px' },\r\n      },\r\n      lineHeight: { base: '1.5', heading: '1.25', tight: '1.1' },\r\n      fontWeight: { regular: '400', medium: '500', semiBold: '600', bold: '700' },\r\n      letterSpacing: { tight: '-0.02em', normal: '0', wide: '0.02em' },\r\n    },\r\n    spacing: {\r\n      none: '0px',\r\n      xs: '4px',\r\n      small: '8px',\r\n      default: '16px',\r\n      medium: '24px',\r\n      large: '32px',\r\n      xl: '48px',\r\n      xxl: '64px',\r\n    },\r\n    layout: { maxPageWidth: '1200px', gutter: '20px' },\r\n    effects: {\r\n      shadows: {\r\n        xs: '0px 1px 2px rgba(0, 0, 0, 0.05)',\r\n        small: '0px 1px 3px rgba(0, 0, 0, 0.1), 0px 1px 2px rgba(0, 0, 0, 0.06)',\r\n        medium: '0px 4px 6px -1px rgba(0, 0, 0, 0.1), 0px 2px 4px -1px rgba(0, 0, 0, 0.06)',\r\n        large: '0px 10px 15px -3px rgba(0, 0, 0, 0.1), 0px 4px 6px -2px rgba(0, 0, 0, 0.05)',\r\n        xl: '0px 20px 25px -5px rgba(0, 0, 0, 0.1), 0px 10px 10px -5px rgba(0, 0, 0, 0.04)',\r\n        glass: '0 8px 32px 0 rgba(31, 38, 135, 0.07)',\r\n      },\r\n      opacity: { disabled: '0.5', hover: '0.9', faint: '0.3' },\r\n      gradients: {\r\n        primary: 'linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)',\r\n        secondary: 'linear-gradient(180deg, #7DD2FF 0%, #7DD2FF 100%)',\r\n        subtle: 'linear-gradient(180deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%)',\r\n        glass: 'linear-gradient(135deg, rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0.1))',\r\n      },\r\n      blur: { default: 'blur(8px)', heavy: 'blur(16px)', backdrop: 'blur(12px)' },\r\n    },\r\n    interactions: {\r\n      cursor: { pointer: 'pointer', disabled: 'not-allowed', default: 'default' },\r\n      zIndex: { base: '1', dropdown: '50', sticky: '100', modal: '1000', tooltip: '1100' },\r\n      transitions: {\r\n        duration: { fast: '150ms', medium: '300ms', slow: '500ms' },\r\n        easing: {\r\n          default: 'cubic-bezier(0.4, 0, 0.2, 1)',\r\n          in: 'cubic-bezier(0.4, 0, 1, 1)',\r\n          out: 'cubic-bezier(0, 0, 0.2, 1)',\r\n        },\r\n      },\r\n    },\r\n  };\r\n}\r\n\r\nexport type JpjoyThemeSchema = ReturnType<typeof jpjoyTokens>;","import { DeepPartial } from '../../types/deep-partial';\r\nimport { JpjoyThemeSchema } from './jpjoy-tokens';\r\n\r\nexport const darkThemeSchema: DeepPartial<JpjoyThemeSchema> = {\r\n  colors: {\r\n    primary: {\r\n      default: '#60A5FA',\r\n      hover: '#93C5FD',\r\n      active: '#3B82F6',\r\n      subtle: 'rgba(59, 130, 246, 0.1)',\r\n    },\r\n    secondary: {\r\n      default: '#374151',\r\n      hover: '#4B5563',\r\n      active: '#1F2937',\r\n    },\r\n    surface: {\r\n      background: '#0F172A',\r\n      primary: '#1E293B',\r\n      secondary: '#334155',\r\n      tertiary: '#1E293B',\r\n    },\r\n    text: {\r\n      primary: '#F9FAFB',\r\n      default: '#F9FAFB',\r\n      secondary: '#D1D5DB',\r\n      tertiary: '#9CA3AF',\r\n      inverse: '#111827',\r\n    },\r\n    status: {\r\n      positive: { default: '#34D399', subtle: 'rgba(16, 185, 129, 0.1)' },\r\n      negative: { default: '#F87171', subtle: 'rgba(239, 68, 68, 0.1)' },\r\n    },\r\n    overlay: 'rgba(0, 0, 0, 0.7)',\r\n  },\r\n  borders: {\r\n    default: { color: '#374151' },\r\n  },\r\n  effects: {\r\n    shadows: {\r\n      medium: '0px 4px 6px -1px rgba(0, 0, 0, 0.3), 0px 2px 4px -1px rgba(0, 0, 0, 0.2)',\r\n      glass: '0 8px 32px 0 rgba(0, 0, 0, 0.3)',\r\n    },\r\n    gradients: {\r\n      subtle: 'linear-gradient(180deg, rgba(15, 23, 42, 0) 0%, rgba(15, 23, 42, 1) 100%)',\r\n    },\r\n  },\r\n};","// theme-options.ts\r\nimport { jpjoyTokens } from './tokens/jpjoy-tokens.js';\r\nimport { darkThemeSchema } from '../theme/tokens/dark-tokens.js';\r\nimport { mergeTokenSchema } from './sparks-compat.js'; //  Merge \r\nimport { ThemeMode } from './theme-controller.js';\r\nimport { JpjoyThemeSchema } from './tokens/jpjoy-tokens.js';\r\n\r\nconst base = jpjoyTokens();\r\n\r\nexport const themeOptions: Record<ThemeMode, JpjoyThemeSchema> = {\r\n  //  light: \r\n  light: base,\r\n\r\n  //  dark:  Deep Merge  \r\n  dark: mergeTokenSchema(base, darkThemeSchema) as JpjoyThemeSchema,\r\n};","import React, { ReactNode, useCallback, useState, useMemo } from 'react';\r\nimport classNames from 'classnames';\r\nimport { mergeTokenSchema } from './sparks-compat.js';\r\nimport { JpjoyThemeProvider } from './jpjoy-theme-provider.js';\r\nimport { JpjoyThemeSchema } from './tokens/jpjoy-tokens.js';\r\nimport { ThemeContext, ThemeContextValue, ThemeMode } from './theme-controller.js';\r\nimport { themeOptions } from './theme-options.js';\r\n//   .module.scss  .scss  Global Class \r\nimport './jpjoy-theme.scss'; \r\n\r\nexport type JpjoyThemeProps = {\r\n  children?: ReactNode;\r\n  className?: string;\r\n  overrides?: Partial<JpjoyThemeSchema>;\r\n  initialTheme?: ThemeMode;\r\n  style?: React.CSSProperties;\r\n} & React.HTMLAttributes<HTMLDivElement>;\r\n\r\nexport function JpjoyTheme({ \r\n  children, \r\n  initialTheme = 'light', \r\n  overrides, \r\n  className, \r\n  style, \r\n  ...rest \r\n}: JpjoyThemeProps) {\r\n  const [themeMode, setThemeModeState] = useState<ThemeMode>(initialTheme);\r\n\r\n  const setThemeMode = useCallback((mode: ThemeMode) => {\r\n    setThemeModeState(mode);\r\n  }, []);\r\n\r\n  const toggleTheme = useCallback(() => {\r\n    setThemeModeState(prevMode => (prevMode === 'light' ? 'dark' : 'light'));\r\n  }, []);\r\n\r\n  const themeContextValue: ThemeContextValue = {\r\n    themeMode,\r\n    toggleTheme,\r\n    setThemeMode,\r\n  };\r\n\r\n  const themeOverrides = useMemo(() => {\r\n    //  Merge base + dark  themeOptions \r\n    const selectedTheme = themeOptions[themeMode];\r\n\r\n    //  overrides  Props () \r\n    return mergeTokenSchema(selectedTheme, overrides) as JpjoyThemeSchema;\r\n  }, [themeMode, overrides]);\r\n\r\n  return (\r\n    <ThemeContext.Provider value={themeContextValue}>\r\n      <JpjoyThemeProvider\r\n        //   styles.jpjoyTheme  'lm-jpjoy-theme'\r\n        className={classNames('lm-jpjoy-theme', className)}\r\n        tokens={themeOverrides}\r\n        style={style}\r\n        {...rest}\r\n      >\r\n        {children}\r\n      </JpjoyThemeProvider>\r\n    </ThemeContext.Provider>\r\n  );\r\n}"],"names":["hasOwn","classNames","classes","arg","appendClass","parseValue","key","value","newClass","module","invariant","message","warning","cond","createPath","pathname","search","hash","parsePath","path","parsedPath","hashIndex","searchIndex","matchRoutes","routes","locationArg","basename","matchRoutesImpl","allowPartial","location","stripBasename","branches","flattenRoutes","rankRouteBranches","matches","i","decoded","decodePath","matchRouteBranch","parentsMeta","parentPath","_hasParentOptionalSegments","flattenRoute","route","index","hasParentOptionalSegments","relativePath","meta","joinPaths","routesMeta","computeScore","_a","exploded","explodeOptionalSegments","segments","first","rest","isOptional","required","restExploded","result","subpath","a","b","compareIndexes","paramRe","dynamicSegmentValue","indexRouteValue","emptySegmentValue","staticSegmentValue","splatPenalty","isSplat","s","initialScore","score","segment","n","branch","matchedParams","matchedPathname","end","remainingPathname","match","matchPath","normalizePathname","pattern","matcher","compiledParams","compilePath","pathnameBase","captureGroups","memo2","paramName","splatValue","caseSensitive","params","regexpSource","_","v","error","startIndex","nextChar","ABSOLUTE_URL_REGEX","isAbsoluteUrl","url","resolvePath","to","fromPathname","toPathname","oldPathname","resolvePathname","normalizeSearch","normalizeHash","getInvalidPathError","char","field","dest","getPathContributingMatches","getResolveToMatches","pathMatches","idx","resolveTo","toArg","routePathnames","locationPathname","isPathRelative","isEmptyPath","from","routePathnameIndex","toSegments","hasExplicitTrailingSlash","hasCurrentTrailingSlash","paths","ErrorResponseImpl","status","statusText","data2","internal","isRouteErrorResponse","getRoutePattern","m","isBrowser","parseToInfo","_to","absoluteURL","isExternal","currentUrl","targetUrl","validMutationMethodsArr","validRequestMethodsArr","DataRouterContext","React","DataRouterStateContext","RSCRouterContext","ViewTransitionContext","FetchersContext","AwaitContext","NavigationContext","LocationContext","RouteContext","RouteErrorContext","ERROR_DIGEST_BASE","ERROR_DIGEST_REDIRECT","ERROR_DIGEST_ROUTE_ERROR_RESPONSE","decodeRedirectErrorDigest","digest","parsed","decodeRouteErrorResponseDigest","useHref","relative","useInRouterContext","navigator","React2","useResolvedPath","joinedPathname","useLocation","navigateEffectWarning","useIsomorphicLayoutEffect","cb","useNavigate","isDataRoute","useNavigateStable","useNavigateUnstable","dataRouterContext","routePathnamesJson","activeRef","options","useRoutesImpl","dataRouterState","onError","future","parentMatches","routeMatch","parentParams","parentPathname","parentPathnameBase","parentRoute","warningOnce","locationFromContext","parentSegments","_renderMatches","DefaultErrorComponent","useRouteError","stack","lightgrey","preStyles","codeStyles","devInfo","defaultErrorElement","RenderErrorBoundary","props","state","errorInfo","RSCErrorHandler","errorRedirectHandledMap","children","redirect2","existingRedirect","redirectPromise","RenderedRoute","routeContext","onErrorHandler","renderedMatches","errors","errorIndex","renderFallback","fallbackIndex","loaderData","errors2","needsToRunLoader","_b","outlet","shouldRenderHydrateFallback","errorElement","hydrateFallbackElement","matches2","getChildren","getDataRouterConsoleError","hookName","useDataRouterContext","ctx","useDataRouterState","useRouteContext","useCurrentRouteId","thisRoute","useRouteId","routeId","router","id","alreadyWarned","React3","DataRoutes","defaultMethod","defaultEncType","isHtmlElement","object","isButtonElement","isFormElement","isInputElement","isModifiedEvent","event","shouldProcessLinkClick","target","_formDataSupportsSubmitter","isFormDataSubmitterSupported","supportedFormEncTypes","getFormEncType","encType","getFormSubmissionInfo","method","action","formData","body","attr","form","name","type","prefix","invariant2","singleFetchUrl","reqUrl","trailingSlashAware","extension","loadRouteModule","routeModulesCache","routeModule","isHtmlLinkDescriptor","getKeyedPrefetchLinks","manifest","routeModules","links","mod","dedupeLinkDescriptors","link","getNewMatchesForLinks","page","nextMatches","currentMatches","mode","isNew","matchPathChanged","manifestRoute","routeChoice","getModuleLinkHrefs","includeHydrateFallback","dedupeHrefs","hrefs","sortKeys","obj","sorted","keys","descriptors","preloads","set","deduped","descriptor","useDataRouterContext2","context","React8","useDataRouterStateContext","FrameworkContext","useFrameworkContext","usePrefetchBehavior","prefetch","theirElementProps","frameworkContext","maybePrefetch","setMaybePrefetch","shouldPrefetch","setShouldPrefetch","onFocus","onBlur","onMouseEnter","onMouseLeave","onTouchStart","ref","callback","entries","entry","observer","setIntent","cancelIntent","composeEventHandlers","theirHandler","ourHandler","PrefetchPageLinks","linkProps","PrefetchPageLinksImpl","useKeyedPrefetchLinks","keyedPrefetchLinks","setKeyedPrefetchLinks","interrupted","newMatchesForData","newMatchesForAssets","dataHrefs","routesParams","foundOptOutRoute","m2","moduleHrefs","href","mergeRefs","refs","isBrowser2","ABSOLUTE_URL_REGEX2","Link","React10","onClick","discover","reloadDocument","replace2","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate","forwardedRef","unstable_useTransitions","isAbsolute","prefetchRef","prefetchHandlers","internalOnClick","useLinkClickHandler","handleClick","NavLink","ariaCurrentProp","classNameProp","styleProp","routerState","isTransitioning","useViewTransitionState","nextLocationPathname","endSlashPosition","isActive","isPending","renderProps","ariaCurrent","className","style","Form","fetcherKey","navigate","onSubmit","submit","useSubmit","formAction","useFormAction","formMethod","submitHandler","submitter","submitMethod","doSubmit","getDataRouterConsoleError2","useDataRouterContext3","replaceProp","doNavigate","fetcherId","getUniqueFetcherId","currentRouteId","routerFetch","routerNavigate","indexValues","qs","vtContext","currentPath","nextPath","external","noStyles","disabled","rel","inRouter","commonClasses","e","jsx","RouterLink","Button","appearance","size","fullWidth","loading","buttonClasses","content","jsxs","Fragment","restOfLinkProps","restOfButtonProps","Heading","level","visualLevel","inverseColor","Tag","headingClasses","Paragraph","element","color","Component","paragraphClasses","Image","src","alt","width","height","padding","radius","fit","number","isLoaded","setIsLoaded","useState","rootClasses","Banner","title","subtitle","ctaText","ctaHref","onCtaClick","backgroundImage","foregroundImage","variant","align","overlay","inverse","isAlert","headingLevel","actionContent","Card","header","footer","image","imageAlt","interactive","Badge","isDot","max","displayContent","badgeElement","Avatar","shape","sizeValue","getInitials","renderContent","Divider","orientation","textAlign","hasContent","Logo","slogan","logo","minimal","isClickable","containerClass","Spinner","Skeleton","animation","hasWindow","getNodeName","node","isNode","getWindow","_node$ownerDocument","getDocumentElement","_ref","isElement","isHTMLElement","isShadowRoot","invalidOverflowDisplayValues","isOverflowElement","overflow","overflowX","overflowY","display","getComputedStyle","tableElements","isTableElement","topLayerSelectors","isTopLayer","selector","transformProperties","willChangeValues","containValues","isContainingBlock","elementOrCss","webkit","isWebKit","css","getContainingBlock","currentNode","getParentNode","isLastTraversableNode","lastTraversableNodeNames","getNodeScroll","getNearestOverflowAncestor","parentNode","getOverflowAncestors","list","traverseIframes","_node$ownerDocument2","scrollableAncestor","isBody","win","frameElement","getFrameElement","min","round","floor","createCoords","oppositeSideMap","oppositeAlignmentMap","clamp","start","evaluate","param","getSide","placement","getAlignment","getOppositeAxis","axis","getAxisLength","yAxisSides","getSideAxis","getAlignmentAxis","getAlignmentSides","rects","rtl","alignment","alignmentAxis","length","mainAlignmentSide","getOppositePlacement","getExpandedPlacements","oppositePlacement","getOppositeAlignmentPlacement","lrPlacement","rlPlacement","tbPlacement","btPlacement","getSideList","side","isStart","getOppositeAxisPlacements","flipAlignment","direction","expandPaddingObject","getPaddingObject","rectToClientRect","rect","x","y","candidateSelectors","candidateSelector","NoElement","getRootNode","_element$getRootNode","_isInert","lookUp","_node$getAttribute","inertAtt","inert","isContentEditable","_node$getAttribute2","attValue","getCandidates","el","includeContainer","filter","candidates","_getCandidatesIteratively","elements","elementsToCheck","assigned","nestedCandidates","validCandidate","shadowRoot","validShadowRoot","_nestedCandidates","hasTabIndex","getTabIndex","getSortOrderTabIndex","isScope","tabIndex","sortOrderedTabbables","isInput","isHiddenInput","isDetailsWithSummary","r","child","getCheckedRadio","nodes","isTabbableRadio","radioScope","queryRadios","radioSet","err","checked","isRadio","isNonTabbableRadio","isNodeAttached","_nodeRoot","nodeRoot","nodeRootHost","attached","_nodeRootHost","_nodeRootHost$ownerDo","_nodeRoot2","_nodeRootHost2","_nodeRootHost2$ownerD","isZeroArea","_node$getBoundingClie","isHidden","displayCheck","getShadowRoot","visible","isDirectSummary","nodeUnderDetails","originalNode","parentElement","rootNode","isDisabledFromFieldset","isNodeMatchingSelectorFocusable","isNodeMatchingSelectorTabbable","isShadowRootTabbable","shadowHostNode","_sortByOrder","regularTabbables","orderedTabbables","item","candidateTabindex","acc","sortable","tabbable","container","focusable","isTabbable","getPlatform","uaData","getUserAgent","brand","version","isSafari","isAndroid","re","isJSDOM","FOCUSABLE_ATTRIBUTE","TYPEABLE_SELECTOR","activeElement","doc","_activeElement","contains","parent","next","getTarget","isEventTargetWithin","isRootElement","getDocument","isTypeableElement","isTypeableCombobox","getFloatingFocusElement","floatingElement","getNodeChildren","onlyOpenChildren","_node$context","getNodeAncestors","_nodes$find","allAncestors","currentParentId","stopEvent","isReactEvent","isVirtualClick","isVirtualPointerEvent","isMouseLikePointerType","pointerType","strict","isClient","noop","useLayoutEffect","SafeReact","useLatestRef","useInsertionEffect","useSafeInsertionEffect","fn","useEffectEvent","_len","args","_key","getTabbableOptions","getTabbableIn","dir","len","active","nextIndex","getNextTabbable","referenceElement","getPreviousTabbable","isOutsideEvent","containerElement","relatedTarget","disableFocusInside","enableFocusInside","tabindex","computeCoordsFromPlacement","reference","floating","sideAxis","alignLength","isVertical","commonX","commonY","commonAlign","coords","computePosition","config","strategy","middleware","platform","validMiddleware","statefulPlacement","middlewareData","resetCount","nextX","nextY","data","reset","detectOverflow","_await$platform$isEle","boundary","rootBoundary","elementContext","altBoundary","paddingObject","clippingClientRect","offsetParent","offsetScale","elementClientRect","flip","_middlewareData$arrow","_middlewareData$flip","initialPlacement","checkMainAxis","checkCrossAxis","specifiedFallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","detectOverflowOptions","initialSideAxis","isBasePlacement","fallbackPlacements","hasFallbackAxisSideDirection","placements","overflows","overflowsData","sides","_middlewareData$flip2","_overflowsData$filter","nextPlacement","d","resetPlacement","_overflowsData$filter2","currentSideAxis","originSides","convertValueToCoords","mainAxisMulti","crossAxisMulti","rawValue","mainAxis","crossAxis","offset","_middlewareData$offse","diffCoords","shift","limiter","mainAxisCoord","crossAxisCoord","minSide","maxSide","limitedCoords","_state$middlewareData","_state$middlewareData2","apply","isYAxis","heightSide","widthSide","maximumClippingHeight","maximumClippingWidth","overflowAvailableHeight","overflowAvailableWidth","noShift","availableHeight","availableWidth","xMin","xMax","yMin","yMax","nextDimensions","getCssDimensions","getComputedStyle$1","hasOffset","offsetWidth","offsetHeight","shouldFallback","unwrapElement","getScale","domElement","$","noOffsets","getVisualOffsets","shouldAddVisualOffsets","isFixed","floatingOffsetParent","getBoundingClientRect","includeScale","isFixedStrategy","clientRect","scale","visualOffsets","offsetWin","currentWin","currentIFrame","iframeScale","iframeRect","left","top","getWindowScrollBarX","leftScroll","getHTMLOffset","documentElement","scroll","htmlRect","convertOffsetParentRelativeRectToViewportRelativeRect","topLayer","offsets","isOffsetParentAnElement","offsetRect","htmlOffset","getClientRects","getDocumentRect","html","SCROLLBAR_MAX","getViewportRect","visualViewport","visualViewportBased","windowScrollbarX","bodyStyles","bodyMarginInline","clippingStableScrollbarWidth","absoluteOrFixed","getInnerBoundingClientRect","getClientRectFromClippingAncestor","clippingAncestor","hasFixedPositionAncestor","stopNode","getClippingElementAncestors","cache","cachedResult","currentContainingBlockComputedStyle","elementIsFixed","computedStyle","currentNodeIsContaining","ancestor","getClippingRect","clippingAncestors","firstClippingAncestor","clippingRect","accRect","getDimensions","getRectRelativeToOffsetParent","setLeftRTLScrollbarOffset","isStaticPositioned","getTrueOffsetParent","polyfill","rawOffsetParent","getOffsetParent","svgOffsetParent","getElementRects","getOffsetParentFn","getDimensionsFn","floatingDimensions","isRTL","rectsAreEqual","observeMove","onMove","io","timeoutId","root","cleanup","_io","refresh","skip","threshold","elementRectForRootMargin","insetTop","insetRight","insetBottom","insetLeft","isFirstUpdate","handleObserve","ratio","autoUpdate","update","ancestorScroll","ancestorResize","elementResize","layoutShift","animationFrame","referenceEl","ancestors","cleanupIo","reobserveFrame","resizeObserver","firstEntry","_resizeObserver","frameId","prevRefRect","frameLoop","nextRefRect","_resizeObserver2","offset$1","shift$1","flip$1","size$1","mergedOptions","platformWithCache","computePosition$1","deepEqual","getDPR","roundByDPR","dpr","useFloating","externalReference","externalFloating","transform","whileElementsMounted","open","setData","latestMiddleware","setLatestMiddleware","_reference","_setReference","_floating","_setFloating","setReference","referenceRef","setFloating","floatingRef","floatingEl","dataRef","hasWhileElementsMounted","whileElementsMountedRef","platformRef","openRef","fullData","isMountedRef","ReactDOM","floatingStyles","initialStyles","deps","ACTIVE_KEY","SELECTED_KEY","serverHandoffComplete","count","genId","useFloatingId","setId","useModernLayoutEffect","useReactId","useId","devMessageSet","_devMessageSet3","_len2","messages","_key2","_devMessageSet4","createEventEmitter","map","_map$get","listener","_map$get2","FloatingNodeContext","FloatingTreeContext","useFloatingParentNodeId","_React$useContext","useFloatingTree","createAttribute","clearTimeoutIfSet","timeoutRef","rafId","enqueueFocus","preventScroll","cancelPrevious","sync","exec","counters","getCounterMap","control","uncontrolledElementsSet","markerMap","lockCount$1","supportsInert","unwrapHost","correctElements","targets","correctedTarget","applyAttributeToOthers","uncorrectedAvoidElements","ariaHidden","markerName","controlAttribute","avoidElements","elementsToKeep","elementsToStop","hiddenElements","markerCounter","keep","deep","alreadyHidden","counterMap","counterValue","markerValue","markOthers","HIDDEN_STYLES","FocusGuard","role","setRole","restProps","PortalContext","useFloatingPortalNode","uniqueId","portalContext","usePortalContext","portalNode","setPortalNode","portalNodeRef","existingIdRoot","subRoot","idWrapper","FloatingPortal","preserveTabOrder","focusManagerState","setFocusManagerState","beforeOutsideRef","afterOutsideRef","beforeInsideRef","afterInsideRef","modal","shouldRenderGuards","_beforeInsideRef$curr","domReference","prevTabbable","_afterInsideRef$curre","nextTabbable","useLiteMergeRefs","LIST_LIMIT","previouslyFocusedElements","clearDisconnectedPreviouslyFocusedElements","addPreviouslyFocusedElement","getPreviouslyFocusedElement","getFirstTabbableElement","tabbableOptions","handleTabIndex","floatingFocusElement","orderRef","_floatingFocusElement","tabbableContent","dataTabIndex","VisuallyHiddenDismiss","FloatingFocusManager","order","_guards","initialFocus","returnFocus","restoreFocus","visuallyHiddenDismiss","closeOnFocusOut","outsideElementsInert","_getInsideElements","onOpenChange","events","getNodeId","_dataRef$current$floa","getInsideElements","ignoreInitialFocus","isUntrappedTypeableCombobox","inertSupported","guards","useInert","initialFocusRef","returnFocusRef","tree","startDismissButtonRef","endDismissButtonRef","preventReturnFocusRef","isPointerDownRef","tabbableIndexRef","blurTimeoutRef","isInsidePortal","getTabbableContent","getTabbableElements","onKeyDown","contains$1","getDocument$1","els","getTarget$1","handleFocusIn","tabbableIndex","handlePointerDown","handleFocusOutside","currentTarget","nodeId","movedToUnrelatedNode","getNodeChildren$1","_node$context2","_node$context3","_node$context4","_node$context5","prevTabbableIndex","nodeToFocus","shouldHandleBlurCapture","markInsideReactTree","beforeGuardRef","afterGuardRef","mergedBeforeGuardRef","mergedAfterGuardRef","_portalContext$portal","_ancestors$find","portalNodes","rootAncestorComboboxDomReference","_node$context6","insideElements","previouslyFocusedElement","focusableElements","initialFocusValue","elToFocus","focusAlreadyInsideFloatingEl","reason","nested","isPreventScrollSupported","fallbackEl","getReturnElement","activeEl","isFocusInsideFloatingTree","_node$context7","returnElement","tabbableReturnElement","renderDismissButton","_portalContext$before","_portalContext$afterO","lockCount","scrollbarProperty","enableScrollLock","isIOS","bodyStyle","paddingProp","scrollbarWidth","scrollX","scrollY","_window$visualViewpor","_window$visualViewpor2","offsetLeft","offsetTop","FloatingOverlay","lockScroll","isButtonTarget","isAnchorTarget","isSpaceIgnored","useClick","enabled","eventOption","toggle","ignoreMouse","keyboardHandlers","stickIfOpen","pointerTypeRef","didKeyDownRef","bubbleHandlerKeys","captureHandlerKeys","normalizeProp","normalizable","_normalizable$escapeK","_normalizable$outside","useDismiss","escapeKey","unstable_outsidePress","outsidePressEvent","referencePress","referencePressEvent","bubbles","capture","outsidePressFn","outsidePress","endedOrStartedInsideRef","escapeKeyBubbles","outsidePressBubbles","escapeKeyCapture","outsidePressCapture","isComposingRef","closeOnEscapeKeyDown","shouldDismiss","_child$context","closeOnEscapeKeyDownCapture","_getTarget2","_getTarget","closeOnPressOutside","_dataRef$current$floa2","insideReactTree","endedOrStartedInside","inertSelector","markers","targetRootAncestor","nextParent","marker","lastTraversableNode","scrollRe","isScrollableX","isScrollableY","canScrollX","canScrollY","pressedVerticalScrollbar","pressedHorizontalScrollbar","targetIsInsideChildren","_child$context2","closeOnPressOutsideCapture","_getTarget4","_getTarget3","compositionTimeout","onScroll","handleCompositionStart","handleCompositionEnd","_doc$defaultView","useFloatingRootContext","onOpenChangeProp","elementsProp","floatingId","optionDomReference","positionReference","setPositionReference","internalRootContext","rootContext","computedElements","_domReference","setDomReference","_setPositionReference","domReferenceRef","position","useFloating$1","computedPositionReference","mergeProps","userProps","propsList","elementKey","isItem","domUserProps","__","validProps","propsOrGetProps","val","useInteractions","referenceDeps","floatingDeps","itemDeps","getReferenceProps","getFloatingProps","getItemProps","componentRoleToAriaRoleMap","useRole","_elements$domReferenc","_componentRoleToAriaR","defaultFloatingId","defaultReferenceId","referenceId","_getFloatingFocusElem","ariaRole","isNested","floatingProps","selected","commonProps","Modal","isOpen","onClose","closeOnOverlayClick","click","dismiss","headingId","descriptionId","useEffect","Toast","duration","timer","ToastContext","createContext","ToastProvider","toasts","setToasts","addToast","useCallback","prev","removeToast","toast","createPortal","useToast","useContext","getIconsTree","names","icons","aliases","resolved","resolve","defaultIconDimensions","defaultIconTransformations","defaultIconProps","defaultExtendedIconProps","mergeIconTransformations","obj1","obj2","rotate","mergeIconData","internalGetIconData","currentProps","parse","name$1","parseIconSet","optionalPropertyDefaults","checkOptionalProps","defaults","prop","quicklyValidateIconSet","icon","dataStorage","newStorage","provider","getStorage","providerStorage","addIconSet","storage","addIconToStorage","matchIconName","stringToIcon","validate","allowSimpleName","colonSeparated","validateIconName","dashSeparated","simpleNames","allowSimpleNames","allow","getIconData","iconName","addIcon","addCollection","added","defaultIconSizeCustomisations","defaultIconCustomisations","unitsSplit","unitsTest","calculateSize","precision","oldParts","newParts","code","isNumber","num","splitSVGDefs","tag","defs","endEnd","mergeDefsAndContent","wrapSVGContent","split","isUnsetKeyword","iconToSVG","customisations","fullIcon","fullCustomisations","box","transformations","hFlip","vFlip","rotation","tempValue","customisationsWidth","customisationsHeight","boxWidth","boxHeight","attributes","setAttr","viewBox","regex","randomPrefix","counter","replaceIDs","ids","suffix","newID","escapedID","setAPIModule","getAPIModule","createAPIConfig","source","resources","configStorage","fallBackAPISources","fallBackAPI","addAPIProvider","customConfig","getAPIConfig","detectFetch","fetchModule","calculateMaxLength","maxHostLength","shouldAbort","prepare","results","maxLength","getPath","send","host","iconsList","urlParams","uri","defaultError","response","fetchAPIModule","removeCallback","storages","items","row","updateCallbacks","hasPending","oldLength","idCounter","storeCallback","pendingSources","abort","sortIcons","lastIcon","localStorage","listToIcons","defaultConfig","sendQuery","payload","query","done","resourcesCount","startTime","queriesSent","lastError","queue","doneCallbacks","resetTimer","subscribe","overwrite","getQueryStatus","failQuery","clearQueue","moduleResponse","isError","queued","execNext","resource","status$1","initRedundancy","cfg","queries","queryCallback","doneCallback","query$1","find","emptyCallback$1","redundancyCache","getRedundancyCache","redundancy","cachedReundancy","sendAPIQuery","api","cached","moduleKey","emptyCallback","loadedNewIcons","checkIconNamesForAPI","valid","invalid","parseLoaderResponse","checkMissing","pending","parsePossiblyAsyncResponse","loadNewIcons","icons$1","customIconLoader","iconSet","loadIcons","cleanedIcons","sortedIcons","callCallback","newIcons","sources","lastProvider","lastPrefix","providerNewIcons","pendingQueue","mergeCustomisations","valueType","separator","flipFromString","custom","str","rotateFromString","defaultValue","units","value$1","iconToHTML","renderAttribsHTML","encodeSVGforURL","svg","svgToData","svgToURL","policy","createPolicy","cleanUpInnerHTML","defaultExtendedIconCustomisations","svgDefaults","monotoneProps","coloredProps","propsToAdd","propsToAddTo","inlineDefaults","fixSize","render","defaultProps","customStyle","componentProps","renderAttribs","localCounter","createElement","useMask","_window","preload","providers","IconComponent","mounted","setMounted","setAbort","getInitialState","setState","changeState","newState","updateState","Icon","forwardRef","containerStyle","IconifyRender","IconButton","iconSizeMap","defaultOptions","SegmentedControl","onChange","handleOptionClick","optionValue","isDisabled","option","isSelected","TextInput","placeholder","label","leadingIcon","trailingIcon","showPassword","setShowPassword","isPasswordType","inputType","togglePassword","containerClasses","tzName","timeZone","date","format","offsetFormatCache","offsetCache","tzOffset","offsetStr","calcOffset","captures","offsetRe","cacheStr","values","hours","minutes","seconds","TZDateMini","adjustToSystemTZ","syncToInternal","tz","time","utcMethod","syncFromInternal","baseOffset","prevHour","systemOffset","prevHourSystemOffset","systemDSTChange","dstShift","offsetDiff","systemDate","systemSecondsOffset","secondsOffset","postBaseOffset","postOffset","postOffsetDiff","offsetChanged","postDiff","newBaseOffset","newOffset","offsetChange","TZDate","sign","day","month","year","locales","millisecondsInWeek","millisecondsInDay","constructFromSymbol","constructFrom","toDate","argument","addDays","amount","_date","addMonths","dayOfMonth","endOfDesiredMonth","daysInMonth","getDefaultOptions","startOfWeek","weekStartsOn","_d","_c","diff","startOfISOWeek","getISOWeekYear","fourthOfJanuaryOfNextYear","startOfNextYear","fourthOfJanuaryOfThisYear","startOfThisYear","getTimezoneOffsetInMilliseconds","utcDate","normalizeDates","dates","normalize","startOfDay","differenceInCalendarDays","laterDate","earlierDate","laterDate_","earlierDate_","laterStartOfDay","earlierStartOfDay","laterTimestamp","earlierTimestamp","startOfISOWeekYear","fourthOfJanuary","addWeeks","addYears","date_","isSameDay","dateLeft_","dateRight_","isDate","isValid","differenceInCalendarMonths","yearsDiff","monthsDiff","endOfMonth","normalizeInterval","interval","eachMonthOfInterval","reversed","endTime","step","startOfMonth","endOfYear","startOfYear","eachYearOfInterval","endOfWeek","endOfISOWeek","formatDistanceLocale","formatDistance","token","tokenValue","buildFormatLongFn","dateFormats","timeFormats","dateTimeFormats","formatLong","formatRelativeLocale","formatRelative","_baseDate","_options","buildLocalizeFn","valuesArray","defaultWidth","eraValues","quarterValues","monthValues","dayValues","dayPeriodValues","formattingDayPeriodValues","ordinalNumber","dirtyNumber","rem100","localize","quarter","buildMatchFn","string","matchPattern","matchResult","matchedString","parsePatterns","findIndex","findKey","predicate","array","buildMatchPatternFn","parseResult","matchOrdinalNumberPattern","parseOrdinalNumberPattern","matchEraPatterns","parseEraPatterns","matchQuarterPatterns","parseQuarterPatterns","matchMonthPatterns","parseMonthPatterns","matchDayPatterns","parseDayPatterns","matchDayPeriodPatterns","parseDayPeriodPatterns","enUS","getDayOfYear","getISOWeek","getWeekYear","firstWeekContainsDate","firstWeekOfNextYear","firstWeekOfThisYear","startOfWeekYear","firstWeek","getWeek","addLeadingZeros","targetLength","output","lightFormatters","signedYear","dayPeriodEnumValue","numberOfDigits","milliseconds","fractionalSeconds","dayPeriodEnum","formatters","era","signedWeekYear","weekYear","twoDigitYear","isoWeekYear","week","isoWeek","dayOfYear","dayOfWeek","localDayOfWeek","isoDayOfWeek","_localize","timezoneOffset","formatTimezoneWithOptionalMinutes","formatTimezone","formatTimezoneShort","timestamp","delimiter","absOffset","dateLongFormatter","timeLongFormatter","dateTimeLongFormatter","datePattern","timePattern","dateTimeFormat","longFormatters","dayOfYearTokenRE","weekYearTokenRE","throwTokens","isProtectedDayOfYearToken","isProtectedWeekYearToken","warnOrThrowProtectedError","input","_message","subject","formattingTokensRegExp","longFormattingTokensRegExp","escapedStringRegExp","doubleQuoteRegExp","unescapedLatinCharacterRegExp","formatStr","locale","defaultLocale","_f","_e","_h","_g","originalDate","parts","substring","firstCharacter","longFormatter","cleanEscapedString","formatterOptions","part","formatter","matched","getDaysInMonth","monthIndex","lastDayOfMonth","getMonth","getYear","isAfter","dateToCompare","isBefore","isSameMonth","isSameYear","setMonth","midMonth","setYear","FIVE_WEEKS","FOUR_WEEKS","getBroadcastWeeksInMonth","dateLib","firstDayOfMonth","firstDayOfWeek","broadcastStartDate","lastDateOfLastWeek","startOfBroadcastWeek","firstOfMonth","endOfBroadcastWeek","startDate","numberOfWeeks","dateFnsEnUS","modifiers","formatDate","weekNumber","DateLib","overrides","dateLeft","dateRight","years","uniqueYears","yearsArray","formatted","_dateLib","numerals","digitMap","digit","localeCode","defaultDateLib","CalendarDay","displayMonth","CalendarMonth","weeks","CalendarWeek","days","CaptionLabel","Chevron","Day","tdProps","DayButton","buttonProps","UI","DayFlag","SelectionState","Animation","Dropdown","components","selectProps","cssClassSelect","selectedOption","DropdownNav","Footer","Month","calendarMonth","displayIndex","divProps","MonthCaption","MonthGrid","Months","dayPickerContext","useDayPicker","MonthsDropdown","Nav","onPreviousClick","onNextClick","previousMonth","nextMonth","navProps","labelPrevious","labelNext","handleNextClick","handlePreviousClick","NextMonthButton","Option","PreviousMonthButton","Root","rootRef","Select","Week","trProps","Weekday","Weekdays","WeekNumber","thProps","WeekNumberHeader","Weeks","YearsDropdown","rangeIncludesDate","range","excludeEnds","isDateInterval","isDateRange","isDateAfterType","isDateBeforeType","isDayOfWeekType","isDatesArray","dateMatchModifiers","matchers","matchersArr","matcherDate","diffBefore","diffAfter","isDayBefore","isDayAfter","createGetModifiers","navStart","navEnd","hidden","showOutsideDays","broadcastCalendar","today","computedNavStart","computedNavEnd","internalModifiersMap","customModifiersMap","isOutside","isBeforeNavStart","isAfterNavEnd","isToday","modifierValue","dayFlags","customModifiers","getClassNamesForModifiers","modifiersClassNames","previousValue","getComponents","customComponents","getDataAttributes","dataAttributes","getDefaultClassNames","formatCaption","formatMonthCaption","formatDay","formatMonthDropdown","formatWeekdayName","weekday","formatWeekNumber","formatWeekNumberHeader","formatYearDropdown","formatYearCaption","getFormatters","customFormatters","defaultFormatters","labelDayButton","labelDay","labelGrid","labelCaption","labelGridcell","labelMonthDropdown","labelNav","defaultLabel","_month","labelWeekday","labelWeekNumber","labelWeekNumberHeader","labelYearDropdown","resolveLabel","customLabel","localeLabel","_args","getLabels","customLabels","localeLabels","defaultLabels","defaultLabels.labelDayButton","defaultLabels.labelMonthDropdown","defaultLabels.labelNext","defaultLabels.labelPrevious","defaultLabels.labelWeekNumber","defaultLabels.labelYearDropdown","defaultLabels.labelGrid","defaultLabels.labelGridcell","defaultLabels.labelNav","defaultLabels.labelWeekNumberHeader","defaultLabels.labelWeekday","getMonthOptions","getStyleForModifiers","dayModifiers","styles","modifiersStyles","modifier","getWeekdays","ISOWeek","referenceToday","getYearOptions","reverse","firstNavYear","lastNavYear","createNoonOverrides","fallbackWeekStartsOn","toNoonTZDate","normalizedDate","toCalendarDate","zoned","base","weekStartsOnValue","cursor","endKey","getWeekFn","getISOWeekFn","right","differenceInCalendarDaysFn","differenceInCalendarMonthsFn","asHtmlElement","queryMonthEls","queryMonthEl","queryCaptionEl","queryWeeksEl","queryNavEl","queryWeekdaysEl","useAnimation","rootElRef","months","focused","previousRootElSnapshotRef","useRef","previousMonthsRef","animatingRef","previousMonths","isAfterPreviousMonth","captionAnimationClass","weeksAnimationClass","previousRootElSnapshot","rootElSnapshot","currentMonthElSnapshot","previousMonthElSnapshot","captionEl","weeksEl","previousMonthEls","currentMonthEls","navEl","currentMonthEl","previousMonthEl","cleanUp","previousWeekdaysEl","previousCaptionEl","previousWeeksEl","getDates","displayMonths","maxDate","firstMonth","lastMonth","fixedWeeks","startWeekFirstDate","displayMonthsWeekEnd","constraintWeekEnd","gridEndDate","nOfDays","nOfMonths","extraDates","daysToAdd","getDays","calendarMonths","initialDays","weekDays","getDisplayMonths","firstDisplayedMonth","calendarEndMonth","numberOfMonths","getInitialMonth","defaultMonth","initialMonth","getMonths","dayPickerMonths","firstDateOfFirstWeek","monthDates","nrOfDaysWithFixedWeeks","dayPickerMonth","getNavMonths","startMonth","endMonth","newDate","fromYear","toYear","fromMonth","toMonth","hasYearDropdown","getNextMonth","pagedNavigation","getPreviousMonth","calendarStartMonth","getWeeks","initialWeeks","useControlledValue","controlledValue","uncontrolledValue","setValue","useCalendar","setFirstMonth","newInitialMonth","useMemo","disableNavigation","onMonthChange","isDayInCalendar","goToMonth","newMonth","FocusTargetPriority","isFocusableDay","calculateFocusTarget","getModifiers","lastFocused","focusTarget","foundFocusTargetPriority","getFocusableDate","moveBy","moveDir","refDate","focusableDate","getNextFocus","refDay","attempt","targetMonth","focusDay","useFocus","calendar","autoFocus","setLastFocused","focusedDay","setFocused","nextFocus","useMulti","initiallySelected","onSelect","internallySelected","setSelected","triggerDate","newDates","addToRange","initialRange","rangeContainsDayOfWeek","dayOfWeekArr","totalDays","totalDaysLimit","rangeOverlaps","rangeLeft","rangeRight","rangeContainsModifiers","functionMatchers","useRange","excludeDisabled","newRange","useSingle","compareDate","useSelection","single","multi","toTimeZone","toZoneNoon","noonSafe","convertMatcher","convertMatchersToTimeZone","DayPicker","initialProps","nextModifiers","labels","noonOverrides","captionLayout","navLayout","onDayBlur","onDayClick","onDayFocus","onDayKeyDown","onDayMouseEnter","onDayMouseLeave","onPrevClick","showWeekNumber","select","selectedValue","blur","isFocusTarget","moveFocus","weekdays","isInteractive","handleDayClick","handleDayFocus","handleDayBlur","handleDayKeyDown","keyMap","handleDayMouseEnter","handleDayMouseLeave","handleMonthChange","selectedMonth","handleYearChange","selectedYear","contextValue","monthControl","yearControl","ariaLabel","Calendar","DateInput","setOpen","selectedDate","Checkbox","indeterminate","defaultId","setIsOpen","opt","ThemeContext","useTheme","SunIcon","MoonIcon","ThemeToggler","themeMode","toggleTheme","isDark","ArrowLeftIcon","Header","navItems","onBack","rightContent","logoName","logoHref","customLogo","isWebsite","isApp","headerClasses","TabBar","onTabChange","tabClasses","Breadcrumbs","isLast","Label","labelClasses","ProductCard","price","discountPrice","imageUrl","isOutOfStock","onAddToCart","hasDiscount","handleCartClick","QuantityStepper","handleDecrement","handleIncrement","PropertySelector","CartItem","properties","quantity","onQuantityChange","onRemove","p","PriceSummary","subtotal","shippingFee","discount","onCheckout","isLoading","total","CheckoutStepper","steps","currentStep","AddressForm","PaymentMethod","OrderStatusTimeline","useDisclosure","initialState","close","mergeTokenSchema","merged","convertToVars","vars","kebabKey","currentKey","JpjoyThemeProvider","tokens","cssVariables","jpjoyTokens","darkThemeSchema","themeOptions","JpjoyTheme","initialTheme","setThemeModeState","setThemeMode","prevMode","themeContextValue","themeOverrides","selectedTheme"],"mappings":"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","x_google_ignoreList":[0,1,15,16,17,18,19,20,21,22,26,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191]}